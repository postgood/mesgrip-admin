var t=Object.defineProperty,e=(e,n,a)=>(((e,n,a)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a})(e,"symbol"!=typeof n?n+"":n,a),a);import{U as n,A as a}from"./AjaxCall-C-4S7g8x.js";import"./crypto-js-kLIhi_3x.js";import{$ as l}from"./jquery-Dvpmrn5Q.js";import"./sweetalert2-Dkd8NR4e.js";
/* @license 
 * jQuery.print, version 1.6.2
 * Licence: CC-By (http://creativecommons.org/licenses/by/3.0/)
 *--------------------------------------------------------------------------*/!function(t){function e(e,n,a){var l,o,i,s,r,c=t(e),d=c.clone(n,a),p=c.find("textarea").add(c.filter("textarea")),u=d.find("textarea").add(d.filter("textarea")),m=c.find("select").add(c.filter("select")),f=d.find("select").add(d.filter("select")),h=c.find("canvas").add(c.filter("canvas")),g=d.find("canvas").add(d.filter("canvas"));for(l=0,o=p.length;l<o;++l)t(u[l]).val(t(p[l]).val());for(l=0,o=m.length;l<o;++l)for(i=0,s=m[l].options.length;i<s;++i)!0===m[l].options[i].selected&&(f[l].options[i].selected=!0);for(l=0,o=h.length;l<o;++l)(r=h[l].getContext("2d"))&&(g[l].getContext("2d").drawImage(h[l],0,0),t(g[l]).attr("data-jquery-print",r.canvas.toDataURL()));return d}function n(n){var a=t("");try{a=e(n)}catch(l){a=t("<span />").html(n)}return a}function a(e,n,a){var l=t.Deferred();try{e=e.contentWindow||e.contentDocument||e;try{e.resizeTo(window.innerWidth,window.innerHeight)}catch(u){console.warn(u)}var o=e.document||e.contentDocument||e;a.doctype&&o.write(a.doctype),o.write(n);try{for(var i=o.querySelectorAll("canvas"),s=0;s<i.length;s++){var r=i[s].getContext("2d"),c=new Image;c.onload=function(){r.drawImage(c,0,0)},c.src=i[s].getAttribute("data-jquery-print")}}catch(u){console.warn(u)}o.close();var d=!1,p=function(){if(!d){e.focus();try{e.document.execCommand("print",!1,null)||e.print(),t("body").focus()}catch(n){e.print()}e.close(),d=!0,l.resolve()}};t(e).on("load",p),setTimeout(p,a.timeout)}catch(u){l.reject(u)}return l}function l(t,e){return a(window.open(),t,e).always((function(){try{e.deferred.resolve()}catch(t){console.warn("Error notifying deferred",t)}}))}function o(t){return!!("object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName)}t.print=t.fn.print=function(){var i,s,r=this;r instanceof t&&(r=r.get(0)),o(r)?(s=t(r),arguments.length>0&&(i=arguments[0])):arguments.length>0?o((s=t(arguments[0]))[0])?arguments.length>1&&(i=arguments[1]):(i=arguments[0],s=t("html")):s=t("html");var c={globalStyles:!0,mediaPrint:!1,stylesheet:null,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,manuallyCopyFormValues:!0,deferred:t.Deferred(),timeout:750,title:null,doctype:"<!doctype html>"};i=t.extend({},c,i||{});var d=t("");if(i.globalStyles?d=t("style, link, meta, base, title"):i.mediaPrint&&(d=t("link[media=print]")),i.stylesheet){(t.isArray?t.isArray:Array.isArray)(i.stylesheet)||(i.stylesheet=[i.stylesheet]);for(var p=0;p<i.stylesheet.length;p++)d=t.merge(d,t('<link rel="stylesheet" href="'+i.stylesheet[p]+'">'))}var u=e(s,!0,!0);if((u=t("<span/>").append(u)).find(i.noPrintSelector).remove(),u.append(e(d)),i.title){var m=t("title",u);0===m.length&&(m=t("<title />"),u.append(m)),m.text(i.title)}u.append(n(i.append)),u.prepend(n(i.prepend)),i.manuallyCopyFormValues&&(u.find("input").each((function(){var e=t(this);e.is("[type='radio']")||e.is("[type='checkbox']")?e.prop("checked")&&e.attr("checked","checked"):e.attr("value",e.val())})),u.find("select").each((function(){t(this).find(":selected").attr("selected","selected")})),u.find("textarea").each((function(){var e=t(this);e.text(e.val())})));var f=u.html();try{i.deferred.notify("generated_markup",f,u)}catch(h){console.warn("Error notifying deferred",h)}if(u.remove(),i.iframe)try{!function(e,n){var o=t(n.iframe+""),i=o.length;0===i&&(o=t('<iframe height="0" width="0" border="0" wmode="Opaque"/>').prependTo("body").css({position:"absolute",top:-999,left:-999})),a(o.get(0),e,n).done((function(){setTimeout((function(){0===i&&o.remove()}),1e3)})).fail((function(t){console.error("Failed to print from iframe",t),l(e,n)})).always((function(){try{n.deferred.resolve()}catch(h){console.warn("Error notifying deferred",h)}}))}(f,i)}catch(g){console.error("Failed to print from iframe",g.stack,g.message),l(f,i)}else l(f,i);return this}}(jQuery);let o=class{constructor(t,o,i,s){e(this,"init",((t,e)=>{const n=this;n._const=t,Object.freeze(n._const),n._data=e})),e(this,"printme",(()=>{})),e(this,"customerView",(t=>{const e=this;let n={ctl:"customer",cmd:"load",cuSeq:t.cuSeq};new a(e._const,n,{wapi:e._options.wapi,spinner:!0}).ajaxformdata((function(t){0==t.code?e.layerCustomerView((function(n){e._root.openLayer(n,e.layerCustomerViewEvent,t.data)})):alert(t.message)}))})),e(this,"orderView",(t=>{const e=this;let n={ctl:"order",cmd:"load",oSeq:t.oSeq};new a(e._const,n,{wapi:e._options.wapi,spinner:!0}).ajaxformdata((function(t){0==t.code?e.layerOrderView((function(n){e._root.openLayer(n,e.layerOrderViewEvent,t.data)})):alert(t.message)}))})),e(this,"order",{}),e(this,"layerOrderView",(t=>{t('<div class="mw_defalut" style="width:700px;height:495px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title">수주 조회</span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t<div style="overflow-y:auto;padding:2px;">\n\n\t\t\t\t\t\t<div class="searchWrap" style="padding-bottom:10px;">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable mb10 orderMaster">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="70px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="70px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">업&nbsp;&nbsp;체&nbsp;&nbsp;명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuNm"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac actionArea">승인일시</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oApprovalDate"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">파일이름</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3"><span  class="oFileNm"></span><i class="fa-solid fa-download cursorPointer fileDown" style="margin-left:15px;margin-right:5px;display:none;" title="파일 받기"></i><span  class="addFileName fileDown cursorPointer"></span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">용지규격</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oPaperSize"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">담&nbsp;&nbsp;당&nbsp;&nbsp;자</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oInchargeNm"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">수&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;량</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oCnt"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">연&nbsp;&nbsp;락&nbsp;&nbsp;처</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oInchargeTel"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">비&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;고</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3"><pre  class="oMemo"></pre></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">수정공지</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3"><pre  class="oMemo"></pre></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable tr_nohover mb10">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="4%">\x3c!-- 입고 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="25%">\x3c!-- 컬럼 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="20%">\x3c!-- 내용 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="2%">\n\t\t\t\t\t\t\t\t\t<col width="4%">\x3c!-- 입고 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="25%">\x3c!-- 컬럼 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="20%">\x3c!-- 내용 --\x3e\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th rowspan="3" class="ac">입<br><br>고</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="" class="" style="padding: 0px 5px;line-height: 1.1;"><span class="istInNm"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td colspan="" class="ac" style="padding: 0px 5px;line-height: 1.1;"><span class="istInHopeDt"></span><span class="istInMemo"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td rowspan="3" class="" style="background: #ecf5f9;border:0px;"></td>\n\t\t\t\t\t\t\t\t\t\t<th rowspan="3" class="ac">출<br><br>고</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="" class="" style="padding: 0px 5px;line-height: 1.1;"><span class="istOutNm"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td colspan="" class="ac" style="padding: 0px 5px;line-height: 1.1;"><span class="istOutHopeDt"></span><span class="istOutMemo"></span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2"><span class="isInAddr"></span><span class="isInAddrDetail"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2"><span class="isOutAddr"></span><span class="isOutAddrDetail"></span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2"><span class="isInInchargeNm" style="margin-right:10px;"></span><span class="isInInchargeTel"></td>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2"><span class="isOutInchargeNm" style="margin-right:10px;"></span><span class="isOutInchargeTel"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable tablScrollDisplay dataHeadTable scrollTbThead" style="border-top: 1px solid #9ac7e1 !important;">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="70px">\n\t\t\t\t\t\t\t\t\t<col width="90px">\n\t\t\t\t\t\t\t\t\t<col width="50px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#9dc8e5; color:#fff;border-bottom: 1px solid #9ac7e1 !important;border-left: 1px solid #9dc8e5 !important;">공정명</th>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#9dc8e5;color:#fff;border-bottom: 1px solid #9ac7e1 !important;">작업명</th>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#9dc8e5;color:#fff;border-bottom: 1px solid #9ac7e1 !important;">면</th>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#9dc8e5;color:#fff;border-bottom: 1px solid #9ac7e1 !important;">세부사항</th>\n\t\t\t\t\t\t\t\t\t\t<th class="ac last" style="background:#9dc8e5;color:#fff;border-bottom: 1px solid #9ac7e1 !important;;border-right: 1px solid #9dc8e5 !important;">전달사항</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody></tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<div class="overflowYListdiv overflowFixWrap" id="" style="height:210px;overflow: overlay;">\n\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="orderWorkTable commonPopTable dataListTable" style="border-top: 0px !important;margin-top:-1px;">\n\t\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t<col width="70px">\n\t\t\t\t\t\t\t\t\t\t<col width="90px">\n\t\t\t\t\t\t\t\t\t\t<col width="50px">\n\t\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t<tbody></tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"layerOrderViewEvent",((t,e)=>{const n=this,a=l(`#${t}`);if(null!=e.orderNotice&&e.orderNotice.length>0&&(e.orderNotice=e.orderNotice[0].onContent),n._const.__USER_LEVEL>=4?l(".title",a).text("수주 정보"):l(".title",a).text("주문상세내역"),n._const.__USER_LEVEL>3&&e.orderNotice.length>0){let t=l('<tr><th class="ac">수정공지</th><td colspan="3"><pre class="orderNotice" style="color:#ea467f !important;font-weight: bold;">'+e.orderNotice[0].onContent+"</pre></td></tr>");l(".orderMaster tbody",a).append(t)}if(this.classNameInput(a,e),l(".oInchargeTel",a).text(n._utils.formatPhoneNumber(e.oInchargeTel)),l(".isInInchargeTel",a).text(n._utils.formatPhoneNumber(e.isInInchargeTel)),l(".isOutInchargeTel",a).text(n._utils.formatPhoneNumber(e.isOutInchargeTel)),l(".istInHopeDt",a).text(n._utils.checkEmptyNull(e.istInHopeDt)?"":n._utils.dateformatStringToDate(e.istInHopeDt).substring(5)),l(".istOutHopeDt",a).text(n._utils.checkEmptyNull(e.istOutHopeDt)?"":n._utils.dateformatStringToDate(e.istOutHopeDt).substring(5)),"A"==e.istInCd){let t="직입";n._utils.checkEmptyNull(e.istInNm)||(t+="("+e.istInNm+")"),l(".istInNm",a).text(t)}else l(".istInNm",a).text(e.istInNm);if("A"==e.istOutCd){let t="직출";n._utils.checkEmptyNull(e.istOutNm)||(t+="("+e.istOutNm+")"),l(".istOutNm",a).text(t)}else l(".istOutNm",a).text(e.istOutNm);n._utils.checkEmptyNull(e.istInMemo)||l(".istInMemo",a).text("("+e.istInMemo+")"),n._utils.checkEmptyNull(e.istOutMemo)||l(".istOutMemo",a).text("("+e.istOutMemo+")");let o=e.workInfo,i=0;for(;i<o.length;i++)s(a,o[i]);for(;i<7;i++)s(a);function s(t,e){let a=l(".orderWorkTable tbody",t),o=l("<tr/>");if(null!=e){o.data("ROW",e),o.append(l('<td class="ac"></td>').text(e.spNm)),o.append(l('<td class="al"></td>').text(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")"))),o.append(l('<td class="ac">'+e.wFrontYnNm+"</td>"));let t="";for(let n=0;n<e.optionInfo.length;n++){let a=e.optionInfo[n];"Y"==a.cwoOrderYn&&null!=a.woInput&&(t+=(""!=t?" ":"")+'<span class="workOptionListOne vm"><sapn class="workOptionInfo">'+a.cwoNm+" : <strong>"+a.woInput+"</strong></span></span>")}o.append(l('<td class="al workOptionListDiv"></td>').append(l(t))),o.append(l('<td class="al" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></td>').text(e.wMemo))}else o.append(l('<td class="ac"></td>')),o.append(l('<td class="al"></td>')),o.append(l('<td class="ac"></td>')),o.append(l('<td class="al workOptionListDiv"></td>')),o.append(l('<td class="al" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></td>'));a.append(o)}0==e.fileInfo.length?l(".fileDown",a).remove():(l(".addfileName",a).text(e.fileInfo[0].realName),l(".fileDown",a).show(),l(".fileDown",a).on("click",(function(){n._root.fileDownload(e.fileInfo[0])}))),n._utils.tableScrollCheck()})),e(this,"classNameInput",((t,e)=>{let n=this,a=Object.keys(e);for(let o=0;o<a.length;o++){let i=a[o],s=e[a[o]];null!=s&&("Dt"==i.substring(i.length-2)?s=n._utils.dateformatStringToDate(s):("Cnt"==i.substring(i.length-3)||"Amount"==i.substring(i.length-6))&&(s=n._utils.numberWithCommas(s))),l("."+a[o],t).text(s)}})),e(this,"layerCustomerView",(t=>{t('<div class="mw_defalut" style="width:620px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title">고객사 정보</span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t<div style="height:225px;overflow-y:auto;padding:2px;">\n\t\t\n\t\t\t\t\t\t<div class="searchWrap" style="padding-bottom:10px;">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="80px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="80px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="border-bottom:1px solid #aec8d7;">사업자번호</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuBizNo" style="padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="border-bottom:1px solid #aec8d7;">종사업장번호</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuBizNoNum" style="padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="border-bottom:1px solid #aec8d7;">회&nbsp;&nbsp;사&nbsp;&nbsp;명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuNm" style="padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">대&nbsp;&nbsp;표&nbsp;&nbsp;자</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuOwnerNm" style="padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="border-bottom:1px solid #aec8d7;">기업형태</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuTypeNm" style="padding-left:10px;" colspan="3"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="border-bottom:1px solid #aec8d7;">전화번호</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuTel" style="padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">F&nbsp;&nbsp;&nbsp;A&nbsp;&nbsp;&nbsp;X</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuFax" style="padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac" style="border-bottom:1px solid #aec8d7;">주&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;소</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3" style="padding-left:10px;"><span class="cuZipcode"></span> &nbsp;&nbsp;<span class="cuAddr"></span>&nbsp;<span class="cuAddrDetail"></span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">비&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;고</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3" style="padding-left:10px;"><pre class="cuMemo"></pre></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"layerCustomerViewEvent",((t,e)=>{const n=this,a=l(`#${t}`);null!=e.orderNotice&&e.orderNotice.length>0&&(e.orderNotice=e.orderNotice[0].onContent),l(".title",a).text(e.cuNm),this.classNameInput(a,e),l(".cuTel",a).text(n._utils.formatPhoneNumber(e.cuTel)),l(".cuFax",a).text(n._utils.formatPhoneNumber(e.cuFax)),l(".cuBizNo",a).text(n._utils.convertBizNo(e.cuBizNo))})),e(this,"storageMapView",(t=>{const e=this;if(null==t.inout){let n={ctl:"customer",cmd:"storageLoad",isSeq:t.isSeq};new a(e._const,n,{wapi:e._options.wapi,spinner:!0}).ajaxformdata((function(t){0==t.code?e.layerStorageMapView((function(n){e._root.openLayer(n,e.layerStorageMapViewEvent,t.data)})):alert(t.message)}))}else e.layerStorageMapView((function(n){e._root.openLayer(n,e.layerStorageMapViewEvent,t)}))})),e(this,"layerStorageMapView",(t=>{t('<div class="mw_defalut" style="width:580px;height:680px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title"></span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\n\t\t\t\t\t<div class="bottonWrap">\n\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t<div class="al"></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t<div class="ar"><a href="#" class="btnSearch btnPrint" title="인쇄하기"><i class="fas fa-print cursorPointer" style="margin:auto auto";></i>&nbsp;&nbsp;출력</a></div>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t<div style="overflow-y:auto;padding:2px;">\n\t\t\t\t\t\t<div class="searchWrap kakaoMap" style="width:100%; height:500px; border:3px solid #fff;">\n\t\t\t\t\t\t\t<div class="custom_zoomcontrol radius_border"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="searchWrap">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="60px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="60px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">장소명 : </th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3" class="isNm" style="color:#555;font-size:15px;font-weight: 500;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">주&nbsp;&nbsp;&nbsp;&nbsp;소 : </th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="3" class="isAddress" style="color:#555;font-size:15px;font-weight: 500;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">담당자 : </th>\n\t\t\t\t\t\t\t\t\t\t<td class="isChargeNm" style="color:#555;font-size:15px;font-weight: 500;"></td>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">전화번호 : </th>\n\t\t\t\t\t\t\t\t\t\t<td class="isChargeTel" style="color:#555;font-size:15px;font-weight: 500;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"layerStorageMapViewEvent",((t,e)=>{let n=this,a=l("#"+t),o=l(".kakaoMap",a)[0];l(".title",a).text(e.isNm);var i={center:new kakao.maps.LatLng(e.gpsLatitude,e.gpsLongitude),level:3};n._utils.classNameInput(a,e),null!=e.inout&&(l(".isAddress",a).text(n._utils.ifnull(e[e.inout+"Addr"])+" "+n._utils.ifnull(e[e.inout+"AddrDetail"])),l(".isChargeNm",a).text(n._utils.ifnull(e[e.inout+"InchargeNm"])),l(".isChargeTel",a).text(n._utils.formatPhoneNumber(n._utils.ifnull(e[e.inout+"InchargeTel"]))));let s=l(".isChargeTel",a).text();""!=s&&l(".isChargeTel",a).text(n._utils.formatPhoneNumber(s));var r=new kakao.maps.Map(o,i);let c={latlng:new kakao.maps.LatLng(e.gpsLatitude,e.gpsLongitude),content:'<div style="margin-top: -65px;background:#80dcf1;border: 1px solid #babbbb; padding: 2px;font-size:12px;font-weight: bold;"><span class="title">'+e.isNm+"</span></div>"};var d=new kakao.maps.Marker({map:r,position:c.latlng,title:c.title});new kakao.maps.CustomOverlay({map:r,position:c.latlng,content:c.content,yAnchor:1}),d.setMap(r),l(".address",a).val(e.isAddr+" "+e.AddrDetail),l(".btnPrint",a).on("click",(function(){let t=l(this).closest(".mw_defalut").find(".mw_contents");parent.$.print(t,{addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print,.btnPrint",iframe:!0,append:null,prepend:null,timeout:1500})}))})),this._root=t||null,this._const=o,this._data=i||{};let r="public/ws";3==o.__USER_LEVEL?r="customer/ws":3==o.__USER_LEVEL?r="user/ws":7==o.__USER_LEVEL&&(r="admin/ws"),this._options=s||{isasync:!0,wapi:r},this._filter={},this._utils=new n}},i=class{constructor(t,n,o,i){e(this,"init",((t,e)=>{const n=this;n._const=t,Object.freeze(n._const),n._data=e})),e(this,"printme",(()=>{})),e(this,"workReportTypeB",((t,e)=>{const n=this;let o=l("#printWrap");o.empty(),o.append(l('\n\t\t<page size="A4">\n\t\t\t<div class="printA4">\n\t\t\t\t<table class="" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t<td style="width:100%;background-color:#fff;padding-top:20px;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;height:70px;">\n\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t<td class="al workTitle" style="background-color:#fff;"><strong>작업지시서</strong></td>\n\t\t\t\t\t\t\t\t\t<td class="ar reportLogo" rowspan="2" style="vertical-align: top;"></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t<td class="al orderDate" style="background-color:#fff;font-size: 20px;padding-top:20px;padding-bottom:5px;padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t<td class="" style="background:#fff;">\n\t\t\t\t\t\t\t<table class="printInfo" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="10px">\n\t\t\t\t\t\t\t\t\t<col width="180px">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\x3c!-- tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac top" style="background:#dfdfdf;height: 30px !important;">승인일자</th>\n\t\t\t\t\t\t\t\t\t\t<td class="al top last orderDate" colspan="3" style="height: 30px !important;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al noborder" rowspan="7"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al qr" rowspan="9"><div class="qrCode"></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" colspan="4" style="height:5px !important;padding:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr --\x3e\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="top" style="border-left:0px;border-top:1px solid #000;border-bottom:0px;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">거래처명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="top last cuNm" colspan="3"style="border-left:1px solid #999;border-top:1px solid #000;border-bottom:0px;border-right:0px;padding-left:10px;"> </td>\n\t\t\t\t\t\t\t\t\t\t<td class="al noborder" rowspan="7"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al qr" rowspan="7"><div class="qrCode"></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #999;background:#eee;border-bottom:0px;border-right:0px;height: 30px !important;font-weight: normal;">품&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="last oFileNm" colspan="3" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #999;border-bottom:0px;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">규&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;격</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oPaperSize" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">주문수량</th>\n\t\t\t\t\t\t\t\t\t\t<td class="last oCnt" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">비&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;고</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oMemo last" colspan="3" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;height: 30px !important;padding-left:10px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" colspan="4" style="height:5px !important;padding:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #000;border-bottom:0px;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">입&nbsp;&nbsp;고</th>\n\t\t\t\t\t\t\t\t\t\t<td style="border-left:1px solid #999;border-top:1px solid #000;border-bottom:0px;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">장소 : <span class="istInNm" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2" style="border-left:1px solid #999;border-top:1px solid #000;border-bottom:0px;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">요청일 : <span class="istInHopeDt" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">출&nbsp;&nbsp;고</th>\n\t\t\t\t\t\t\t\t\t\t<td style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">장소 : <span class="istOutNm" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">요청일 : <span class="istOutHopeDt" style="color:#000;font-size:14px;"></span></td>\n\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td style="padding-top:10px;background:#fff;">\n\t\t\t\t\t\t\t<table class="printList" style="width:100%;border-top:1px solid #000 !important;border-bottom:1px solid #000;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="40px">\x3c!-- 순서 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="70px">\x3c!-- 공정 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="50px">\x3c!-- 면 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="100px">\x3c!-- 작업명 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="auto">\x3c!-- 세부사항 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="150px">\x3c!-- 비고 --\x3e\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="background:#eee;border-bottom:1px solid #999;">순서</th>\n\t\t\t\t\t\t\t\t\t\t<th style="background:#eee;border-bottom:1px solid #999;">공정명</th>\n\t\t\t\t\t\t\t\t\t\t<th style="background:#eee;border-bottom:1px solid #999;">면</th>\n\t\t\t\t\t\t\t\t\t\t<th style="background:#eee;border-bottom:1px solid #999;">작업명</th>\n\t\t\t\t\t\t\t\t\t\t<th style="background:#eee;border-bottom:1px solid #999;">세부사항</th>\n\t\t\t\t\t\t\t\t\t\t<th style="background:#eee;border-bottom:1px solid #999;" class="last">비고</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ac first bottom"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac bottom"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac bottom"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al bottom" style="padding-left:5px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al bottom textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al last bottom textLineHeight19px"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style="background:#fff;">\n\t\t\t\t\t\t<td style="padding-top:20px;padding-bottom:13px;background-color:#fff;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;">\n\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t<col width="50px">\n\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<td class="ar" style="font-size:20px;font-weight:bold;line-height:1.2; border-right:1px solid #999;padding-right:5px;vertical-align: top;background:#fff;">공정<BR/>보기</td>\n\t\t\t\t\t\t\t\t\t<td class="al" style="padding-left:5px; background:#fff;">\n\t\t\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" class="" style="margin-top:-5px;">\n\t\t\t\t\t\t\t\t\t\t\t<tr class="processFlow">\n\t\t\t\t\t\t\t\t\t\t\t\t<td style="background:#fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="printInfo" style="width:78px;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><th class="top last">공정명</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class="top last" ㄴ>업체명</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td style="font-size:10px;padding:3px;font-stretch:extra-condensed">▶</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td><table class="printInfo" style="width:80px;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><th class="top last">공정명</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class="top last">업체명</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td style="font-size:10px;padding:3px;font-stretch:extra-condensed">▶</td>\n\t\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="printInfo" style="width:78px;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><th class="top last">공정명</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class="top last">업체명</td></tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="deliveryLine" style="background:#fff;">\n\t\t\t\t\t\t<td style="background-color:#fff;height:10px;"><hr style="border:none;border-top:2px dotted #000;color:#fff;height:1px;width:100%;">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="deliveryArea" style="background:#fff;">\n\t\t\t\t\t\t<td  style="padding-top:10px;background-color:#fff;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t\t<col width="160px">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="al" colspan="2" style="font-size:25px;font-weight:bold;">물류<span style="font-size:20px">(입고,출고)</span></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style="background:#fff;">\n\t\t\t\t\t\t<td class="deliveryArea2" style="background-color:#fff;">\n\t\t\t\t\t\t\t<table class="printInfo" style="width:100%;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="120px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="120px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="10px">\n\t\t\t\t\t\t\t\t\t<col width="150px">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\x3c!-- tr>\n\t\t\t\t\t\t\t\t\t\t<th class="top" style="background:#dfdfdf;height: 30px !important;">승인일자</th>\n\t\t\t\t\t\t\t\t\t\t<td class="top last orderDate" colspan="3"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" rowspan="9"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder qr" rowspan="5"><div class="qrCode2"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" colspan="4" style="height:5px !important;padding:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr --\x3e\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="ar" colspan="4" style="background-color:#fff;font-size:13px;font-weight:bold;padding:0px;padding-bottom:5px;height:15px;border:0px;">20 &nbsp;&nbsp;&nbsp;&nbsp; . &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .&nbsp;&nbsp;( &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )</td>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" rowspan="7"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder ar" rowspan="4"><div class="qrCode2"></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="top" style="border-left:0px;border-top:1px solid #000;border-bottom:0px;border-right:1px solid #999;background:#eee;height: 30px !important;font-weight: normal;">거래처명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="top last cuNm" colspan="3" style="border-left:1px solid #999;border-top:1px solid #000;border-bottom:0px;border-right:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #999;border-bottom:0px;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">품&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="last oFileNm" colspan="3" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:0px;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">규&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;격</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oPaperSize" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;"></td>\n\t\t\t\t\t\t\t\t\t\t<th style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">수&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;량</th>\n\t\t\t\t\t\t\t\t\t\t<td class="last oCnt" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" colspan="5" style="height:5px !important;padding:0px;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" style="height:5px !important;padding:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="top" style="border-left:0px;border-top:1px solid #000;border-bottom:0px;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">* 입 고</th>\n\t\t\t\t\t\t\t\t\t\t<td class="top" colspan="2" style="border-left:1px solid #999;border-top:1px solid #000;border-bottom:0px;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">장소 <span class="istInNm" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td class="top last" style="border-left:1px solid #999;border-top:1px solid #000;border-bottom:0px;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">전화번호 <span class="istInInchargeTel" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t\t<th class="top last" style="border-left:1px solid #000;border-top:1px solid #000;border-bottom:0px;border-right:1px solid #000;background:#eee;height: 30px !important;font-weight: normal;">납품확인</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th rowspan="2" style="border-left:0px;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;background:#eee;height: 30px !important;font-weight: normal;">* 출 고</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="2" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">장소 <span class="istOutNm" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td class="last" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:0px;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">전화번호 <span class="istOutInchargeTel" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t\t<td class="last" rowspan="2" style="border-left:1px solid #000;border-top:1px solid #999;border-bottom:1px solid #000;border-right:1px solid #000:#aaa;font-size:10px;height: 30px !important;">담당자명 <span style="float: right;">(인)</span></td>\n\t\t\t\t\t\t\t\t\t</tr>\t\t\t\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="last" colspan="3" style="border-left:1px solid #999;border-top:1px solid #999;border-bottom:1px solid #000;border-right:0px;color:#aaa;font-size:10px;height: 30px !important;">주소 <span class="istOutAddress" style="color:#000;font-size:14px;"></span></td>\n\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style="background:#fff;">\n\t\t\t\t\t\t<td style="background-color:#fff;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="400px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr style="background:#fff;">\n\t\t\t\t\t\t\t\t\t\t<td style="padding-top:5px;background:#fff;">\n\t\t\t\t\t\t\t\t\t\t\t<span class="cNm" style="font-weight:bold; font-size:10px;">sfsfsfdsfs</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="cTel" style="margin-left:5px;font-size:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="cAddress" style="margin-left:5px; font-size:10px;"></span>\n\t\t\t\t\t\t\t\t\t\t\t<span class="cHomepage" style="margin-left:5px; font-size:10px;">homepage</span>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td style="padding-top:5px;background:#fff;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t</div></page>')),o.find(".printA4");let i=o.find(".processFlow");i.empty();let s=t.cWorkReport,r={ctl:"order",cmd:"load",oSeq:t.oSeq};new a(n._const,r,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let a=t.data;if(l(".orderNum",o).text(n._root._utils.formatdate(a.creDate,"")+""+n._root._utils._zeroFill(a.oSeq,7)),n._root._utils.checkEmptyNull(a.oApprovalDate)?l(".orderDate",o).text("미승인"):l(".orderDate",o).text(a.oApprovalDate.substring(0,10)),l(".cuNm",o).text(a.cuNm),l(".oFileNm",o).text(a.oFileNm),"A"==a.istInCd){let t="직입";n._root._utils.checkEmptyNull(a.istInNm)||(t+=" ("+a.istInNm+")"),l(".istInNm",o).text(t)}else l(".istInNm",o).text(a.istInNm);if("A"==a.istOutCd){let t="직출";n._root._utils.checkEmptyNull(a.istOutNm)||(t+=" ("+a.istOutNm+")"),l(".istOutNm",o).text(t)}else l(".istOutNm",o).text(a.istOutNm);let r=n._root._utils.checkEmptyNull(a.istInHopeDt)?"":n._root._utils.dateformatStringToDate(a.istInHopeDt);n._root._utils.checkEmptyNull(a.istInMemo)||(r+="("+a.istInMemo+")");let c=n._root._utils.checkEmptyNull(a.istOutHopeDt)?"":n._root._utils.dateformatStringToDate(a.istOutHopeDt);n._root._utils.checkEmptyNull(a.istOutMemo)||(c+="("+a.istOutMemo+")"),l(".istInHopeDt",o).text(r),l(".istOutHopeDt",o).text(c);let d=n._root._utils.checkEmptyNull(a.istInInchargeTel)?"":n._root._utils.formatPhoneNumber(a.istInInchargeTel),p=n._root._utils.checkEmptyNull(a.istOutInchargeTel)?"":n._root._utils.formatPhoneNumber(a.istOutInchargeTel),u=n._root._utils.checkEmptyNull(a.isOutAddr)?"":a.isOutAddr+" "+a.isOutAddrDetail;if(l(".istInInchargeTel",o).text(d),l(".istOutInchargeTel",o).text(p),l(".istOutAddress",o).text(u),l(".oCnt",o).text(n._root._utils.numberWithCommas(a.oCnt)),l(".oPaperSize",o).text(a.oPaperSize),l(".oMemo",o).text(n._root._utils.strMaxCuttion(a.oMemo,25)),"C"==s)for(let t=0;t<9;t++)l(".printList tbody",o).prepend('<tr><td class="ac first"></th><td class="al"></td><td class="al"></td><td class="ac"></td><td class="al textLineHeight19px"></td><td class="al last"></td></tr>');let m=l(".printList tbody tr",o),f=[];for(let t=0;t<a.workInfo.length&&!(m.length<=t);t++){let e,o=l(m[t]),i=a.workInfo[t],s="";for(let t=0;t<i.optionInfo.length;t++){let e=i.optionInfo[t];"Y"==e.cwoOrderYn&&null!=e.woInput&&""!=e.woInput&&(s+='<span class="workOptionListOne vm"><strong class="workOptionInfo" style="font-size:15px;">'+e.cwoNm+' : <span style="font-weight: bold;">'+e.woInput+"</span></strong></span>")}l(o.children()[0]).text(t+1),l(o.children()[1]).text(i.spNm),l(o.children()[2]).text(i.wFrontYnNm),n._root._utils.checkEmptyNull(i.wInfo)?l(o.children()[3]).text(i.wNm):l(o.children()[3]).text(i.wNm+" ("+i.wInfo+")"),l(o.children()[4]).append(s),l(o.children()[5]).text(i.wMemo),"Y"==i.wOutsourcingYn&&(1==i.wOutsourcingInfo.length?e=i.wOutsourcingInfo[0].cuNm:i.wOutsourcingInfo.length>1&&(e=i.wOutsourcingInfo.length+"개 업체")),(0==t||f[f.length-1].spNm!=i.spNm)&&f.push({spNm:i.spNm,cuNm:e})}n._root._utils.tbodyOnlyMerge(l(".printList tbody",o),[1],"spSeq",!1);for(let t=0;t<f.length;t++){let e=f[t],n=l('<table class="printInfo" style="width:78px;"/>').append("<tbody/>");n.append(l("<tr/>").append(l('<th class="top last"  style="border-bottom:0px;background:#eee;font-weight: normal;border:1px solid #999;"/>').append(e.spNm))),n.append(l("<tr/>").append(l('<td class="last ac" style="border-top:0px;height:35px;font-size:12px; padding: 0px 2px; border:1px solid #999;" />').append(null==e.cuNm?"자사":e.cuNm))),i.append(l('<td  style="background:#fff;"/>').append(n)),i.append('<td style="font-size:10px;padding:3px;font-stretch:extra-condensed">▶</td>')}f.length<8&&i.append('<td style="background:#fff;"><table class="printInfo" style="width:78px;"><tbody><tr><th class="top last" style="border-bottom:0px;border:1px solid #999;font-weight: normal;background:#eee">출고</td></tr><tr><td class="ac last" style="height:35px;font-size:12px;border-top:0px;border:1px solid #999;">'+(n._root._utils.checkEmptyNull(a.istOutNm)?"":a.istOutNm)+"</td></tr></tbody></table></td>");let h=n._root._utils.encryptData("oSeq="+a.oSeq);h=encodeURI(h);let g=document.location.host+"/"+n._pageUrl+"?p="+h;console.log(g);const _=l(".qrCode",o)[0],w=l(".qrCode2",o)[0];new QRCode.toCanvas(g,{width:170,margin:1},(function(t,e){t&&console.error(t);let n=e.toDataURL();_.appendChild(e),l(_).empty(),l(_).append(l('<img src=""/>').attr("src",n))})),new QRCode.toCanvas(g,{width:95,margin:1},(function(t,e){t&&console.error(t);let n=e.toDataURL();w.appendChild(e),l(w).empty(),l(w).append(l('<img src=""/>').attr("src",n))})),"C"==s&&(l(".deliveryLine",o).remove(),l(".deliveryArea",o).remove(),l(".deliveryArea2",o).empty().css("border-bottom","1px solid #000")),e()}else alert(t.message)}))})),e(this,"workReportTypeA",((t,e)=>{const n=this;let o=l("#printWrap");o.empty(),o.append(l('\n\t\t<page size="A4">\n\t\t\t<div class="printA4">\n\t\t\t\t<table class="" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t<td style="width:100%;background-color:#fff;padding-bottom:5px;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;height:80px;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="75%">\n\t\t\t\t\t\t\t\t\t<col width="25%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t\t<td class="al workTitle" style="background-color:#fff;"><strong>작업지시서</strong><span class="orderYear" style="font-size:18px; font-weight: normal; margin-left:10px;"></span><strong class="orderMonthDay" style="font-size:16px;margin-left:5px;"></strong></td>\n\t\t\t\t\t\t\t\t\t\t<td class="ar reportLogo" rowspan="2" style="vertical-align: top;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t\t<td class="al processFlow" colsapn="3" style="background-color:#fff;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t<td class="" style="background:#fff;">\n\t\t\t\t\t\t\t<table class="workReportTitie" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="12%">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="18%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac top" style="height:60px;font-size: 18px; font-weight: bold;background-color:#ddd; border-top : 0px;border-bottom : 0px;border-left : 1px solid #000;border-right : 1px solid #000;">품명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="al noborder oFileNm" style="background-color:#fff;padding-left:10px;padding-right:10px;font-weight: bold;font-size: 18px;">한권으로 끝내는 해커스토익700+(LC+RC+VOCA)(2판6쇄1회차)중철(7-75)1회차)중철(7-75)</td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac noborder cuNm" style="padding-left:10px;padding-right:10px;background-color:#fff;font-size: 17px;border-left : 1px solid #000 !important;border-right : 1px solid #000 !important;;">삼보아트</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<table class="" style="width:100%;margin-top:10px;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="41%">\n\t\t\t\t\t\t\t\t\t<col width="41%">\n\t\t\t\t\t\t\t\t\t<col width="18%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="" style="height:110px;padding-left:0px;padding-right:5px;padding-bottom:5px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" class="tr_nohover " style="width:100%;border-radius: 3px;border-collapse: collapse;border-style: hidden;box-shadow: 0 0 0 1px #000;">\n\t\t\t\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="30%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="25%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="45%">\n\t\t\t\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:26px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1; border-top-left-radius: 3px;font-size:15px;font-weight: bold;">규&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;격</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oPaperSize" colspan="2" style="background: #fff;border-bottom:1px solid #c1c1c1;border-top-right-radius: 3px;font-size:15px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:52px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-bottom:1px solid #c1c1c1000;border-right:1px solid #c1c1c1;font-size:15px;font-weight: bold;">주문수량</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oCnt" colspan="2" style="background: #fff;border-bottom:1px solid #c1c1c1;font-size:18px;font-weight: bold;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:26px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-right:1px solid #c1c1c1;font-size:15px;font-weight: bold;border-bottom-left-radius: 3px;">제작담당</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oInchargeNm" style="background: #fff;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;font-size:15px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oInchargeTel" style="background: #fff;border-bottom:1px solid #c1c1c1;border-radius: 3px;font-size:15px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td style="height:110px;padding-left:5px;padding-right:1px;padding-bottom:5px;background:#fff;">\n\t\t\t\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" class="tr_nohover " style="width:100%;border-radius: 3px;border-collapse: collapse;border-style: hidden;box-shadow: 0 0 0 1px #000;">\n\t\t\t\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="20%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="20%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="60%">\n\t\t\t\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:26px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" rowspan="2" style="font-size:15px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;border-top-left-radius: 3px;">입고</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:15px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">장소</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istInNm" style="background: #fff;border-radius: 3px;border-bottom:1px solid #c1c1c1;font-size:15px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:26px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:15px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">일자</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istInHopeDt" style="font-size:15px;background: #fff;border-bottom:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:26px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" rowspan="2" style="font-size:15px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;border-bottom-left-radius: 3px;">출고</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:15px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">장소</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istInNm" style="font-size:15px;background: #fff;border-bottom:1px solid #c1c1c1;border-radius: 5px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:26px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:15px;font-weight: bold;background:#ddd;border-right:1px solid #c1c1c1;">일자</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istOutHopeDt" style="font-size:15px;background: #fff;border-radius: 3px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class="al qr" style="height:110px;background: #fff;padding-bottom:5px;"><div class="qrCode f_rt"></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="noborder" colspan="3" style="height:5px;padding-top:5px;padding-bottom:5px;padding-left:0px;padding-right:1px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t<table class="" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mt10 " style="width:100%;border-radius: 3px;border-collapse: collapse;border-style: hidden;box-shadow: 0 0 0 1px #000;">\n\t\t\t\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="7%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:40px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar" rowspan="2" style="background: #fff;font-size:13px;font-weight: bold;border-radius: 3px;">비고 |</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="al oMemo" style="border-radius: 3px;background: #fff;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\t\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="workDetailArea" style="height: 695px;padding-top:10px;background:#fff;vertical-align: top;">\n\t\t\t\t\t\t\t<table class="workTableTypeA mb10" style="width:100%;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="12%">\x3c!-- 공정 및 작업 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="5%">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr class="workInfo" style="height:26px;">\n\t\t\t\t\t\t\t\t\t\t<th class="ac spNm" style="background:#000;color:#fff;font-size:15px;font-weight:bold;border-top:1px solid #c1c1c1;">인쇄</th>\n\t\t\t\t\t\t\t\t\t\t<th class="al wOutsourcingNm" colspan="2" style="font-size:14px;font-weight:bold;padding-left:5px;background:#ddd;border-top:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">외주사명</th>\n\t\t\t\t\t\t\t\t\t\t<th class="al last" colspan="2" style="font-size:13px;font-weight:bold;background:#eee;border-top:1px solid #c1c1c1;border-right:1px solid #c1c1c1;padding-left:10px;"> ※ <span class="wMemo">전달사항</sapn></th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr class="workDetail" style="height:26px;">\n\t\t\t\t\t\t\t\t\t\t<td class="ac wNm rowspan" rowspan="1" style="font-size:14px;background:#fff;border-top:1px solid #c1c1c1;"></th>\n\t\t\t\t\t\t\t\t\t\t<td class="ac wFrontYnNm rowspan" rowspan="1" style="font-size:14px;font-weight:bold;background:#fff;border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al option" style="background:#fff;border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al option" style="background:#fff;border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al option" style="background:#fff;border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="deliveryLine" style="background:#fff;">\n\t\t\t\t\t\t<td style="background-color:#fff;height:5px;padding-bottom:5px;"><hr style="border:none;border-top:2px dotted #ccc;color:#fff;height:1px;width:100%;">\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style="background:#fff;">\n\t\t\t\t\t\t<td class="deliveryArea" style="padding-top:0px;background-color:#fff;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;margin-bottom:5px;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="7%">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="20%">\n\t\t\t\t\t\t\t\t\t<col width="18%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr style="height:40px;">\n\t\t\t\t\t\t\t\t\t\t<th class="ac top" style="background:#000;color:#fff;font-size:16px;font-weight:bold;">품명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="al oFileNm" style="background: #fff;padding-left:10px;font-size:15px;font-weight:bold;">한권으로 끝내는 해커스토익700+(LC+RC+VOCA)(2판6쇄1회차)중철(7-75)1회차)중철(7-75)</td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac cuNm" style="background: #fff;border-left:1px solid #000;border-right:1px solid #000;font-size:15px;font-weight:bold;">삼보아트</td>\n\t\t\t\t\t\t\t\t\t\t<td class="ac " style="background: #fff;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t<table class="" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mt10 ">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="41%">\n\t\t\t\t\t\t\t\t\t<col width="41%">\n\t\t\t\t\t\t\t\t\t<col width="18%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="" style="padding-left:0px;padding-right:5px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t<table class="" cellpadding="0" cellspacing="0" class="noBdrTb tr_nohover mt10 " style="width:100%;border-radius: 3px;border-collapse: collapse;border-style: hidden;box-shadow: 0 0 0 1px #000;">\n\t\t\t\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="30%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="25%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="45%">\n\t\t\t\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1; border-top-left-radius: 3px;font-size:14px;font-weight: bold;">거래처명</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac cuNm" colspan="2" style="background: #fff;border-bottom:1px solid #c1c1c1;border-top-right-radius: 3px;font-size:14px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;font-size:14px;font-weight: bold;">규&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;격</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oPaperSize" colspan="2" style="background: #fff;border-bottom:1px solid #c1c1c1;font-size:14px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;font-size:14px;font-weight: bold;">주문수량</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oCnt" colspan="2" style="background: #fff;border-bottom:1px solid #c1c1c1;font-size:14px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="background:#ddd;border-right:1px solid #c1c1c1;font-size:14px;font-weight: bold;border-bottom-left-radius: 3px;">제작담당</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oInchargeNm" style="background: #fff;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;font-size:14px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac oInchargeTel" style="background: #fff;border-bottom:1px solid #c1c1c1;border-radius: 3px;font-size:14px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td style="padding:5px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t<table class="" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10" style="width:100%;border-radius: 3px;border-collapse: collapse;border-style: hidden;box-shadow: 0 0 0 1px #000;">\n\t\t\t\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="20%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="20%">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="60%">\n\t\t\t\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" rowspan="2" style="font-size:14px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;border-top-left-radius: 3px;">입고</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:14px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">장소</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istInNm" style="font-size:14px;background: #fff;border-radius: 3px;border-bottom:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:14px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">일자</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istInHopeDt" style="font-size:14px;background: #fff;border-bottom:1px solid #c1c1c1;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" rowspan="2" style="font-size:14px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;border-bottom-left-radius: 3px;">출고</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:14px;font-weight: bold;background:#ddd;border-bottom:1px solid #c1c1c1;border-right:1px solid #c1c1c1;">장소</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istOutNm" style="font-size:14px;background: #fff;border-bottom:1px solid #c1c1c1;border-radius: 5px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr style="height:21px;background: #fff;">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th class="ac" style="font-size:14px;font-weight: bold;background:#ddd;border-right:1px solid #c1c1c1;">일자</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ac istOutHopeDt" style="font-size:14px;background: #fff;border-radius: 3px;"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td class="ar qr" style="background: #fff;"><div class="qrCode2 f_rt"></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t</div></page>')),o.find(".printA4"),o.find(".processFlow").empty();let i=t.cWorkReport,s={ctl:"order",cmd:"load",oSeq:t.oSeq};new a(n._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let a=t.data;if(l(".orderNum",o).text(n._root._utils.formatdate(a.creDate,"")+""+n._root._utils._zeroFill(a.oSeq,7)),n._root._utils.checkEmptyNull(a.oApprovalDate)?l(".orderYear",o).text("미승인"):(l(".orderYear",o).text(a.oApprovalDate.substring(0,4)),l(".orderMonthDay",o).text(a.oApprovalDate.substring(5,10).replace("-","."))),l(".cuNm",o).text(a.cuNm),l(".oFileNm",o).text(a.oFileNm),"A"==a.istInCd){let t="직입";n._root._utils.checkEmptyNull(a.istInNm)||(t+=" ("+a.istInNm+")"),l(".istInNm",o).text(t)}else l(".istInNm",o).text(a.istInNm);if("A"==a.istOutCd){let t="직출";n._root._utils.checkEmptyNull(a.istOutNm)||(t+=" ("+a.istOutNm+")"),l(".istOutNm",o).text(t)}else l(".istOutNm",o).text(a.istOutNm);let s=n._root._utils.checkEmptyNull(a.istInHopeDt)?"":n._root._utils.dateformatStringToDate(a.istInHopeDt);n._root._utils.checkEmptyNull(a.istInMemo)||(s+="("+a.istInMemo+")");let r=n._root._utils.checkEmptyNull(a.istOutHopeDt)?"":n._root._utils.dateformatStringToDate(a.istOutHopeDt);n._root._utils.checkEmptyNull(a.istOutMemo)||(r+="("+a.istOutMemo+")"),l(".istInHopeDt",o).text(s),l(".istOutHopeDt",o).text(r);let c=n._root._utils.checkEmptyNull(a.istInInchargeTel)?"":n._root._utils.formatPhoneNumber(a.istInInchargeTel),d=n._root._utils.checkEmptyNull(a.istOutInchargeTel)?"":n._root._utils.formatPhoneNumber(a.istOutInchargeTel),p=n._root._utils.checkEmptyNull(a.isOutAddr)?"":a.isOutAddr+" "+a.isOutAddrDetail;l(".istInInchargeTel",o).text(c),l(".istOutInchargeTel",o).text(d),l(".istOutAddress",o).text(p),l(".oCnt",o).text(n._root._utils.numberWithCommas(a.oCnt)),l(".oPaperSize",o).text(a.oPaperSize),l(".oMemo",o).text(n._root._utils.strMaxCuttion(a.oMemo,25));let u=l(".workDetailArea",o),m=l(".workTableTypeA",u).clone(),f=l(".workInfo",m).clone(),h=l(".workDetail",m).clone();l("tbody",m).empty(),l(".workTableTypeA",u).remove();let g,_=[],w={};for(let t=0;t<a.workInfo.length;t++){let e,o=a.workInfo[t];if(-1==_.indexOf(o.spNm)&&_.push(o.spNm),null==w.wSeq||w.spSeq!=o.spSeq||w.wOutsourcingYn!=o.wOutsourcingYn){e=m.clone();let t=f.clone();n._root._utils.classNameInput(t,o);let a="자사";"Y"==o.wOutsourcingYn&&(1==o.wOutsourcingInfo.length?a=o.wOutsourcingInfo[0].cuNm:2==o.wOutsourcingInfo.length?a=o.wOutsourcingInfo[0].cuNm+", "+o.wOutsourcingInfo[1].cuNm:o.wOutsourcingInfo.length>2&&(a=o.wOutsourcingInfo[0].cuNm+" 외 "+o.wOutsourcingInfo.length+"개 업체")),l(".wOutsourcingNm",t).text(a),l("tbody",e).append(t)}else if("Y"==o.wOutsourcingYn)if(console.log(o.wOutsourcingInfo),console.log(w.wOutsourcingInfo),o.wOutsourcingInfo.length!=w.wOutsourcingInfo.length||o.wOutsourcingInfo[0].wCuSeq!=w.wOutsourcingInfo[0].wCuSeq){e=m.clone();let t=f.clone();n._root._utils.classNameInput(t,o);let a="자사";"Y"==o.wOutsourcingYn&&(1==o.wOutsourcingInfo.length?a=o.wOutsourcingInfo[0].cuNm:2==o.wOutsourcingInfo.length?a=o.wOutsourcingInfo[0].cuNm+", "+o.wOutsourcingInfo[1].cuNm:o.wOutsourcingInfo.length>2&&(a=o.wOutsourcingInfo[0].cuNm+" 외 "+o.wOutsourcingInfo.length+"개 업체")),l(".wOutsourcingNm",t).text(a),l("tbody",e).append(t)}else e=g;else e=g;let i=o.optionInfo,s=[];for(let t=0;t<i.length;t++)"Y"!=i[t].cwoOrderYn||n._root._utils.checkEmptyNull(i[t].woInput)||s.push(i[t]);let r=h.clone();n._root._utils.classNameInput(r,o),n._root._utils.checkEmptyNull(o.wInfo)||l(".wNm",r).text(o.wNm+" ("+o.wInfo+")");let c=0,d=[],p=l('<tr style="height:26px;"/>');for(c=0;c<s.length;c++){let t='<span class="workOptionListOne vm"><strong class="workOptionInfo" style="font-size:12px;">'+s[c].cwoNm+' : <span style="font-weight: bold;font-size:14px;">'+s[c].woInput+"</span></strong></span>";if(c<=2)l(".option:eq("+c+")",r).append(t);else{c%3==0&&(p=l('<tr style="height:26px;"/>'));let e=l('<td class="al" style="border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;background:#fff;"></td>');if(e.append(t),p.append(e),c%3==2||c==s.length-1){if(c==s.length-1&&c%3<2)for(let t=(c+1)%3;t<3;t++){let t=l('<td class="al" style="border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;background:#fff;"></td>');p.append(t)}l("td",p).length>0&&d.push(p)}}}let y=0==s.length?1:Math.ceil(s.length/3);l(".rowspan",r).attr("rowspan",y),l("tbody",e).append(r);for(let t=0;t<d.length;t++)l("tbody",e).append(p[t]);u.append(e),g=e,w=o,t==a.workInfo.length-1&&(p=l("tbody tr:last",e),l("td",p).css("border-bottom","1px solid #c1c1c1"))}let y=l(".processFlow",o);for(let t=0;t<_.length;t++){let e=l('<div style="margin-right:5px;display: inline-block;height: 25px;line-height: 22px; background: #7b7b7b;padding: 0 15px;text-align: center;font-size: 13px;font-weight: normal;color: #fff;\tborder: 1px solid #7b7b7b;border-radius: 3px;vertical-align: middle;" >'+_[t]+"</div>");y.append(e)}let b=n._root._utils.encryptData("oSeq="+a.oSeq);console.log(b),b=encodeURI(b);let $=document.location.host+"/"+n._pageUrl+"?p="+b;console.log($);const v=l(".qrCode",o)[0],x=l(".qrCode2",o)[0];new QRCode.toCanvas($,{width:105,margin:0},(function(t,e){t&&console.error(t);let n=e.toDataURL();v.appendChild(e),l(v).empty(),l(v).append(l('<img src=""/>').attr("src",n))})),new QRCode.toCanvas($,{width:94,margin:1},(function(t,e){t&&console.error(t);let n=e.toDataURL();x.appendChild(e),l(x).empty(),l(x).append(l('<img src=""/>').attr("src",n))})),"A"==i?(l(".deliveryLine",o).remove(),l(".deliveryArea",o).empty().css("border-bottom","1px solid #000"),l(".workDetailArea",o).css("height","825px")):l(".workDetailArea",o).css("height","655px"),e()}else alert(t.message)}))})),e(this,"transReport",((t,e)=>{let n=l("#printWrap");n.empty(),n.append(l('\n\t\t<page size="A4">\n\t\t\t<div class="printA4">\n\t\t\t\t<table class="" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t<td style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t<table class="" style="width:100%;height:100px;">\n\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t<td class="al workTitle" style="background-color:#fff;"><strong>거래명세표</strong></td>\n\t\t\t\t\t\t\t\t\t<td class="ar reportLogo" rowspan="2" style="vertical-align: top;"></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t<td class="al reportTitle" style="background-color:#fff;">업체명 귀하</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr style="width:100%;background-color:#fff;">\n\t\t\t\t\t\t\t\t\t<td class="al reportTitle" style="background-color:#fff;">업체명 귀하</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="">\n\t\t\t\t\t\t<td class="" style="background:#fff;">\n\t\t\t\t\t\t\t<table class="printInfo" style="width:100%;" cellpadding="0" cellspacing="0" border="0" class="noBdrTb tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="10px">\n\t\t\t\t\t\t\t\t\t<col width="180px">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac top">주문일자</th>\n\t\t\t\t\t\t\t\t\t\t<td class="al top last orderDate" colspan="3"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al noborder" rowspan="7"></td>\n\t\t\t\t\t\t\t\t\t\t<td class="al qr" rowspan="7"><div class="qrCode"></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th>비&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;고</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oMemo last" colspan="3"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td style="padding-top:10px;background:#fff;">\n\t\t\t\t\t\t\t<table class="printList" style="width:100%;">\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="60px">\x3c!-- 일자 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="auto">\x3c!-- 제목 파일이름 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="120px">\x3c!-- 작업명 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="50px">\x3c!-- 면 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="75px">\x3c!-- 규격 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="10px">\x3c!-- 주문수량 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="100px">\x3c!-- 완료수량 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="75px">\x3c!-- 단가 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="120px">\x3c!-- 공급가 --\x3e\n\t\t\t\t\t\t\t\t\t<col width="120px">\x3c!-- 부가세 --\x3e\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th>일자</th>\n\t\t\t\t\t\t\t\t\t\t<th>제목</th>\n\t\t\t\t\t\t\t\t\t\t<th>작업명</th>\n\t\t\t\t\t\t\t\t\t\t<th>면</th>\n\t\t\t\t\t\t\t\t\t\t<th>규격</th>\n\t\t\t\t\t\t\t\t\t\t<th>주문수량</th>\n\t\t\t\t\t\t\t\t\t\t<th>완료량</th>\n\t\t\t\t\t\t\t\t\t\t<th>단가</th>\n\t\t\t\t\t\t\t\t\t\t<th>공급가</th>\n\t\t\t\t\t\t\t\t\t\t<th>부가세</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colsapn="2" class="bankInfo"></td>\n\t\t\t\t\t\t\t\t\t\t<td colsapn="8">\n\t\t\t\t\t\t\t\t\t\t\t<table border="0" style="width:100%">\n\t\t\t\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<col width="150px">\n\t\t\t\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar">공급가 :</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar amount"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar">부가세 :</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar amount"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar">할인금액 :</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar amount"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar">당월판매액 :</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar amount"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar">당월수금액 :</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar amount"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar">현잔액 :</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="ar amount"></td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style="background:#fff;">\n\t\t\t\t\t\t<td style="background-color:#fff;height:10px;"><hr style="border:none;border-top:2px dotted #000;color:#fff;height:1px;width:100%;">\n\t\t\t\t\t\t<strong class="cNm">현아엔씨</strong> | <span class="address">서울 어쩌구 저처구 </span>   <strong>T</strong> <span class="cTel">02-2275-3758</span> <strong>F</strong> <span class="cFax">02-2275-3758</span>  <span class="cHomepage"> https://www.kprintfactory.com</span>\n\t\t\t\t\t\t</td>\n\n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t</div></page>')),n.find(".printA4");let o={ctl:"order",cmd:"transReportOrderLoad",oSeqs:t.oSeqs};new a(this._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(t.data,e()):alert(t.message)}))})),this._root=t||null,this._const=n,this._data=o||{};let s="public/ws";3==n.__USER_LEVEL?s="customer/ws":3==n.__USER_LEVEL?s="user/ws":7==n.__USER_LEVEL&&(s="admin/ws"),this._options=i||{isasync:!0,wapi:s},this._filter={},this._pageUrl="workreport"}};class s{constructor(t,l,o,i){e(this,"init",(()=>{const t=this;t._menuInfo=t._utils.parseJSONString(sessionStorage.getItem("LMKEY")),t.getTopbarInfo(),$(".topMenuSubLayer").hide(),$("a[id^=topMenu]").on("click",(function(t){var e=1*$(this).attr("id").replace("topMenu","");"none"!=$("#popMenu0"+e).css("display")?$("#popMenu0"+e).hide():$("#popMenu0"+e).show(),t.stopPropagation()})),$(".topMenuSubLayer .btnMyInfo").on("click",(function(e){$(".topMenuSubLayer").hide(),t.load({eSeq:t._const.__USER_ID},(function(e){if(0!=e.code)return alert("직원 데이터를 불러올 수 없습니다"),!1;t._employee=e.data,t.layerView((function(e){t._parent.openLayer(e,t.reloadLayer)}))})),e.stopPropagation()})),$(".topMenuSubLayer .btnLogout").on("click",(function(t){null!=sessionStorage&&(sessionStorage.removeItem("MenuInfo"),sessionStorage.removeItem("LMKEY")),$(".topMenuSubLayer").hide(),t.stopPropagation()})),$(document).on("click",(function(t){0==$(t.target).closest(".topMenuUl").length&&$(".topMenuSubLayer").hide(),t.stopPropagation()}))})),e(this,"layerView",(t=>{t('<div class="mw_defalut" style="width:450px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">내정보 수정</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="auto"></colgroup><tbody><tr><th><div class="ar"><a href="javascript:void(0);" class="btnSearch myInfoSave">수정</a></div></th></tr></tbody></table></div><div class="searchWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10"><caption></caption><colgroup><col width="50px"><col width="auto"></colgroup><tbody><tr><th class="txt_r">이&nbsp;&nbsp;&nbsp;&nbsp;름</th><td><input type="text" name="eNm" class="w100p" requiremsg="이름" autocomplete="false"></td></tr><tr><th class="txt_r">아이디</th><td><input type="text" name="eId" class="w100p readonly" placeholder="예시)kprint@kpfactory.com" readonly></td></tr><tr><th class="txt_r">비밀번호</th><td><input type="password" name="ePwd" class="w49p" autocomplete="false"> <input type="password" name="reEPwd" class="w49p" autocomplete="false"></td></tr><tr><th class="txt_r">전화번호</th><td><input type="text" name="eTel" class="w100p" requiremsg="전화번호" vtype="phone" autocomplete="false"></td></tr></tbody></table></div></div></div></div></div>')})),e(this,"reloadLayer",(t=>{const e=this;if($(`#${t} .title`).text("내정보 수정"),0===Object.keys(e._employee).length&&e._employee.constructor===Object)return alert("직원 데이터를 불러올 수 없습니다"),!1;$("input[name=eNm]",`#${t}`).val(e._employee.eNm),$("input[name=eId]",`#${t}`).val(e._employee.eId),$("input[name=eTel]",`#${t}`).val(e._employee.eTel),e._utils.focusEvent($("input[name=eTel]",`#${t}`),"tel"),setTimeout((function(){$("input[name=ePwd]",`#${t}`).val("")}),1e3),$(`#${t} .myInfoSave`).data({eSeq:e._employee.eSeq}).on("click",(function(n){let a=$(this).data(),l=$("input[name=eNm]",`#${t}`).val().trim();$("input[name=eId]",`#${t}`).val().trim();let o=$("input[name=ePwd]",`#${t}`).val().trim(),i=$("input[name=reEPwd]",`#${t}`).val().trim(),s=$("input[name=eTel]",`#${t}`).val().trim();if(!a.eSeq)return alert("직원코드가 없어 수정불가합니다"),!1;if(e._utils.checkRequired(`#${t}`)){if(o!=i)return alert("암호가 일치하지 않습니다"),!1;let t={eSeq:a.eSeq,eNm:l,ePwd:o,eTel:s};e.update(t,(function(t){0==t.code?(e.getTopbarInfo(),$("body .btnClosePopLayer").trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}})).text("수정")})),e(this,"getTopbarInfo",(()=>{const t=this;t.load({eSeq:t._const.__USER_ID},(function(e){if(0!=e.code)return alert("직원 데이터를 불러올 수 없습니다"),!1;t._employee=e.data,$("#topUserName").empty(),3==t._const.__USER_LEVEL?$("#topUserName").append('<i class="fa-solid fa-power-off"></i>&nbsp;&nbsp;<span style="font-size:11px;">'+t._const.__CU_NM+"</span>&nbsp;&nbsp;"+t._employee.eNm):$("#topUserName").append('<i class="fa-solid fa-power-off"></i>&nbsp;&nbsp;'+t._employee.eNm)}))})),e(this,"load",((t,e)=>{let n={ctl:"employee",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"employee",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._param=i||{},this._options={},this._utils=new n,this._ajax=new a,this._menuInfo=void 0}}class r{constructor(t,l,o,i){e(this,"init",(()=>{const t=this;4==t._const.__USER_LEVEL&&(t.intervalCheckId=setInterval((function(){let t=$(".notification"),e=(new Date).getTime();for(let n=0;n<t.length;n++){e-$(t[n]).data("create")>6e4&&$(t[n]).hide(500,(function(){$(t[n]).remove()}))}}),6e4))})),e(this,"addMessage",((t,e)=>{const n=this;let l=$("#notification-container");if(0==$("[idx="+e+"]",l).length){let i=$('<div class="notification cursorPointer" title="확인/닫기"/>'),s=$("<img />",{class:"notification-icon",src:"/images/bul/bul_notice.png"}),r=$("<pre />",{class:"notification-text"}).text(t);i.attr("idx",e),i.hide(),i.append(s).append(r),i.data({create:(new Date).getTime()}),l.append(i),i.show(500,(function(){console.log("aaa")})),i.on("click",(function(){$(this).attr("idx");let t={ctl:"employee",cmd:"pushReadUpdate",tSeq:e};new a(n._const,t,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){t.code})),$(this).remove()}));try{document.getElementById("notification-sound").play()}catch(o){console.log("sound Error"),console.log(o)}}})),this._const=t||{},this._data=l||{},this._param=o||{},this._options={},this._utils=new n,this._ajax=new a,this._root=i||{}}}let c=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#customerInsertDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnExcelUpload").on("click",(function(t){let e=$("template#customerExcelInsert");n._parent.openLayer(e.html(),n.excelUploadEvent),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cuSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({cuSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cuSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let a=n._code.find(".searchWrapArea"),l=n._code.find(".dataHeadTable thead"),o=n._code.find(".pageInfoTfoot"),i=n._code.find(".dataListTable tbody");a.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=a.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",a.find("input[name=orderculumn]").val(t),a.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(a),l.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(a,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let s=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(s)||o.find("select[name=rowsPerPage]").val(s),o.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),o.find("input[name=page]").val("1"),n.retrieve()})),i.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n._client={},n.load({cuSeq:t.cuSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{n._client=t.data;let e=$("template#customerInsertDiv");n._parent.openLayer(e.html(),n.reloadLayer)}}))})),i.on("click",".customerEmployee",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#customerEmployee");n._parent.openLayer(e.html(),n.employeeListEvent,t)})),n.retrieve()})),e(this,"purge",(()=>{console.log("customerController purge")})),e(this,"reload",(()=>{console.log("customerController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val(),s=l.find("select[name=searchColumn]").val(),r=l.find("input[name=searchWord]").val(),c={cuTypeCd:l.find("select[name=cuTypeCd]").val(),cuImportantYn:"N",page:a,rows:n,orderColumn:o,orderType:i,searchColumn:s,searchWord:r};t.list(c,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=null!=e.cuTypeCd?e.cuTypeCd.split(","):[],l="";for(let i=0;i<a.length;i++)"A"==a[i]?l+=", 고객사":"B"==a[i]?l+=", 외주사":"C"==a[i]&&(l+=", 자재사");l=""!=l?l.substring(1):"";let o="<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+">";o+='<td style="border:1px solid #dedede;" ><input type="checkbox" class="vm" name="cuSeq" value="'+e.cuSeq+'"></td>',o+='<td style="border:1px solid #dedede;" class="al pl5">'+n._utils.nullTostring(e.cuNm,"")+"</td>",o+='<td style="border:1px solid #dedede;" >'+n._utils.nullTostring(e.cuOwnerNm,"")+"</td>",o+='<td style="border:1px solid #dedede;" >'+n._utils.convertBizNo(n._utils.nullTostring(e.cuBizNo,"").replace(/-/g,""))+(n._utils.checkEmptyNull(e.cuBizNoNum)?"":" ("+e.cuBizNoNum+")")+"</td>",o+='<td style="border:1px solid #dedede;" >'+n._utils.formatPhoneNumber(n._utils.nullTostring(e.cuTel,"").replace(/-/g,""))+"</td>",o+='<td style="border:1px solid #dedede;" class="al">'+n._utils.nullTostring(e.cuAddr,"")+" "+n._utils.nullTostring(e.cuAddrDetail,"")+"</td>",o+='<td style="border:1px solid #dedede;" >'+l+"</td>",o+='<td style="border:1px solid #dedede;" ><i class="fa-solid fa-user-group customerEmployee cursorPointer" title="거래처 직원 관리"'+(0==e.employeeCnt?'style="color:#ccc;"':"")+"></i> "+e.employeeCnt+"</td>",o+='<td style="border:1px solid #dedede;" class="al">'+n._utils.nullTostring(e.cuMemo,"")+"</td>",o+='<td style="border:1px solid #dedede;" >'+e.creDate+"</td>",o+='<td style="border:1px solid #dedede;" ><i class="fa-regular fa-pen-to-square btnOpenInfo cursorPointer" style="font-size:14px;" title="고객정보 수정"></i></td>',o+="</tr>",$(o).data("ROW",e).appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"customer",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"customer",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"customer",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"initNewLayer",(t=>{const e=this;"Y"==e._const.__MANAGER_YN?$(`#${t} .ledgerInfo`).show():$(`#${t} .ledgerInfo`).hide(),$(" .title").text("거래처 등록"),$(`#${t} input[name=cuAmountSaleStart],[name=cuAmountBuyStart]`).on("focus",(function(){let t=$(this).val();t=e._utils.getOnlyNumber(t),$(this).data("ROW",t).val(t)})),$(`#${t} input[name=cuAmountSaleStart],[name=cuAmountBuyStart]`).on("focusout",(function(){let t=$(this).data("ROW"),n=$(this).val();t=e._utils.getOnlyNumber(t),n=e._utils.getOnlyNumber(n),$(this).val(e._utils.numberWithCommas(n))})),$(`#${t} input[name=cuBizNo]`).on("focusout",(function(n){let a=$("input[name=cuBizNo]",`#${t}`).val(),l=$("input[name=cuBizNoNum]",`#${t}`).val();if(!a)return!1;let o={bizNo:a,bizNoNum:l};e.bizSelect(o,(function(n){if(0==n.code&&n.data.length>0){let a=n.data[0];$("input[name=cuBizNo]",`#${t}`).val(e._utils.convertBizNo(a.bizNo)),$("input[name=cuBizNoNum]",`#${t}`).val(a.bizNoNum),$("input[name=cuNm]",`#${t}`).val(a.nm),$("input[name=cuOwnerNm]",`#${t}`).val(a.ownerNm),$("input[name=cuTel]",`#${t}`).val(a.tel),$("select[name=cuType]",`#${t}`).val(a.type),$("input[name=cuZipcode]",`#${t}`).val(a.zipcode),$("input[name=cuAddr]",`#${t}`).val(a.addr),$("input[name=cuAddrDetail]",`#${t}`).val(a.addrDetail),$("input[name=cuUpjong]",`#${t}`).val(a.upjong),$("input[name=cuJongmok]",`#${t}`).val(a.jongMok),$("input[name=cuFax]",`#${t}`).val(a.fax),$("input[name=cuInvoiceEmail]",`#${t}`).val(a.invoiceEmail),$("input[name=cuFax]",`#${t}`).trigger("focusout"),$("input[name=cuTel]",`#${t}`).trigger("focusout")}}))})),$(`#${t} .btnAddrSearch`).on("click",(function(e){new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$(`#${t} input[name=cuZipcode]`).val(e.zonecode),$(`#${t} input[name=cuAddr]`).val(n)}}).open()})),e._utils.focusEvent($("input[name=cuBizNo]",`#${t}`),"bizNo"),e._utils.focusEvent($("input[name=cuTel]",`#${t}`),"tel"),e._utils.focusEvent($("input[name=cuFax]",`#${t}`),"tel"),e._utils.focusEvent($("input[name=eTel]",`#${t}`),"tel"),$(`#${t} .clientSave`).on("click",(function(n){let a=$("input[name=cuTypeCd]:checked",`#${t}`).map((function(){return this.value})).get(),l=$("input[name=cuNm]",`#${t}`).val(),o=$("input[name=cuOwnerNm]",`#${t}`).val(),i=$("input[name=cuBizNo]",`#${t}`).val(),s=$("input[name=cuBizNoNum]",`#${t}`).val(),r=$("select[name=cuType]",`#${t}`).val(),c=$("input[name=cuZipcode]",`#${t}`).val(),d=$("input[name=cuAddr]",`#${t}`).val(),p=$("input[name=cuAddrDetail]",`#${t}`).val(),u=$("input[name=cuTel]",`#${t}`).val(),m=$("input[name=cuDcRate]",`#${t}`).val(),f=$("select[name=cuImportantYn]",`#${t}`).val(),h=$("textarea[name=cuMemo]",`#${t}`).val(),g=$("textarea[name=cuSignificant]",`#${t}`).val(),_=$("input[name=cuFax]",`#${t}`).val(),w=$("input[name=cuInvoiceEmail]",`#${t}`).val(),y=$("input[name=cuUpjong]",`#${t}`).val(),b=$("input[name=cuJongmok]",`#${t}`).val(),v=$("input[name=cuBankNm]",`#${t}`).val(),x=$("input[name=cuBankOwnerNm]",`#${t}`).val(),k=$("input[name=cuAccount]",`#${t}`).val(),S=$("input[name=cuAmountSaleStart]",`#${t}`).val(),N=$("input[name=cuAmountBuyStart]",`#${t}`).val(),C=$("input[name=eId]",`#${t}`).val(),I=$("input[name=ePwd]",`#${t}`).val(),q=$("input[name=eNm]",`#${t}`).val(),T=$("input[name=eTel]",`#${t}`).val();if(e._utils.checkEmptyNull(S)||(S=e._utils.getOnlyNumber(S)),e._utils.checkEmptyNull(N)||(N=e._utils.getOnlyNumber(N)),e._utils.checkRequired(`#${t}`)){let t={cuNm:l,cuOwnerNm:o,cuBizNo:i,cuBizNoNum:s,cuType:r,cuZipcode:c,cuAddr:d,cuAddrDetail:p,cuTel:u,cuDcRate:m,cuImportantYn:f,cuMemo:h,cuSignificant:g,cuFax:_,cuInvoiceEmail:w,cuUpjong:y,cuJongmok:b,cuBankNm:v,cuBankOwnerNm:x,cuAccount:k,cuAmountSaleStart:S,cuAmountBuyStart:N,cuTypeCd:JSON.stringify(a),employeeInfo:JSON.stringify({eId:C,ePwd:I,eNm:q,eTel:T})};e.insert(t,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("등록되었습니다.")):alert(t.message)}))}})).text("저장")})),e(this,"bizSelect",((t,e)=>{let n={ctl:"common",cmd:"bizSelect"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"customer",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"reloadLayer",(t=>{const e=this;if("Y"==e._const.__MANAGER_YN?$(`#${t} .ledgerInfo`).show():$(`#${t} .ledgerInfo`).hide(),$(`#${t} .cuEmployee`).remove(),$(`#${t} .title`).text("고객사 수정"),$(`#${t} input[name=cuAmountSaleStart],[name=cuAmountBuyStart]`).on("focus",(function(){let t=$(this).val();t=e._utils.getOnlyNumber(t),$(this).data("ROW",t).val(t)})),$(`#${t} input[name=cuAmountSaleStart],[name=cuAmountBuyStart]`).on("focusout",(function(){let t=$(this).data("ROW"),n=$(this).val();t=e._utils.getOnlyNumber(t),n=e._utils.getOnlyNumber(n),$(this).val(e._utils.numberWithCommas(n))})),$(`#${t} .btnAddrSearch`).on("click",(function(e){new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$(`#${t} input[name=cuZipcode]`).val(e.zonecode),$(`#${t} input[name=cuAddr]`).val(n)}}).open()})),0===Object.keys(e._client).length&&e._client.constructor===Object)return alert("고객사 데이터를 불러올 수 없습니다"),!1;$("input[name=cuNm]",`#${t}`).val(e._client.cuNm),$("input[name=cuOwnerNm]",`#${t}`).val(e._client.cuOwnerNm),$("input[name=cuBizNo]",`#${t}`).val(e._client.cuBizNo),$("input[name=cuBizNoNum]",`#${t}`).val(e._client.cuBizNoNum),$("select[name=cuType]",`#${t}`).val(e._client.cuType),$("input[name=cuZipcode]",`#${t}`).val(e._client.cuZipcode),$("input[name=cuAddr]",`#${t}`).val(e._client.cuAddr),$("input[name=cuAddrDetail]",`#${t}`).val(e._client.cuAddrDetail),$("input[name=cuTel]",`#${t}`).val(e._client.cuTel),$("input[name=cuDcRate]",`#${t}`).val(e._client.cuDcRate),$("select[name=cuImportantYn]",`#${t}`).val(e._client.cuImportantYn),$("textarea[name=cuMemo]",`#${t}`).val(e._client.cuMemo),$("textarea[name=cuSignificant]",`#${t}`).val(e._client.cuSignificant),$("input[name=cuFax]",`#${t}`).val(e._client.cuFax),$("input[name=cuInvoiceEmail]",`#${t}`).val(e._client.cuInvoiceEmail),$("input[name=cuUpjong]",`#${t}`).val(e._client.cuUpjong),$("input[name=cuJongmok]",`#${t}`).val(e._client.cuJongmok),$("input[name=cuBankNm]",`#${t}`).val(e._client.cuBankNm),$("input[name=cuBankOwnerNm]",`#${t}`).val(e._client.cuBankOwnerNm),$("input[name=cuAccount]",`#${t}`).val(e._client.cuAccount),$("input[name=cuAmountSaleStart]",`#${t}`).val(e._utils.numberWithCommas(e._client.cuAmountSaleStart)),$("input[name=cuAmountBuyStart]",`#${t}`).val(e._utils.numberWithCommas(e._client.cuAmountBuyStart)),$(".cuAmountSaleBalance",`#${t}`).text(e._utils.numberWithCommas(e._client.cuAmountSaleBalance)),$(".cuAmountBuyBalance",`#${t}`).text(e._utils.numberWithCommas(e._client.cuAmountBuyBalance));let n=$("input[name=cuTypeCd]",`#${t}`);for(let a=0;a<n.length;a++){$(n[a]).prop("checked",!1);for(let l=0;l<e._client.cuTypeCd.length;l++){let o=e._client.cuTypeCd[l].cuTypeCd;if("C"==o&&$(".stockSetting",`#${t}`).show(),$(n[a]).val()==o){$(n[a]).prop("checked",!0);break}}}$("input[name=ePwd]",`#${t}`).removeAttr("requiremsg"),null!=e._client.employeeInfo&&e._client.employeeInfo.forEach((function(e){let n=e;"Y"==n.eManagerYn&&($("input[name=eId]",`#${t}`).val(n.eId),$("input[name=ePwd]",`#${t}`).val(n.ePwd),$("input[name=eNm]",`#${t}`).val(n.eNm),$("input[name=eTel]",`#${t}`).val(n.eTel))})),e._utils.focusEvent($("input[name=cuBizNo]",`#${t}`),"bizNo"),e._utils.focusEvent($("input[name=cuTel]",`#${t}`),"tel"),e._utils.focusEvent($("input[name=cuFax]",`#${t}`),"tel"),e._utils.focusEvent($("input[name=eTel]",`#${t}`),"tel"),$(".stockSetting",`#${t}`).on("click",(function(){let t=$("template#customerStockSetting");e._parent.openLayer(t.html(),e.customerStockSettingEvent,e._client)})),$(`#${t} .clientSave`).data({cuSeq:e._client.cuSeq}).on("click",(function(n){let a=$(this).data(),l=$("input[name=cuTypeCd]:checked",`#${t}`).map((function(){return this.value})).get(),o=$("input[name=cuNm]",`#${t}`).val(),i=$("input[name=cuOwnerNm]",`#${t}`).val(),s=$("input[name=cuBizNo]",`#${t}`).val(),r=$("input[name=cuBizNoNum]",`#${t}`).val(),c=$("select[name=cuType]",`#${t}`).val(),d=$("input[name=cuZipcode]",`#${t}`).val(),p=$("input[name=cuAddr]",`#${t}`).val(),u=$("input[name=cuAddrDetail]",`#${t}`).val(),m=$("input[name=cuTel]",`#${t}`).val(),f=$("input[name=cuDcRate]",`#${t}`).val(),h=$("select[name=cuImportantYn]",`#${t}`).val(),g=$("textarea[name=cuMemo]",`#${t}`).val(),_=$("textarea[name=cuSignificant]",`#${t}`).val(),w=$("input[name=cuFax]",`#${t}`).val(),y=$("input[name=cuInvoiceEmail]",`#${t}`).val(),b=$("input[name=cuUpjong]",`#${t}`).val(),v=$("input[name=cuJongmok]",`#${t}`).val(),x=$("input[name=cuBankNm]",`#${t}`).val(),k=$("input[name=cuBankOwnerNm]",`#${t}`).val(),S=$("input[name=cuAccount]",`#${t}`).val(),N=$("input[name=cuAmountSaleStart]",`#${t}`).val(),C=$("input[name=cuAmountBuyStart]",`#${t}`).val(),I=$("input[name=eId]",`#${t}`).val(),q=$("input[name=ePwd]",`#${t}`).val(),T=$("input[name=eNm]",`#${t}`).val(),D=$("input[name=eTel]",`#${t}`).val();if(e._utils.checkEmptyNull(N)||(N=e._utils.getOnlyNumber(N)),e._utils.checkEmptyNull(C)||(C=e._utils.getOnlyNumber(C)),e._utils.checkRequired(`#${t}`)){if(!a.cuSeq)return alert("코드가 없어 수정불가합니다"),!1;let t={cuSeq:a.cuSeq,cuNm:o,cuOwnerNm:i,cuBizNo:s,cuBizNoNum:r,cuType:c,cuZipcode:d,cuAddr:p,cuAddrDetail:u,cuTel:m,cuDcRate:f,cuImportantYn:h,cuMemo:g,cuSignificant:_,cuFax:w,cuInvoiceEmail:y,cuUpjong:b,cuJongmok:v,cuBankNm:x,cuBankOwnerNm:k,cuAccount:S,cuAmountSaleStart:N,cuAmountBuyStart:C,cuTypeCd:JSON.stringify(l),employeeInfo:JSON.stringify({eId:I,ePwd:q,eNm:T,eTel:D})};e.update(t,(function(t){0==t.code?(e.retrieve(),$("body .btnClosePopLayer").trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}})).text("수정")})),e(this,"employeeListEvent",((t,e)=>{const n=this;let a=$(`#${t}`),l=$(".employeeList tbody",a);n.employeeRetrieve(a,e.cuSeq),a.data(e),a.on("click",".employeeCreate",(function(){let t=$("template#customerEmployeeDetail");n._parent.openLayer(t.html(),n.employeeDetailEvent,null,a)})),a.on("click",".employeeDelete",(function(){let t=l.find("input[name=eSeq]:checked");if(0!=t.length)if(t.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let e in t)t[e].checked&&(t[e].checked=!1)}else confirm("삭제하시겠습니까?",(function(e){if(e){let e=$(t).closest("tr"),a=e.data("ROW");n.employeeDelete({eSeq:a.eSeq,cuSeq:a.cuSeq},(function(t){0==t.code?(e.remove(),alert("삭제되었습니다")):alert(t.message)}))}}));else alert("삭제할 대상을 선택 하십시오")})),l.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#customerEmployeeDetail");n.employeeDetail({eSeq:t.eSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;n._parent.openLayer(e.html(),n.employeeDetailEvent,t.data,a)}))}))})),e(this,"employeeDetailEvent",((t,e,n)=>{const a=this;let l=$(`#${t}`),o=n.data().cuSeq;null!=e?(a._utils.unSerializeObject(l,e),$("select[name=eManagerYn]",l).val(e.eManagerYn),$(".title",l).text("직원수정"),$(".employeeSave",l).text("수정"),a._utils.checkEmptyNull(e.eId)?$(".btnChangePwd",l).hide():($("input[name=eId]",l).attr("readonly",!0).addClass("readonly"),$(".btnChangePwd",l).show()),l.data(e),l.on("change","select[name=eLoginYn]",(function(){"Y"==$(this).val()?"N"==e.eLoginYn&&$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",l).removeAttr("readonly").removeClass("readonly"):$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",l).attr("readonly","readonly").addClass("readonly")}))):($(".title",l).text("직원등록"),$(".employeeSave",l).text("등록"),$(".btnChangePwd",l).hide(),l.on("change","select[name=eLoginYn]",(function(){"Y"==$(this).val()?$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",l).removeAttr("readonly").removeClass("readonly"):$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",l).attr("readonly","readonly").addClass("readonly")}))),l.on("click",".btnChangePwd",(function(t){let n=$("input[name=ePwd]",l).val(),o=$("input[name=reEPwd]",l).val();if(""==n.trim())return alert("비밀번호를 입력해 주세요"),!1;if(n!=o)return alert("비밀번호를 확인해 주세요"),!1;let i={changepwd:"N",eSeq:e.eSeq,ePwd:n};a.changepwd(i,(function(t){0==t.code?($("input[name=ePwd], input[name=reEPwd]",l).val(""),alert("변경되었습니다")):alert("변경 실패하였습니다")}))})),$("select[name=eLoginYn]",l).trigger("change"),a._utils.focusEvent($("input[name=eTel]",`#${t}`),"tel"),l.on("click",".employeeSave",(function(){let t=$("input[name=eNm]",l).val(),i=$("input[name=eTel]",l).val(),s=$("select[name=eManagerYn]",l).val(),r=$("select[name=eLoginYn]",l).val(),c=$("input[name=eRank]",l).val(),d=$("input[name=eTakeCharge]",l).val(),p=$("input[name=ePwd]",l).val(),u=$("input[name=reEPwd]",l).val(),m=$("input[name=eId]",l).val(),f=$("textarea[name=eMemo]",l).val();if(a._utils.checkRequired(l)){let h={cuSeq:o,eNm:t,eTel:i,eManagerYn:s,eLoginYn:r,eRank:c,eTakeCharge:d,eMemo:f};if(null==e){if("Y"==r){if(""==m)return alert("아이디를 입력해 주세요"),!1;if(""==p)return alert("비밀번호를 입력해 주세요"),!1;if(""!=p&&p!=u)return alert("비밀번호를 확인해 주세요"),!1;h.eId=m,h.ePwd=p}a.employeeInsert(h,(function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),a.employeeRetrieve(n,o),alert("등록되었습니다.")):alert(t.message)}))}else{if(h.eSeq=e.eSeq,"Y"==r){if(null!=e.eId){if(m=e.eId,"N"==e.eLoginYn&&""==p)return alert("비밀번호를 입력해 주세요"),!1;if(""!=p&&p!=u)return alert("비밀번호를 확인해 주세요"),!1}else{if(""==m)return alert("아이디를 입력해 주세요"),!1;if(""==p)return alert("비밀번호를 입력해 주세요"),!1;if(""!=p&&p!=u)return alert("비밀번호를 확인해 주세요"),!1}h.eId=m,h.ePwd=p}a.employeeUpdate(h,(function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),a.employeeRetrieve(n,o),alert("저장 되었습니다.")):alert(t.message)}))}}}))})),e(this,"employeeRetrieve",((t,e)=>{const n=this;n.employeeList({cuSeq:e},(function(e){if(0!=e.code)return alert("데이터를 불러올 수 없습니다"),!1;{let a=$(".employeeList tbody",t);a.empty();for(let t=0;t<e.data.length;t++){let l=e.data[t],o=$("<tr/>");o.append('<td><input type="checkbox" class="vm" name="eSeq" value="'+l.eSeq+'"/>'),o.append("<td>"+("Y"==l.eManagerYn?"대표":"")+"</td>"),o.append("<td>"+n._utils.nullTostring(l.eNm,"")+"</td>"),o.append("<td>"+n._utils.nullTostring(l.eRank,"")+"</td>"),o.append("<td>"+n._utils.formatPhoneNumber(l.eTel,"")+"</td>"),o.append("<td>"+("Y"==l.eLoginYn?"허용":"불가")+"</td>"),o.append("<td>"+n._utils.nullTostring(l.eId,"")+"</td>"),o.append('<td><i class="fa-solid fa-magnifying-glass cursorPointer btnOpenInfo" title="직원 정보 조회"></i></td>'),o.data("ROW",l),o.appendTo(a)}}}))})),e(this,"customerStockSettingEvent",((t,e,n)=>{const l=this;$(`#${t}`);let o=$("div .f_lt"),i=$("div .f_rt"),s=$(".dataListTable tbody",o),r=$(".dataListTable tbody",i),c=[];function d(t){r.empty(),c=[];let e={ctl:"customer",cmd:"stockList",cuSeq:l._client.cuSeq};new a(l._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=e.data;if(n.length>0)for(let t=0;t<n.length;t++){let e=$("<tr />");e.append('<td class="ac"><input type="checkbox" name="sSeq" value="'+n[t].sSeq+'"></td>'),e.append('<td class="ac">'+(l._utils.checkEmptyNull(n[t].sCode)?"":n[t].sCode)+"</td>"),e.append('<td class="al">'+n[t].sNm+"</td>"),e.append('<td class="al">'+n[t].sStandard+"</td>"),e.data("ROW",n[t]),r.append(e),c.push(n[t].sSeq)}else r.append('<tr><td colspan="4" class="ac">데이타가 없습니다.</td></tr>');"function"==typeof t&&t()}else alert(e.message)}))}$("input[name=chckAll]",o).on("click",(function(t){t.stopPropagation();let e=s.find("input[name=sSeq]"),n=$(this).is(":checked");for(let a=0;a<e.length;a++){let t=$(e[a]);t.is(":checked")!=n&&t.trigger("click")}})),$(".btnStockSearch",o).on("click",(function(){let t=$("input[name=sNm]",o).val();""!=t.trim()&&function(t){let e={ctl:"stock",cmd:"stockNmSearch",searchWord:t};new a(l._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){s.empty();let e=t.data;if(e.length>0){for(let t=0;t<e.length;t++){let n=$("<tr />");-1==c.indexOf(e[t].sSeq)?n.append('<td class="ac"><input type="checkbox" name="sSeq" value="'+e[t].sSeq+'"></td>'):n.append('<td class="ac"></td>'),n.append('<td class="ac">'+e[t].sCode+"</td>"),n.append('<td class="al">'+e[t].sNm+"</td>"),n.append('<td class="al">'+e[t].sStandard+"</td>"),n.data("ROW",e[t]),s.append(n)}0==s.find("tr").length&&s.append('<tr><td colspan="4" class="ac">추가할 자재 데이타가 없습니다.</td></tr>')}else s.append('<tr><td colspan="4" class="ac">데이타가 없습니다.</td></tr>')}else alert(t.message)}))}(t)})),$("input[name=sNm]",o).on("keypress",(function(t){13==t.keyCode&&$(".btnStockSearch",o).trigger("click")})),$(".btnStockLinkCreate",o).on("click",(function(t){t.stopPropagation();let e=[],n=$("input[name=sSeq]:checked",s);if(0!=n.length){if(n.length>0){for(let t=0;t<n.length;t++)e.push($(n[t]).val());e.length>0&&confirm("총 "+l._utils.numberWithCommas(e.length)+"건의 자재를 추가하시겠습니까?",(function(t){if(t){let t={ctl:"customer",cmd:"stockInsert",cuSeq:l._client.cuSeq,sSeqs:JSON.stringify(e)};new a(l._const,t,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){alert("등록 되었습니다.");for(let t=0;t<n.length;t++)$(n[t]).remove();0==s.find("tr").length&&s.append('<tr><td colspan="4" class="ac">데이타가 없습니다.</td></tr>'),d()}else alert(t.message)}))}}),"수급자재 추가")}}else alert("추가할 자재를 선택 하십시오")})),$(".btnStockLinkDelete",i).on("click",(function(t){t.stopPropagation();let e=[],n=$("input[name=sSeq]:checked",r);if(0!=n.length)if(n.length>1)alert("삭제는 1건씩만 가능합니다.");else{for(let t=0;t<n.length;t++)e.push($(n[t]).val());e.length>0&&confirm("삭제하시겠습니까?",(function(t){if(t){let t={ctl:"customer",cmd:"stockDelete",cuSeq:l._client.cuSeq,sSeqs:JSON.stringify(e)};new a(l._const,t,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){0==t.code?(alert("삭제 되었습니다."),d((function(){$(".btnStockSearch",o).trigger("click")}))):alert(t.message)}))}}))}else alert("삭제할 자재를 선택 하십시오")})),d()})),e(this,"excelUploadEvent",(t=>{const e=this;let n=$(`#${t}`);$(".btnExcelDocDown",n).on("click",(function(){const t=document.createElement("a");t.setAttribute("href",__FILE_DOMIN+"/doc/customerDoc20250121.xlsx"),t.setAttribute("download","고객사등록양식.xlsx"),t.click(),$(t).remove()})),$(".btnAddFile",n).on("click",(function(t){t.preventDefault(),$("input[name=excelFile]",n).trigger("click")})),$("input[name=excelFile]",n).on("change",(function(t){let a=t.target.files[0],l=2097152;if(a.size>l)return alert("최대 "+e._utils.bytesToSize(l)+" 까지만 가능 합니다.\n파일용량 :"+e._utils.bytesToSize(a.size)),delete t.target.files,!1;$(".addFileName",n).text(a.name)})),$(".btnExcelInsert",n).on("click",(function(){let t=$("input[name=excelFile]",n)[0].files;if(0==t.length)alert("파일을 선택하십시요");else{const l=new ExcelJS.Workbook,o=new FileReader;let i=[];o.readAsArrayBuffer(t[0]),o.onload=()=>{const t=o.result;l.xlsx.load(t).then((t=>{t.getWorksheet(1).eachRow(((t,e)=>{e>=3&&i.push(t.values)})),console.log(i),function(t){if(0==t.length)return void alert("등록할 고객사 정보가 없습니다.");for(let n=0;n<t.length;n++){let l=t[n],o=[];"Y"==l[1]&&o.push("A"),"Y"==l[2]&&o.push("B"),"Y"==l[3]&&o.push("C");let i={ctl:"customer",cmd:"insert",cuType:l[4],cuNm:l[5],cuOwnerNm:l[6],cuBizNo:l[7],cuBizNoNum:l[8],cuTel:l[9],cuFax:l[10],cuInvoiceEmail:l[11],cuUpjong:l[12],cuJongmok:l[13],cuZipcode:l[14],cuAddr:l[15],cuAddrDetail:l[16],cuBankNm:l[17],cuBankOwnerNm:l[18],cuAccount:l[19],cuTypeCd:JSON.stringify(o)};new a(e._const,i,{wapi:"user/ws",spinner:!0,isasync:!1}).ajaxformdata((function(e){e.code,t[n].result=e.message}))}alert("등록되었습니다."),$(".btnClosePopLayer",n).trigger("click"),function(t){const n=new ExcelJS.Workbook;let a="고객사 등록 결과 ";const l=n.addWorksheet(a);let o=[];o.push({name:"고객사",key:"1",width:10,align:"center"}),o.push({name:"외주사",key:"2",width:10,align:"center"}),o.push({name:"자재사",key:"3",width:10,align:"center"}),o.push({name:"기업형태",key:"4",width:10,align:"center"}),o.push({name:"업체명",key:"5",width:25,align:"left"}),o.push({name:"대표자",key:"6",width:15,align:"center"}),o.push({name:"사업자번호",key:"7",width:15,align:"center"}),o.push({name:"종번호",key:"8",width:15,align:"center"}),o.push({name:"대표전화번호",key:"9",width:15,align:"center"}),o.push({name:"FAX",key:"10",width:15,align:"rigth"}),o.push({name:"대표메일",key:"11",width:25,align:"left"}),o.push({name:"업태",key:"12",width:25,align:"left"}),o.push({name:"종목",key:"13",width:25,align:"left"}),o.push({name:"우편번호",key:"14",width:10,align:"center"}),o.push({name:"기본주소",key:"15",width:30,align:"left"}),o.push({name:"상세주소",key:"16",width:20,align:"left"}),o.push({name:"은행명",key:"17",width:15,align:"center"}),o.push({name:"소유주",key:"18",width:15,align:"center"}),o.push({name:"계좌번호",key:"19",width:20,align:"center"}),o.push({name:"등록결과",key:"result",width:40,align:"left"});let i=[];for(let e in o)i.push(o[e].name);let s=l.addRow(i);s.eachCell(((t,n)=>{e._utils.excelStyleHeaderCell(t),l.getColumn(n).width=o[n-1].width}));for(let r in t){let n=[];for(let e in o)n.push(t[r][o[e].key]?t[r][o[e].key]:"");l.addRow(n).eachCell(((t,n)=>{e._utils.excelStyleDataCell(t,o[n-1].align)}))}e._utils.excelDownload(n,a+"("+e._utils.currentDateTime()+")").then((t=>{}))}(t)}(i)}))}}}))})),e(this,"employeeList",((t,e)=>{let n={ctl:"employee",cmd:"list",rows:9999};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeDetail",((t,e)=>{let n={ctl:"employee",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeInsert",((t,e)=>{let n={ctl:"employee",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeUpdate",((t,e)=>{let n={ctl:"employee",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeDelete",((t,e)=>{let n={ctl:"employee",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"changepwd",((t,e)=>{let n={ctl:"employee",cmd:"pwdChange"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"customer",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._fileSeq=null}},d=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._customer=new c(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}},p=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){n.layerView((function(t){n._parent.openLayer(t,n.initNewLayer)})),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=isSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({isSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=isSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find(".aaa").on("click",(function(t){n.excelDownload2()}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),l.find("input[name=cuNm]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),l.find("input[name=isNm]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.isNm,value:t.isNm,v:t}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.load({isSeq:t.isSeq},(function(e){if(0!=e.code)return alert("데이터를 불러올 수 없습니다"),!1;n.layerView((function(t){n._parent.openLayer(t,n.initLoadLayer,e.data)}),t.isNm)}))})),n.retrieve()})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val(),s=l.find("input[name=searchColumn]").val(),r=l.find("input[name=searchWord]").val(),c=l.find("input[name=isAddress]:checked").val(),d=l.find("input[name=cuNm]").val(),p={cuTypeCd:"A",cuImportantYn:"N",page:a,rows:n,orderColumn:o,orderType:i,searchColumn:s,searchWord:r,isAddress:c,cuNm:d};t.list(p,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr/>");a.append($('<td ><input type="checkbox" class="vm" name="isSeq" value="'+e.isSeq+'"></td>')),a.append($('<td style="border:1px solid #dedede;" ></td>').append(n._utils.nullTostring(e.isNm,""))),a.append($('<td style="border:1px solid #dedede;" ></td>').append(n._utils.nullTostring(e.isInchargeNm,""))),a.append($('<td style="border:1px solid #dedede;" ></td>').append(n._utils.formatPhoneNumber(n._utils.nullTostring(e.isInchargeTel,"").replace(/-/g,"")))),a.append($('<td style="border:1px solid #dedede;" class="al"></td>').append(null==e.isAddr?"":n._utils.nullTostring(e.isAddr,"")+" "+n._utils.nullTostring(e.isAddrDetail,""))),a.append($('<td style="border:1px solid #dedede;" class="al"></td>').append(n._utils.nullTostring(e.isMemo,""))),a.append($('<td style="border:1px solid #dedede;" >'+e.creDate+"</td>")),a.append($('<td style="border:1px solid #dedede;" ></td>').append($('<i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="입/출고지 수정" style="font-size:14px;"></i>'))),$(a).data("ROW",e),a.appendTo(t)})),e(this,"layerView",((t,e)=>{t('<div class="mw_defalut" style="width:820px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title">\'+ nm +\'</span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t<div style="height:480px;overflow-y:auto;padding:2px;">\n\t\t\t\t\t\t<div class="bottonWrap">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<div class="ar"><a href="javascript:void(0);" class="btnSearch clientSave">저장</a></div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="searchWrap">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="80px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="60px">\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t\t<col width="60px">\n\t\t\t\t\t\t\t\t\t<col width="100px">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">입/출고지</th>\n\t\t\t\t\t\t\t\t\t\t<td><div class="inputTextCleanDiv"><input type="text" name="isNm" class="mr5" requiremsg="입/출고지명" style="width:350px;"><div class="inputTextClean"><span>×</span></div></div></td>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">담당자</th>\n\t\t\t\t\t\t\t\t\t\t<td><div class="inputTextCleanDiv"><input type="text" name="isInchargeNm" style="width:95px;"><div class="inputTextClean"><span>×</span></div></div></td>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">연락처</th>\n\t\t\t\t\t\t\t\t\t\t<td><div class="inputTextCleanDiv"><input type="text" name="isInchargeTel" style="width:95px;"><div class="inputTextClean"><span>×</span></div></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">주&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;소</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="5">\n\t\t\t\t\t\t\t\t\t\t\t<input name="isZipcode" class="mr5 readonly" type="text" style="width:50px;" placeholder="우편번호" readonly="readonly">\n\t\t\t\t\t\t\t\t\t\t\t\x3c!-- a class="btnStyle03 btnAddrSearch mr5" href="javascript:void(0);">주소검색</a --\x3e\n\t\t\t\t\t\t\t\t\t\t\t<input name="isAddr" class="w40p readonly" type="text" placeholder="기본 주소" readonly="readonly"> \n\t\t\t\t\t\t\t\t\t\t\t<div class="inputTextCleanDiv">\n\t\t\t\t\t\t\t\t\t\t\t\t<input name="isAddrDetail" style="width:315px" type="text" placeholder="상세 주소" >\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="inputTextClean"><span>×</span></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<i class="fa-solid fa-location-dot cursorPointer btnAddrSearch f_rt" style="font-size:15px;margin:5px 5px;color: #81b1cd;" title="주소 검색" tabindex="12"></i>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr class="gpsInfo" style="display:none;">\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">GPS</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="5">Latitude : <input name="isGpsLatitude" class="w20p" type="text" placeholder="GPS Latitude" readonly="readonly"> Longitude : <input name="isGpsLongitude" class="w20p" type="text" placeholder="GPS Longitude" readonly="readonly"> 아래 지도를 클릭하여 정확한 좌표를 입력하세요</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r"></th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="5"><div class="searchWrap kakaoMap" style="height:250px;border:2px solid #fff;"><div class="custom_zoomcontrol radius_border"></div></div></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_r">메&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;모</th>\n\t\t\t\t\t\t\t\t\t\t<td colspan="5"><textarea name="isMemo" class="w100p"></textarea></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"mpaLoad",(t=>{let e=this;e._geocoder.addressSearch(t,(function(t,n){if(n===kakao.maps.services.Status.OK){var a=new kakao.maps.LatLng(t[0].y,t[0].x);new kakao.maps.Marker({map:e._map,position:a}),e._map.setCenter(a)}}))})),e(this,"LayerEvent",(t=>{const e=this;let n=$(".kakaoMap",t)[0],l={center:new kakao.maps.LatLng(37.566851228967195,126.97863244275388),level:3},o=new kakao.maps.Map(n,l);e._geocoder=new kakao.maps.services.Geocoder,e._map=o,e._marker=new kakao.maps.Marker({position:new kakao.maps.LatLng(37.566851228967195,126.97863244275388),clickable:!0}),kakao.maps.event.addListener(o,"click",(function(n){let a=n.latLng;$("input[name=isGpsLatitude]",t).val(a.getLat()),$("input[name=isGpsLongitude]",t).val(a.getLng()),e._marker.setPosition(n.latLng),e._marker.setMap(o),e.searchDetailAddrFromCoords(n.latLng,(function(e,n){n===kakao.maps.services.Status.OK&&null!=e[0].road_address&&($("input[name=isAddr]",t).val(e[0].road_address.address_name),$("input[name=isZipcode]",t).val(e[0].road_address.zone_no))}))})),t.on("focus","input[name=isAddrDetail]",(function(){$(this).data("ROW",$(this).val())})),t.on("focusout","input[name=isAddrDetail]",(function(){$(this).data("ROW"),$(this).val(),$("input[name=isAddrDetail]",t).val()})),t.on("click",".btnAddrSearch",(function(n){new daum.Postcode({oncomplete:function(n){let a=n.roadAddress;$("input[name=isZipcode]",t).val(n.zonecode),$("input[name=isAddr]",t).val(a),e.mpaLoad(a)}}).open()})),t.find("input[name=cuNm]").autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=cuSeq]",t).val(n.item.v.cuSeq)},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),t.find("input[name=isNm]").autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=isZipcode]",t).val(n.item.v.cuZipcode),$("input[name=isAddr]",t).val(n.item.v.cuAddr),$("input[name=isAddrDetail]",t).val(n.item.v.cuAddrDetail)},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),e._utils.focusEvent($("input[name=isInchargeTel]",t),"tel")})),e(this,"initNewLayer",(t=>{const e=this;let n=$("#"+t);$(".title",n).text("입/출고지 등록"),e.LayerEvent(n),$(".clientSave",n).on("click",(function(a){let l=$("input[name=isNm]",n).val(),o=$("input[name=isAddr]",n).val(),i=$("input[name=isAddrDetail]",n).val(),s=$("input[name=isZipcode]",n).val(),r=$("input[name=isGpsLatitude]",n).val(),c=$("input[name=isGpsLongitude]",n).val(),d=$("textarea[name=isMemo]",n).val(),p=$("input[name=isInchargeNm]",n).val(),u=$("input[name=isInchargeTel]",n).val();if(e._utils.checkEmptyNull(u)||(u=e._utils.convertNumber(u)),e._utils.checkRequired(`#${t}`)){let t={isNm:l,isAddr:o,isAddrDetail:i,isGpsLatitude:r,isGpsLongitude:c,isZipcode:s,isMemo:d,isInchargeNm:p,isInchargeTel:u};e.insert(t,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("등록되었습니다.")):alert(t.message)}))}})).text("등록")})),e(this,"initLoadLayer",((t,e)=>{const n=this;let a=$("#"+t);if($(".title",a).text("입/출고지 수정"),n._utils.unSerializeObject(a,e),n.LayerEvent(a),null!=e.isGpsLongitude){let t=new kakao.maps.LatLng(e.isGpsLatitude,e.isGpsLongitude);n._marker=new kakao.maps.Marker({map:n._map,position:t,title:e.isNm}),n._map.setCenter(t),n._marker.setMap(n._map)}$(".clientSave",a).on("click",(function(l){let o=$("input[name=isNm]",a).val(),i=$("input[name=isAddr]",a).val(),s=$("input[name=isAddrDetail]",a).val(),r=$("input[name=isZipcode]",a).val(),c=$("input[name=isGpsLatitude]",a).val(),d=$("input[name=isGpsLongitude]",a).val(),p=$("textarea[name=isMemo]",a).val(),u=$("input[name=isInchargeNm]",a).val(),m=$("input[name=isInchargeTel]",a).val();if(n._utils.checkEmptyNull(m)||(m=n._utils.convertNumber(m)),n._utils.checkRequired(`#${t}`)){let t={isSeq:e.isSeq,isNm:o,isAddr:i,isAddrDetail:s,isGpsLatitude:c,isGpsLongitude:d,isZipcode:r,isMemo:p,isInchargeNm:u,isInchargeTel:m};n.update(t,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),n.retrieve(),alert("수정되었습니다.")):alert(t.message)}))}})).text("수정")})),e(this,"searchAddrFromCoords",((t,e)=>{this._geocoder.coord2RegionCode(t.getLng(),t.getLat(),e)})),e(this,"searchDetailAddrFromCoords",((t,e)=>{this._geocoder.coord2Address(t.getLng(),t.getLat(),e)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고처",key:"istInNm",width:20,align:"left"}),u.push({name:"입고희망일",key:"oHopeInDt",width:12,align:"center"}),u.push({name:"입고자",key:"inENm",width:15,align:"center"}),u.push({name:"출고처",key:"outNm",width:20,align:"left"}),u.push({name:"출고희망일",key:"oHopeOutDt",width:12,align:"center"}),u.push({name:"출고자",key:"istOutENm",width:15,align:"center"}),u.push({name:"메모",key:"oMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"insert",((t,e)=>{let n={ctl:"customer",cmd:"storageInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"list",((t,e)=>{let n={ctl:"customer",cmd:"storageList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"customer",cmd:"storageLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"customer",cmd:"storageDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"purge",(()=>{console.log("customerController purge")})),e(this,"reload",(()=>{console.log("customerController reload")})),e(this,"update",((t,e)=>{let n={ctl:"customer",cmd:"storageUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._fileSeq=null}},u=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._storage=new p(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}},m=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._utils.focusEvent($("input[name=cTel]",n._code),"tel"),n._utils.focusEvent($("input[name=cFax]",n._code),"tel"),n.display(),$(".btnSave",n._code).on("click",(function(t){let e=$("input[name=cOwnerNm]",n._code).val(),a=$("input[name=cZipcode]",n._code).val(),l=$("input[name=cAddr]",n._code).val(),o=$("input[name=cAddrDetail]",n._code).val(),i=$("input[name=cTel]",n._code).val(),s=$("input[name=cFax]",n._code).val(),r=$("input[name=cInvoiceEmail]",n._code).val(),c=$("input[name=cUpjong]",n._code).val(),d=$("input[name=cJongmok]",n._code).val(),p=$("textarea[name=cReportTitle]",n._code).val(),u=$("select[name=cWorkReport]",n._code).val(),m=$("input[name=cHomepage]",n._code).val(),f=$("select[name=cTransReport]",n._code).val();if(n._utils.checkRequired("#frmCompany")){new Promise(((t,e)=>{$("input[name=upfile]")[0].files[0]?n.mediaUpload($("input[name=upfile]")[0].files[0],(function(n){-9999==n&&e(new Error("upload  is failed")),t(n.fileSeq)})):t(n._fileSeq??void 0)})).then((t=>{let h={cOwnerNm:e,cZipcode:a,cAddr:l,cAddrDetail:o,cTel:i,cFax:s,cInvoiceEmail:r,cUpjong:c,cJongmok:d,cReportTitle:p,cWorkReport:u,cTransReport:f,cHomepage:m,fileSeq:t};n.update(h,(function(t){0==t.code?alert("저장되었습니다."):alert("저장에 실패하였습니다.")}))})).catch((t=>{alert("로고 이미지 업로드 에러")}))}})),$(".btnSaveAccount",n._code).on("click",(function(t){let e=$(".accountWrap tr",n._code);for(let a=0;a<e.length;a++){let t=$(e[a]).data(),l={caBankNm:$("input[name=caBankNm]",e[a]).val(),caOwnerNm:$("input[name=caOwnerNm]",e[a]).val(),caAccount:$("input[name=caAccount]",e[a]).val(),sort:a+1};t.constructor===Object&&0===Object.keys(t).length?n._utils.checkEmptyNull(l.caBankNm)||n._utils.checkEmptyNull(l.caAccount)||n.accountInsert(l,(function(t){console.log(t)})):(delete t.sortableItem,$.extend(l,t),n.accountUpdate(l,(function(t){console.log(t)})))}}));let a=$(".apiArea",n._code);$(".btnSaveEmail",n._code).on("click",(function(t){let e=$(this).attr("name"),l=$("."+e,a),o=l.data("ROW"),i=n._utils.serializeObject(l);i.coaType=e,$.extend(o,i),o=n._utils.filterJsonRemoveNull(o),n.apiInfoSave(o,(function(t){0==t.code?alert("저장 되었습니다."):alert(t.message)}))}))})),e(this,"display",(()=>{const t=this;t.load(null,(function(e){if(0==e.code){let n=t._companyInfo=e.data,a=$(".companyInfo",t._code);$("input[name=cNm]",a).val(n.cNm),$("input[name=cOwnerNm]",a).val(n.cOwnerNm),$("input[name=cDomain]",a).val(n.cDomain),$("input[name=cZipcode]",a).val(n.cZipcode),$("input[name=cAddr]",a).val(n.cAddr),$("input[name=cAddrDetail]",a).val(n.cAddrDetail),$("input[name=cBizNo]",a).val(t._utils.convertBizNo(n.cBizNo)),$("input[name=cBizNoNum]",a).val(n.cBizNoNum),$("input[name=cTel]",a).val(n.cTel),$("input[name=cFax]",a).val(n.cFax),$("input[name=cInvoiceEmail]",a).val(n.cInvoiceEmail),$("input[name=cUpjong]",a).val(n.cUpjong),$("input[name=cJongmok]",a).val(n.cJongmok),$("textarea[name=cReportTitle]",a).val(n.cReportTitle),$("select[name=cWorkReport]",a).val(n.cWorkReport),$("select[name=cTransReport]",a).val(n.cTransReport),$("input[name=cHomepage]",a).val(n.cHomepage),$(".expiryDt",a).text(t._utils.dateformatStringToDate(n.expiryDt)),$("input[name=cTel]",t._code).trigger("focusout"),$("input[name=cFax]",t._code).trigger("focusout"),n.fileInfo&&n.fileInfo.length>0&&(t._fileSeq=n.fileInfo[0].fileSeq,$("#uploadProfie-preview").attr("src",__FILE_DOMIN+n.fileInfo[0].path.replace("kprintfactory",""))),$(".btnAddrSearch",a).on("click",(function(t){new daum.Postcode({oncomplete:function(t){let e=t.roadAddress;$("input[name=cZipcode]",a).val(t.zonecode),$("input[name=cAddr]",a).val(e)}}).open()})),$(".btnAddFile",a).on("click",(function(t){t.preventDefault(),$("#uploadProfie").trigger("click")})),$("#uploadProfie",a).on("change",(function(e){let n=e.target.files[0];if(n.size>t._imagesize)return $(this).val(""),alert("파일 용량은 2MB 이하로 제한됩니다."),!1;var a=new FileReader;a.onload=function(t){$("#uploadProfie-preview").attr("src",t.target.result)},a.readAsDataURL(n)}));let l=$(".accountWrap",t._code);l.sortable({handle:".fa-up-down",items:"tr",start:function(t,e){},update:function(t,e){}}),$(".btnAddBank",t._code).on("click",(function(t){let e=$("<tr/>");e.append($('<td class="UpDown ac" style="background-color:#fff;padding:0 0;"/>').append($('<i class="fa-solid fa-up-down cursorPointer"></i>'))),e.append($('<td calss="ac" style="background-color:#fff;" />').append($('<input type="text" class="w98p" name="caBankNm" style="border-width: 0px;background-color:transparent;">'))),e.append($('<td class="al" style="background-color:#fff;" />').append($('<input type="text" class="w98p" name="caOwnerNm" style="border-width: 0px;background-color:transparent;">'))),e.append($('<td class="al" style="background-color:#fff;" />').append($('<input type="text" class="w98p" name="caAccount" style="border-width: 0px;background-color:transparent;">'))),e.append($('<td class="ac" style="background-color:#fff;padding:0 0;" />').append($('<i class="fa-solid fa-square-minus btnRemoveBank" title="계좌 삭제" style="font-size: 16px;color:#898193;"></i>'))),l.append(e)})),l.on("click",".btnRemoveBank",(function(){let e=$(this).closest("tr"),n=e.data();confirm("삭제하시겠습니까?",(function(a){a&&(null!=n.caSeq?t.accountDelete({caSeq:n.caSeq},(function(t){0==t.code?(e.remove(),alert("삭제되었습니다")):alert(t.message)})):e.remove())}))}));let o=0;if(n.accountInfo.length>0)for(o=0;o<n.accountInfo.length;o++){let t=n.accountInfo[o],e=$("<tr/>");e.append($('<td class="UpDown ac" style="background-color:#fff;padding:0 0;" />').append($('<i class="fa-solid fa-up-down cursorPointer"></i>'))),e.append($('<td class="ac" style="background-color:#fff;" />').append($('<input type="text" class="w98p " name="caBankNm" style="border-width: 0px;background-color:transparent;">').val(t.caBankNm))),e.append($('<td class="al" style="background-color:#fff;" />').append($('<input type="text" class="w98p " name="caOwnerNm" style="border-width: 0px;background-color:transparent;">').val(t.caOwnerNm))),e.append($('<td calss="ac" style="background-color:#fff;" />').append($('<input type="text" class="w98p " name="caAccount" style="border-width: 0px;background-color:transparent;">').val(t.caAccount))),e.append($('<td class="ac" style="background-color:#fff;padding:0 0;" />').append($('<i class="fa-solid fa-square-minus btnRemoveBank" title="계좌 삭제" style="font-size: 16px;color:#898193;"></i>'))),e.data({caSeq:t.caSeq}),l.append(e)}let i=l.find("tr").length;for(;i<5;i++){let t=$("<tr/>");t.append($('<td class="UpDown ac" style="background-color:#fff;padding:0 0;" />').append($('<i class="fa-solid fa-up-down cursorPointer"></i>'))),t.append($('<td class="ac" style="background-color:#fff;" />').append($('<input type="text" class="w98p " name="caBankNm" style="border-width: 0px;background-color:transparent;">'))),t.append($('<td class="al" style="background-color:#fff;" />').append($('<input type="text" class="w98p " name="caOwnerNm" style="border-width: 0px;background-color:transparent;">'))),t.append($('<td calss="ac" style="background-color:#fff;" />').append($('<input type="text" class="w98p " name="caAccount" style="border-width: 0px;background-color:transparent;">'))),t.append($('<td class="ac" style="background-color:#fff;padding:0 0;" />').append($('<i class="fa-solid fa-square-minus btnRemoveBank" title="계좌 삭제" style="font-size: 16px;color:#898193;"></i>'))),l.append(t)}t.popbillEvent(),t.apiAccount()}else alert(e.message)}))})),e(this,"apiAccount",(()=>{let t=this;t.apiAccountList(null,(function(e){if(0==e.code){let n=$(".apiArea",t._code),a=e.data;for(let t=0;t<a.length;t++){let e=a[t],l=$("."+e.coaType,n);l.length>0&&($("input[name=coaDomain]",l).val(e.coaDomain),$("input[name=coaPort]",l).val(e.coaPort),$("input[name=coaId]",l).val(e.coaId),$("input[name=coaPwd]",l).val(""),$("input[name=coaEtc1]",l).val(e.coaEtc1),l.data("ROW",e))}}else alert(e.message)}))})),e(this,"popbillEvent",(()=>{let t=this;t.load(null,(function(e){if(0==e.code){let n=t._companyInfo=e.data,l=$(".popbill",t._code),o=$(".popbillAction",t._code);if("N"==n.cPopbillYn?(l.hide(),$(".btnPopbillJoin",t._code).on("click",(function(){let e=$("input[name=cBizNo]",t._code).val();e=e.replaceAll("-","");let n={ctl:"popbill",cmd:"checkIsMember",cBizNo:e};new a(t._const,n,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=e.data;if("미가입"==n.message){let e=$("template#popbillJoinDiv");t._parent.openLayer(e.html(),t.popbillJoinEvent)}else"가입"==n.message&&alert("이미 가입되어 있는 회원입니다.<br> 관리자에게 문의하시기 바랍니다.")}else alert("Popbill 시스템 통신이 원활 하지 않습니다.")}))})),$(".btnPopbillJoin",t._code).show(),$(".popbillPoint",t._code).hide()):(l.show(),$(".btnPopbillJoin",t._code).hide(),$(".popbillPoint",t._code).show()),"Y"==n.cPopbillYn){if($(".certInsert".$popbill).clone(),t._utils.checkEmptyNull(n.cCertExpiryDt)){let e={ctl:"popbill",cmd:"getTaxCertInfo",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=e.data;if(1==n.code){let e=n.message.expireDT;$(".certInfo",l).empty().text("인증서 만료일 : "+t._utils.dateformatStringToDate(e)),t.update({cCertExpiryDt:e.substring(0,8)},(function(){}))}}else alert("Popbill 시스템 통신이 원활 하지 않습니다.")}))}else{t._utils.currentDate(/-/g,"")>n.cCertExpiryDt?$(".certInfo",l).append('<span>인증서 만료일 : <span style="color:red; margin-right:10px;">'+t._utils.dateformatStringToDate(n.cCertExpiryDt)+"</span></span>"):$(".certInfo",l).empty().append("<span>인증서 만료일 : "+t._utils.dateformatStringToDate(n.cCertExpiryDt)+"</span>")}if("Y"==n.cFaxApplyYn)$(".faxSendNo",l).text(n.cFax);else{let e={ctl:"popbill",cmd:"faxCheckSenderNumber",cBizNo:$("input[name=cBizNo]",t._code).val(),cFax:$("input[name=cFax]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=e.data;1==n.code&&($(".certInfo",l).empty().text(n.message),t.update({cFaxApplyYn:"Y"},(function(){})))}else alert("Popbill 시스템 통신이 원활 하지 않습니다.")}))}let e={ctl:"popbill",cmd:"pointBalance",cBizNo:$("input[name=cBizNo]",t._code).val(),coaId:$("input[name=coaId]",l).val()};new a(t._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=e.data;1==n.code&&o.append('<span class="popbillPoint">잔여포인트 : '+t._utils.numberWithCommas(n.result)+" 원</span>")}else alert("Popbill 시스템 통신이 원활 하지 않습니다.")})),l.on("click",".certInsert",(function(){let e={ctl:"popbill",cmd:"certInsertUrl",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;window.open(n.result,"certInsertPop",t._utils.popWindowCenter(830,470)).focus()}else alert(e.message)}))})),l.on("click",".faxNoInsert",(function(){let e={ctl:"popbill",cmd:"faxSenderNumberMgrUrl",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;window.open(n.result,"faxInsertPop",t._utils.popWindowCenter(850,720)).focus()}else alert(e.message)}))})),$(".btnPopbillPaymentHistoryURL",l).on("click",(function(){let e={ctl:"popbill",cmd:"paymentURL",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;window.open(n.result,"pointCharge",t._utils.popWindowCenter(850,550)).focus()}else alert(e.message)}))})),$(".btnPopbillUseHistoryURL",l).on("click",(function(){let e={ctl:"popbill",cmd:"useHistoryURL",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;window.open(n.result,"pointCharge",t._utils.popWindowCenter(850,550)).focus()}else alert(e.message)}))})),$(".btnPopbillQuit",l).on("click",(function(){confirm('팝빌 연동 해지(탈퇴)를 진행 하시겠습니까?\n<span style="color:red;">해지시 먼저 포인트 환불을 진행 하십시오</span>',(function(e){if(e){let e=$("template#popbillQuitDiv");t._parent.openLayer(e.html(),t.popbillQuitEvent)}}),"연동 해지 신청")})),$(".btnPopbillWebUrl",l).on("click",(function(){let e={ctl:"popbill",cmd:"popbillWebUrl",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;window.open(n.result,"pointCharge",t._utils.popWindowCenter(850,550)).focus()}else alert(e.message)}))})),$(".btnPopbillChargeURL",l).on("click",(function(){let e={ctl:"popbill",cmd:"pointChargeURL",cBizNo:$("input[name=cBizNo]",t._code).val()};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;window.open(n.result,"pointCharge",t._utils.popWindowCenter(550,650)).focus()}else alert(e.message)}))})),e.cmd="taxinvoiceUnitCost",new a(t._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data;1==e.code&&$(".vatTh",l).append('<br/><span style="font-size:11px;font-weight: normal;">건당 : '+e.result+" 원</span>")}})),e.cmd="faxUnitCost",new a(t._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data;1==e.code?$(".faxTh",l).append('<br/><span style="font-size:11px;font-weight: normal;">건당 : '+e.result+" 원</span>"):alert(e.message)}}))}else{let e=$("input[name=cBizNo]",t._code).val();e=t._utils.getOnlyNumber(e);let n={ctl:"popbill",cmd:"checkIsMember",cBizNo:e},o=new a(t._const,n,{wapi:"user/ws",spinner:!0});o.ajaxformdata((function(t){1==t.data.code&&(n.cmd="certExpireDate",o.ajaxformdata((function(t){if(0==t.code){let e=t.data;1==e.code&&$(".certInfo",l).empty().text(e.message)}})))}))}}}))})),e(this,"popbillMemberEvent",((t,e)=>{const n=this,l=$(`#${t}`);n._utils.unSerializeObject(l,n._companyInfo),$("input[name=popbillId]",l).on("focusout",(function(){let t=$(this).val();if(t.trim().length>=6){let e={ctl:"popbill",cmd:"checkID",popbillId:t};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){0!=t.data.code?($("input[name=idCheck]",l).val("N"),$(this).css("border",""),alert("Popbill에 존재하지 않는 아이디 입니다.")):($("input[name=idCheck]",l).val("Y"),$(this).css("border","1px solid red"))}}))}else $(this).css("border","1px solid red")})),$(".popbillSave",l).on("click",(function(){let t=$("input[name=popbillId]",l).val(),e=$("input[name=idCheck]",l).val();if(n._utils.checkEmptyNull(t))return alert("아이디를 입력하십시오"),!1;if(t.trim().length<6)return alert("아이디는 6자리 이상 입력하십시오"),!1;if("Y"!=e)return alert("아이디를 다시 확인해보시기 바랍니다."),!1;let o={ctl:"company",cmd:"popbillSave",popbillId:t.trim()};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(n.popbillEvent(),n.apiAccount(),alert("저장 되었습니다."),$("body .btnClosePopLayer").trigger("click")):alert(t.message)}))}))})),e(this,"popbillJoinEvent",((t,e)=>{const n=this,l=$(`#${t}`);let o=/^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[~!@#$%^&*()_+]).{8,20}$/;n._utils.unSerializeObject(l,n._companyInfo),$("input[name=popbillId]",l).on("focusout",(function(){let t=$(this).val();if(t.trim().length>=8){let e={ctl:"popbill",cmd:"checkID",popbillId:t};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;0!=e.code?($("input[name=idCheck]",l).val("N"),$(this).css("border","1px solid red"),alert(e.message)):($("input[name=idCheck]",l).val("Y"),$(this).css("border",""))}}))}else $(this).css("border","1px solid red")})),$("input[name=popbillPwd]",l).on("focusout",(function(){let t=$(this).val();t.length<8||t.length>20?$(this).css("border","1px solid red"):o.test(t)?$(this).css("border",""):$(this).css("border","1px solid red")})),$("input[name=popbillPwdRe]",l).on("focusout",(function(){$("input[name=popbillPwd]",l).val()!=$(this).val()?$(this).css("border","1px solid red"):$(this).css("border","")})),$(".popbillJoin",l).on("click",(function(){let t=$("input[name=popbillId]",l).val(),e=$("input[name=popbillPwd]",l).val(),i=$("input[name=popbillPwdRe]",l).val(),s=$("input[name=idCheck]",l).val(),r=$("input[name=popbillContactName]",l).val(),c=$("input[name=popbillContactTel]",l).val();if(n._utils.checkEmptyNull(t))return alert("아이디를 입력하십시오"),!1;if(t.trim().length<8)return alert("아이디는 8자리 이상 입력하십시오"),!1;if("Y"!=s)return alert("이미 사용중인 아이디 입니다."),!1;if(e.length<8)return alert("비밀번호는 8자리 이상입력하십시오"),!1;if(n._utils.checkEmptyNull(e)||e!=i)return alert("비밀번호를 정확이 입력하십시오"),!1;if(!o.test(e))return alert("비밀번호는 영문, 숫자, 특수문자(~!@#$%^&*()_+) 포함 되어야 합니다."),!1;if(n._utils.checkEmptyNull(r))return alert("담당자 성명을 입력하십시오"),!1;if(n._utils.checkEmptyNull(c))return alert("담당자 전화번호를 입력하십시오"),!1;let d={ctl:"popbill",cmd:"join",popbillId:t.trim(),popbillPwd:e.trim(),popbillContactName:r.trim(),popbillContactTel:c.trim()};new a(n._const,d,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;1!=e.code?alert(e.message):(n.apiAccount(),n.popbillEvent(),alert("신청되었습니다."),$("body .btnClosePopLayer").trigger("click"))}}))}))})),e(this,"popbillQuitEvent",((t,e)=>{const n=this,l=$(`#${t}`);let o=$(".popbill",n._code),i={ctl:"popbill",cmd:"pointBalance",cBizNo:$("input[name=cBizNo]",n._code).val(),coaId:$("input[name=coaId]",o).val()};new a(n._const,i,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data;if(1==e.code&&e.result>0){alert("잔여 포인트가 남아 있습니다. popbill을 통하여 환불 받으신 후 해지 하시기 바랍니다.");let t=$('<a href="javascript:;" class="btnStyle05 btnPopbillRefund" style="margin-left:15px;">환불신청하러 가기</a>');t.on("click",(function(){let t={ctl:"popbill",cmd:"popbillWebUrl",coaId:$("input[name=coaId]",o).val()};new a(n._const,t,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){if(1==t.data.code){let e=t.data;window.open(e.message,"popbileSite",n._utils.popWindowCenter(1250,850)).focus()}}}))})),$(".reFund",l).append(t)}}})),$(".popbillQuit",l).on("click",(function(){let t=$("textarea[name=quitReason]",l).val(),e=$("input[name=coaId]",o).val();if(n._utils.checkEmptyNull(t))return alert("아이디를 입력하십시오"),!1;let i={ctl:"popbill",cmd:"quit",quitReason:t,coaId:e};new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;1!=e.code?alert(e.message):(alert("해지 되었습니다."),$("body .btnClosePopLayer").trigger("click"))}}))}))})),e(this,"purge",(()=>{console.log("employeeController purge")})),e(this,"reload",(()=>{console.log("employeeController reload")})),e(this,"load",((t,e)=>{let n={ctl:"company",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"company",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"mediaUpload",((t,e)=>{let n=new FormData;n.append("ctl","media"),n.append("cmd","upload"),n.append("directory","company"),n.append("authLevel",3),n.append("upfile",t),new a(this._const,n,{isasync:!1,wapi:"user/fws",spinner:!0}).ajaxfiledata((function(t){0==t.code?e(t.data):(alert(t.message),e(-9999))}))})),e(this,"accountDelete",((t,e)=>{let n={ctl:"company",cmd:"accountDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"accountInsert",((t,e)=>{let n={ctl:"company",cmd:"accountInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"accountUpdate",((t,e)=>{let n={ctl:"company",cmd:"accountUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"apiAccountList",((t,e)=>{let n={ctl:"company",cmd:"apiAccountList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"apiInfoSave",((t,e)=>{let n={ctl:"company",cmd:"apiAccountSave"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._fileSeq=null}},f=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){n.layerView((function(t){n._parent.openLayer(t,n.initNewLayer)})),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({eSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")}));let a=n._code.find(".searchWrapArea"),l=n._code.find(".dataHeadTable thead"),o=n._code.find(".pageInfoTfoot"),i=n._code.find(".dataListTable");a.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=a.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",a.find("input[name=orderculumn]").val(t),a.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(a),l.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(a,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let s=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(s)||o.find("select[name=rowsPerPage]").val(s),o.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),o.find("input[name=page]").val("1"),n.retrieve()})),i.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n._employee={},n.load({eSeq:t.eSeq},(function(t){if(0!=t.code)return alert("직원 데이터를 불러올 수 없습니다"),!1;n._employee=t.data,n.layerView((function(t){n._parent.openLayer(t,n.reloadLayer)}))}))})),i.on("click",".btnAuthInfo",(function(){let t=$(this).closest("tr").data("ROW");n.menuList({eSeq:t.eSeq},(function(e){if(0!=e.code)return alert("직원 데이터를 불러올 수 없습니다"),!1;n.layerAuthView((function(a){n._parent.openLayer(a,n.layerAuthViewEvent,{eSeq:t.eSeq,menuList:e.data})}))}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("employeeController purge")})),e(this,"reload",(()=>{console.log("employeeController reload")})),e(this,"tHeadOrderBy",((t,e)=>{t.closest("tr").find("img").attr("src","/images/btn/btn_sort2.png"),t.children("img").attr("src","DESC"==e.toUpperCase()?"/images/btn/btn_sort_dw.png":"/images/btn/btn_sort_up.png"),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val(),s=l.find("input[name=schValue]").val(),r=l.find("select[name=eOutYn]").val(),c={cuSeq:void 0,page:a,rows:n,orderColumn:o,orderType:i,eOutYn:r,searchColumn:"eNm",searchWord:s};t.list(c,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+" />");a.append('<td style="border:1px solid #dedede;" ><input type="checkbox" class="vm" name="eSeq" value="'+e.eSeq+'"/>'),a.append('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.eNm,"")+"</td>"),a.append('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.eRank,"")+"</td>"),a.append('<td style="border:1px solid #dedede;">'+n._utils.formatPhoneNumber(e.eTel,"")+"</td>"),a.append('<td style="border:1px solid #dedede;">'+("Y"==e.eManagerYn?'<span style="color:blue;">관리자</span>':"직원")+"</td>"),a.append('<td style="border:1px solid #dedede;">'+("Y"==e.eLoginYn?"허용":"불가")+"</td>"),a.append('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.eId,"")+"</td>"),a.append('<td style="border:1px solid #dedede;">'+("N"==e.eOutYn?"재직중":"퇴사")+"</td>"),a.append($('<td style="border:1px solid #dedede;" class="al"/>').text(n._utils.strMaxCuttion(n._utils.nullTostring(e.eMemo,""),20)).attr("title",e.eMemo)),a.append('<td style="border:1px solid #dedede;">'+e.creDate+"</td>"),a.append('<td style="border:1px solid #dedede;"><i class="fa-brands fa-elementor cursorPointer btnAuthInfo" title="메뉴 권한 설정"></i></td>'),a.append('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square btnOpenInfo cursorPointer" style="font-size:14px;" title="직원정보 수정"></i></td>'),a.data("ROW",e),a.appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"employee",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"employee",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"layerView",(t=>{var e='<div class="mw_defalut" style="width:680px;" id=""><div class="mw_title" id="handle">';e+='<h1 class="mw_title_mid">',e+='<span class="title">직원 등록</span>',e+='<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>',e+="</h1>",e+="</div>",e+='<div class="mw_ctWrap">',e+='<div class="mw_contents">',e+='<div style="height:'+("Y"==this._const.__MANAGER_YN?"430":"320")+'px;overflow-y:auto;padding:2px;">',e+='<div class="bottonWrap">',e+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">',e+="<caption></caption>",e+="<colgroup>",e+='<col width="50%">',e+='<col width="50%">',e+="</colgroup>",e+="<tbody>",e+="<tr>",e+="<th>",e+='<div class="al passwordChange"></div>',e+="</th>",e+="<th>",e+='<div class="ar"><a href="javascript:void(0);" class="btnSearch employeeSave">저장</a></div>',e+="</th>",e+="</tr>",e+="</tbody>",e+="</table>",e+="</div>",e+='<div class="searchWrap">',e+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">',e+="<caption></caption>",e+="<colgroup>",e+='<col width="60px">',e+='<col width="auto">',e+='<col width="60px">',e+='<col width="auto">',e+="</colgroup>",e+="<tbody>",e+="<tr>",e+='<th class="txt_r"><span style="color: red;">*</span> 이름</th>',e+='<td><div class="inputTextCleanDiv"><input type="text" name="eNm" style="width:240px;" requiremsg="이름"><div class="inputTextClean"><span>×</span></div></div></td>',e+='<th class="txt_r">직급</th>',e+='<td><div class="inputTextCleanDiv"><input type="text" name="eRank" style="width:240px;"><div class="inputTextClean"><span>×</span></div></div></td>',e+="<tr>",e+='<th class="txt_r">담당분야</th>',e+='<td><div class="inputTextCleanDiv"><input type="text" name="eTakeCharge" style="width:240px;" placeholder="예시)정산,생산,관리,검수"><div class="inputTextClean"><span>×</span></div></div></td>',e+='<th class="txt_r"><span style="color: red;">*</span> 전화번호</th>',e+='<td><div class="inputTextCleanDiv"><input type="text" name="eTel" style="width:240px;" requiremsg="eTel" vtype="phone"><div class="inputTextClean"><span>×</span></div></div></td>',e+="</tr>",e+="<tr>",e+='<th class="txt_r">메모</th>',e+='<td colspan="3"><textarea name="eMemo" class="w100p" rows="1"></textarea></td>',e+="</tr></table></div>",e+='<div class="searchWrap employeeAuthTr">',e+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">',e+="<caption></caption>",e+="<colgroup>",e+='<col width="60px">',e+='<col width="30%">',e+='<col width="50px">',e+='<col width="auto">',e+="</colgroup>",e+="<tbody>",e+='<tr><th class="txt_c" colspan="4">권한</th></tr>',e+="<tr>",e+='<th class="txt_r">접속권한</th>',e+='<td><select name="eLoginYn"><option value="N">미사용</option><option value="Y">사용</option></select></td>',e+='<th class="txt_r">담당장비</th>',e+='<td><span class="eqNms f_lt" style="width:75%;margin: 5px 0px;"></span><a class="btnStyle03 f_rt eqChoice" href="javascript:void(0);">장비선택</a></td>',e+="</tr>",e+="<tr>",e+="<tr>",e+='<th class="txt_r">아이디</th>',e+='<td><input type="text" name="eId" class="w100p" placeholder="예시)kprintfactory" autocomplete="false"></td>',e+='<th class="txt_r">비밀번호</th>',e+='<td><input type="password" name="ePwd" class="w35p"  vtype="password" placeholder="비밀번호" autocomplete="false"> <input type="password" name="reEPwd" class="w35p mr5" placeholder="비밀번호 확인"><a class="btnStyle03 btnChangePwd f_rt" href="javascript:void(0);">변경</a></td>',e+="</tr>",e+="<tr>",e+='<th class="txt_r">권한</th>',e+='<td><select name="eManagerYn"><option value="N">직원</option><option value="Y">관리자</option></select></td>',e+='<th class="txt_r">재직여부</th>',e+='<td><select name="eOutYn"><option value="N">재직중</option><option value="Y">퇴사</option></select></td>',e+="</tr></table></div>",e+='<div class="searchWrap">',e+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">',e+="<caption></caption>",e+="<colgroup>",e+='<col width="60px">',e+='<col width="auto">',e+='<col width="50px">',e+='<col width="auto">',e+="</colgroup>",e+="<tbody>",e+='<tr><th class="txt_c">메세지</th>',e+='<th colspan="3" class="al"><div class="mw_checkbox"><input type="checkbox" name="epTypeBC" id="epTypeBC" value="Y">&nbsp;&nbsp;수주 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="checkbox" name="epTypeAC" id="epTypeAC" value="Y">&nbsp;&nbsp; 공정</div></th>',e+="</tr>",e+="</tbody>",e+="</table>",e+="</div>",t(e+="</div></div></div></div>")})),e(this,"initNewLayer",(t=>{const e=this;let n=$(`#${t}`);$(`#${t} .title`).text("직원 등록"),$(`#${t} .btnChangePwd`).hide(),$(`#${t} .eqChoice`).on("click",(function(){let t=$("template#eqChoiceDiv");e._parent.openLayer(t.html(),e.layerEqChoiceViewEvent,void 0,n)})),n.on("change","select[name=eLoginYn]",(function(){"Y"==$(this).val()?$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",n).removeAttr("readonly").removeClass("readonly"):$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",n).attr("readonly","readonly").addClass("readonly")})),$("select[name=eLoginYn]",n).trigger("change"),e._utils.focusEvent($("input[name=eTel]",`#${t}`),"tel"),$(`#${t} .employeeSave`).on("click",(function(a){let l=$("input[name=eNm]",`#${t}`).val(),o=$("input[name=eTel]",`#${t}`).val(),i=$("select[name=eManagerYn]",`#${t}`).val(),s=$("select[name=eOutYn]",`#${t}`).val(),r=$("select[name=eLoginYn]",`#${t}`).val(),c=$("input[name=eRank]",`#${t}`).val(),d=$("input[name=eTakeCharge]",`#${t}`).val(),p=$("input[name=ePwd]",`#${t}`).val(),u=$("input[name=reEPwd]",`#${t}`).val(),m=$("input[name=eId]",`#${t}`).val(),f=$("textarea[name=eMemo]",`#${t}`).val();if(e._utils.checkRequired(`#${t}`)){if("Y"==r){if(""==m)return alert("아이디를 입력해 주세요"),!1;if(""==p)return alert("비밀번호를 입력해 주세요"),!1;if(""!=p&&p!=u)return alert("비밀번호를 확인해 주세요"),!1}let a={eNm:l,eTel:o,eManagerYn:i,eOutYn:s,eLoginYn:r,eRank:c,eTakeCharge:d,ePwd:p,eId:m,eMemo:f},h=$(".eqNms",n).data();a.equipmentInfo=null!=h?JSON.stringify(h.eqInfo):"[]";let g=[{epCd:"A",epType:"A",epYn:$("input[name=epTypeAA]:checked",`#${t}`).val()??"N"},{epCd:"A",epType:"B",epYn:$("input[name=epTypeAB]:checked",`#${t}`).val()??"N"},{epCd:"A",epType:"C",epYn:$("input[name=epTypeAC]:checked",`#${t}`).val()??"N"},{epCd:"B",epType:"A",epYn:$("input[name=epTypeBA]:checked",`#${t}`).val()??"N"},{epCd:"B",epType:"B",epYn:$("input[name=epTypeBB]:checked",`#${t}`).val()??"N"},{epCd:"B",epType:"C",epYn:$("input[name=epTypeBC]:checked",`#${t}`).val()??"N"}];e.insert(a,(function(t){if(0==t.code){let n={eSeq:t.data.eSeq,pushJson:JSON.stringify(g)};e.setpush(n,(function(t){console.log(t)})),$("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("등록되었습니다.")}else alert("등록에 실패하였습니다.")}))}})).text("저장")})),e(this,"reloadLayer",(t=>{const e=this;let n=$(`#${t}`);$(`#${t} .title`).text("직원 수정"),"N"==e._const.__MANAGER_YN&&$(`#${t} .employeeAuthTr`).hide();let a=[],l=[],o=e._employee.equipmentInfo;for(let i=0;i<o.length;i++)a.push(o[i]),l.push(o[i].eqNm);if($(".eqNms",n).data({eqInfo:a}).text(l.join(",")),$(`#${t} .eqChoice`).on("click",(function(){let t=$("template#eqChoiceDiv");e._parent.openLayer(t.html(),e.layerEqChoiceViewEvent,void 0,n)})),"N"==e._employee.eLoginYn||$(`#${t} .btnChangePwd`).on("click",(function(n){let a=$("input[name=ePwd]",`#${t}`).val(),l=$("input[name=reEPwd]",`#${t}`).val();if(""==a.trim())return alert("비밀번호를 입력해 주세요"),!1;if(a!=l)return alert("비밀번호를 확인해 주세요"),!1;let o={changepwd:"N",eSeq:e._employee.eSeq,ePwd:a};e.changepwd(o,(function(e){0==e.code?($("input[name=ePwd], input[name=reEPwd]",`#${t}`).val(""),alert("변경되었습니다")):alert("변경 실패하였습니다")}))})).show(),0===Object.keys(e._employee).length&&e._employee.constructor===Object)return alert("직원 데이터를 불러올 수 없습니다"),!1;$("input[name=eNm]",`#${t}`).val(e._employee.eNm),$("input[name=eTel]",`#${t}`).val(e._employee.eTel),$("select[name=eManagerYn]",`#${t}`).val(e._employee.eManagerYn),$("select[name=eOutYn]",`#${t}`).val(e._employee.eOutYn),$("select[name=eLoginYn]",`#${t}`).val(e._employee.eLoginYn),$("input[name=eRank]",`#${t}`).val(e._employee.eRank),$("input[name=eTakeCharge]",`#${t}`).val(e._employee.eTakeCharge),"Y"==e._employee.eLoginYn&&$("input[name=eId]",`#${t}`).val(e._employee.eId).attr("disabled",!0),$("textarea[name=eMemo]",`#${t}`).val(e._employee.eMemo),e._utils.focusEvent($("input[name=eTel]",`#${t}`),"tel"),n.on("change","select[name=eLoginYn]",(function(){"Y"==$(this).val()?"N"==e._employee.eLoginYn&&$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",n).removeAttr("readonly").removeClass("readonly"):$("input[name=eId] ,input[name=ePwd], input[name=reEPwd]",n).attr("readonly","readonly").addClass("readonly")})),$("select[name=eLoginYn]",n).trigger("change");for(let i in e._employee.pushInfo){let n=e._employee.pushInfo[i];$(`input[name=epType${n.epCd}${n.epType}][value="${n.epYn}"]`,`#${t}`).prop("checked",!0)}$(`#${t} .employeeSave`).data({eSeq:e._employee.eSeq}).on("click",(function(a){let l=$(this).data(),o=$("input[name=eNm]",`#${t}`).val(),i=$("input[name=eTel]",`#${t}`).val(),s=$("select[name=eManagerYn]",`#${t}`).val(),r=$("select[name=eOutYn]",`#${t}`).val(),c=$("select[name=eLoginYn]",`#${t}`).val(),d=$("input[name=eRank]",`#${t}`).val(),p=$("input[name=eTakeCharge]",`#${t}`).val(),u=$("input[name=ePwd]",`#${t}`).val(),m=$("input[name=reEPwd]",`#${t}`).val(),f=$("input[name=eId]",`#${t}`).val(),h=$("textarea[name=eMemo]",`#${t}`).val();if(!l.eSeq)return alert("직원코드가 없어 수정불가합니다"),!1;if(""==o)return alert("이름을 입력해 주세요"),!1;if("Y"==c){if(""==f)return alert("아이디를 입력해 주세요"),!1;if("N"==e._employee.eLoginYn&&""==u)return alert("비밀번호를 입력하세요"),!1;if(u!=m)return alert("비밀번호가 일치하지 않습니다"),!1}let g={eSeq:l.eSeq,eNm:o,eTel:i,eManagerYn:s,eOutYn:r,eLoginYn:c,eRank:d,eTakeCharge:p,ePwd:u,eId:f,eMemo:h},_=$(".eqNms",n).data();g.equipmentInfo=null!=_?JSON.stringify(_.eqInfo):"[]";let w=[{epCd:"A",epType:"A",epYn:$("input[name=epTypeAA]:checked",`#${t}`).val()??"N"},{epCd:"A",epType:"B",epYn:$("input[name=epTypeAB]:checked",`#${t}`).val()??"N"},{epCd:"A",epType:"C",epYn:$("input[name=epTypeAC]:checked",`#${t}`).val()??"N"},{epCd:"B",epType:"A",epYn:$("input[name=epTypeBA]:checked",`#${t}`).val()??"N"},{epCd:"B",epType:"B",epYn:$("input[name=epTypeBB]:checked",`#${t}`).val()??"N"},{epCd:"B",epType:"C",epYn:$("input[name=epTypeBC]:checked",`#${t}`).val()??"N"}];e.update(g,(function(t){if(0==t.code){let t={eSeq:l.eSeq,pushJson:JSON.stringify(w)};e.setpush(t,(function(t){console.log(t)})),$(".btnClosePopLayer",n).trigger("click"),e.retrieve(),alert("수정되었습니다.")}else alert("수정에 실패하였습니다.")}))})).text("수정")})),e(this,"layerEqChoiceViewEvent",((t,e,n)=>{let a=$(`#${t}`),l=$("table tbody.eqList",a);this.eqList({page:1,rows:9999},(function(t){if(0==t.code){let e=[],a=$(".eqNms",n).data("eqInfo");if(null!=a)for(let t=0;t<a.length;t++)e.push(a[t].eqSeq);for(let n=0;n<t.data.length;n++){let a=t.data[n],o=$("<tr/>"),i=e.indexOf(a.eqSeq)>-1?"checked":"";o.append($('<td><input type="checkbox" name="eqSeq" value="'+a.eqSeq+'" '+i+"></td>")),o.append($('<td class="al" />').text(a.eqNm)),o.append($('<td class="ac" />').text(a.eqProcess)),o.append($('<td class="ac" />').text(a.eqEmployee)),o.data(a),l.append(o)}}})),a.on("click",".employeeApply",(function(){let t=$("input[name=eqSeq]:checked",l),e=[],o=[];for(let n=0;n<t.length;n++){let a=$(t[n]).closest("tr").data();e.push({eqSeq:a.eqSeq,eeInchargeYn:"Y"}),o.push(a.eqNm)}$(".eqNms",n).data({eqInfo:e}).text(o.join(",")),$(".btnClosePopLayer",a).trigger("click")}))})),e(this,"insert",((t,e)=>{let n={ctl:"employee",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"layerAuthView",(t=>{t('<div class="mw_defalut" style="width:450px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">권한 설정</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="height:485px;overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="50%"><col width="50%"></colgroup><tbody><tr><th><div class="al"></div></th><th><div class="ar"><a href="javascript:void(0);" class="btnSearch employeeAuthSave">저장</a></div></th></tr></tbody></table></div><div class="searchWrap pt10"><table cellpadding="0" cellspacing="0" border="0" summary="" class="listTbType01 tr_nohover mb10 tablScrollDisplay scrollTbThead" style="border-top: 1px solid #9ac7e1 !important;"><caption></caption><colgroup><col width="150px"><col width="25px"><col width="200px"></colgroup><thead><tr><th class="txt_c" style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;">대분류</td><th class="txt_c" style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;border-right-width: 0 !important;"><input type="checkbox" name="menuAll"></th><th class="txt_c last" style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;border-left-width: 0 !important;">소분류</th><tr></thead><tbody class="menuList"></tbody></table></div></div></div></div></div>')})),e(this,"layerAuthViewEvent",((t,e)=>{const n=this;let l=$(`#${t}`),o=e.eSeq,i=e.menuList;$(".title",l).text("직원 권한 설정");let s=$(".menuList",l);new a(n._const,{ctl:"menu",cmd:"companyMenu"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){for(let e=0;e<t.data.length;e++){let n=t.data[e],a=!1;for(let t=0;t<i.length;t++)if(i[t].cmSeq==n.cmSeq){a=!0;break}let l=$("<tr/>");l.append($('<td class="al pl10" style="">'+n.mgNm+"</td>")),l.append($('<td style="border:1px solid #9ac7e1 !important;border-right-width: 0 !important;"><input type="checkbox" name="cmSeq" value="'+n.cmSeq+'" '+(a?" checked":"")+"></td>")),l.append($('<td class="al" style="border:1px solid #9ac7e1 !important;border-left-width: 0 !important;border-right-width: 0 !important;">'+n.mNm+"</td>")),l.data(n),s.append(l)}!function(t,e){let n={},a=t.children(),l=null;for(let o=a.length-1;o>=0;o--){let t=$(a[o]),i=t.data();if(null==i.mgSeq)continue;let s=i.mgSeq;if(null==l)for(let a=0;a<e.length;a++){n[e[a]]=1;let l=$(t.children()).eq(e[a]).attr("style");0==a?$(t.children()).eq(e[a]).attr("style",(null==l?"":l)+"background-color:#deebf2;border:1px solid #9ac7e1 !important;border-left-width: 0 !important;"):$(t.children()).eq(e[a]).attr("style",(null==l?"":l)+"background-color:#deebf2;border:1px solid #9ac7e1 !important;")}else{let a=l.data().mgSeq;for(let o=e.length-1;o>=0;o--){let i=$(t.children()).eq(e[o]).attr("style");0==o?$(t.children()).eq(e[o]).attr("style",(null==i?"":i)+"background-color:#deebf2;border:1px solid #9ac7e1 !important;border-left-width: 0 !important;"):$(t.children()).eq(e[o]).attr("style",(null==i?"":i)+"background-color:#deebf2;border:1px solid #9ac7e1 !important;"),s==a&&$(l.children()).eq(e[o]).text()==$(t.children()).eq(e[o]).text()?($(t.children()).eq(e[o]).attr("rowspan",n[e[o]]+1),$(l.children()).eq(e[o]).remove(),n[e[o]]++):n[e[o]]=1}}l=$(a[o])}}(s,[0])}})),l.find("input[name=menuAll]").on("click",(function(t){t.stopPropagation();let e=s.find("input[name=cmSeq]"),n=$(this).is(":checked");for(let a=0;a<e.length;a++){let t=$(e[a]);t.is(":checked")!=n&&t.trigger("click")}})),l.on("click",".employeeAuthSave",(function(t){let e=[],l=s.find("input[name=cmSeq]:checked");for(let n=0;n<l.length;n++)e.push($(l[n]).val());let i={ctl:"menu",cmd:"employeeSet",eSeq:o,menuInfo:JSON.stringify(e)};new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),alert("저장되었습니다.")):alert(t.message)}))}))})),e(this,"setpush",((t,e)=>{let n={ctl:"employee",cmd:"pushSet"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"changepwd",((t,e)=>{let n={ctl:"employee",cmd:"pwdChange"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"employee",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"employee",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"menuList",((t,e)=>{let n={ctl:"menu",cmd:"employeeMenu"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"eqList",((t,e)=>{let n={ctl:"equipment",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},h=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){n.layerView((function(t){n._parent.openLayer(t,n.initNewLayer)})),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cwSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({cwSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cwSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));new a(n._const,{ctl:"process",cmd:"companyProcessList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=spSeq]",n._code);e.empty(),e.append($('<option value="">전체</option>'));for(let n=0;n<t.data.length;n++){let a=$('<option value="'+t.data[n].spSeq+'">'+t.data[n].spNm+"</option>");e.append(a)}}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.companyLoad({cwSeq:t.cwSeq},(function(t){if(0!=t.code)return alert("공정 데이터를 불러올 수 없습니다"),!1;n.layerView((function(e){n._parent.openLayer(e,n.reloadLayer,t.data)}))}))})),s.on("click",".workCopy",(function(){let t=$(this).closest("tr").data("ROW");n.companyLoad({cwSeq:t.cwSeq},(function(t){if(0!=t.code)return alert("공정 데이터를 불러올 수 없습니다"),!1;n.layerView((function(e){n._parent.openLayer(e,n.copyLayer,t.data)}))}))})),n.retrieve(),n._stndList=[],n.stndList((function(t){0==t.code?n._stndList=t.data:alert("표준공정 불러오기 실패")}))})),e(this,"purge",(()=>{console.log("processController purge")})),e(this,"reload",(()=>{console.log("processController reload")})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val(),s=l.find("input[name=schValue]").val(),r=l.find("select[name=spSeq]").val(),c={cuSeq:void 0,page:a,rows:n,orderColumn:o,orderType:i,searchColumn:"cwNm",searchWord:s};t._utils.checkEmptyNull(r)||(c.spSeq=r),t.list(c,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr"+("N"==e.useYn?' style="color:#808080"':"")+">");a.append($('<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="cwSeq" value="'+e.cwSeq+'"></td>')),a.append($('<td style="border:1px solid #dedede;"/>').append(n._utils.nullTostring(e.spNm,""))),a.append($('<td style="border:1px solid #dedede;" class="al pl5"/>').append(n._utils.nullTostring(e.cwNm,""))),a.append($('<td style="border:1px solid #dedede;" class="ac"/>').append(n._utils.nullTostring(e.sort,""))),a.append($('<td style="border:1px solid #dedede;" class="al"/>').append(n._utils.nullTostring(e.publicOption,""))),a.append($('<td style="border:1px solid #dedede;" class="al"/>').append(n._utils.nullTostring(e.privateOption,""))),a.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-clone workCopy cursorPointer" title="작업을 복사하여 새로운 작업으로 등록 합니다."></i></td>')),a.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="작업 수정" style="font-size:14px;"></i></td>')),a.data("ROW",e),a.appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"process",cmd:"companyList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"process",cmd:"companyDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"stndList",(t=>{new a(this._const,{ctl:"process",cmd:"stndProcessList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"list",((t,e)=>{let n={ctl:"process",cmd:"companyList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"layerView",(t=>{const e=this;var n='<div class="mw_defalut" style="width:550px;" id=""><div class="mw_title" id="handle">';n+='<h1 class="mw_title_mid">',n+='<span class="title">공정 등록</span>',n+='<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>',n+="</h1>",n+="</div>",n+='<div class="mw_ctWrap">',n+='<div class="mw_contents">',n+='<div style="height:620px;overflow-y:auto;padding:2px;">',n+='<div class="bottonWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="auto">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+="<th>",n+='<div class="ar"><a href="#" class="btnSearch processSave">저장</a></div>',n+="</th>",n+="</tr>",n+="</tbody>",n+="</table>",n+="</div>",n+='<div class="searchWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="50px">',n+='<col width="auto">',n+='<col width="50px">',n+='<col width="auto">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+='<th class="txt_r">기준공정</th>',n+="<td>",n+='<select name="spSeq" class="w98p" requiremsg="기준공정">',0==e._stndList.length&&(n+='<option value="">데이터없음</option>');for(let a in e._stndList)n+='<option value="'+e._stndList[a].spSeq+'" '+(0==a?"selected":"")+">"+e._stndList[a].spNm+"</option>";if(n+="</select>",n+="</td>",n+='<th class="txt_r" title="예시가 없는 경우 직접등록을 선택하여 설정 할 수 있습니다">작업예시</th>',n+="<td>",n+='<select name="swSeq" class="w98p">',0==e._stndList[0].workInfo.length)n+='<option value="" title="예시가 없는 경우 직접등록을 선택하여 설정 할 수 있습니다">직접등록</option>';else for(let a in e._stndList[0].workInfo)n+='<option value="'+(e._stndList[0].workInfo[a].swSeq??"")+'" '+(0==a?"selected":"")+">"+e._stndList[0].workInfo[a].swNm+"</option>";n+="</select>",n+="</td>",n+="</tr>",n+="</tbody>",n+="</table></div>",n+='<div class="searchWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover" style="margin-bottom: 0px !important;">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="50px">',n+='<col width="150px">',n+='<col width="60px">',n+='<col width="50px">',n+='<col width="70px">',n+='<col width="auto">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+='<th class="txt_r">작업명</th>',n+='<td><input type="text" name="cwNm" class="w100p" requiremsg="작업명"></td>',n+='<th class="txt_r">노출 순서</th>',n+='<td class="al"><input type="text" name="sort" class="w100p"></td>',n+='<td class="al" colspan="2" style="padding-left:20px;"><div class="mw_checkbox"><input type="checkbox" name="useYn" id="useYn" value="Y" checked><label for="useYn">수주 등록시 노출 여부</label></div></td>',n+="</tr>",n+="</tbody>",n+="</table>",n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover" style="margin-bottom: 0px !important;">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="15px">',n+='<col width="90px">',n+='<col width="55px">',n+='<col width="65px">',n+='<col width="auto">',n+='<col width="55px">',n+='<col width="20px">',n+="</colgroup>",n+="<thead>",n+='<tr style="height: 20px;">',n+='<th class="ac" colspan="6" style="background-color: #b3d9f3a1 !important;height: 20px; color:#3b627f !important;"> 주문 세부사항</th>',n+='<td style="height: 20px;"><a href="javascript:void(0);" class="plusbtn"><i class="fa-solid fa-square-plus" style="color:#2a51d5;font-size: 18px;"></i></a></td>',n+="</tr>",n+="<tr>",n+="<th></th>",n+='<th class="ac">항목명</th>',n+='<th class="ac">비용적용</th>',n+='<th class="ac">입력유형</th>',n+='<th class="ac">세부설정</th>',n+='<th class="ac">필수적용</th>',n+="<td></td>",n+="</tr>",n+="</thead>",n+='<tbody class="orderOption"></tbody>',n+="</table>",n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="15px">',n+='<col width="90px">',n+='<col width="55px">',n+='<col width="65px">',n+='<col width="auto">',n+='<col width="55px">',n+='<col width="20px">',n+="</colgroup>",n+="<thead>",n+='<tr style="height: 20px;">',n+='<th class="ac" colspan="6" style="background-color: #b3d9f3a1 !important;height: 20px; color:#3b627f !important;"> 작업 세부사항 </th>',n+='<td style="height: 20px;"><a href="javascript:void(0);" class="plusbtn"><i class="fa-solid fa-square-plus" style="color:#2a51d5;font-size: 18px;"></i></a></td>',n+="</tr>",n+="<tr>",n+="<th ></th>",n+='<th class="ac">항목명</th>',n+='<th class="ac">비용적용</th>',n+='<th class="ac">입력유형</th>',n+='<th class="ac">세부설정</th>',n+='<th class="ac">필수적용</th>',n+="<td></td>",n+="</tr>",n+="</thead>",n+='<tbody class="workOption">',n+="</tbody>",n+="</table>",n+="</div>",t(n+="</div></div></div></div>")})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".title",e).text("작업 등록"),$(".processSave",e).text("등록"),this.workEvent(e)})),e(this,"reloadLayer",((t,e)=>{let n=this,a=$("#"+t);$(".title",a).text("작업 수정"),$(".processSave",a).text("수정"),a.append('<input type="hidden" name="cwSeq">');let l=$(".orderOption",a),o=$(".workOption",a);for(let i=0;i<e.optionInfo.length;i++){let t=e.optionInfo[i];n.workAdd("Y"==t.cwoOrderYn?l:o,t)}n.workEvent(a,e),n._utils.unSerializeObject(a,e),$("input[name=useYn]",a).prop("checked","Y"==e.useYn),$("select[name=spSeq]",a).trigger("change"),$("select[name=spSeq]",a).attr("readonly",!0),$("select[name=swSeq]",a).attr("readonly",!0)})),e(this,"copyLayer",((t,e)=>{let n=this,a=$("#"+t);$(".title",a).text("작업 등록"),$(".processSave",a).text("등록");let l=$(".orderOption",a),o=$(".workOption",a);n._utils.unSerializeObject(a,e);for(let i=0;i<e.optionInfo.length;i++){let t=e.optionInfo[i];delete t.cwoSeq,n.workAdd("Y"==t.cwoOrderYn?l:o,t)}n.workEvent(a,n._data)})),e(this,"workAdd",((t,e)=>{let n=this,a=$("<tr/>");a.append($('<th class="ac UpDown"><i class="fa-solid fa-up-down cursorPointer"></i></th>')),a.append($("<td/>").append('<input type="hidden" name="cwoSeq"/>').append('<input type="text" name="cwoNm" class="w100p" requiremsg="항목명" />')),a.append($('<td class="ac" />').append('<select name="cwoCostYn"  class="w100p" title="정산시 비용이 발생 할수 있는 경우 선택 하십시오" /><option value="N">제외</option><option value="Y">비용</option></select>')),a.append($("<td/>").append($('<select name="cwoInputCd" class="w100p" requiremsg="입력유형"><option value="T" selected>텍스트</option><option value="A">선택형</option><option value="C">수량</option>\x3c!-- option value="W">무게</option --\x3e<option value="M">용량</option><option value="L">길이</option></select>')));let l=$('<td class="cwoData"/>');if(null!=e&&"A"==e.cwoInputCd){let t=$('<input type="text" name="cwoData" class="w90p" requiremsg="선택값" placeholder="콤마(,)로 구분">'),a=$('<input type="hidden" name="cwoDataSub">'),o=$('<i class="fa-solid fa-share-nodes optionDataSub cursorPointer" style="margin-left:5px" title="선택형에 저장된 하위 선택 사항을 설정 할 수 있습니다."></i>');null!=e&&null!=e.cwoData&&t.val(e.cwoData),null==e||n._utils.checkEmptyNull(e.cwoDataSub)||(o.css("color","blue"),t.attr("readonly",!0).css("background-color","#eee").attr("title","오른쪽에 상세설정 아이콘버튼을 통하여 설정하시기 바랍니다")),l.append(t),l.append(a),l.append(o)}a.append(l),a.append($('<td><select name="cwoMustYn" class="w100p" title="반드시 입력을 받아야 될 경우 필수입력 선택"><option value="N" selected>일반</option><option value="Y">필수</option></select></td>')),a.append($('<td><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus" style="color:#8071bb;font-size: 18px;"></i></td>')),null!=e&&n._utils.unSerializeObject(a,e),a.data("ROW",e),t.append(a)})),e(this,"workEvent",((t,e)=>{let n=this,l=$(".orderOption",t),o=$(".workOption",t);$("select[name=spSeq]",t).on("change",(function(a){let l=$(this).val();for(let o in n._stndList){let a=n._stndList[o];if(a.spSeq==l){$("select[name=swSeq]",t).empty();for(let l in a.workInfo){let o=a.workInfo[l],i=$('<option value="">'+o.swNm+"</option>");n._utils.checkEmptyNull(o.swSeq)||i.val(o.swSeq),null!=e&&o.swSeq==e.swSeq&&i.prop("selected",!0),$("select[name=swSeq]",t).append(i)}null==e&&$("select[name=swSeq]",t).trigger("change");break}}})),t.on("change","select[name=swSeq]",(function(e){let i=$(this).val(),s=$("input[name=cwNm]",t);if(""!=i){s.val($(this).find("option:selected").text()),l.empty(),o.empty();let t={ctl:"process",cmd:"stndLoad",swSeq:i};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code)for(let e=0;e<t.data.optionInfo.length;e++){let a=t.data.optionInfo[e];n.workAdd("Y"==a.cwoOrderYn?l:o,a)}else alert(t.message)}))}})),t.on("change","select[name=cwoInputCd]",(function(t){let e=$(this).val(),a=$(this).closest("tr");if("A"==e){let t=$('<input type="text" name="cwoData" class="w90p" requiremsg="선택값" placeholder="콤마(,)로 구분">'),e=$('<input type="hidden" name="cwoDataSub">'),l=$('<i class="fa-solid fa-share-nodes optionDataSub cursorPointer" style="margin-left:5px" title="선택형에 저장된 하위 선택 사항을 설정 할 수 있습니다."></i>'),o=a.data("ROW");null!=o&&null!=o.cwoData&&t.val(o.cwoData),null==o||n._utils.checkEmptyNull(o.cwoDataSub)||(l.css("color","blue"),t.attr("readonly",!0).css("background-color","#ddd").attr("title","오른쪽에 상세설정 아이콘버튼을 통하여 설정하시기 바랍니다")),$(".cwoData",a).append(t),$(".cwoData",a).append(e),$(".cwoData",a).append(l)}else $(".cwoData",a).empty()})),l.sortable({handle:".UpDown",items:"tr"}),o.sortable({handle:".UpDown",items:"tr"}),$(t).on("click",".plusbtn",(function(t){let e=$(this).closest("table"),a=$("tbody",e);n.workAdd(a)})),$(t).on("click",".minusbtn",(function(t){$(this).closest("tr").remove()})),$(t).on("click",".optionDataSub",(function(t){let e=$(this).closest("tr"),a=e.data("ROW");null==a&&(a={}),a.cwoData=$("input[name=cwoData]",e).val(),n.layerOptionDetailView((function(t){n._parent.openLayer(t,n.layerOptionDetailViewEvent,a,e)}))})),$(".processSave",t).on("click",(function(e){if(n._utils.checkRequired(t)){let e=0==$("input[name=cwSeq]",t).length?void 0:$("input[name=cwSeq]",t).val(),a=$("select[name=spSeq]",t).val(),i=$("input[name=cwNm]",t).val().trim(),s=$("select[name=swSeq]",t).val(),r=$("input[name=useYn]:checked",t).val()??"N",c=$("input[name=sort]",t).val()??"0",d=[];for(let t=0;t<l.children().length;t++){let e=n._utils.serializeObject($(l.children().eq(t)));if(e.cwoOrderYn="Y",n._utils.checkEmptyNull(e.cwoNm))return alert("세부사항에 들어갈 항목 이름을 입력하세요"),!1;if("A"==e.cwoInputCd){if(n._utils.checkEmptyNull(e.cwoData))return alert(e.cwoNm+"에 들어갈 선택 값을 입력하십시오\n예) 제공,미제공 "),!1;if(e.cwoData.indexOf("→")>-1)return alert(e.cwoNm+'는 "→" 문자는 사용 할 수 없습니다.'),!1}e.sort=1+t,d.push(e)}for(let t=0;t<o.children().length;t++){let e=n._utils.serializeObject($(o.children().eq(t)));if(e.cwoOrderYn="N",n._utils.checkEmptyNull(e.cwoNm))return alert("세부사항에 들어갈 항목 이름을 입력하세요"),!1;if("A"==e.cwoInputCd&&n._utils.checkEmptyNull(e.cwoData))return alert(e.cwoNm+"에 들어갈 선택 값을 입력하십시오\n예) 제공,미제공 "),!1;e.sort=1+t,d.push(e)}let p="",u={spSeq:a,swSeq:s,cwNm:i,cwOutsourcingYn:"N",optionInfo:JSON.stringify(d),cwFrontYnCode:p,useYn:r,sort:c};null!=e?(u.cwSeq=e,n.companyUpdate(u,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),n.retrieve(),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))):n.companyInsert(u,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),n.retrieve(),alert("등록되었습니다.")):alert(t.message)}))}}))})),e(this,"layerOptionDetailView",(t=>{t('\n\t\t<div class="mw_defalut" style="width:400px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title">세부사항 상세설정</span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t<div style="height:260px;overflow-y:auto;padding:2px;">\n\t\t\t\t\t\t<div class="bottonWrap">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th><div class="ar"><a href="#" class="btnSearch optionDetailApply">적용</a></div></th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t<div class="searchWrap">\n\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10">\n\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t<col width="45%">\n\t\t\t\t\t\t\t\t<col width="10%">\n\t\t\t\t\t\t\t\t<col width="45%">\n\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class="ac">기본선택</th>\n\t\t\t\t\t\t\t\t\t<th class="ac"></th>\n\t\t\t\t\t\t\t\t\t<th class="ac">세부선택 유형 : <select name="type" class="disabled" disabled><option value="">없음</option><option value="text">텍스트형</option><option value="select">선택형</option></select></th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class="ac">\n\t\t\t\t\t\t\t\t\t\t<select name="cwoData" class="w100p" size="7" style="height: 100px !important;"></select>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th class="ac"><i class="fa-solid fa-share-nodes"></i></th>\n\t\t\t\t\t\t\t\t\t<th class="ac cwoDataSubTypeSelect">\n\t\t\t\t\t\t\t\t\t\t<select name="cwoDataSub" class="w100p" size="7" style="height: 100px !important;"></select>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t<tfoot>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th class="ac">\n\t\t\t\t\t\t\t\t\t\t<span class="f_lt cursorPointer cwoDataDel" style="border-radius: 4px; padding:3px; border: 1px solid #fd6456 !important;background: #fd6456 !important;color: #fff !important;transition: All 0.3s ease; -webkit-transition: All 0.3s ease;-moz-transition: All 0.3s ease;-o-transition: All 0.3s ease;cursor: pointer;">삭제</span>\n\t\t\t\t\t\t\t\t\t\t<input type="text" class="w51p" name="cwoDataNm">\n\t\t\t\t\t\t\t\t\t\t<span class="f_rt cwoDataAdd cursorPointer" style="border-radius: 4px; padding:3px; border: 1px solid #5675fd !important;background: #5675fd !important;color: #fff !important;transition: All 0.3s ease; -webkit-transition: All 0.3s ease;-moz-transition: All 0.3s ease;-o-transition: All 0.3s ease;cursor: pointer;">추가</span>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t<th class="ac"></th>\n\t\t\t\t\t\t\t\t\t<th class="ac cwoDataSubTypeSelect">\n\t\t\t\t\t\t\t\t\t\t<span class="f_lt cursorPointer cwoDataSubDel" style="border-radius: 4px; padding:3px; border: 1px solid #fd6456 !important;background: #fd6456 !important;color: #fff !important;transition: All 0.3s ease; -webkit-transition: All 0.3s ease;-moz-transition: All 0.3s ease;-o-transition: All 0.3s ease;cursor: pointer;">삭제</span>\n\t\t\t\t\t\t\t\t\t\t<input type="text" class="w51p" name="cwoDataSubNm">\n\t\t\t\t\t\t\t\t\t\t<span class="f_rt cwoDataSubAdd cursorPointer" style="border-radius: 4px; padding:3px; border: 1px solid #5675fd !important;background: #5675fd !important;color: #fff !important;transition: All 0.3s ease; -webkit-transition: All 0.3s ease;-moz-transition: All 0.3s ease;-o-transition: All 0.3s ease;cursor: pointer;">추가</span>\n\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tfoot>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"layerOptionDetailViewEvent",((t,e,n)=>{let a=this;null==e&&(e={});let l=$("#"+t),o=$("select[name=cwoData]",l),i=$("select[name=cwoDataSub]",l),s=$("select[name=type]",l),r=[],c={};if(a._utils.checkEmptyNull(e.cwoData)||(r=e.cwoData.split(",")),!a._utils.checkEmptyNull(e.cwoDataSub))try{c=JSON.parse(e.cwoDataSub)}catch(u){}function d(){o.empty();for(let t=0;t<r.length;t++){let e=$("<option/>");if(a._utils.checkEmptyNull(c[r[t]]))e.text(r[t]+"[없음]");else{let n=[],a="";a="text"==c[r[t]].type?"텍스트형":"select"==c[r[t]].type?"선택형":"없음",n=c[r[t]].values,e.text(r[t]+"["+a+("select"==c[r[t]].type?" "+n.length:"")+"]")}e.val(r[t]),o.append(e)}}function p(t){"select"==t?($("select[name=cwoDataSub]",l).removeClass("disabled").prop("disabled",!1),$("input[name=cwoDataSubNm]",l).removeClass("disabled").prop("disabled",!1)):($("select[name=cwoDataSub]",l).addClass("disabled").prop("disabled",!0),$("input[name=cwoDataSubNm]",l).addClass("disabled").prop("disabled",!0))}d(),s.on("change",(function(){let t=$(this).val(),e=o.val();if(!a._utils.checkEmptyNull(e)){null==c[e]?c[e]={type:t}:c[e].type!=t&&(c[e].type=t);let n="",a=null!=c[e].values?c[e].values:[];n="text"==t?"텍스트형":"select"==t?"선택형":"없음",$("option:selected",o).text(e+"["+n+("select"==t?" "+a.length:"")+"]")}p(t)})),o.on("change",(function(){let t=$(this).val();i.empty(),s.prop("disabled",!1).removeClass("disabled");let e=[];if(a._utils.checkEmptyNull(c[t]))s.val(""),p("");else if(s.val(c[t].type),p(c[t].type),"select"==c[t].type){e=null==c[t].values?[]:c[t].values;for(let t=0;t<e.length;t++){let n=$("<option/>");n.text(e[t]).val(e[t]),i.append(n)}}else p("")})),l.on("click",".cwoDataAdd",(function(){let t=$("input[name=cwoDataNm",l).val();a._utils.checkEmptyNull(t)&&(alert("추가할 선택사항을 입력하십시오"),$("input[name=cwoDataNm",l).focus()),$("input[name=cwoDataNm",l).val("");let e=t.split(",");for(let n=0;n<e.length;n++)if(r.indexOf(e[n])>-1)return alert('"'+e[n]+'" 값은 기존에 등록되어 있는 선택 값입니다.'),!1;for(let n=0;n<e.length;n++)r.push(e[n]);d()})),l.on("click",".cwoDataDel",(function(){confirm("삭제하시겠습니까?",(function(t){if(t){let t=o.val(),e=r.indexOf(t);r.splice(e,1),d()}}))})),l.on("click",".cwoDataSubAdd",(function(){let t=o.val();if("select"!=s.val())return!1;if(a._utils.checkEmptyNull(t))return alert("추가할 기본선택사항을 선택하세요"),!1;let e=$("input[name=cwoDataSubNm",l).val();if(a._utils.checkEmptyNull(e))return alert("추가할 선택사항을 입력하십시오"),$("input[name=cwoDataSubNm",l).focus(),!1;if(e.indexOf("+")>-1)return alert('"+" 문자는 사용 할 수 없습니다.'),!1;if(null!=c[t])if(null==c[t].values)c[t].values=[e];else{let n=e.split(",");for(let e=0;e<n.length;e++)if(c[t].values.indexOf(n[e])>-1)return alert('"'+n[e]+'" 값은 기존에 등록되어 있는 세부 선택 값입니다.'),!1;for(let e=0;e<n.length;e++)c[t].values.push(n[e])}else c[t]={values:[e]};$("input[name=cwoDataSubNm",l).val(""),d(),o.val(t).trigger("change")})),l.on("click",".cwoDataSubDel",(function(){let t=i.val();return o.val(),"select"==s.val()&&(a._utils.checkEmptyNull(t)?(alert("삭제 할 세부정보가 없습니다."),!1):void confirm("삭제하시겠습니까?",(function(t){if(t){let t=o.val(),e=i.val();if(a._utils.checkEmptyNull(c[t]))return alert("삭제 할 세부정보가 없습니다."),!1;let n=c[t].values,l=n.indexOf(e);n.splice(l,1),d(),o.val(t).trigger("change")}})))})),l.on("click",".optionDetailApply",(function(){let t=r.join(","),e="",o=n.data("ROW");null==o&&(o={}),o.cwoData=t;let i=Object.keys(c);if(i.length>0){let t=!0;for(let e=0;e<i.length;e++)if(null!=c[i[e]].type){t=!1;break}t||(e=JSON.stringify(c))}let s=$("input[name=cwoData]",n),d=$("input[name=cwoDataSub]",n),p=$(".optionDataSub",n);a._utils.checkEmptyNull(e)?(s.attr("readonly",!1).css("background-color","").removeAttr("title"),p.css("color","")):(s.attr("readonly",!0).css("background-color","#ddd").attr("title","오른쪽에 상세설정 아이콘버튼을 통하여 설정하시기 바랍니다"),p.css("color","blue")),o.cwoDataSub=e,n.data("ROW",o),s.val(t),d.val(e),$(".btnClosePopLayer",l).trigger("click")})),$("input[name=cwoDataNm],[name=cwoDataSubNm]",l).on("keypress",(function(t){if(13==t.charCode){let t=$(this).attr("name");t=t.replace("Nm",""),$("."+t+"Add",l).trigger("click")}})),s.trigger("change")})),e(this,"companyInsert",((t,e)=>{let n={ctl:"process",cmd:"companyInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"companyLoad",((t,e)=>{let n={ctl:"process",cmd:"companyLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"companyUpdate",((t,e)=>{let n={ctl:"process",cmd:"companyUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._pro={plus:1,minus:1},this._stndList=[],this._process=[]}},g=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#equipmentLayerView");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({eqSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));new a(n._const,{ctl:"process",cmd:"companyProcessList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=spSeq]",n._code);e.empty(),e.append($('<option value="">전체</option>'));for(let n=0;n<t.data.length;n++){let a=$('<option value="'+t.data[n].spSeq+'">'+t.data[n].spNm+"</option>");e.append(a)}}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),n.companyPlaceList({},(function(t){let e=$("select[name=cpSeq]",l);if(0==t.code)for(let n in t.data){let a=t.data[n],l=$("<option />");l.val(a.cpSeq).text(a.cpNm),e.append(l)}})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".btnOpenRepair",(function(){let t=$(this).closest("tr").data("ROW");n._eqSeq=t.eqSeq,n._eqNm=t.eqNm,n.repairList({eqSeq:t.eqSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;n.repairView((function(t){n._parent.openLayer(t,n.repairLayer)}))}))})),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.load({eqSeq:t.eqSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=$("template#equipmentLayerView");n._parent.openLayer(e.html(),n.reloadLayer,t.data)}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val();l.find("select[name=searchColumn]").val();let s=l.find("input[name=searchWord]").val(),r=l.find("select[name=cpSeq]").val(),c={page:a,rows:n,orderColumn:o,orderType:i,searchColumn:"eqNm",searchWord:s,cpSeq:r};t.list(c,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+">");a.append($('<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="eqSeq" value="'+e.eqSeq+'"></td>')),a.append($('<td style="border:1px solid #dedede;" class="al pl5" />').append(n._utils.nullTostring(e.eqNm,""))),a.append($('<td style="border:1px solid #dedede;" class="ac pl5" />').append(n._utils.nullTostring(e.cpNm,""))),"N"==e.useYn?a.append($('<td class="txt_red">'+n._utils.nullTostring(e.useYn,"")+"</td>")):a.append($('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.useYn,"")+"</td>")),a.append($('<td style="border:1px solid #dedede;" />').append(n._utils.nullTostring(e.eqProcess,""))),a.append($('<td style="border:1px solid #dedede;" />').append(n._utils.nullTostring(e.eqEmployee,""))),a.append($('<td style="border:1px solid #dedede;"><i class="fa-solid fa-screwdriver-wrench cursorPointer btnOpenRepair" title="수리이력 보기"></i></td>')),a.append($('<td style="border:1px solid #dedede;">'+e.creDate+"</td>")),a.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="장비 수정" style="font-size:14px;"></i></td>')),a.data("ROW",e),a.appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"equipment",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"equipment",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"equipment",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"layerViewEvent",((t,e)=>{const n=this;$(".btnMEmployeeSelect",t).on("click",(function(a){let l=$("template#employeeView");n._parent.openLayer(l.html(),n.employeeLayer,e,t),a.stopPropagation()})),$(".btnSEmployeeDel",t).on("click",(function(t){$("input[name=semployee]",`#${popupID}`).data(null).val(""),t.stopPropagation()})),n.companyProcessList((function(n){let a=$("select[name=spSeq]",t).empty();if(0==n.code){for(let t in n.data){let e=n.data[t],l=$("<option />");l.val(e.spSeq).text(e.spNm),a.append(l)}null!=e&&$("select[name=spSeq]",t).val(e.processInfo[0].spSeq)}})),n.companyPlaceList({cpType:"A",useYn:"Y"},(function(n){let a=$("select[name=cpSeq]",t).empty();if(0==n.code)for(let t in n.data){let l=n.data[t],o=$("<option />");o.val(l.cpSeq).text(l.cpNm),null!=e&&e.cpSeq==l.cpSeq&&o.attr("selected","selected"),a.append(o)}})),$(".clientSave",t).on("click",(function(e){let a=$("input[name=eqNm]",t).val(),l=$("select[name=cpSeq]",t).val(),o=$("textarea[name=eqMemo]",t).val(),i=$("select[name=useYn]",t).val(),s=[],r=[];if(n._utils.checkRequired(t)){s=t.data("employeeInfo")??[],r.push($("select[name=spSeq]",t).val());let e={eqNm:a,eqMemo:o,cpSeq:l,useYn:i,employeeInfo:JSON.stringify(s),processInfo:JSON.stringify(r)},c=t.data();null!=c&&(e.eqSeq=c.eqSeq),null==e.eqSeq?n.insert(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)})):n.update(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}}))})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".clientSave",e).text("등록"),this.layerViewEvent(e)})),e(this,"reloadLayer",((t,e)=>{let n=$("#"+t);$(".title",n).text("장비 수정"),$(".clientSave",n).text("수정"),n.data(e),this.layerViewEvent(n,e),this._utils.unSerializeObject(n,e),$("input[name=memployee]",n).data(e.employeeInfo[0]).val(e.employeeInfo[0].eNm)})),e(this,"employeeLayer",((t,e,n)=>{const a=this;let l=$("#"+t),o=null!=e?e.employeeInfo:[],i=$(".takeChargeList",l),s=$(".employeeList",l).empty();s.on("click",".btnSelect",(function(){let t=$(this).closest("tr");c(t.data("ROW")),t.remove()})),i.on("click",".btnSelect",(function(){let t=$(this).closest("tr");r(t.data("ROW")),t.remove()})),i.sortable({handle:".fa-up-down",items:"tr",axis:"y",containment:"parent",helper:function(t,e){return e.children().each((function(){$(this).width($(this).width())})),e},start:function(t,e){},update:function(t,e){}});for(let d=0;d<o.length;d++){c(o[d])}function r(t){let e=$(`<tr><td>${a._utils.nullTostring(t.eNm,"")}</td><td>${a._utils.nullTostring(t.eRank,"")}</td><td><a class="btnStyle03 btnSelect" href="javascript:void(0);">배정</a></td></tr>`);e.data("ROW",t),s.append(e)}function c(t){let e=$(`<tr><td><i class="fa-solid fa-up-down cursorPointer"></i></td><td>${a._utils.nullTostring(t.eNm,"")}</td><td>${a._utils.nullTostring(t.eRank,"")}</td><td><a class="btnStyle03 btnSelect" href="javascript:void(0);">취소</a></td></tr>`);e.data("ROW",t),i.append(e)}a.employeeList((function(t){if(s.empty(),0==t.code)for(let e in t.data){let n=t.data[e],a=!1;for(let t=0;t<o.length;t++)if(n.eSeq==o[t].eSeq){a=!0;break}a||r(n)}})),$(".applySave",l).on("click",(function(){let t=$("tr",i),e=[];for(let n=0;n<t.length;n++){let a=$(t[n]).data("ROW");e.push(a)}if(n.data("employeeInfo",e),e.length>0){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].eNm);$("input[name=memployee]",n).val(t.join(", "))}$(".btnClosePopLayer",l).trigger("click")}))})),e(this,"employeeList",(t=>{new a(this._const,{ctl:"employee",cmd:"list"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),e(this,"companyProcessList",(t=>{new a(this._const,{ctl:"process",cmd:"companyProcessList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),e(this,"companyPlaceList",((t,e)=>{let n={ctl:"place",cmd:"list",cpType:"A",rows:9999};null!=t&&$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"equipment",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"equipment",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"repairView",(t=>{t('<div class="mw_defalut" style="width:600px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">최근 수리이력</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="height:420px;overflow-y:auto;padding:2px;"><div class="searchWrap pt10" style="height: 395px;"><input type="hidden" name="orderculumn" value="eqNm"><input type="hidden" name="orderby" value="DESC"><table cellpadding="0" cellspacing="0" border="0" summary="" class="listTbType02 tr_nohover mb10"><caption></caption><colgroup><col width="20%"><col width="auto"><col width="25%"></colgroup><thead><tr><th style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;color:#000;">일자</th><th style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;color:#000;">수리내용</th><th class="last" style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;color:#000;">등록일시</th></tr></thead><tbody class="repairList"></tbody></table></div><span style="position:absolute;top:0px;right:5px;"><input type="hidden" name="page" style="width:40px;text-align:center;" inputType=comma></span></div></div></div></div></div></div></div>')})),e(this,"repairLayer",(t=>{const e=this;$(`#${t} .title`).text(`최근 수리이력 (${e._eqNm})`);let n=$(`#${t}`).find(".pageInfoTfoot"),a=n.find("select[name=rowsPerPage]").val(),l=n.find("input[name=page]").val(),o=$(`#${t}`).find("input[name=orderculumn]").val(),i=$(`#${t}`).find("input[name=orderby]").val();n.find("select[name=rowsPerPage]").on("change",(function(){n.find("input[name=page]").val("1"),e.repairLayer(t)}));let s={eqSeq:e._eqSeq,page:1,rows:10,orderColumn:o,orderType:i};e.repairList(s,(function(o){let i=$(`#${t} .repairList`).empty(),s=0,r=0;if(0==o.code)if(null!=o.data&&o.data.length>0)for(let t in o.data){let n=o.data[t];0==t&&(s=n.totalCnt,r=Math.ceil(s/a));let l=$(`<tr><td>${e._utils.nullTostring(n.erDt,".")}</td><td class="txt_l">${e._utils.nullTostring(n.erMemo,"")}</td><td>${e._utils.nullTostring(n.creDate,"")}</td></tr>`);$(l).appendTo(i)}else $('<tr><td colspan="3">데이타가 없습니다.</td></tr>').appendTo(i);else $('<tr><td colspan="3">데이타가 없습니다.</td></tr>').appendTo(i);e._utils.mdiPaging(n.find(".pagenate"),s,a,r,10,l,e.goPage)}))})),e(this,"repairList",((t,e)=>{let n={ctl:"equipment",cmd:"repairList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null,this._eqSeq=null,this._eqNm=null}},_=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){n.layerView((function(t){n._parent.openLayer(t,n.initNewLayer)})),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]:checked");if(0==e.length)return void alert("삭제할 대상을 선택 하십시오");if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=e.closest("tr").data("ROW");confirm("삭제하시겠습니까?",(function(t){t&&n.delete({eqSeq:a.eqSeq,erSeq:a.erSeq},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}))})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let a=n._code.find(".searchWrapArea"),l=n._code.find(".dataHeadTable thead"),o=n._code.find(".pageInfoTfoot");a.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=a.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",a.find("input[name=orderculumn]").val(t),a.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(a),l.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(a,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let i=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(i)||o.find("select[name=rowsPerPage]").val(i),o.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),o.find("input[name=page]").val("1"),n.retrieve()})),a.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addMonth(new Date,-6))),a.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),n.retrieve()})),e(this,"purge",(()=>{console.log("repairController purge")})),e(this,"reload",(()=>{console.log("repairController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val(),s=l.find("select[name=searchColumn]").val(),r=l.find("input[name=searchWord]").val(),c=l.find("input[name=startDt]").val().replace(/-/g,""),d=l.find("input[name=endDt]").val().replace(/-/g,""),p={page:a,rows:n,orderColumn:o,orderType:i,searchColumn:s,searchWord:r,startDt:c,endDt:d};t.list(p,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+">";a+='<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="eqSeq" value="'+e.eqSeq+'"></td>',a+='<td style="border:1px solid #dedede;">'+n._utils.dateformatStringToDate(e.erDt)+"</td>",a+='<td style="border:1px solid #dedede;" class="al">'+n._utils.nullTostring(e.eqNm,"")+"</td>",a+='<td style="border:1px solid #dedede;" class="al pl5">'+n._utils.nullTostring(e.erMemo,"")+"</td>",a+='<td style="border:1px solid #dedede;">'+e.creDate+"</td>",a+='<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="수리 정보 수정" style="font-size:14px;"></i></td>',a+="</tr>";let l=$(a).data("ROW",e);$(".btnOpenInfo",l).on("click",(function(){let t=$(this).closest("tr").data("ROW");n._client={},n._client=t,n.layerView((function(t){n._parent.openLayer(t,n.reloadLayer)}))})),l.appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"equipment",cmd:"repairList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"equipment",cmd:"repairDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"layerView",(t=>{t('<div class="mw_defalut" style="width:520px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">수리이력 등록</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="height:260px;overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="auto"></colgroup><tbody><tr><th><div class="ar"><a href="javascript:void(0);" class="btnSearch clientSave">저장</a></div></th></tr></tbody></table></div><div class="searchWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10"><caption></caption><colgroup><col width="80px"><col width="auto"></colgroup><tbody><tr><th class="txt_r">수리일시</th><td colspan="3"><input class="date crdrIp" type="text" name="erDt" placeholder="날짜 선택" readonly></td></tr><tr><th class="txt_r">장비명</th><td colspan="3"><input type="text" name="eqNm" class="w30p mr5" requiremsg="장비명" readonly><a class="btnStyle03 btnEquipmentSelect" href="javascript:void(0);">조회</a></td></tr><tr><th class="txt_r">수리내역</th><td colspan="3"><textarea name="erMemo" class="w95p" rows="4"></textarea></td></tr></tbody></table></div></div></div></div></div>')})),e(this,"initNewLayer",(t=>{const e=this;e._mainPopID=t,$(`#${t} .title`).text("수리이력 등록"),null!=$.datepicker&&$(`#${t} input.date`).on("focus",(function(){$(this).datepicker().datepicker("show")})).on("click","img",(function(){var t=$(this).prev("input.date");0==t.is(":disabled")&&(0==t.length&&(t=$(this).prev(".dateym")),t.focus())})),$(`#${t} .btnEquipmentSelect`).on("click",(function(t){e.equipmentView((function(t){e._parent.openLayer(t,e.equipmentLayer)})),t.stopPropagation()})),$(`#${t} .clientSave`).on("click",(function(n){$(this).data();let a=$("input[name=erDt]",`#${t}`).val().replace(/-/g,"");$("input[name=eqNm]",`#${t}`).val();let l=$("input[name=eqNm]",`#${t}`).data("eqSeq"),o=$("textarea[name=erMemo]",`#${t}`).val();if(e._utils.checkRequired(`#${t}`)){let n={eqSeq:l,erDt:a,erMemo:o};e.insert(n,(function(n){0==n.code?(e.retrieve(),$(`#${t} .btnClosePopLayer`).trigger("click"),alert("등록되었습니다.")):alert("등록에 실패하였습니다.")}))}})).text("저장")})),e(this,"insert",((t,e)=>{let n={ctl:"equipment",cmd:"repairInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"reloadLayer",(t=>{const e=this;if(e._mainPopID=t,$(`#${t} .title`).text("수리내역 수정"),null!=$.datepicker&&$(`#${t} input.date`).on("focus",(function(){$(this).datepicker().datepicker("show")})).on("click","img",(function(){var t=$(this).prev("input.date");0==t.is(":disabled")&&(0==t.length&&(t=$(this).prev(".dateym")),t.focus())})),0===Object.keys(e._client).length&&e._client.constructor===Object)return alert("수리이력 데이터를 불러올 수 없습니다"),!1;$("input[name=erDt]",`#${t}`).val(e._utils.dateformatStringToDate(e._client.erDt)),$("input[name=eqNm]",`#${t}`).data({eqSeq:e._client.eqSeq}).val(e._client.eqNm),$("textarea[name=erMemo]",`#${t}`).val(e._client.erMemo),$(`#${t} .btnEquipmentSelect`).on("click",(function(t){e.equipmentView((function(t){e._parent.openLayer(t,e.equipmentLayer)})),t.stopPropagation()})),$(`#${t} .clientSave`).data({eqSeq:e._client.eqSeq,erSeq:e._client.erSeq}).on("click",(function(n){let a=$(this).data(),l=$("input[name=erDt]",`#${t}`).val().replace(/-/g,"");$("input[name=eqNm]",`#${t}`).val();let o=$("input[name=eqNm]",`#${t}`).data("eqSeq"),i=$("textarea[name=erMemo]",`#${t}`).val();if(e._utils.checkRequired(`#${t}`)){if(!a.erSeq||!o)return alert("코드가 없어 수정불가합니다"),!1;let n={eqSeq:o,erSeq:a.erSeq,erDt:l,erMemo:i};e.update(n,(function(n){0==n.code?(e.retrieve(),$(`#${t} .btnClosePopLayer`).trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}})).text("수정")})),e(this,"update",((t,e)=>{let n={ctl:"equipment",cmd:"repairUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"equipmentView",(t=>{t('<div class="mw_defalut" style="width:740px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">장비 선택</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="height:320px;overflow-y:auto;padding:2px;"><table cellpadding="0" cellspacing="0" border="0" summary="" class="listTbType02 tr_nohover mb10"><caption></caption><colgroup><col width="33%"><col width="7%"><col width="31%"><col width="21%"><col width="8%"></colgroup><thead><tr><th>장비명</th><th>사용여부</th><th>공정</th><th>담당자</th><th class="last">선택</th></tr></thead><tbody class="equipmentList"></tbody></table></div></div></div></div>')})),e(this,"equipmentLayer",(t=>{const e=this;e.equipmentList((function(n){let a=$(`#${t} .equipmentList`).empty();if(0==n.code)for(let l in n.data){let o=n.data[l],i=$(`<tr><td>${e._utils.nullTostring(o.eqNm,"")}</td><td>${e._utils.nullTostring(o.useYn,"")}</td><td>${e._utils.nullTostring(o.eqProcess,"")}</td><td>${e._utils.nullTostring(o.eqEmployee,"")}</td><td><a class="btnStyle03 btnSelect" href="javascript:void(0);">선택</a></td></tr>`);$(i).find(".btnSelect").data({eqNm:o.eqNm,eqSeq:o.eqSeq}).on("click",(function(n){let a=$(this).data();$(`#${e._mainPopID} input[name=eqNm]`).data({eqSeq:a.eqSeq}).val(e._utils.nullTostring(a.eqNm,"")),$(`#${t} .btnClosePopLayer`).trigger("click")})),$(i).appendTo(a)}}))})),e(this,"equipmentList",(t=>{new a(this._const,{ctl:"equipment",cmd:"list"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null}},w=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n.display(),$(".btnSave",n._code).on("click",(function(t){let e=$(this).closest("tr"),a=n._utils.serializeObject(e),l=Object.keys(a),o=!1;for(let i of l)if(!n._utils.checkEmptyNull(a[i])){o=!0;break}if(o){let t=$(e).data("ROW");null!=t?(a.coaSeq=t.coaSeq,n.update(a,(function(t){0==t.code?alert("저장 되었습니다."):alert(t.message)}))):(a.coaType=e.attr("name"),n.insert(a,(function(t){0==t.code?alert("등록 되었습니다."):alert(t.message)})))}else alert("정보 입력이 필요합니다.")})),$(".btnDelete",n._code).on("click",(function(t){let e=$(this).closest("tr"),a=$(e).data("ROW");null!=a&&n.delete({coaSeq:a.coaSeq},(function(t){0==t.code?(alert("삭제 되었습니다."),$("input",e).val("")):alert(t.message)}))}))})),e(this,"purge",(()=>{console.log("employeeController purge")})),e(this,"reload",(()=>{console.log("employeeController reload")})),e(this,"display",(()=>{const t=this;t.list(null,(function(e){if(0==e.code){let n=e.data;for(let e=0;e<n.length;e++){let a=n[e],l=$("."+a.coaType,t._code);l.data("ROW",a),$("input[name=coaDomain]",l).val(a.coaDomain),$("input[name=coaPort]",l).val(a.coaPort),$("input[name=coaId]",l).val(a.coaId),$("input[name=coaPwd]",l).val(a.coaPwd),$("input[name=coaEtc1]",l).val(a.coaEtc1)}}else alert(e.message)}))})),e(this,"list",((t,e)=>{let n={ctl:"company",cmd:"apiAccountList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"company",cmd:"apiAccountUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"company",cmd:"apiAccountDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"company",cmd:"apiAccountInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._fileSeq=null}},y=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#placeDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cpSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({cpSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let a=n._code.find(".searchWrapArea"),l=n._code.find(".dataHeadTable thead"),o=n._code.find(".pageInfoTfoot"),i=n._code.find(".dataListTable");a.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=a.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",a.find("input[name=orderculumn]").val(t),a.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(a),l.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(a,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let s=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(s)||o.find("select[name=rowsPerPage]").val(s),o.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),o.find("input[name=page]").val("1"),n.retrieve()})),i.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.load({cpSeq:t.cpSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=$("template#placeDiv");n._parent.openLayer(e.html(),n.reloadLayer,t.data)}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val();l.find("select[name=searchColumn]").val();let s=l.find("input[name=searchWord]").val(),r={page:a,rows:n,orderColumn:o,orderType:i,searchColumn:"cpNm",searchWord:s,cpType:"A"};t.list(r,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+">");a.append($('<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="cpSeq" value="'+e.cpSeq+'"></td>')),a.append($('<td style="border:1px solid #dedede;" class="al pl5" />').append(n._utils.nullTostring(e.cpNm,""))),a.append($('<td style="border:1px solid #dedede;" class="al" />').append(n._utils.nullTostring(e.cpAddr,"")+" "+n._utils.nullTostring(e.cpAddrDetail,""))),a.append($('<td style="border:1px solid #dedede;" class="ac" />').append(n._utils.formatPhoneNumber(e.cpTel))),"N"==e.useYn?a.append($('<td class="txt_red">'+n._utils.nullTostring(e.useYn,"")+"</td>")):a.append($('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.useYn,"")+"</td>")),a.append($('<td style="border:1px solid #dedede;">'+e.creDate.substring(0,16)+"</td>")),a.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="공장 정보 수정" style="font-size:14px;"></i></td>')),a.data("ROW",e),a.appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"place",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"place",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"place",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"layerViewEvent",((t,e)=>{const n=this;n._utils.focusEvent($("input[name=cpTel]",t),"tel"),$("i.fa-solid.fa-location-dot",t).on("click",(function(e){new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=cpZipcode]",t).val(e.zonecode),$("input[name=cpAddr]",t).val(n),$("input[name=cpAddrDetail]",t).trigger("focus")}}).open()})),$(".save",t).on("click",(function(e){let a=$("input[name=cpNm]",t).val(),l=$("input[name=cpTel]",t).val(),o=$("input[name=cpZipcode]",t).val(),i=$("input[name=cpAddr]",t).val(),s=$("input[name=cpAddrDetail]",t).val(),r=$("textarea[name=cpMemo]",t).val(),c=$("select[name=useYn]",t).val(),d=$("input[name=sort]",t).val();if(n._utils.checkRequired(t)){n._utils.checkEmptyNull(l)||(l=l.replace(/-/g,""));let e={cpNm:a,cpType:"A",cpTel:l,cpZipcode:o,cpAddr:i,cpAddrDetail:s,cpMemo:r,useYn:c,sort:d},p=t.data();null!=p&&(e.cpSeq=p.cpSeq),null==e.cpSeq?n.insert(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)})):n.update(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}}))})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".save",e).text("등록"),this.layerViewEvent(e)})),e(this,"reloadLayer",((t,e)=>{let n=$("#"+t);$(".title",n).text(+e.cpNm+" 수정"),$(".save",n).text("수정"),n.data(e),this.layerViewEvent(n,e),this._utils.unSerializeObject(n,e)})),e(this,"insert",((t,e)=>{let n={ctl:"place",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"place",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"repairView",(t=>{t('<div class="mw_defalut" style="width:600px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">최근 수리이력</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="height:420px;overflow-y:auto;padding:2px;"><div class="searchWrap pt10" style="height: 395px;"><input type="hidden" name="orderculumn" value="eqNm"><input type="hidden" name="orderby" value="DESC"><table cellpadding="0" cellspacing="0" border="0" summary="" class="listTbType02 tr_nohover mb10"><caption></caption><colgroup><col width="20%"><col width="auto"><col width="25%"></colgroup><thead><tr><th style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;color:#000;">일자</th><th style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;color:#000;">수리내용</th><th class="last" style="background-color:#9ac7e1a3;border:1px solid #9ac7e1;color:#000;">등록일시</th></tr></thead><tbody class="repairList"></tbody></table></div><span style="position:absolute;top:0px;right:5px;"><input type="hidden" name="page" style="width:40px;text-align:center;" inputType=comma></span></div></div></div></div></div></div></div>')})),e(this,"repairLayer",(t=>{const e=this;$(`#${t} .title`).text(`최근 수리이력 (${e._eqNm})`);let n=$(`#${t}`).find(".pageInfoTfoot"),a=n.find("select[name=rowsPerPage]").val(),l=n.find("input[name=page]").val(),o=$(`#${t}`).find("input[name=orderculumn]").val(),i=$(`#${t}`).find("input[name=orderby]").val();n.find("select[name=rowsPerPage]").on("change",(function(){n.find("input[name=page]").val("1"),e.repairLayer(t)}));let s={eqSeq:e._eqSeq,page:1,rows:10,orderColumn:o,orderType:i};e.repairList(s,(function(o){let i=$(`#${t} .repairList`).empty(),s=0,r=0;if(0==o.code)if(null!=o.data&&o.data.length>0)for(let t in o.data){let n=o.data[t];0==t&&(s=n.totalCnt,r=Math.ceil(s/a));let l=$(`<tr><td>${e._utils.nullTostring(n.erDt,".")}</td><td class="txt_l">${e._utils.nullTostring(n.erMemo,"")}</td><td>${e._utils.nullTostring(n.creDate,"")}</td></tr>`);$(l).appendTo(i)}else $('<tr><td colspan="3">데이타가 없습니다.</td></tr>').appendTo(i);else $('<tr><td colspan="3">데이타가 없습니다.</td></tr>').appendTo(i);e._utils.mdiPaging(n.find(".pagenate"),s,a,r,10,l,e.goPage)}))})),e(this,"repairList",((t,e)=>{let n={ctl:"equipment",cmd:"repairList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null,this._eqSeq=null,this._eqNm=null}},b=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._company=new m(t._parent,t._const),t._employee=new f(t._parent,t._const),t._process=new h(t._parent,t._const),t._equipment=new g(t._parent,t._const),t._repair=new _(t._parent,t._const),t._place=new y(t._parent,t._const),t._connection=new w(t._parent,t._const),t._customer=new c(t._parent,t._const),t._storage=new p(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}},v=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{},n._currentDateTime=n._utils.currentDateTime(),"Y"!=n._const.__MANAGER_YN&&(n._code.find(".btnApproval").hide(),n._code.find(".btnTransDelete").hide()),n._code.find(".btnSearchCall").on("click",(function(t){n._currentDateTime=n._utils.currentDateTime(),n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve()})),n._code.find(".btnFullScreen").on("click",(function(t){let e=n._code.find(".btnAutoReload");document.fullscreenElement?($(this).removeClass("activeOn").addClass("activeOff"),e.hasClass("activeOn")&&e.trigger("click")):($(this).removeClass("activeOff").addClass("activeOn"),e.hasClass("activeOff")&&e.trigger("click")),n._utils.fullScreen(n._code)})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#orderDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnApproval").on("click",(function(t){if(t.stopPropagation(),"Y"!=n._const.__MANAGER_YN)return alert("관리자 등급만 작업승인 할 수 있도록 작업 중입니다."),!1;let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked");if(0!=e.length){for(let t=0;t<e.length;t++){if("Y"==$(e[t]).closest("tr").data("ROW").oApprovalYn)return void alert("이미 승인처리된 건이 포함되어있습니다.")}confirm("총 "+e.length+"건의 수주건을 승인하시겠습니까?",(function(t){if(t){let t=[];for(let n=0;n<e.length;n++)t.push($(e[n]).val());n.apply({oSeqs:JSON.stringify(t)},(function(t){0==t.code?(n.retrieve(),alert("승인 되었습니다")):alert(t.message)}))}}),"승인")}else alert("승인 처리할 대상을 선택 하십시오")})),n._code.find("input[name=oMarkYn]").on("click",(function(t){n._code.find("input[name=startDt]").attr("disabled",$(this).is(":checked")),n._code.find("input[name=endDt]").attr("disabled",$(this).is(":checked"))})),n._code.find(".btnMarkCreate").on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked");if(0==e.length)return void alert("즐거찾을 수주건을 선택 하십시오");if(e.length>1){alert("1건씩만 설정이 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=e.closest("tr").data("ROW");n._order=a;let l=$("template#orderMarkDiv");n._parent.openLayer(l.html(),n.initMarkLayer)})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({oSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다"),n._parent.modifyTime({action:"order"});else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-3))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"A"};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("thead");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".oFileNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.orderView(t)})),s.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n._order={},n.load({oSeq:t.oSeq},(function(t){if(0!=t.code)return alert("작업 데이터를 불러올 수 없습니다"),!1;{n._order=t.data;let e=$("template#orderDiv");n._parent.openLayer(e.html(),n.reloadLayer)}}))})),s.on("click",".oCode",(function(){let t=$(this).closest("tr").data("ROW");n._order=t;let e=$("template#orderMarkDiv");n._parent.openLayer(e.html(),n.initMarkLayer)})),s.on("click",".printTd",(function(){let t=$(this).closest("tr").data("ROW");n._parent.workReport(t)})),s.on("click",".oFileNmDown",(function(){let t=$(this).closest("tr").data("ROW");null!=t.fileInfo&&t.fileInfo.length>0&&n._parent.fileDownload(t.fileInfo[0])})),s.on("click",".isInMap",(function(){let t=$(this).closest("tr").data("ROW"),e=$.extend(t,{isNm:t.istInNm,gpsLatitude:t.inGpsLatitude,gpsLongitude:t.inGpsLongitude});e.inout="in",n._parent._popup.storageMapView(e)})),s.on("click",".isOutMap",(function(){let t=$(this).closest("tr").data("ROW"),e=$.extend(t,{isNm:t.istOutNm,gpsLatitude:t.outGpsLatitude,gpsLongitude:t.outGpsLongitude});e.inout="out",n._parent._popup.storageMapView(e)})),n.retrieve()})),e(this,"retrieve",(()=>{const t=this;if(null!=t._parent.activeMenuId()&&t._parent.activeMenuId()!=t._id)return void(null!=t.intervalId&&(t._code.find(".btnAutoReload").removeClass("activeOn").addClass("activeOff"),clearInterval(t.intervalId),delete t.intervalId));let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("input[name=searchWord]").val(),d=l.find("input[name=oMarkYn]:checked").val(),p=l.find("input[name=oFileNm]").val(),u=l.find("input[name=oStatus]:checked");if(0==u.length)return void alert("작업상태를 선택해주세요");let m=[];for(let _=0;_<u.length;_++)m.push($(u[_]).val());let f={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",oMarkYn:d,page:a,rows:n,orderColumn:s,orderType:r,oStatus:JSON.stringify(m),oFileNm:p,searchColumn:"cuNm",searchWord:c};t.list(f,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.tableScrollCheck(),t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}));let h=t._code.find(".btnAutoReload"),g=t._code.find(".lastDateTime");g.empty(),h.hasClass("activeOn")&&g.text(t._utils.dateformatCurrentHHmmss(":"))})),e(this,"display",((t,e)=>{const n=this;let a="";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let u=0;u<e.processInfo.length;u++){let t=e.processInfo[u];if(t.outsourcingInfo.length>0){let e=[],n=[];for(let a=0;a<t.outsourcingInfo.length;a++)e.push(t.outsourcingInfo[a].wNm),n.push(t.outsourcingInfo[a].cuNm);a+='<span class="processStatusOut'+t.pStatus+'" title="＊상태: '+t.pStatusNm+" ＊업체: "+n.join(", ")+" "+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}else a+='<span class="processStatus'+t.pStatus+'" title="＊상태: '+t.pStatusNm+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}let l="border-left:1px solid #ccc;",o="미승인";"Y"!=e.oApprovalYn?("Y"==e.isCustomer&&(l+="background: #e0e9ff;"),l+="color:#8b8989;"):o="B"==e.oStatus?'<strong style="color:#4575df;">'+e.oStatusNm+"<strong>":"C"==e.oStatus?'<strong style="color:#eb30dc;">'+e.oStatusNm+"<strong>":e.oStatusNm,"D"==e.oStatus&&(l+="background:#ddf2f9;");let i="",s="○";"B"==e.istInStatus&&(s='<span style="color:#aaa;" title="입고일시 : '+e.istInStatusDate+'">●</span>'),"C"==e.istInStatus&&(s='<span style="color:#68C3C7;" title="입고일시 : '+e.istInStatusDate+'">●</span>');let r="○";"B"==e.istOutStatus&&(r='<span style="color:#aaa;" title="출고일시 : '+e.istOutStatusDate+'">●</span>'),"C"==e.istOutStatus&&(r='<span style="color:#b583f5;" title="출고일시 : '+e.istOutStatusDate+'">●</span>'),e.fileInfo.length>0&&(i='<i class="fa-solid fa-download cursorPointer oFileNmDown" style="margin-right:5px;" title="파일 받기"></i>');let c=$("<tr/>");c.append($('<td style="'+l+'"></td>').append($('<input type="checkbox" class="vm" name="oSeq" value="'+e.oSeq+'"/>'))),c.append($('<td style="'+l+'"><i class="fas fa-print printTd cursorPointer"></i></td>')),c.append($('<td style="'+l+'border-left:1px solid #ccc;border-right:1px solid #ccc;" title="등록자 : '+e.eNm+'">'+n._utils.dateformatMin(e.creDate).substring(5,16)+"</td>")),c.append($('<td style="'+l+'" '+("A"!=e.oStatus?'title="일시 : '+e.oStatusDate+'"':"")+">"+o+"</td>")),c.append($('<td style="'+l+'white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al cuNm cursorPointer" title="'+e.cuNm+'">'+n._utils.nullTostring(e.cuNm,"")+"</td>")),c.append($('<td style="'+l+'padding-rigth:0px;" class="ac"></td>').append(i)),c.append($('<td style="'+l+'border-left:0px !important;" class="al"></td>').append('<span class="oFileNm cursorPointer" title="'+e.oFileNm+'">'+n._utils.nullTostring(e.oFileNm,"")+(null!=e.onContent&&""!=e.onContent?' <img src="/images/bul/bul_notice.gif" class="orderNoticeIcon">':"")+"</span>"+("Y"==e.oMarkYn?' <div class="orderBookMark oCode" style="cursor:pointer;margin-bottom: 1px;margin-top: -2px;color: #917b68 !important;" title="반복수주코드 수정"> →&nbsp;&nbsp;'+e.oCode+"</div>":""))),c.append($('<td style="'+l+'" ></td>').text(n._utils.nullTostring(e.oPaperSize,""))),c.append($('<td style="'+l+'" class="ar">'+n._utils.numberWithCommas(e.oCnt,"")+"</td>")),c.append($('<td style="'+l+'" class="ar">'+n._utils.numberWithCommas(e.oEndCnt,"")+"</td>")),c.append($('<td style="'+l+'" class="al">'+a+"</td>"));let d=e.istInNm;"A"!=e.istInCd?null!=e.istInIsSeq&&(d=$("<span>"+n._utils.nullTostring(e.istInNm,"")+"</span>")):d=$("<span>직입 "+(n._utils.checkEmptyNull(e.istInNm)?"":"("+n._utils.nullTostring(e.istInNm,"")+")")+"</span>"),c.append($('<td style="'+l+'padding-right:0px;border-right:0px;" class="ar isInMap cursorPointer"></td>').append(null!=e.inGpsLatitude?'<i class="fa-solid fa-location-arrow" title="지도보기" style="color:#ffb98b;margin-top: 2px;margin-bottom: 2px;"></i>':"")),c.append($('<td style="'+l+'border-left:0px;" class="al"></td>').append(d)),c.append($('<td class="al" style="'+l+'padding-left:8px;padding-right:1px;">'+(null!=e.istInHopeDt?'<span style="font-weight:550;">'+n._utils.dateformatStringToDate(e.istInHopeDt).substring(5)+"</span>":"")+(n._utils.checkEmptyNull(e.istInMemo)?"":" ("+e.istInMemo+")")+"</td>")),c.append($('<td style="'+l+'" class="ac" '+("A"!=e.istInStatus?'title="변경일시 : '+e.istInStatusDate+'"':"")+"></td>").append(s));let p=e.istOutNm;"A"!=e.istOutCd?null!=e.istOutIsSeq&&(p=$("<span>"+n._utils.nullTostring(e.istOutNm,"")+"</span>")):p=$("<span>직출 "+(n._utils.checkEmptyNull(e.istOutNm)?"":"("+n._utils.nullTostring(e.istOutNm,"")+")")+"</span>"),c.append($('<td style="'+l+'padding-right:0px;border-right:0px;" class="ar isOutMap cursorPointer"></td>').append(null!=e.outGpsLatitude?' <i class="fa-solid fa-location-arrow" title="지도보기" style="color:#ffb98b;margin-top: 2px;margin-bottom: 2px;"></i>':"")),c.append($('<td style="'+l+'border-left:0px;" class="al"></td>').append(p)),c.append($('<td class="al" style="'+l+'padding-left:8px;padding-right:1px;">'+(n._utils.checkEmptyNull(e.istOutHopeDt)?"&nbsp;":'<span style="font-weight:550;">'+n._utils.dateformatStringToDate(e.istOutHopeDt).substring(5)+"</span>")+(n._utils.checkEmptyNull(e.istOutMemo)?"":" ("+e.istOutMemo+")")+"</td>")),c.append($('<td style="'+l+'" class="ac" '+("A"!=e.istOutStatus?'title="변경일시 : '+e.istOutStatusDate+'"':"")+"></td>").append(r)),c.append($('<td style="'+l+'"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="수주서 수정 화면보기" style="font-size:14px;"></i></td>')),c.data("ROW",e),c.appendTo(t)})),e(this,"eventAction",(t=>{const e=this;$("input[name=cuNm]",t).autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"A"};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(n,l){$("input[name=cuSeq]",t).val(l.item.cuSeq),$("input[name=oFileNm]",t).focus();let o={ctl:"employee",cmd:"list",cuSeq:l.item.cuSeq};new a(e._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(n){0==n.code?n.data.length>0&&($("input[name=oInchargeNm]",t).val(n.data[0].eNm),e._utils.checkEmptyNull(n.data[0].eTel)||$("input[name=oInchargeTel]",t).val(e._utils.formatPhoneNumber(n.data[0].eTel))):alert(n.message)}))},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=cuNm]",t).on("change",(function(e){""==this.value&&$("input[name=cuSeq]",t).val("")})),$(".customerEmployee",t).on("click",(function(){let n=$("input[name=cuSeq]",t).val();if(e._utils.checkEmptyNull(n))return void alert("업체를 먼저 선택하십시요");let l=$(this).closest("tr"),o={ctl:"employee",cmd:"list",cuSeq:n};new a(e._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code)if(t.data.length>0){let n=$("template#orderCustomerEmployeeList");e._parent.openLayer(n.html(),e.orderCustomerEmployeeListEvent,t.data,l)}else alert("직원을 먼저 등록하시기 바랍니다.");else alert(t.message)}))})),$(".btnAddFile",t).on("click",(function(e){e.preventDefault(),$("input[name=orderFile]",t).trigger("click")})),$(".btnDeleteFile",t).on("click",(function(n){n.preventDefault(),confirm("첨부된 파일을 삭제하시겠습니까?",(function(n){let l={ctl:"order",cmd:"oFileDelete",oSeq:$("input[name=oSeq]",t).val()};new a(e._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){0==e.code&&($(".btnDeleteFile",t).hide(),$(".fa-file-arrow-down",t).hide(),$(".addFileName",t).text(""),$(".btnAddFile",t).show())}))}))})),$(".oFileNmDown",t).on("click",(function(){e._order.fileInfo.length>0&&e._parent.fileDownload(e._order.fileInfo[0])})),$("input[name=oFileNm]",t).on("focusout",(function(){let t=$(this).val(),n=$(this);if(t.length>0){let l={ctl:"order",cmd:"fileNmCheck",oFileNm:t};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data;if(e.length>0){let t=e[0],a="＊고객사 : "+t.cuNm+" ＊등록일시 : "+t.creDate.substring(0,16);n.attr("title",a).css("border","1px solid red")}else n.attr("title","").css("border","")}}))}else n.attr("title","")})),$("input[name=orderFile]",t).on("change",(function(n){let a=n.target.files[0],l=20971520;if(a.size>l)return alert("최대 "+e._utils.bytesToSize(l)+" 까지만 가능 합니다.\n파일용량 :"+e._utils.bytesToSize(a.size)),delete n.target.files,!1;$(".addFileName",t).text(a.name)})),$("input[name=oInchargeNm]",t).autocomplete({source:function(n,l){let o={ctl:"employee",cmd:"nmSearch",searchWord:this.term},i=$("input[name=cuSeq]",t).val();""!=i&&(o.cuSeq=i),new a(e._const,o,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){let e;return e=""==i&&null!=t.cuNm?"["+t.cuNm+"] "+t.eNm:t.eNm,{label:e,value:t.eNm,eSeq:t.eSeq,eTel:t.eTel}}));l(e)}else l([])}))},focus:function(t,e){return!1},select:function(n,a){null!=a.item.eTel&&$("input[name=oInchargeTel]",t).val(e._utils.formatPhoneNumber(a.item.eTel)),$("input[name=istInNm]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=oPaperSize]",t).autocomplete({source:function(t,n){let l={ctl:"common",cmd:"paperSizeInfo",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.key,value:t.key}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=oCnt]",t).focus()},minLength:1,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=istInNm]",t).autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.isNm,value:t.isNm,isSeq:t.isSeq,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(n,a){$("input[name=istInIsSeq]",t).val(a.item.isSeq),e._utils.checkEmptyNull(a.item.v.isAddrDetail)||$("input[name=isInAddrDetail]",t).val(a.item.v.isAddrDetail),e._utils.checkEmptyNull(a.item.v.isAddr)||$("input[name=isInAddr]",t).val(a.item.v.isAddr),e._utils.checkEmptyNull(a.item.v.isZipcode)||$("input[name=isInZipcode]",t).val(a.item.v.isZipcode),e._utils.checkEmptyNull(a.item.v.isInchargeNm)||$("input[name=istInInchargeNm]",t).val(a.item.v.isInchargeNm),e._utils.checkEmptyNull(a.item.v.isInchargeTel)||$("input[name=istInInchargeTel]",t).val(e._utils.formatPhoneNumber(a.item.v.isInchargeTel)),$("input[name=istInHopeDt]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".istInAddr",t).on("click",(function(e){"A"!=$("select[name=istInCd]",t).val()&&new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=isInZipcode]",t).val(e.zonecode),$("input[name=isInAddr]",t).val(n),$("input[name=isInAddrDetail]",t).focus()}}).open()})),$("input[name=istOutNm]",t).autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.isNm,value:t.isNm,isSeq:t.isSeq,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(n,a){$("input[name=istOutIsSeq]",t).val(a.item.isSeq),e._utils.checkEmptyNull(a.item.v.isAddrDetail)||$("input[name=isOutAddrDetail]",t).val(a.item.v.isAddrDetail),e._utils.checkEmptyNull(a.item.v.isAddr)||$("input[name=isOutAddr]",t).val(a.item.v.isAddr),e._utils.checkEmptyNull(a.item.v.isZipcode)||$("input[name=isOutZipcode]",t).val(a.item.v.isZipcode),e._utils.checkEmptyNull(a.item.v.isInchargeNm)||$("input[name=istOutInchargeNm]",t).val(a.item.v.isInchargeNm),e._utils.checkEmptyNull(a.item.v.isInchargeTel)||$("input[name=istOutInchargeTel]",t).val(e._utils.formatPhoneNumber(a.item.v.isInchargeTel)),$("input[name=istOutHopeDt]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".istOutAddr",t).on("click",(function(e){"A"!=$("select[name=istOutCd]",t).val()&&new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=isOutZipcode]",t).val(e.zonecode),$("input[name=isOutAddr]",t).val(n),$("input[name=isOutAddrDetail]",t).focus()}}).open()})),$("select[name=istInCd],[name=istOutCd]",t).on("change",(function(e){let n=this.value,a=$(this).attr("name");"A"==n&&$("istInCd"==a?".inStorage":".outStorage",t).val("")}));let n={ctl:"process",cmd:"companyProcessList",searchWord:this.term,useYn:"Y"};new a(e._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=$("select[name=spSeq]",t);n.empty(),n.append($('<option value="">공정선택</option>'));for(let t=0;t<e.data.length;t++){let a=$('<option value="'+e.data[t].spSeq+'">'+e.data[t].spNm+"</option>");n.append(a)}n.trigger("change")}})),$("select[name=spSeq]",t).on("change",(function(n,l){let o=$(this).val(),i=$("select[name=cwSeq]",t);if(i.empty(),2==o?$("input[name=wInfo]",t).removeAttr("disabled").removeClass("disabled"):$("input[name=wInfo]",t).attr("disabled","disabled").addClass("disabled"),""!=o){$("select[name=wFrontYn]",t).empty().append(e.workFrontYnSelectOption("Y,N,Z")).trigger("focus");let n={ctl:"process",cmd:"companyList",spSeq:o,rows:999,useYn:"Y"};new a(e._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){i.removeAttr("disabled").removeClass("disabled"),i.removeAttr("readonly"),0==t.data.length&&i.attr("disabled","disabled").addClass("disabled");for(let e=0;e<t.data.length;e++){let n=$('<option value="'+t.data[e].cwSeq+'">'+t.data[e].cwNm+"</option>");i.append(n)}null!=l&&i.val(l).attr("readonly","readonly"),i.trigger("change")}}))}else i.attr("disabled","disabled").addClass("disabled"),$(".optionArea",t).empty()})),$("select[name=wFrontYn]",t).on("change",(function(e){$("select[name=cwSeq]",t).trigger("focus")})),$("select[name=cwSeq]",t).on("focus",(function(t){let e=$(this).val();$(this).data("ROW",e)})),$("select[name=cwSeq]",t).on("change",(function(n){let l=$(this).data("ROW"),o=$(this).val(),i=$("input[name=index]",t).val();if(""!=$(this).val()&&""==i){let n={ctl:"process",cmd:"companyLoad",cwSeq:this.value};new a(e._const,n,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(n){if(0==n.code){$(".optionArea",t).empty(),e.workOptionView(t,n.data.optionInfo)}})),null!=l&&l!=o&&("2"==$("select[name=spSeq]",t).val()?$("input[name=wInfo]",t).trigger("focus"):$("input[name=wMemo]",t).trigger("focus"))}})),$(".workTable tbody",t).on("click","td:not(.unEvent)",(function(){let n=$(".workTable tbody tr td",t),l=$(this).closest("tr"),o=l.data("ROW");l.attr("style"),n.css("background","");let i=l.find("td");for(let t=0;t<i.length;t++)$(i[t]).css("background","#d3e1ff !important;");$("input[name=index]",t).val(l.index());let s={ctl:"process",cmd:"companyLoad",cwSeq:o.cwSeq};new a(e._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(n){0==n.code&&$("select[name=wFrontYn]",t).empty().append(e.workFrontYnSelectOption("Y,N,Z",o.wFrontYn))})),e.workView(t,o),$(this).closest("tbody").children().css("background-color",""),$(this).css("background-color","#bec2f7")})),$(".workTable tbody",t).on("click",".outSourcing",(function(n){let a=$("input[name=oSeq]",t).val();if(e._utils.checkEmptyNull(a))return void alert("외주설정시 기본등록 저장후 수정변경가능합니다.");let l=$(this).closest("tr"),o=l.data("ROW"),i=$("template#outSourcingDiv");e._parent.openLayer(i.html(),e.layerOutSourcingViewEvent,o,l),n.stopPropagation()})),$(".workTable tbody",t).on("click",".workDelete",(function(){let n=this.closest("tr");confirm("삭제하시겠습니까?",(function(a){a&&(n.remove(),e.workClean(t),$(".workTable tbody",t).children().css("background-color",""))}))})),$("input[name=oCnt]",t).on("focus",(function(){let t=$(this).val();t=e._utils.getOnlyNumber(t),$(this).data("ROW",t).val("0"==t?"":t)})),$("input[name=oCnt]",t).on("focusout",(function(){let t=$(this).val();""!=t&&$(this).val(e._utils.numberWithCommas(""==t?"0":t))}));let l={cuNm:"oFileNm",oFileNm:"oPaperSize",oPaperSize:"oCnt",oCnt:"oInchargeNm",oInchargeNm:"oInchargeTel",oInchargeTel:"oMemo",oMemo:"istInNm",istInNm:"istInHopeDt",istInHopeDt:"istInMemo",istInMemo:"istInAddr",isInAddr:"istInAddrDetail",istInAddrDetail:"oInchargeNm",isInInchargeNm:"isInInchargeTel",isInInchargeTel:"istOutNm",istOutNm:"istOutHopeDt",istOutHopeDt:"istOutMemo",istOutMemo:"isOutAddr",isOutAddr:"istOutAddrDetail",istOutAddrDetail:"oOutInchargeNm",isOutInchargeNm:"isOutInchargeTel",isOutInchargeNm:"spSeq"};$("input:not([name=wMemo],select)",t).on("keypress",(function(e){if(13==e.keyCode){let e=$(this).attr("name");$("[name="+l[e]+"]",t).focus()}})),$(".cleanWork",t).on("click",(function(n){e.workClean(t),$(".workTable tbody",t).children().css("background-color","")})),$(".saveWork",t).on("click",(function(n){let a=$(".workInfo",t).data("ROW");a=a??{};let l=$("input[name=wSeq]",t).val(),o=$("select[name=spSeq]",t).val(),i=$("select[name=spSeq]",t).find(":selected").text(),s=$("select[name=cwSeq]",t).val(),r=$("select[name=cwSeq]",t).find(":selected").text(),c=$("input[name=wInfo]",t).val(),d=$("select[name=wFrontYn]",t).val(),p=$("select[name=wFrontYn]",t).find(":selected").text(),u=$("input[name=wMemo]",t).val(),m=$(".optionArea",t),f=m.data("ROW"),h=$("input[name=index]",t).val();if(e._utils.checkEmptyNull(s))return alert("작업 명을 입력 선택 하십시오"),$("input[name=cwNm]",t).focus(),!1;a.wSeq=l,a.spSeq=o,a.spNm=i,a.cwSeq=s,a.wNm=r,a.wInfo=c,a.wFrontYn=d,a.wFrontYnNm=p,a.wMemo=u;for(let t=0;t<f.length;t++)if("Y"==f[t].cwoOrderYn){let n=$("[name="+f[t].cwoSeq+"]",m).next();if(0==n.length)f[t].woInput=$("[name="+f[t].cwoSeq+"]",m).val();else{let a=n.val();if(e._utils.checkEmptyNull(a))f[t].woInput=$("[name="+f[t].cwoSeq+"]",m).val();else{if(a.indexOf("→")>-1)return void alert('"→"문자는 사용 할수 없습니다.');f[t].woInput=$("[name="+f[t].cwoSeq+"]",m).val()+"→"+a}}if("Y"==f[t].cwoMustYn&&e._utils.checkEmptyNull(f[t].woInput))return alert("세부사항 ["+f[t].cwoNm+"]을 입력하세요"),!1}a.optionInfo=f,""!=h?(a.index=h,e.workChange(t,a)):e.workAdd(t,a),$(".workTable tbody",t).children().css("background-color",""),e.workClean(t)})),$(".save",t).on("click",(function(n){if(e._utils.checkRequired(t)){let n=e._utils.serializeObject(t);if(n.oApprovalYn=t.find("input[name=oApprovalYn]:checked").val(),n.workInfo=[],"D"==n.oStatus)return alert("작업이 완료되어 수정을 할 수 없습니다."),!1;let a=$(".workTable tbody tr",t);if(0==a.length)return alert("하나 이상의 작업을 등록하십시요"),!1;for(let t=0;t<a.length;t++){let e=$(a[t]).data("ROW");for(let t=0;t<n.workInfo.length;t++)if(JSON.stringify(n.workInfo)===JSON.stringify(e))return alert("중복된 작업이 존재합니다."),!1;n.workInfo.push(e)}if(n.workInfo=JSON.stringify(n.workInfo),null==n.cuSeq||""==n.cuSeq)return alert("업체 이름을 목록에서 선택해서 등록해주세요."),!1;if(null!=n.oSeq&&""!=n.oSeq){new Promise(((n,a)=>{$("input[name=orderFile]",t)[0].files[0]?e.mediaUpload($("input[name=orderFile]",t)[0].files[0],(function(t){-9999==t&&a(new Error("upload  is failed")),n(t.fileSeq)})):n(void 0)})).then((t=>{null!=t&&(n.fileSeq=t),n=e._utils.filterJsonRemoveNull(n),e.update(n,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("수정 되었습니다."),e._parent.modifyTime({action:"order"})):alert("수정에 실패하였습니다.")}))}))}else{new Promise(((n,a)=>{$("input[name=orderFile]",t)[0].files[0]?e.mediaUpload($("input[name=orderFile]",t)[0].files[0],(function(t){-9999==t&&a(new Error("upload  is failed")),n(t.fileSeq)})):n(void 0)})).then((t=>{null!=t&&(n.fileSeq=t),n=e._utils.filterJsonRemoveNull(n),e.insert(n,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("등록되었습니다."),e._parent.modifyTime({action:"order"})):alert("등록에 실패하였습니다.")}))}))}}})),$(".saveAs",t).on("click",(function(n){if(e._utils.checkRequired(t)){let n=e._utils.serializeObject(t);n.oApprovalYn=t.find("input[name=oApprovalYn]:checked").val(),n.workInfo=[];let a=$(".workTable tbody tr",t);for(let t=0;t<a.length;t++)n.workInfo.push($(a[t]).data("ROW"));if(null==n.cuSeq||""==n.cuSeq)return alert("업체 이름을 목록에서 선택해서 등록해주세요."),!1;n=e.dataReset(n),n.workInfo=JSON.stringify(n.workInfo),n=e._utils.filterJsonRemoveNull(n),e.insert(n,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("등록되었습니다."),e._parent.modifyTime({action:"order"})):alert("등록에 실패하였습니다.")}))}})),$(".workTable tbody",t).sortable({handle:".handle"}),e._utils.focusEvent($("input[name=oInchargeTel]",t),"tel")})),e(this,"dataReset",(t=>{if("object"==typeof t){delete t.istSeq,delete t.oApprovalYn;for(let e=0;e<t.workInfo.length;e++){delete t.workInfo[e].wSeq,delete t.workInfo[e].oSeq,delete t.workInfo[e].istSeq,delete t.workInfo[e].wOutsourcingYn,delete t.workInfo[e].wStatus,delete t.workInfo[e].wStartCnt,delete t.workInfo[e].wStartDate,delete t.workInfo[e].wEndCnt,delete t.workInfo[e].wEndDate;for(let n=0;n<t.workInfo[e].optionInfo.length;n++)delete t.workInfo[e].optionInfo[n].wSeq,delete t.workInfo[e].optionInfo[n].woSeq}}return t})),e(this,"initNewLayer",(t=>{const e=this,n=$(`#${t}`);$(".title",n).text("수주 등록"),$(".btnSearch.save",n).text("등록"),$(".saveAs",n).remove(),e.eventAction(n),$("select[name=istInCd],[name=istOutCd]",n).trigger("change");let l=$(".actionArea",n);l.empty().append("반복수주코드").attr("title","반복형 수주 코드를 입력하십시오"),l.next().empty(),l.next().append($('<input type="text" name="oCode" class="w100p srchIp" style="background-color: #e7f2ff;" placeholder="설정한 반복수주코드를 입력하십시요">')),$("input[name=oCode]",n).autocomplete({source:function(t,n){let l={ctl:"order",cmd:"codeSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return $.extend({label:t.oCode+"("+t.cuNm+")",value:t.oCode},t)}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(t,a){e.load({oSeq:a.item.oSeq},(function(t){if(0==t.code){let a=t.data;a=e.dataReset(a),e._utils.unSerializeObject(n,a);let l=t.data.workInfo;for(let t=0;t<l.length;t++)e.workAdd(n,l[t])}}))},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".fileDown",n).hide()})),e(this,"reloadLayer",(t=>{const e=this,n=$(`#${t}`);null!=e._order.orderNotice&&e._order.orderNotice.length>0&&(e._order.orderNotice=e._order.orderNotice[0].onContent),$(".title",n).empty().append("수주 수정"),n.find(".applyCheck").remove(),$(".btnSearch",n).text("수정");let a=$('<tr><th class="txt_r">변경 공지</th><td colspan="7"><textarea name="orderNotice"class="w100p" rows="1"></textarea></td></tr>');$(".orderMaster tbody",n).append(a),null!=e._order.oApprovalDate&&$(".orderKey",n).append('<span class="f_rt" style="font-size:11px;display: inline-block; margin-top: 6px;"><strong style="color: #446075;">승인일시 </strong> '+e._order.oApprovalDate+" / "+e._order.oApprovalNm+"</span>"),e.eventAction(n),e._utils.unSerializeObject(n,e._order),e._utils.focusEvent($("input[name=istInInchargeTel],input[name=istOutInchargeTel]",n),"tel");let l=e._order.workInfo;for(let o=0;o<l.length;o++)e.workAdd(n,l[o]);$("input[name=oCnt]",n).trigger("focusout"),e._order.fileInfo.length>0&&($(".btnDeleteFile",n).show(),$(".oFileNmDown",n).show().addClass("cursorPointer"),$(".btnAddFile",n).hide(),$(".addfileName",n).text(e._order.fileInfo[0].realName))})),e(this,"workAdd",((t,e)=>{let n=this,a=$(".workTable tbody",t),l=$('<tr style="border-bottom: 1px dotted #c1c1c1;" />').data("ROW",e);l.append($('<td class="ac handle cursorPointer"><i class="fa-solid fa-arrows-up-down"></i></td>')),l.append($('<td class="ac cursorPointer"></td>').text(e.spNm)),l.append($('<td class="ac cursorPointer"></td>').text(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")")));let o="-";"Y"==e.wFrontYn?o="전면":"N"==e.wFrontYn?o="후면":"Z"==e.wFrontYn&&(o="양면"),l.append($('<td class="ac cursorPointer">'+o+"</td>"));let i="";for(let r=0;r<e.optionInfo.length;r++){let t=e.optionInfo[r];"Y"==t.cwoOrderYn&&(n._utils.checkEmptyNull(t.woInput)||(i+=(""!=i?" ":"")+'<span class="workOptionListOne vm" style="padding:0px;"><span class="workOptionInfo">'+t.cwoNm+" : <strong>"+t.woInput+"</strong></span></span>"))}l.append($('<td class="al workOptionListDiv cursorPointer" style="padding: 0px;"></td>').append($(i))),l.append($('<td class="al cursorPointer" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></td>').text(e.wMemo));let s="자사";"Y"==e.wOutsourcingYn&&(1==e.wOutsourcingInfo.length?s=e.wOutsourcingInfo[0].cuNm:e.wOutsourcingInfo.length>1&&(s=e.wOutsourcingInfo.length+"개 업체")),l.append($('<td class="unEvent"><a href="#" class="btnStyleMin03 outSourcing" title="외주업체 설정" style="font-size:10px !important;">'+s+"</a></td>")),l.append($('<td class="unEvent"><i class="fa-solid fa-square-minus workDelete" title="작업삭제" style="font-size: 16px;color:#81b1cd;"></i></td>')),a.append(l)})),e(this,"workClean",(t=>{$("input[name=index]",t).val(""),$("input[name=wSeq]",t).val(""),$("select[name=spSeq]",t).val("").removeAttr("readonly"),$("select[name=cwSeq]",t).empty().removeData("ROW").attr("disabled","disabled").addClass("disabled"),$("select[name=wFrontYn]",t).empty().append("<option>작업면</option>"),$("input[name=wMemo]",t).val(""),$(".optionArea",t).empty(),$(".saveWork",t).attr("title","작업 추가").text("추가"),$("input[name=wInfo]",t).val("").attr("disabled","disabled").addClass("disabled")})),e(this,"workView",((t,e)=>{$(".workInfo",t).data("ROW",e),this._utils.checkEmptyNull(e.wSeq)?$("input[name=wSeq]",t).val(""):$("input[name=wSeq]",t).val(e.wSeq),$("select[name=spSeq]",t).val(e.spSeq).trigger("change",e.cwSeq).attr("readonly","readonly"),$("select[name=wFrontYn]",t).val(e.wFrontYn),$("input[name=wMemo]",t).val(e.wMemo),$(".saveWork",t).attr("title","작업 수정").text("수정"),2==e.spSeq?$("input[name=wInfo]",t).val(e.wInfo).removeAttr("disabled").removeClass("disabled"):$("input[name=wInfo]",t).val("").attr("disabled","disabled").addClass("disabled"),this.workOptionView(t,e.optionInfo)})),e(this,"workFrontYnSelectOption",((t,e)=>{let n="",a={Y:"전면",N:"후면",Z:"양면"},l=t.split(","),o="";if(""==t)n+='<option value="">없음</option>';else{null==e&&(o="selected"),n+='<option value="" '+o+">선택</option>";for(let t=0;t<l.length;t++)o="",e==l[t]&&(o="selected"),n+='<option value="'+l[t]+'" '+o+">"+a[l[t]]+"</option>"}return n})),e(this,"workOptionView",((t,e)=>{let n=this,a=$(".optionArea.vm",t).data("ROW",e);a.empty();for(let l=0;l<e.length;l++)if("Y"==e[l].cwoOrderYn){let t=$('<span class="workOptionListOne vm" style="margin-top:0px;margin-bottom:0px;padding-top:0px !important; padding-bottom:0px !important;"/>'),o=$('<strong class="workOptionInfoInput" />');if("Y"==e[l].cwoMustYn&&o.append('<span style="color:red">*</span>'),o.append(e[l].cwoNm+" : "),"A"==e[l].cwoInputCd){let t=$('<select name="'+e[l].cwoSeq+'"><option value="">선택</option></select>');if(!n._utils.checkEmptyNull(e[l].cwoData)){let n=e[l].cwoData.split(",");for(let e=0;e<n.length;e++){let a=$("<option />");a.val(n[e]).text(n[e]),t.append(a)}}t.on("change",(function(){let t=$(this).val(),a=$(this).closest("strong"),o=$(this).closest("span").data("ROW"),i=JSON.parse(o.cwoDataSub),s=$(this).next();if(""==t)s.length>0&&s.remove();else if(s.length>0&&s.remove(),null==i||n._utils.checkEmptyNull(i[t]));else if("select"==i[t].type){s=$('<select name="'+e[l].cwoSeq+'_sub" style="margin-left:5px"/>'),s.empty(),s.append('<option value="">선택</option>');let n=i[t].values;for(let t=0;t<n.length;t++){let e=$("<option />");e.val(n[t]).text(n[t]),s.append(e)}a.append(s)}else"text"==i[t].type&&(s=$('<input type="text" name="'+e[l].cwoSeq+'_sub" style=" width:95px;margin-left:5px;" placeholder="최대 40글자"/>'),a.append(s))})),o.append(t)}else if(["T","C","W","M","L"].indexOf(e[l].cwoInputCd)>-1){let t=$('<input type="text" name="'+e[l].cwoSeq+'" style="width:95px;" placeholder="최대 40글자"  >');n._utils.checkEmptyNull(e[l].woInput)||t.val(e[l].woInput),["W","M","L"].indexOf(e[l].cwoInputCd)>-1?(n._utils.focusEvent(t,"unit"),t.css({width:"40px","text-align":"right"}),t.attr("placeholder",e[l].cwoInputCdNm)):"C"==e[l].cwoInputCd&&(n._utils.focusEvent(t,"comma"),t.css({width:"50px","text-align":"right"}),t.attr("placeholder",e[l].cwoInputCdNm)),o.append(t)}t.append(o),t.data("ROW",e[l]),a.append(t)}for(let l=0;l<e.length;l++)if("Y"==e[l].cwoOrderYn)if("A"==e[l].cwoInputCd){let t=e[l].woInput;if(!n._utils.checkEmptyNull(t)&&t.indexOf("→")>-1){let n=t.split("→");$("select[name="+e[l].cwoSeq+"]",a).val(n[0]).trigger("change"),$("[name="+e[l].cwoSeq+"_sub]",a).val(n[1])}else $("select[name="+e[l].cwoSeq+"]",a).val(e[l].woInput).trigger("change")}else["T","C","W","M"].indexOf(e[l].cwoInputCd)>-1&&$("input[name="+e[l].cwoSeq+"]",a).val(e[l].woInput)})),e(this,"workChange",((t,e)=>{let n=this,a=$(".workTable tbody",t),l=$("input[name=index]",t).val(),o=a.find("tr").eq(l),i=o.find("td");$(i[1]).text(e.spNm),2==e.spSeq?$(i[2]).text(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")")):$(i[2]).text(e.wNm);let s="-";"Y"==e.wFrontYn?s="전면":"N"==e.wFrontYn?s="후면":"Z"==e.wFrontYn&&(s="양면"),$(i[3]).text(s);let r="";for(let p=0;p<e.optionInfo.length;p++){let t=e.optionInfo[p];"Y"==t.cwoOrderYn&&(n._utils.checkEmptyNull(t.woInput)||(r+=(""!=r?" ":"")+'<span class="workOptionListOne vm" style="padding:0px;"><span class="workOptionInfo">'+t.cwoNm+" : <strong>"+t.woInput+"</strong></span></span>"))}$(i[4]).empty().append(r),$(i[5]).text(e.wMemo);let c="자사";"Y"==e.wOutsourcingYn&&(1==e.wOutsourcingInfo.length?c=e.wOutsourcingInfo[0].cuNm:e.wOutsourcingInfo.length>1&&(c=e.wOutsourcingInfo.length+"개 업체"));let d=$('<a href="#" class="btnStyleMin03 outSourcing" title="외주업체 설정" style="font-size:10px !important;">'+c+"</a>");$(i[6]).empty().append(d),o.data("ROW",e)})),e(this,"workOutSourcingChange",((t,e)=>{let n=t.find("td"),a="자사";"Y"==e.wOutsourcingYn&&(1==e.wOutsourcingInfo.length?a=e.wOutsourcingInfo[0].cuNm:e.wOutsourcingInfo.length>1&&(a=e.wOutsourcingInfo.length+"개 업체"));let l=$('<a href="#" class="btnStyleMin03 outSourcing" title="외주업체 설정" style="font-size:10px !important;">'+a+"</a>");$(n[6]).empty(),$(n[6]).append(l),t.data("ROW",e)})),e(this,"layerOutSourcingViewEvent",((t,e,n)=>{const l=this,o=$(`#${t}`),i=$(".wrapRoot",o),s=$(".customerInfo",i).clone();if($(".title",o).text("["+e.wNm+"] 외주설정"),null!=e.wOutsourcingInfo&&e.wOutsourcingInfo.length>0){i.empty();for(let t=0;t<e.wOutsourcingInfo.length;t++){let n=e.wOutsourcingInfo[t],a=s.clone();l._utils.unSerializeObject(a,n),l._utils.focusEvent($("input[name=oswCnt]",a),"comma"),a.data("ROW",n),r(a,l),i.append(a)}l._utils.popUpLayerTopReset(o)}else{let t=$(".customerInfo",i);$(".wNm",t).text(e.wNm),r(t,l)}function r(t,e){$("input[name=cuNm]",t).autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"B"};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(n,a){$("input[name=cuSeq]",t).val(a.item.cuSeq),e._utils.checkEmptyNull(a.item.cuCSeq)?($(".unMemberCompany",t).hide(),$(".memberCompany",t).show()):($(".unMemberCompany",t).show(),$(".memberCompany",t).hide())},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=cuNm]",t).on("change",(function(e){""==this.value&&$("input[name=wCuSeq]",t).val("")})),$(".customerDelete",t).on("click",(function(t){if(1==$(".customerDelete",o).length)return alert("1개 이상의 외주사가 존해 해야 됩니다."),!1;let n=$(this).closest(".customerInfo");"Y"!=n.data("ROW").osSendYn?(n.remove(),e._utils.popUpLayerTopReset(o)):alert("발주 처리되어 삭제 할수 없습니다.")}))}$(".addCustomer",o).on("click",(function(t){let n=s.clone();$(".wNm",n).text(e.wNm),r(n,l),i.append(n),l._utils.popUpLayerTopReset(o)})),$(".save",o).on("click",(function(t){let e=$(".customerInfo",i),a=[],s=[];for(let n=0;n<e.length;n++){let t=e[n];if(!l._utils.checkRequired(t))return!1;{let e=l._utils.serializeObject(t);if(null==e.cuSeq||""==e.cuSeq)return alert("업체 이름을 목록에서 선택해서 등록해주세요."),!1;if(null==e.oswCnt||""==e.oswCnt||"0"==e.oswCnt)return alert("발주할 수량을 입력하십시요"),!1;if(s.indexOf(e.cuSeq)>-1)return alert("중복된 거래처가 있습니다."),!1;s.push(e.wCuSeq),a.push(e)}}let r=n.data("ROW");r.wOutsourcingYn="Y",r.wOutsourcingInfo=a,n.data("ROW",r),l.workOutSourcingChange(n,r),$(".btnClosePopLayer",o).trigger("click")})),$(".delete",o).on("click",(function(t){confirm("자사 작업으로 전환 하시겠습니까?",(function(t){if(t){let e=n.data("ROW");e.wOutsourcingYn="N",$.extend(e,t),n.data("ROW",e),l.workOutSourcingChange(n,e),$(".btnClosePopLayer",o).trigger("click")}}))}))})),e(this,"orderCustomerEmployeeListEvent",((t,e,n)=>{const a=this,l=$(`#${t}`);let o=$(".employeeList tbody",l);o.empty();for(let i=0;i<e.length;i++){let t=e[i],n=$("<tr/>");n.append('<td class="ac"><a href="javascript:void(0);" class="btnSearch employeeChoice" style="font-size: 11px !important; font-weight: normal; height: 20px;padding-top:3px;"><i class="fa-solid fa-check "></i></a></td>'),n.append("<td>"+("Y"==t.eManagerYn?"대표":"")+"</td>"),n.append("<td>"+a._utils.nullTostring(t.eNm,"")+"</td>"),n.append("<td>"+a._utils.nullTostring(t.eRank,"")+"</td>"),n.append("<td>"+a._utils.formatPhoneNumber(t.eTel,"")+"</td>"),n.data("ROW",t),n.appendTo(o)}o.on("click",".employeeChoice",(function(){let t=$(this).closest("tr").data("ROW");$("input[name=oInchargeNm]",n).val(t.eNm),$("input[name=oInchargeTel]",n).val(a._utils.formatPhoneNumber(t.eTel,"")),$(".btnClosePopLayer",l).trigger("click")}))})),e(this,"layerMarkView",(t=>{t('<div class="mw_defalut" style="width:380px;height:200px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title">반복형 수주 설정</span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t<div style="overflow-y:auto;padding:2px;">\n\t\t\t\t\t\t<div class="bottonWrap">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<div class="ar">\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="javascript:void(0);" class="btnSearch save">저장</a>&nbsp;&nbsp;\n\t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="btnSearch2 delete" style="padding-top:4px;"><i class="fa-regular fa-trash-can" style="font-size:17px;"></i></a>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="searchWrap">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="60px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">업체명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuNm"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">품&nbsp;&nbsp;&nbsp;&nbsp;명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oFileNm"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">코드지정</th>\n\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="oMarkYn" value="Y">\n\t\t\t\t\t\t\t\t\t\t\t<input type="hidden" name="oSeq" value="">\n\t\t\t\t\t\t\t\t\t\t\t<input type="text" name="oCode" class="w100p" requiremsg="코드" placeholder="코드지정 (5자리 이상)">\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>')})),e(this,"initMarkLayer",(t=>{const e=this,n=$(`#${t}`);$(".save",n).on("click",(function(t){let l=$("input[name=oCode]",n).val();if(""==l)return alert("사용할 코드를 지정해 주세요"),!1;if(l.length<5)return alert("사용할 코드는 5자리 이상 지정해 주세요"),!1;let o={ctl:"order",cmd:"markUpdate",oSeq:$("input[name=oSeq]",n).val(),oMarkYn:"Y",oCode:l};new a(e._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($(".btnClosePopLayer",n).trigger("click"),e.retrieve(),alert("설정 되었습니다.")):alert("설정 실패하였습니다.")}))})),"N"==e._order.oMarkYn?$(".delete",n).remove():$(".delete",n).on("click",(function(t){confirm("반복형 수주건을 해지 하시겠습니까?",(function(t){if(t){let t={ctl:"order",cmd:"markUpdate",oSeq:$("input[name=oSeq]",n).val(),oMarkYn:"N"};new a(e._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($(".btnClosePopLayer",n).trigger("click"),e.retrieve(),alert("해지 되었습니다.")):alert("해지 실패하였습니다.")}))}}))})),$(".cuNm",n).text(e._order.cuNm),$(".oFileNm",n).text(e._order.oFileNm),$("input[name=oSeq]",n).val(e._order.oSeq),$("input[name=oMark]",n).val("Y"),$("input[name=oCode]",n).val(e._order.oCode)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고처",key:"istInNm",width:20,align:"left"}),u.push({name:"입고희망일",key:"oHopeInDt",width:12,align:"center"}),u.push({name:"입고자",key:"istInENm",width:15,align:"center"}),u.push({name:"출고처",key:"istOutNm",width:20,align:"left"}),u.push({name:"출고희망일",key:"oHopeOutDt",width:12,align:"center"}),u.push({name:"출고자",key:"istOutENm",width:15,align:"center"}),u.push({name:"메모",key:"oMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"order",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"order",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"order",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"order",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"order",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"apply",((t,e)=>{let n={ctl:"order",cmd:"apply"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"mediaUpload",((t,e)=>{let n=new FormData;n.append("ctl","media"),n.append("cmd","upload"),n.append("directory","order"),n.append("authLevel",3),n.append("upfile",t),new a(this._const,n,{isasync:!1,wapi:"user/fws",spinner:!0}).ajaxfiledata((function(t){0==t.code?e(t.data):(alert(t.message),e(-9999))}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},x=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{},n._currentDateTime=n._utils.currentDateTime(),n._code.find(".btnSearchCall").on("click",(function(t){n._currentDateTime=n._utils.currentDateTime(),n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),setTimeout(n.columnCheck,2e3)})),n._code.find(".btnStopCall").on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=wSeq]:checked");if(0==e.length)return void alert("중지 작업건을 선택하십시오");if(e.length>1)return void alert("1건씩만 설정이 가능합니다.");let a=e.closest("tr").data("ROW");"B"==a.wStatus?(n._work=a,n._work.stop=!0,n.layerActionView((function(t){n._parent.openLayer(t,n.layerActionEvent,a)}),a)):alert("현재 진행중인 작업을 선택하십시오")})),n._code.find(".btnFullScreen").on("click",(function(t){let e=n._code.find(".btnAutoReload");document.fullscreenElement?($(this).removeClass("activeOn").addClass("activeOff"),e.hasClass("activeOn")&&e.trigger("click")):($(this).removeClass("activeOff").addClass("activeOn"),e.hasClass("activeOff")&&e.trigger("click")),n._utils.fullScreen(n._code)})),n._code.find(".btnAutoReload").on("click",(function(t){null==n.intervalId?($(this).removeClass("activeOff").addClass("activeOn"),n.intervalRun()):($(this).removeClass("activeOn").addClass("activeOff"),clearInterval(n.intervalId),delete n.intervalId)})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find("input[name=onlyToday]").on("click",(function(t){n._code.find("input[name=startDt]").attr("disabled",$(this).is(":checked")),n._code.find("input[name=endDt]").attr("disabled",$(this).is(":checked"))}));new a(n._const,{ctl:"process",cmd:"companyProcessList",useYn:"Y"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=spSeq]",n._code);e.empty(),e.append($('<option value="">전체공정</option>'));for(let n=0;n<t.data.length;n++){let a=$('<option value="'+t.data[n].spSeq+'">'+t.data[n].spNm+"</option>");e.append(a)}}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".searchWrapBtn"),i=n._code.find(".dataHeadTable thead"),s=n._code.find(".pageInfoTfoot"),r=n._code.find(".dataListTable");n._tbody=r,l.on("change","select[name=spSeq]",(function(){let t=$(this).val(),e=$("select[name=wESeq]",l);if(n._utils.checkEmptyNull(t)){e.empty(),e.append($('<option value="">전직원</option>')),e.append($('<option value="NO" class="unChoice">미지정</option>'));let t=Object.keys(n._employeeList);for(let e=0;e<t.length;e++){let a=$('<option value="'+t[e]+'">'+n._employeeList[t[e]].eNm+"</option>");obj.append(a)}}else if(e.empty(),e.append($('<option value="">전직원</option>')),e.append($('<option value="NO">미지정</option>')),null!=n._processEmployeeList[t]){let a=n._processEmployeeList[t]??[];for(let t=0;t<a.length;t++)e.append($('<option value="'+a[t].eSeq+'">'+a[t].eNm+"</option>"))}})),l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),n.companyPlaceList((function(t){let e=$("select[name=cpSeq]",l);if(0==t.code)for(let n in t.data){let a=t.data[n],l=$("<option />");l.val(a.cpSeq).text(a.cpNm),e.append(l)}}));new a(n._const,{ctl:"employee",cmd:"processList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e={};n._employeeList={};let a=t.data;for(let t=0;t<a.length;t++){if(null==e[a[t].spSeq])e[a[t].spSeq]=[a[t]];else{let n=!0;for(let l=0;l<e[a[t].spSeq].length;l++)if(e[a[t].spSeq][l].eSeq==a[t].eSeq){n=!1;break}n&&e[a[t].spSeq].push(a[t])}null==n._employeeList[a[t].eSeq]&&(n._employeeList[a[t].eSeq]=a[t])}n._processEmployeeList=e;let l=$("select[name=wESeq]",n._code),o=Object.keys(n._employeeList);for(let t=0;t<o.length;t++){let e=$('<option value="'+o[t]+'">'+n._employeeList[o[t]].eNm+"</option>");l.append(e)}}})),"Y"==n._const.__MANAGER_YN&&($(".btnStatusUpdate",o).on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=wSeq]:checked");if(0==e.length)return void alert("변경할 작업건을 선택하십시오");if(e.length>1)return void alert("1건씩만 설정이 가능합니다.");let l=e.closest("tr").data("ROW");"A"!=l.wStatus?confirm("["+l.wNm+"] 작업을 대기상태로 변경하겠습니까?",(function(t){if(t){let t={ctl:"work",cmd:"reSet",oSeq:l.oSeq,wSeq:l.wSeq,pSeq:l.pSeq};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(alert("대기 상태로 초기화 되었습니다."),n.retrieve(),n._parent.modifyTime({action:"work"})):alert(t.message)}))}}),"변경"):alert("현재 진행 또는 완료 작업을 선택하십시오")})),$(".btnTodaySetting",o).on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=wSeq]:checked");if(0==e.length)return void alert("금일 작업할 마지막 작업건을 선택 하십시오");if(e.length>1)return alert("1건씩만 설정이 가능 합니다."),void n._code.find("input[name=chckAll]").prop("checked",!1);let a=e.closest("tr").data("ROW");n._work=a,n.layerTodayView((function(t){n._parent.openLayer(t,n.layerTodayEvent)}))})),$(".btnSortSetting",o).on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=wSeq]:checked"),a=$("input[name=orderculumn]",l).val(),o=$("input[name=orderby]",l).val();if("sort"==a&&"ASC"==o.toUpperCase()){if(0==e.length)return void alert("순서를 변경할 작업건을 선택 하십시오");if(e.length>1)return alert("1건씩만 설정이 가능 합니다."),void n._code.find("input[name=chckAll]").prop("checked",!1);let t=e.closest("tr").data("ROW");n._work=t,n.layerSortView((function(t){n._parent.openLayer(t,n.layerSortEvent)}))}else alert('작업 순서 변경시 검색을 초기하 하여 진행 하십시요<br>목록 좌측상단에 <i class="fa-solid fa-rotate-right" style="color:#000;"></i> 을 출러 초기화 하세요')})),$("input[name=wStatus][value=D]",l).on("change",(function(){let t=$(this).prop("checked");t?$("input[name=startDt],input[name=endDt]",l).removeClass("disabled").prop("disabled",!t):$("input[name=startDt],input[name=endDt]",l).addClass("disabled").prop("disabled",!t)})),$("input[name=wStatus][value=D]",l).trigger("change"),r.on("click",".todayJob",(function(){let t=$(this).closest("tr").data("ROW"),e={ctl:"work",cmd:"todayJob",spSeq:t.spSeq,wSeq:t.wSeq};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(n.retrieve(),n._parent.modifyTime({action:"work"})):9099==t.statusCode||alert(t.message)}))}))),i.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-1))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),n._defaultData=n._utils.serializeObject(l),i.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let c=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(c)||s.find("select[name=rowsPerPage]").val(c),s.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),s.find("input[name=page]").val("1"),n.retrieve()})),r.on("click",".processBtnA,.processBtnB,.processBtnC,.processBtnD",(function(){let t=$(this).closest("tr").data("ROW");n._work=t;let e=t.processInfo;for(let n=0;n<e.length;n++)if(t.pSeq==e[n].pSeq){n>0&&(t.processBefer=e[n-1]);break}function l(t){"C"!=t.istInStatus?confirm("입고가 되지 않은 작업 입니다. \n직접 입고처리 하시겠습니까?",(function(e){if(e){let e={ctl:"work",cmd:"incoming",wSeq:t.wSeq};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){0==e.code?(n.layerActionView((function(e){n._parent.openLayer(e,n.layerActionEvent,t)}),t),n._parent.modifyTime({action:"distribution"})):alert(t.message)}))}}),"입고처리"):n.layerActionView((function(e){n._parent.openLayer(e,n.layerActionEvent,t)}),t)}null==t.processBefer?l(t):"A"==t.wStatus&&"D"!=t.processBefer.pStatus?confirm("["+t.processBefer.spNm+"]공정이 완료 되지 않았습니다. \n작업진행 하시겠습니까?",(function(e){e&&l(t)})," 강제 작업 진행"):l(t)})),r.on("click",".printTd",(function(){let t=$(this).closest("tr").data("ROW");n._parent.workReport(t)})),r.on("click",".oFileNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.orderView(t)})),r.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),r.sortable({handle:".fa-up-down",items:"tr",axis:"y",containment:"parent",helper:function(t,e){return e.children().each((function(){$(this).width($(this).width())})),e},start:function(t,e){n._work=e.item.data("ROW"),n._work.index=e.item.index(),n._utils.tbodyUnMerge(r,[0,1,2,3,4,5,6,7],"oSeq")},update:function(t,e){let o=e.item.index()+1,i=$("input[name=page]",n._code).val(),s=$("input[name=rowsPerPage]",n._code).val();i>1&&(o=(parent(i)-1)*parent(s)+o);let c=e.item.data("ROW").sort,d=e.item.index()-n._work.index;if(n._utils.tbodyMerge(r,[0,1,2,3,4,5,6,7],"oSeq"),0!=d){const t=n._work;let e=n._utils.serializeObject($(".searchWrapArea",n._code)),i=l.find("input[name=wStatus]:checked");if(0==i.length)return void alert("작업상태를 선택해주세요");let s=[];for(let n=0;n<i.length;n++)s.push($(i[n]).val());e.wStatus=JSON.stringify(s);let r={ctl:"work",cmd:"sortMove",wSeq:t.wSeq,move:d,targetIndex:o,nowSort:c};$.extend(e,r),new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(n.retrieve(),n._parent.modifyTime({action:"work"})):(alert(t.message),n.retrieve())}))}}}),r.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.layerWorkView((function(e){n._parent.openLayer(e,n.layerWorkEvent,t)}),t)})),r.on("focus","input[name=wEndCnt]",(function(){let t=$(this).val();t=n._utils.getOnlyNumber(t),$(this).data("ROW",t).val(t)})),r.on("focusout","input[name=wEndCnt]",(function(){let t=$(this).data("ROW"),e=$(this).val();if(t=n._utils.getOnlyNumber(t),e=n._utils.getOnlyNumber(e),t!=e){let a=$(this).closest("tr").data("ROW");if(["D"].indexOf(a.wStatus)>-1){let t={wSeq:a.wSeq,cnt:e};n.update(t,(function(t){0==t.code?(n.retrieve(),n._parent.modifyTime({action:"work"})):alert(t.message)}))}else alert("완료된 작업만 수정 가능합니다."),$(this).val(t).trigger("focusout")}else $(this).val(n._utils.numberWithCommas(e))})),r.on("click",".oFileNmDown",(function(){let t=$(this).closest("tr").data("ROW");t.fileInfo.length>0&&n._parent.fileDownload(t.fileInfo[0])})),r.on("change","select[name=wESeq]",(function(){let t=$(this).closest("tr"),e=$(this).val(),l=t.data("ROW"),o={ctl:"work",cmd:"employeeChange",wSeq:l.wSeq,wESeq:e,spSeq:l.spSeq};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(n.retrieve(),n._parent.modifyTime({action:"work"})):9099==t.statusCode||alert(t.message)}))})),n.retrieve()})),e(this,"columnCheck",(()=>{let t=this;"Y"==t._const.__MANAGER_YN?(null==$("select[name=spSeq]",t._code).val()||""==$("select[name=spSeq]",t._code).val()?(t._tbody.sortable("disable"),$(".btnTodaySetting",t._code).hide(),$(".btnSortSetting",t._code).hide(),$(".btnStatusUpdate",t._code).hide(),t._code.find(".upDown").attr("width","0px").find("i").hide()):(t._tbody.sortable("enable"),$(".btnTodaySetting",t._code).show(),$(".btnSortSetting",t._code).show(),$(".btnStatusUpdate",t._code).show(),t._code.find(".upDown").attr("width","15px").find("i").show()),$(".totalEndCnt",t._code).show()):(t._code.find(".dataListTable tbody").sortable("disable"),$(".btnTodaySetting",t._code).hide(),$(".btnSortSetting",t._code).hide(),t._code.find(".upDown").attr("width","0px").find("i").hide(),$(".totalEndCnt",t._code).hide())})),e(this,"retrieve",(()=>{const t=this;if(null!=t._parent.activeMenuId()&&t._parent.activeMenuId()!=t._id)return void(null!=t.intervalId&&(t._code.find(".btnAutoReload").removeClass("activeOn").addClass("activeOff"),clearInterval(t.intervalId),delete t.intervalId));let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=cpSeq]").val(),d=l.find("input[name=oFileNm]").val(),p=l.find("select[name=spSeq]").val(),u=l.find("select[name=wESeq]").val(),m=l.find("input[name=searchWord]").val(),f=l.find("input[name=onlyToday]:checked").val(),h=l.find("input[name=wStatus]:checked");if(0==h.length)return void alert("작업상태를 선택해주세요");let g=[];for(let w=0;w<h.length;w++)g.push($(h[w]).val());let _={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",spSeq:p||"",wESeq:u||"",page:a,rows:n,orderColumn:s,orderType:r,cpSeq:c,wStatus:JSON.stringify(g),oFileNm:d,searchColumn:"cuNm",searchWord:m,onlyToday:f};t.list(_,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0,c=0;if(null!=l&&l.length>0){for(let a in l)0==a&&(s=l[a].totalCnt,r=Math.ceil(s/n),c=l[a].totalEndCnt),t.display(o,l[a]);t._utils.tbodyMerge(o,[0,1,2,3,4,5,6,7,8,20,21],"oSeq");let e=$("tr",o);for(let t=0;t<e.length;t++)$($(e[t]).find("td").eq(8)).css("border-right","1px solid #dedede !important;");$(".totalEndCnt strong").text(t._utils.numberWithCommas(c))}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);null!=p&&""!=p?(t._code.find(".spNm").hide().attr("width","0px"),t._code.find(".workThead").attr("colspan","11")):(t._code.find(".spNm").show().attr("width","70px"),t._code.find(".workThead").attr("colspan","12")),t._code.find(".eqNm").hide(),t._code.find(".eqNm").attr("width","0px"),t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage),t.columnCheck()}))})),e(this,"display",((t,e)=>{const n=this;let a="",l="";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let g=0;g<e.processInfo.length;g++){let t=e.processInfo[g];if(t.outsourcingInfo.length>0){let e=[],n=[];for(let a=0;a<t.outsourcingInfo.length;a++)e.push(t.outsourcingInfo[a].wNm),n.push(t.outsourcingInfo[a].cuNm);l+='<span class="processStatusOut'+t.pStatus+'" title="＊상태: '+t.pStatusNm+" ＊업체: "+n.join(", ")+" "+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}else l+='<span class="processStatus'+t.pStatus+'" title="＊상태: '+t.pStatusNm+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}let o="",i="#B3B3B3",s="N";for(let g=0;g<e.optionInfo.length;g++){let t=e.optionInfo[g];"Y"==t.woMarkYn&&(s="Y"),"Y"==t.cwoOrderYn?null!=t.woInput&&(o+=(""!=o?" ":"")+'<span class="workOptionListOne vm" style="padding:0px !important; margin-bottom:0px !important;"><strong class="workOptionInfo">'+t.cwoNm+' : <span style="font-weight: bold;">'+t.woInput+"</span></strong></span>"):("#B3B3B3"==i&&null!=t.woInput&&""!=t.woInput&&(i="#000"),"Y"==s&&(i="#f78ca4"))}let r="대기";"B"==e.wStatus&&(r="진행"),"C"==e.wStatus&&(r="중지"),"B"==e.istInStatus||e.istInStatus,"D"==e.wStatus&&(a+="background:#ddf2f9 !important;");let c="";e.fileInfo.length>0&&(c='<i class="fa-solid fa-download cursorPointer oFileNmDown" style="margin-right:5px;" title="파일 받기"></i>');let d=e.wENm;if("Y"==n._const.__MANAGER_YN){if(d=$('<select name="wESeq" class="w100p" style="border-width: 0px;background-color:transparent;" />'),d.append($('<option value="" class="optionUndefinde">미지정</option>')),null!=n._processEmployeeList[e.spSeq]){let t=n._processEmployeeList[e.spSeq]??[];for(let n=0;n<t.length;n++)d.append($('<option value="'+t[n].eSeq+'" '+(e.wESeq==t[n].eSeq?"selected":"")+">"+t[n].eNm+"</option>"))}""==d.val()&&d.css("color","#777")}let p="○";"B"==e.istInStatus&&(p='<span style="color:#aaa;" title="입고진행 : '+e.istInStatusDate+'">●</span>'),"C"==e.istInStatus&&(p='<span style="color:#68C3C7;" title="입고일시 : '+e.istInStatusDate+'">●</span>');let u="○";"B"==e.istOutStatus&&(u='<span style="color:#aaa;" title="출고진행 : '+e.istOutStatusDate+'">●</span>'),"C"==e.istOutStatus&&(u='<span style="color:#b583f5;" title="출고일시 : '+e.istOutStatusDate+'">●</span>');let m="";"B"==e.wStatus&&(m+="시작일시 : "+e.wStatusDate),"D"!=e.wStatus&&"D"!=e.wStatus||(m+="완료일시 : "+e.wStatusDate);let f=$('<tr class="tbodyTr tr_nohover" />');if(f.append($('<td><i class="fas fa-print printTd cursorPointer"></i></td>')),f.append($('<td class="ac">'+p+" "+u+"</td>")),f.append($('<td class="al cuNm cursorPointer" style="    white-space: nowrap;text-overflow: ellipsis; overflow: hidden;"/>').append('<span title="업체정보 조회">'+n._utils.nullTostring(e.cuNm,"")+"</span>")),f.append($('<td class="al" style="border-right:0px !important;" />').append(c)),f.append($('<td class="al" style="border-left:0px !important;padding-left:3px;padding-right:2px;padding-top:0px;padding-bottom:0px;line-height: 13px;"/>').append('<span class="oFileNm cursorPointer" title="수주서 보기">'+n._utils.nullTostring(e.oFileNm,"")+(null!=e.onContent&&""!=e.onContent?' <img src="/images/bul/bul_notice.gif"  class="orderNoticeIcon">':"")+"</span>")),f.append($('<td class="ac" >'+e.oPaperSize+"</td>")),f.append($('<td class="ar">'+n._utils.numberWithCommas(e.oCnt)+"</td>")),f.append($('<td class="al spFlow">'+l+"</td>")),f.append($('<td class="ac spNm">'+e.spNm+"</td>")),f.append($('<td class="ac eqNm" style="border:1px solid #dedede;"></td>').text(e.eqNm?e.eqNm:"")),f.append($('<td class="ac upDown" style="'+a+'"><i class="fa-solid fa-up-down" style="cursor:s-resize;" title="최상위로 이동시 아이콘 위쪽 부분눌러서 이동시키십시요"></i></td>')),f.append($('<td style="'+a+'border-top:1px solid #dedede;border-bottom:1px solid #dedede;" class="RowNum">'+e.num+"</td>")),f.append($('<td style="'+a+'border-top:1px solid #dedede;border-bottom:1px solid #dedede;"><input type="hidden" name="oSeq" value="'+e.oSeq+'"><input type="checkbox" class="vm" name="wSeq" value="'+e.wSeq+'"></td>')),"Y"==e.wOutsourcingYn){let t=[];for(let n=0;n<e.outsourcingInfo.length;n++)t.push(e.outsourcingInfo[n].cuNm);f.append($('<td style="'+a+'border-top:1px solid #dedede;border-bottom:1px solid #dedede;">'+("D"!=e.wStatus?'<span class="processBtnOut'+e.wStatus+'" title="작업처 :'+t.join(", ")+'">외주</span>':'<span title="'+m+'">완료</span>')+"</td>"))}else f.append($('<td style="'+a+'border-top:1px solid #dedede;border-bottom:1px solid #dedede;">'+("D"!=e.wStatus?'<span class="processBtn'+e.wStatus+'" title="'+m+'">'+r+"</span>":'<span title="'+m+'">완료</span>')+"</td>"));f.append($('<td style="'+a+'border:1px solid #dedede;">'+e.wFrontYnNm+"</td>")),f.append($('<td style="'+a+'padding-left:5px;border:1px solid #dedede;" class="al"></td>').append(("Y"==e.todayJob?'<i class="fa-solid fa-square-check todayJob" style="color:#f50000;" title="작업선정일시 : '+e.todayJobDate.substring(0,16)+'"></i> ':'<i class="fa-solid fa-square-check todayJob" style="color:#ccc;" title="금일작업 설정"></i>')+' <span class="wNm">'+e.wNm+"</span>"+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")"))),f.append($('<td style="'+a+'border:1px solid #dedede;padding-left:0px;padding-right:0px;"/>').append(d)),f.append($('<td style="'+a+'padding-left:0px;border:1px solid #dedede;" class="ar"></td>').append($('<span><strong style="font-size:9px;color: #f9ed40;padding-top: 7px;font-weight: bold">▶</strong><input type="text" name="wEndCnt" vType="number" class="w80p" style="text-align:right;border-width: 0px;background-color:transparent;padding-left: 0px;padding-right: 0px;" value="'+(null!=e.wEndCnt?n._utils.numberWithCommas(e.wEndCnt,"0"):"0")+'"></span>'))),f.append($('<td style="'+a+'border:1px solid #dedede;padding-left:0px;padding-right:0px;" class="al workOptionListDiv vm"></td>').append(o));let h=n._utils.checkEmptyNull(e.wMemo)?"":"※ "+e.wMemo;f.append($('<td style="'+a+'border:1px solid #dedede;" class="al"></td>').text(n._utils.strMaxCuttion(h)).attr("title",e.wMemo)),f.append($('<td style="'+a+'border:1px solid #dedede;">'+n._utils.dateformatMin(e.oApprovalDate).substring(5,10)+"</td>")),f.append($('<td class="al" style="'+a+'border:1px solid #dedede;">'+n._utils.nullTostring(e.istOutMemo,"")+"</td>")),f.append($('<td style="'+a+'border:1px solid #dedede;" class=""><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" style="font-size: 14px;color:'+i+';" title="'+("#B3B3B3"==i?"미등록":"Y"==s?"중요항목 있음":"등록완료")+'"></i></td>')),f.data("ROW",e),"Y"==n._const.__MANAGER_YN&&$(".todayJob",f).addClass("cursorPointer"),f.appendTo(t)})),e(this,"layerActionView",((t,e)=>{let n="start",a="작업 시작";"B"==e.wStatus?(n="end",a="작업 완료"):"C"==e.wStatus&&(n="start",a="작업 재시작"),null!=e.stop&&1==e.stop&&(n="stop",a="작업 중지");var l='<div class="mw_defalut" style="width:380px;height:220px;" id=""><div class="mw_title" id="handle">';l+='<h1 class="mw_title_mid">',l+='<span class="title">'+a+"</span>",l+='<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>',l+="</h1>",l+="</div>",l+='<div class="mw_ctWrap">',l+='<div class="mw_contents">',l+='<div style="overflow-y:auto;padding:2px;">',l+='<div class="bottonWrap">',l+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">',l+="<caption></caption>",l+="<colgroup>",l+='<col width="50%">',l+='<col width="50%">',l+="</colgroup>",l+="<tbody>",l+="<tr>",l+="<th>",l+='<div class="al"></div>',l+="</th>",l+="<th>",l+='<div class="ar"><a href="javascript:void(0);" class="btnSearch save">'+a+"</a></div>",l+="</th>",l+="</tr>",l+="</tbody>",l+="</table>",l+="</div>",l+='<div class="searchWrap">',l+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10 ">',l+="<caption></caption>",l+="<colgroup>",l+='<col width="60px">',l+='<col width="auto">',l+="<tbody>",l+="<tr>",l+='<th class="txt_r">업체명 : </th>',l+='<td class="cuNm">'+e.cuNm+"</td>",l+="</tr>",l+="<tr>",l+='<th class="txt_r">파일명 : </th>',l+='<td class="oFileNm">'+(e.oFileNm?e.oFileNm:"")+"</td>",l+="</tr>",l+="<tr>",l+='<th class="txt_r">작업명 : </th>',l+='<td class="wNm">'+e.wNm+(this._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+") ")+"("+e.wFrontYnNm+")</td>",l+="</tr>",l+='<tr class="cntTr">',l+='<th class="txt_r">수&nbsp;&nbsp;&nbsp;량 : </th>',l+='<td><input type="hidden" name="wSeq" value="'+e.wSeq+'"><input type="hidden" name="action" value="'+n+'"><input type="text" vType="number" name="cnt" class="w90p" placeholder="수량을 입력하세요 (현재 완료수량에 추가됨)"></td>',l+="</tr>",l+="</tbody></table>",l+="</div>",t(l+="</div></div></div></div>")})),e(this,"layerActionEvent",((t,e)=>{let n=this,l=$("#"+t),o=$("input[name=action]",l).val();if("start"==o){let t=$(".cntTr",l);if("C"==e.wStatus)t.hide();else{$("th",t).text("시작 수량 :"),$("input[name=cnt]",t).attr("placeholder","작업에 들어가는 수량을 입력하세요");let l={ctl:"work",cmd:"firstEndCnt",oSeq:e.oSeq,wSeq:e.wSeq};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(n){if(0==n.code){let a=n.data;e.wSeq==a.wSeq?$("input[name=cnt]",t).val(0):$("input[name=cnt]",t).val(a.wEndCnt)}else alert(n.message)}))}}$(".save",l).on("click",(function(){let t=$("input[name=wSeq]",l).val(),e=$("input[name=cnt]",l).val();if(["stop","end"].indexOf(o)>-1){if(null==e||""==e)return alert("수량을 입력하십시오"),!1;try{parseInt(e)}catch(s){return alert("수량을 입력하십시오"),!1}}let i={ctl:"work",cmd:"action",action:o,wSeq:t,cnt:e};new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),delete n._work,n.retrieve(),n._parent.modifyTime({action:"work"})):9099==t.statusCode||alert(t.message)}))})),$(".btnCancel",l).on("click",(function(){let t=$("input[name=wSeq]",l).val(),e=$("input[name=cnt]",l).val();if(null==e||""==e)return alert("현재까지 작업된 수량을 입력하십시오"),!1;try{parseInt(e)}catch(o){return alert("수량을 입력하십시오"),!1}confirm("해당 작업을 취소하시겠습니까?",(function(l){if(l){let l={ctl:"work",cmd:"action",action:"cancel",wSeq:t,cnt:e};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),delete n._work,n.retrieve(),alert("취소 되었습니다."),n._parent.modifyTime({action:"work"})):9099==t.statusCode||alert(t.message)}))}})," 작업 취소")}))})),e(this,"layerTodayView",(t=>{const e=this._work;var n='<div class="mw_defalut" style="width:380px;height:250px;" id=""><div class="mw_title" id="handle">';n+='<h1 class="mw_title_mid">',n+='<span class="title">금일 작업량 설정</span>',n+='<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>',n+="</h1>",n+="</div>",n+='<div class="mw_ctWrap">',n+='<div class="mw_contents">',n+='<div style="overflow-y:auto;padding:2px;">',n+='<div class="bottonWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="50%">',n+='<col width="50%">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+="<th>",n+='<div class="al"></div>',n+="</th>",n+="<th>",n+='<div class="ar"><a href="javascript:void(0);" class="btnSearch save">설정</a></div>',n+="</th>",n+="</tr>",n+="</tbody>",n+="</table>",n+="</div>",n+='<div class="searchWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10 ">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="60px">',n+='<col width="auto">',n+="<tbody>",n+="<tr>",n+='<th class="txt_c" colspan="2">아래의 작업 까지만 금일 작업량으로 설정합니다.</th>',n+="</tr>",n+="<tr>",n+='<th class="txt_r">No: <input type="hidden" name="spSeq" value="'+e.spSeq+'"><input type="hidden" name="sort" value="'+e.sort+'"></th>',n+='<td class="cuNm">'+e.num+"</td>",n+="</tr>",n+="<tr>",n+='<th class="txt_r">업체명 : </th>',n+='<td class="cuNm">'+e.cuNm+"</td>",n+="</tr>",n+="<tr>",n+='<th class="txt_r">파일명 : </th>',n+='<td class="oFileNm">'+(e.oFileNm?e.oFileNm:"")+"</td>",n+="</tr>",n+="<tr>",n+='<th class="txt_r">작업명 : </th>',n+='<td class="wNm">'+e.wNm+(this._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+") ")+"("+e.wFrontYnNm+")</td>",n+="</tr>",n+="<tr>",n+="</tbody></table>",n+="</div>",t(n+="</div></div></div></div>")})),e(this,"layerTodayEvent",(t=>{let e=this,n=$("#"+t);$(".save",n).on("click",(function(){let t={ctl:"work",cmd:"todayJob",spSeq:$("input[name=spSeq]",n).val(),wtSortEnd:$("input[name=sort]",n).val()};new a(e._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),delete e._work,e.retrieve()):9099==t.statusCode||alert(t.message)}))}))})),e(this,"layerSortView",(t=>{const e=this._work;t('<div class="mw_defalut" style="width:380px;height:294px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t\t<span class="title">작업순서 변경</span>\n\t\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t\t<div class="mw_ctWrap">\n\t\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t\t<div style="overflow-y:auto;padding:2px;">\n\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="bottonWrap">\n\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="al"></div>\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="ar"><a href="javascript:void(0);" class="btnSearch save">변경</a></div>\n\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class="searchWrap">\n\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable tr_nohover mb10 ">\n\t\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t<col width="60px">\n\t\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t\t<col width="30px">\n\t\t\t\t\t\t\t\t\t\t<col width="120px">\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac">업체명</th>\n\t\t\t\t\t\t\t\t\t\t\t<td class="cuNm" colspan="3">'+e.cuNm+'</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac">파일명</th>\n\t\t\t\t\t\t\t\t\t\t\t<td class="oFileNm" colspan="3">'+(e.oFileNm?e.oFileNm:"")+'</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac">공정명</th>\n\t\t\t\t\t\t\t\t\t\t\t<td class="wNm" colspan="3">'+e.spNm+'</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\t\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac">작업명</th>\n\t\t\t\t\t\t\t\t\t\t\t<td class="wNm" colspan="3">'+e.wNm+(this._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+") ")+"("+e.wFrontYnNm+')</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac actionCnt">현재 위치</th>\n\t\t\t\t\t\t\t\t\t\t\t<td style="border-right:0px;"> No '+e.num+' <i class="fa-solid fa-angles-right" style="color: magenta;font-size: 13px;margin-top: 5px;"></i>&nbsp;&nbsp;<input type="text" vType="number" name="index" class="" style="width:40px;" placeholder="위치번호">\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t<td class="ar"  style="border-right:0px;border-left:0px;"><input type="checkbox" name="orderYn" value="Y"> </td>\n\t\t\t\t\t\t\t\t\t\t\t<td class="al" style="border-left:0px;">해당공정 전체 이동 </td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<input type="hidden" name="wSeq" value="'+e.wSeq+'">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"layerSortEvent",(t=>{let e=this,n=$("#"+t);$(".save",n).on("click",(function(){let t=$("input[name=wSeq]",n).val(),l=$("input[name=index]",n).val(),o=$("input[name=orderYn]:checked",n).val();"Y"!=o&&(o="N");let i=l-e._work.num;if(0==i)return alert("변경할 위치가 동일 합니다."),!1;{let n=e._utils.serializeObject($(".searchWrapArea",e._code)),s={ctl:"work",cmd:"sortMove",wSeq:t,move:i,orderYn:o,targetIndex:l};$.extend(n,s),new a(e._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),delete e._work,e.retrieve(),e._parent.modifyTime({action:"work"})):alert(t.message)}))}}))})),e(this,"layerWorkView",((t,e)=>{t('<div class="mw_defalut" style="width:580px;height:540px;" id="">\n\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t<span class="title">'+e.wNm+' <span style="font-size:18px;">작업기록</span></span>\n\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t</h1>\n\t\t\t</div>\n\t\t\t<div class="mw_ctWrap">\n\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t<div style="overflow-y:auto;padding:2px;">\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t\t<col width="50%">\n\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<div class="al"><input type="hidden" name="wSeq" value="'+e.wSeq+'"></div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t<th>\n\t\t\t\t\t\t\t\t\t\t\t<div class="ar"><a href="javascript:void(0);" class="btnSearch save">저장</a></div>\n\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="searchWrap" style="padding-bottom: 10px;">\n\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable">\n\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t<col width="70px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t<col width="70px">\n\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">업체명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="cuNm">'+e.cuNm+'</td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">작업자</th>\n\t\t\t\t\t\t\t\t\t\t<td class="">'+(e.wENm??"미지정")+'</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">품&nbsp;&nbsp;&nbsp;&nbsp;명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="oFileNm" colspan="3">'+(e.oFileNm?e.oFileNm:"")+'</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">공정명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="spNm">'+e.spNm+'</td>\n\t\t\t\t\t\t\t\t\t\t<th class="ac">작업명</th>\n\t\t\t\t\t\t\t\t\t\t<td class="wNm">'+e.wNm+(this._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+") ")+"("+e.wFrontYnNm+')</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="txt_c" colspan="4" style="border:0px;height: 5px;padding: 0px;">\x3c!-- hr style="width: 99%;color: #9ac7e194; border: 1px solid;" --\x3e</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_c" colspan="4" style="height:25px;">수주 세부사항</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="workOptionListDiv orderOption" colspan="4"></td>\n\t\t\t\t\t\t\t\t\t</tr>\t\t\n\t\t\t\t\t\t\t\t\t\x3c!-- tr>\n\t\t\t\t\t\t\t\t\t\t<td class="txt_c" colspan="4" style="height: 5px;padding: 0px;"><hr style="width: 99%;color: #9ac7e194;border: 1px solid;"></th>\n\t\t\t\t\t\t\t\t\t</tr --\x3e\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_c" colspan="4" style="height:25px;">작업현장기록</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td class="workOptionListDiv workOption" colspan="4" style="padding-left:0px;padding-right:0px;"></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<th class="txt_c" colspan="4" style="height:25px;">추가기록사항</th>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td colspan="4"><textarea name="wReport" class="w100p" rows="3"></textarea></td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')})),e(this,"layerWorkEvent",((t,e)=>{let n=this,l=$("#"+t),o=$(".mw_defalut",l),i=e.optionInfo,s=$(".wESeq",l),r=$(".workOptionListDiv.orderOption",l).data("ROW",i),c=$(".workOptionListDiv.workOption",l).data("ROW",i);n._utils.checkEmptyNull(e.wReport)||$("textarea[name=wReport]",l).val(e.wReport),s.text(e.wENm);for(let a=0;a<i.length;a++){let t=$('<span class="workOptionListOne vm" style="width:49.5%;margin: -3px 0px;">'),e=$('<strong class="w100p" style="padding-top: 3px;" />');if("N"==i[a].cwoOrderYn){if(e.addClass("workOptionInfoInput"),e.append('<input type="checkbox" name="'+i[a].cwoSeq+'_MarkYn" value="Y" '+("Y"==i[a].woMarkYn?"checked":"")+' style="width: 10px;height: 10px;margin-right:5px;" title="일반적이지 않은경우 중요표시">'),"Y"==i[a].cwoMustYn&&e.append($('<span style="color:red">*</span>')),e.append('<span  style="text-align:left;display: inline-block;width:70px;">'+i[a].cwoNm+"</span>"),"A"==i[a].cwoInputCd){let t=$('<select name="'+i[a].cwoSeq+'" style="height: 20px !important;width:75px;font-size: 11px;padding-top: 0px;"><option value="">선택</option></select>');if(!n._utils.checkEmptyNull(i[a].cwoData)){let e=i[a].cwoData.split(",");for(let n=0;n<e.length;n++){let a=$("<option />");a.val(e[n]).text(e[n]),t.append(a)}}t.on("change",(function(){let t=$(this).val(),e=$(this).closest("strong"),l=$(this).closest("span").data("ROW"),o=JSON.parse(l.cwoDataSub),s=$(this).next();if(""==t)s.length>0&&s.remove();else if(s.length>0&&s.remove(),null==o||n._utils.checkEmptyNull(o[t]));else if("select"==o[t].type){s=$('<select name="'+i[a].cwoSeq+'_sub" style="margin-left:5px;width:75px;height: 20px !important;font-size: 11px;padding-top: 0px;"/>'),s.empty(),s.append('<option value="">선택</option>');let n=o[t].values;for(let t=0;t<n.length;t++){let e=$("<option />");e.val(n[t]).text(n[t]),s.append(e)}e.append(s)}else"text"==o[t].type&&(s=$('<input type="text" name="'+i[a].cwoSeq+'_sub" style=" width:75px;margin-left:5px;height: 20px !important;" placeholder="최대 40글자"/>'),e.append(s))})),e.append(t);let l=i[a].woInput;if(!n._utils.checkEmptyNull(l)&&l.indexOf("→")>-1){let t=l.split("→");setTimeout((()=>{$("select[name="+i[a].cwoSeq+"]",c).val(t[0]).trigger("change"),$("select[name="+i[a].cwoSeq+"_sub]",c).val(t[1])}),500)}else setTimeout((()=>{$("select[name="+i[a].cwoSeq+"]",c).val(i[a].woInput).trigger("change")}),500)}else if(["T","C","W","M","L"].indexOf(i[a].cwoInputCd)>-1){let t=$('<input type="text" name="'+i[a].cwoSeq+'" style="height: 20px !important;">');n._utils.checkEmptyNull(i[a].woInput)||t.val(i[a].woInput),["W","M","L"].indexOf(i[a].cwoInputCd)>-1?(n._utils.focusEvent(t,"unit"),t.css({width:"40px","text-align":"right"}),t.attr("placeholder",i[a].cwoInputCdNm)):"C"==i[a].cwoInputCd&&(n._utils.focusEvent(t,"comma"),t.css({width:"50px","text-align":"right"}),t.attr("placeholder",i[a].cwoInputCdNm)),e.append(t)}t.append($(e))}"Y"==i[a].cwoOrderYn&&null!=i[a].woInput&&(e.addClass("workOptionInfo"),e.append(i[a].cwoNm+" : <strong>"+i[a].woInput+"</strong>"),t.append($(e))),t.data("ROW",i[a]),t.appendTo("Y"==i[a].cwoOrderYn?r:c)}c.data("ROW",i),$(".save",l).on("click",(function(){let t=$("input[name=wSeq]",l).val(),e=c.data("ROW"),o=[],i=$("textarea[name=wReport]",l).val();for(let a=0;a<e.length;a++)if("N"==e[a].cwoOrderYn){let t=$("[name="+e[a].cwoSeq+"]",c).next();if(0==t.length)e[a].woInput=$("[name="+e[a].cwoSeq+"]",c).val();else{let n=t.val();e[a].woInput=""==n?$("[name="+e[a].cwoSeq+"]",c).val():$("[name="+e[a].cwoSeq+"]",c).val()+"→"+n}if("Y"==e[a].cwoMustYn&&n._utils.checkEmptyNull(e[a].woInput))return alert("세부사항 ["+e[a].cwoNm+"]을 입력하세요"),!1;e[a].woMarkYn=$("input[name="+e[a].cwoSeq+"_MarkYn]:checked",c).val()??"N",o.push(e[a])}let s={ctl:"work",cmd:"optionSave",wSeq:t,wReport:i,optionInfo:JSON.stringify(o)};new a(n._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),delete n._work,n.retrieve(),alert("저장 되었습니다.")):9099==t.statusCode||alert(t.message)}))})),o.height($(".mw_ctWrap",o).height()+50)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"work",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"order",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"order",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"work",cmd:"qrWorkLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"work",cmd:"endCntUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"companyPlaceList",(t=>{new a(this._const,{ctl:"place",cmd:"list",cpType:"A",useYn:"Y",rows:9999},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={},this._employeeList={}}},k=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{},n._currentDateTime=n._utils.currentDateTime(),n._code.find(".btnSearchCall").on("click",(function(t){n._currentDateTime=n._utils.currentDateTime(),n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnInout").on("click",(function(){0!=n._code.find(".dataListTable tbody").find("input[name=istSeq]:checked").length?n.layerInoutView((function(t){n._parent.openLayer(t,n.layerInoutViewEvent)})):alert("상태를 변경할 수주건을 선택하십시오")})),n._code.find(".btnMap").on("click",(function(){let t=n._code.find(".dataListTable tbody"),e=t.find("input[name=istSeq]:checked"),a=[];if(0==e.length)a=t.data("ROWS");else for(let n=0;n<e.length;n++){let t=$(e[n]).closest("tr").data("ROW");a.push(t)}let l=!1;for(let o=0;o<a.length;o++)if(["A","B"].indexOf(a[o].istInStatus)>-1&&!n._utils.checkEmptyNull(a[o].inGpsLatitude)||["A","B"].indexOf(a[o].istOutStatus)>-1&&!n._utils.checkEmptyNull(a[o].outGpsLatitude)){l=!0;break}l?n.layerAllMapView((function(t){n._parent.openLayer(t,n.layerAllMapViewEvent,a)})):alert("입/출고 처리가 완료 되었거나 주소정보가 없습니다.")})),n._code.find(".btnWorkReportPrint").on("click",(function(){0!=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked").length?n.layerInoutView((function(t){n._parent.openLayer(t,n.layerInoutViewEvent)})):alert("상태를 변경할 수주건을 선택하십시오")})),n._code.find(".btnFullScreen").on("click",(function(t){let e=n._code.find(".btnAutoReload");document.fullscreenElement?($(this).removeClass("activeOn").addClass("activeOff"),e.hasClass("activeOn")&&e.trigger("click")):($(this).removeClass("activeOff").addClass("activeOn"),e.hasClass("activeOff")&&e.trigger("click")),n._utils.fullScreen(n._code)})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("change","input[name=today]",(function(){$(this).is(":checked")?($("select[name=dateKind]").addClass("readonly").attr("readonly","readonly").css({color:"#ccc"}),$("input[name=startDt],input[name=endDt]").removeClass("crdrIp").removeClass("hasDatepicker").addClass("readonly").css({"background-color":"#eee !important",cursor:"default",width:"90px",color:"#ccc"})):($("select[name=dateKind]").removeClass("readonly").removeAttr("readonly").css({color:""}),$("input[name=startDt],input[name=endDt]").addClass("crdrIp").addClass("hasDatepicker").removeClass("readonly").css({"background-color":"",cursor:"",color:""}))})),l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-1))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,1))),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"A"};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("thead");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".oFileNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.orderView(t)})),s.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),s.on("click",".printTd",(function(){let t=$(this).closest("tr").data("ROW");n._parent.workReport(t)})),s.on("click",".istInMap",(function(){let t={ctl:"distribution",cmd:"load",istSeq:$(this).closest("tr").data("ROW").istSeq};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;e.inout="in",e.isNm=e.istInNm,e.inInchargeNm=e.istInInchargeNm,e.inInchargeTel=e.istInInchargeTel,e.gpsLatitude=e.inGpsLatitude,e.gpsLongitude=e.inGpsLongitude,n._parent._popup.storageMapView(e)}else alert(t.message)}))})),s.on("click",".istOutMap",(function(){let t={ctl:"distribution",cmd:"load",istSeq:$(this).closest("tr").data("ROW").istSeq};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;e.inout="out",e.isNm=e.istOutNm,e.outInchargeNm=e.istOutInchargeNm,e.outInchargeTel=e.istOutInchargeTel,e.gpsLatitude=e.outGpsLatitude,e.gpsLongitude=e.outGpsLongitude,n._parent._popup.storageMapView(e)}else alert(t.message)}))})),s.on("click",".processBtnA,.processBtnB,.processBtnC",(function(){let t=$(this).attr("actionType"),e=$(this).closest("tr").data("ROW");if("Y"==e.wOutsourcingYn){if("in"==t&&"C"!=e.istOutStatus)return alert("출고가 되지않은 외주 작업건 입니다."),!1}else if("in"!=t&&"C"!=e.istInStatus)return alert("입고가 되지않은 수주건 입니다."),!1;let a={oSeqs:JSON.stringify([e.oSeq]),kind:t};a.status=String.fromCharCode(e["in"==t?"istInStatus":"istOutStatus"].charCodeAt(0)+1),n.update(a,(function(t){0==t.code?(n.retrieve(),n._parent.modifyTime({action:"distribution"})):alert(t.message)}))})),s.on("click",".oFileNmDown",(function(){let t=$(this).closest("tr").data("ROW");t.fileInfo.length>0&&n._parent.fileDownload(t.fileInfo[0])})),s.on("click",".markIn, .markOut",(function(){let t=$(this).closest("tr").data("ROW"),e=$(this).hasClass("markIn")?"I":"O",l={ctl:"distribution",cmd:"mark",istSeq:t.istSeq,istmInout:e};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),n.retrieve(),n._parent.modifyTime({action:"distribution"})):alert(t.message)}))})),n.retrieve()})),e(this,"tHeadOrderBy",((t,e)=>{t.closest("tr").find("img").attr("src","/images/btn/btn_sort2.png"),t.children("img").attr("src","DESC"==e.toUpperCase()?"/images/btn/btn_sort_dw.png":"/images/btn/btn_sort_up.png"),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;if(null!=t._parent.activeMenuId()&&t._parent.activeMenuId()!=t._id)return void(null!=t.intervalId&&(t._code.find(".btnAutoReload").removeClass("activeOn").addClass("activeOff"),clearInterval(t.intervalId),delete t.intervalId));let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("input[name=searchWord]").val(),d=l.find("input[name=todayIn]:checked").val()??"N",p=l.find("input[name=todayOut]:checked").val()??"N",u=l.find("input[name=istInStatus]:checked").val()??"N",m=l.find("input[name=istOutStatus]:checked").val()??"N",f=l.find("input[name=todayMarkIn]:checked").val()??"N",h=l.find("input[name=todayMarkOut]:checked").val()??"N",g=l.find("input[name=oFileNm]").val(),_={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),page:a,rows:n,orderColumn:s,orderType:r,istInStatus:u,istOutStatus:m,todayIn:d,todayOut:p,todayMarkIn:f,todayMarkOut:h,searchColumn:"cuNm",searchWord:c,oFileNm:g};t.list(_,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty(),o.data("ROWS",l);let s=0,r=0,c=0,d=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n),c=l[e].inCnt,d=l[e].outCnt),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'2">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage),t._code.find(".inCnt").text(t._utils.numberWithCommas(c)),t._code.find(".outCnt").text(t._utils.numberWithCommas(d))}));let w=t._code.find(".btnAutoReload"),y=t._code.find(".lastDateTime");y.empty(),w.hasClass("activeOn")&&y.text(t._utils.dateformatCurrentHHmmss(":"))})),e(this,"display",((t,e)=>{const n=this;let a="";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));let l="";for(let m=0;m<e.processInfo.length;m++){let t=e.processInfo[m];if(0==m&&(l=t.spNm),t.outsourcingInfo.length>0){let e=[],n=[];for(let a=0;a<t.outsourcingInfo.length;a++)e.push(t.outsourcingInfo[a].wNm),n.push(t.outsourcingInfo[a].cuNm);a+='<span class="processStatusOut'+t.pStatus+'" title="＊상태: '+t.pStatusNm+" ＊업체: "+n.join(", ")+" "+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}else a+='<span class="processStatus'+t.pStatus+'" title="＊상태: '+t.pStatusNm+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}let o="border:1px solid #dedede;",i='<i class="fa-brands fa-internet-explorer" title="거래처에서 직접 발주한 건"></i>';"Y"!=e.oApprovalYn?o+="color:#8b8989;background: #d7e2ff;":(i="○",i="D"==e.oStatus?'<strong style="color:#b2b8ba;">●</strong>':"B"==e.oStatus?'<strong style="color:#4e80ee;">●</strong>':"○"),"D"==e.oStatus&&"C"==e.istInStatus&&"C"==e.istOutStatus&&(o+="background:#ddf2f9;");let s="";e.fileInfo.length>0&&(s='<i class="fa-solid fa-download cursorPointer oFileNmDown" style="margin-right:5px;" title="파일 받기"></i>');let r=e.istInStatusNm,c=e.istOutStatusNm;"C"==e.istInStatus&&(r='<span style="color:#68C3C7;font-weight: bold;">입고</span>'),"C"==e.istOutStatus&&(c='<span style="color:#b583f5;font-weight: bold;">출고</span>');let d=$('<tr style=""/>');d.append($('<td style="'+o+'"><i class="fas fa-print printTd cursorPointer"></i><input type="hidden" name="oSeq" value="'+e.oSeq+'"></td>')),d.append($('<td style="'+o+'"></td>').append($('<input type="checkbox" class="vm" name="istSeq" value="'+e.istSeq+'"/>'))),d.append($('<td style="'+o+'">'+(n._utils.checkEmptyNull(e.oApprovalDate)?"미승인":n._utils.dateformatMin(e.oApprovalDate).substring(5,10))+"</td>")),d.append($('<td style="'+o+'white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al cuNm cursorPointer"><span title="'+e.cuNm+'">'+n._utils.nullTostring(e.cuNm,"")+"</span></td>")),d.append($('<td style="'+o+'border-right:0px;padding-right:0px;" class="ac"></td>').append(s)),d.append($('<td style="'+o+'border-left:0px !important;" class="al"></td>').append('<span class="oFileNm cursorPointer" title="수주서 보기">'+n._utils.nullTostring(e.oFileNm,"")+(null!=e.onContent&&""!=e.onContent?' <img src="/images/bul/bul_notice.gif"  class="orderNoticeIcon">':"")+"</span>")),d.append($('<td style="'+o+'" title="'+e.oPaperWidth+" × "+e.oPaperHeight+'"></td>').text(n._utils.nullTostring(e.oPaperSize,""))),d.append($('<td style="'+o+'" class="ar">'+n._utils.numberWithCommas(e.oCnt,"")+"</td>")),d.append($('<td style="'+o+'" class="ac"></td>').append(l)),d.append($('<td style="'+o+'" class="al">'+a+"</td>")),d.append($('<td style="'+o+'" '+("A"!=e.oStatus?'title="변경일시 : '+e.oStatusDate+'"':"")+">"+i+"</td>"));let p="";p="A"!=e.istInCd?n._utils.nullTostring(e.istInNm,""):"직입 "+(n._utils.checkEmptyNull(e.istInNm)?"":"("+e.istInNm+")"),null!=e.inGpsLatitude?(d.append($('<td style="'+o+'padding-right:0px;border-right:0px;" class="ar istInMap cursorPointer"></td>').append('<i class="fa-solid fa-location-arrow" title="지도보기" style="color:#ffb98b;margin-top: 2px;margin-bottom: 2px;"></i>')),d.append($('<td style="'+o+'border-left:0px;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al istInMap cursorPointer"  title="'+p+'"></td>').text(p))):(d.append($('<td style="'+o+'padding-right:0px;border-right:0px;" class="ar"></td>')),d.append($('<td style="'+o+'border-left:0px;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al" title="'+p+'"></td>').text(p))),d.append($('<td class="al" style="'+o+'padding-left:8px;padding-right:1px;"></td>').append((e.istInHopeDt?'<span style="font-weight:550;">'+n._utils.dateformatStringToDate(e.istInHopeDt).substring(5)+"</span>":"")+(n._utils.checkEmptyNull(e.istInMemo)?"":" ("+e.istInMemo+")"))),d.append($('<td style="'+o+'padding-left:3px;padding-right:0px;border-right:0px;" class="al"></td>').append("Y"==e.istmInYn?'<i class="fa-solid fa-square-check markIn cursorPointer" style="color:#f50000;" title="주요물류선정일시 : '+e.istmInYnDate.substring(0,16)+'"></i> ':'<i class="fa-solid fa-square-check markIn cursorPointer" style="color:#ccc;" title="주요물류 설정"></i>')),"Y"==e.wOutsourcingYn?"C"==e.istOutStatus?d.append($('<td style="'+o+'border-left:0px;" class="ac" '+("A"!=e.istInStatus?'title="일시 : '+e.istInStatusDate+'"':"")+"></td>").append("C"!=e.istInStatus?'<span class="processBtn'+e.istInStatus+'" actionType="in">'+e.istInStatusNm+"</span>":r)):d.append($('<td style="'+o+'border-left:0px;" class="ac" '+("A"!=e.istInStatus?'title="일시 : '+e.istInStatusDate+'"':"")+"></td>").append(e.istInStatusNm)):d.append($('<td style="'+o+'border-left:0px;" class="ac" '+("A"!=e.istInStatus?'title="일시 : '+e.istInStatusDate+'"':"")+"></td>").append("C"!=e.istInStatus?'<span class="processBtn'+e.istInStatus+'" actionType="in">'+e.istInStatusNm+"</span>":r));let u="";u="A"!=e.istOutCd?n._utils.nullTostring(e.istOutNm,""):"직출 "+(n._utils.checkEmptyNull(e.istOutNm)?"":"("+e.istOutNm+")"),null!=e.outGpsLatitude?(d.append($('<td style="'+o+'padding-right:0px;border-right:0px;" class="ar istOutMap cursorPointer"></td>').append(' <i class="fa-solid fa-location-arrow" title="지도보기" style="color:#ffb98b;margin-top: 2px;margin-bottom: 2px;"></i>')),d.append($('<td style="'+o+'border-left:0px;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al istOutMap cursorPointer" title="'+u+'"></td>').text(u))):(d.append($('<td style="'+o+'padding-right:0px;border-right:0px;" class="ar istOutMap cursorPointer"></td>')),d.append($('<td style="'+o+'border-left:0px;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al" title="'+u+'"></td>').text(u))),d.append($('<td class="al" style="'+o+'padding-left:8px;padding-right:1px;"></td>').append((n._utils.checkEmptyNull(e.istOutHopeDt)?"":'<span style="font-weight:550;">'+n._utils.dateformatStringToDate(e.istOutHopeDt).substring(5)+"</span>")+(n._utils.checkEmptyNull(e.istOutMemo)?"":" ("+e.istOutMemo+")"))),d.append($('<td style="'+o+'padding-left:3px;padding-right:0px;border-right:0px;" class="al"></td>').append("Y"==e.istmOutYn?'<i class="fa-solid fa-square-check markOut cursorPointer" style="color:#f50000;" title="주요물류선정일시 : '+e.istmOutYnDate.substring(0,16)+'"></i> ':'<i class="fa-solid fa-square-check markOut cursorPointer" style="color:#ccc;" title="주요물류 설정"></i>')),null==e.wOutsourcingYn?"C"==e.istInStatus?d.append($('<td style="'+o+'border-left:0px;" class="ac" '+("A"!=e.istOutStatus?'title="일시 : '+e.istOutStatusDate+'"':"")+"></td>").append("D"==e.oStatus&&"C"!=e.istOutStatus?'<span class="processBtn'+e.istOutStatus+'" actionType="out">'+e.istOutStatusNm+"</span>":'<span style="color:#ccc;">'+c+"</span>")):d.append($('<td style="'+o+'border-left:0px;" class="ac" '+("A"!=e.istOutStatus?'title="일시 : '+e.istOutStatusDate+'"':"")+"></td>").append('<span style="color:#ccc;">'+e.istOutStatusNm+"</span>")):d.append($('<td style="'+o+'border-left:0px;" class="ac" '+("A"!=e.istOutStatus?'title="일시 : '+e.istOutStatusDate+'"':"")+"></td>").append("C"!=e.istOutStatus?'<span class="processBtn'+e.istOutStatus+'" actionType="out">'+e.istOutStatusNm+"</span>":c)),d.append($('<td style="'+o+'" class="al"></td>').text(n._utils.strMaxCuttion(n._utils.nullTostring(e.oMemo,""),25)).attr("title",e.oMemo)),"N"==n._const.__MANAGER_YN&&$(".markIn, .markOut",d).removeClass("cursorPointer"),d.data("ROW",e),d.appendTo(t)})),e(this,"layerInoutView",((t,e)=>{var n='<div class="mw_defalut" style="width:280px;height:200px;" id=""><div class="mw_title" id="handle">';n+='<h1 class="mw_title_mid">',n+='<span class="title">입/출고 상태 변경</span>',n+='<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>',n+="</h1>",n+="</div>",n+='<div class="mw_ctWrap">',n+='<div class="mw_contents">',n+='<div style="overflow-y:auto;padding:2px;">',n+='<div class="bottonWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="50%">',n+='<col width="50%">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+="<th>",n+='<div class="al"></div>',n+="</th>",n+="<th>",n+='<div class="ar"><a href="javascript:void(0);" class="btnSearch save">변경</a></div>',n+="</th>",n+="</tr>",n+="</tbody>",n+="</table>",n+="</div>",n+='<div class="searchWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10 ">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="60px">',n+='<col width="auto">',n+="<tbody>",n+="<tr>",n+='<th class="txt_r">대상 : </th>',n+='<td class="cuNm">'+this._code.find(".dataListTable tbody").find("input[name=istSeq]:checked").length+" 건</td>",n+="</tr>",n+="<tr>",n+='<th class="txt_r">구분 : </th>',n+='<td class="cuNm"><input type="radio" name="kind" value="in">&nbsp; 입고 &nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="kind" value="out">&nbsp; 출고</td>',n+="</tr>",n+="<tr>",n+='<th class="txt_r">상태 : </th>',n+='<td class="oFileNm"><select name="status"><option value="A">대기</option><option value="B">진행</option><option value="C">완료</option></td>',n+="</tr>",n+="</tbody></table>",n+="</div>",t(n+="</div></div></div></div>")})),e(this,"layerInoutViewEvent",((t,e)=>{let n=this,a=$("#"+t);$("input[name=kind]",a).on("click",(function(){let t=$(this).val();$("select[name=status]",a).children().eq(1).text("in"==t?"입고중":"출고중"),$("select[name=status]",a).children().eq(2).text("in"==t?"입고완료":"출고완료")})),$(".save",a).on("click",(function(){let t=n._code.find(".dataListTable tbody").find("input[name=istSeq]:checked"),e=$("input[name=kind]:checked",a).val(),l=$("select[name=status]",a).val(),o=[];if(null==e)return alert("입고/출고 구분을 선택하십시오"),!1;for(let n=0;n<t.length;n++)o.push($(t[n]).val());let i={istSeqs:JSON.stringify(o),kind:e,status:l};n.update(i,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),n.retrieve(),n._parent.modifyTime({action:"distribution"})):alert(t.message)}))}))})),e(this,"layerMapView",((t,e)=>{var n='<div class="mw_defalut" style="width:580px;height:680px;" id=""><div class="mw_title" id="handle">';n+='<h1 class="mw_title_mid">',n+='<span class="title">'+e+" </span>",n+='<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>',n+="</h1>",n+="</div>",n+='<div class="mw_ctWrap">',n+='<div class="mw_contents">',n+='<div class="bottonWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="50%">',n+='<col width="50%">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+="<th>",n+='<div class="al"></div>',n+="</th>",n+="<th>",n+='<div class="ar"><a href="#" class="btnSearch btnPrint" title="인쇄하기"><i class="fas fa-print cursorPointer" style="margin:auto auto";></i>&nbsp;&nbsp;출력</a></div>',n+="</th>",n+="</tr>",n+="</tbody>",n+="</table>",n+="</div>",n+='<div style="overflow-y:auto;padding:2px;">',n+='<div class="searchWrap kakaoMap" style="width:100%; height:500px; border:3px solid #fff;">',n+='<div class="custom_zoomcontrol radius_border"> ',n+="</div></div>",n+='<div class="searchWrap">',n+='<table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover mb10 ">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="60px">',n+='<col width="auto">',n+='<col width="60px">',n+='<col width="auto">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+='<th class="txt_r">장소명 : </th>',n+='<td colspan="3" class="isNm" style="font-weight: bold;"></td>',n+="</tr>",n+="<tr>",n+='<th class="txt_r">주&nbsp;&nbsp;&nbsp;&nbsp;소 : </th>',n+='<td colspan="3" class="isAddress" style="font-weight: bold;"></td>',n+="</tr>",n+="<tr>",n+='<th class="txt_r">담당자 : </th>',n+='<td class="isChargeNm" style="font-weight: bold;"></td>',n+='<th class="txt_r">전화번호 : </th>',n+='<td class="isChargeTel" style="font-weight: bold;"></td>',n+="</tr>",n+="</tbody></table>",n+="</div>",t(n+="</div></div></div></div>")})),e(this,"layerMapViewEvent",((t,e)=>{let n=this,a=$("#"+t),l=$(".kakaoMap",a)[0];var o={center:new kakao.maps.LatLng(e.gpsLatitude,e.gpsLongitude),level:3};n._utils.classNameInput(a,e),$(".isAddress",a).text(n._utils.ifnull(e[e.inout+"Addr"])+" "+n._utils.ifnull(e[e.inout+"AddrDetail"])),$(".isChargeNm",a).text(n._utils.ifnull(e[e.inout+"InchargeNm"])),$(".isChargeTel",a).text(n._utils.formatPhoneNumber(n._utils.ifnull(e[e.inout+"InchargeTel"])));var i=new kakao.maps.Map(l,o);let s={latlng:new kakao.maps.LatLng(e.gpsLatitude,e.gpsLongitude),content:'<div style="margin-top: -65px;background:#80dcf1;border: 1px solid #babbbb; padding: 2px;font-size:12px;font-weight: bold;"><span class="title">'+e.isNm+"</span></div>"};var r=new kakao.maps.Marker({map:i,position:s.latlng,title:s.title});new kakao.maps.CustomOverlay({map:i,position:s.latlng,content:s.content,yAnchor:1}),r.setMap(i),$(".address",a).val(e.isAddr+" "+e.AddrDetail),$(".isInchargeNm",a).val(e.isInchargeNm),$(".isInchargeTel",a).val(e.isInchargeTel),$(".btnPrint",a).on("click",(function(){let t=$(this).closest(".mw_defalut");$(t.find(".mw_contents")).print({addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print,.btnPrint",iframe:!0,append:null,prepend:null,timeout:1500})}))})),e(this,"layerAllMapView",((t,e)=>{t('<div class="mw_defalut" style="width:1000px;height:780px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">위치보기</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div style="overflow-y:auto;padding:2px;"><div class="searchWrap kakaoMap" style="width:100%; height:750px; border:3px solid #fff;"><div class="custom_zoomcontrol radius_border"> </div></div></div></div></div></div>')})),e(this,"layerAllMapViewEvent",((t,e)=>{let n=this._code.find(".dataListTable tbody"),a=n.find("input[name=istSeq]:checked"),l=[];if(0==a.length)l=n.data("ROWS");else for(let m=0;m<a.length;m++){let t=$(a[m]).closest("tr").data("ROW");l.push(t)}let o=$("#"+t),i=$(".kakaoMap",o)[0];var s={center:new kakao.maps.LatLng(37.5616699427206,126.992492586819),level:3};let r={};for(let m=0;m<l.length;m++)["A","B"].indexOf(l[m].istInStatus)>-1&&null!=l[m].inGpsLatitude&&(null==r[l[m].istInIsSeq]?r[l[m].istInIsSeq]={nm:l[m].istInNm,latitude:l[m].inGpsLatitude,longitude:l[m].inGpsLongitude,in:[{oSeq:l[m].oSeq,dt:l[m].oHopeInDt,status:l[m].istInStatus}],out:[]}:r[l[m].istInIsSeq].in.push({oSeq:l[m].oSeq,dt:l[m].oHopeInDt,status:l[m].istInStatus})),["A","B"].indexOf(l[m].istOutStatus)>-1&&null!=l[m].outGpsLatitude&&(null==r[l[m].istOutIsSeq]?r[l[m].istOutIsSeq]={nm:l[m].istOutNm,latitude:l[m].outGpsLatitude,longitude:l[m].outGpsLongitude,out:[{oSeq:l[m].oSeq,dt:l[m].oHopeOutDt,status:l[m].istOutStatus}],in:[]}:r[l[m].istOutIsSeq].out.push({oSeq:l[m].oSeq,dt:l[m].oHopeOutDt,status:l[m].istOutStatus}));let c=Object.keys(r),d=new kakao.maps.LatLngBounds,p=new kakao.maps.Map(i,s),u=[];for(let m=0;m<c.length;m++){let t=r[c[m]];c[m];let e=new kakao.maps.LatLng(t.latitude,t.longitude),n='<div style="margin-top: -70px;margin-left: 120px;background:#80dcf1;border: 1px solid #babbbb; padding: 2px;font-size:12px;font-weight: bold; width:90px;text-align: center;white-space: nowrap;text-overflow: ellipsis; overflow: hidden;"><span class="title">'+t.nm+"</span>";n+="<div>",n+='<table cellpadding="0" cellspacing="0" border="0" style="margin-top: 3px;background-color: #fff;" class="noBdrTb">',n+="<caption></caption>",n+="<colgroup>",n+='<col width="auto">',n+='<col width="auto">',n+="</colgroup>",n+="<tbody>",n+="<tr>",n+='<th class="ac" style="height: 25px;background-color: #efefef !important">입고</th><th class="ac" style="height: 25px;background-color: #efefef !important">출고</th>',n+="</tr>",n+="<tr>",n+='<td class="ac" style="height: 25px;">'+t.in.length+" 건</td>",n+='<td class="ac" style="height: 25px;">'+t.out.length+" 건</td>",n+="</tr>",n+="</tbody></table>",n+="</div>",n+="</div>",u.push({latlng:new kakao.maps.LatLng(t.latitude,t.longitude),content:n}),d.extend(e),new kakao.maps.Marker({map:p,title:t.nm,position:e}),new kakao.maps.CustomOverlay({map:p,position:e,content:n,yAnchor:m+1})}p.setBounds(d)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고처",key:"istInNm",width:20,align:"left"}),u.push({name:"입고희망일",key:"oHopeInDt",width:12,align:"center"}),u.push({name:"입고자",key:"inENm",width:15,align:"center"}),u.push({name:"출고처",key:"outNm",width:20,align:"left"}),u.push({name:"출고희망일",key:"oHopeOutDt",width:12,align:"center"}),u.push({name:"출고자",key:"istOutENm",width:15,align:"center"}),u.push({name:"메모",key:"oMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"distribution",cmd:"list"};$.extend(n,t,{isInout:"Y"}),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"order",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"order",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"order",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"distribution",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},S=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._currentDateTime=n._utils.currentDateTime(),n.intervalId=setInterval((function(){n._parent.lastModifyTimeCheck(["order","work","distribution"],n._currentDateTime,(function(){n._currentDateTime=n._utils.currentDateTime(),setTimeout(n.retrieve,3e4)}))}),n._parent._reloadTime),n._code.find(".btnSearchCall").on("click",(function(t){n._currentDateTime=n._utils.currentDateTime(),n._code.find("input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){n.layerView((function(t){n._parent.openLayer(t,n.initNewLayer)})),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cuSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({cuSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cuSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let l=n._code.find(".searchWrap"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".dataListTable tbody"),s=n._code.find(".pageInfoTfoot");l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"B"};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-3))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=searchWrap.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n.tHeadOrderBy($(this),e)}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||s.find("select[name=rowsPerPage]").val(r),s.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),s.find("input[name=page]").val("1"),n.retrieve()})),i.on("click",".oFileNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.orderView(t)})),i.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),i.on("click",".oFileNmDown",(function(){let t=$(this).closest("tr").data("ROW");t.fileInfo.length>0&&n._parent.fileDownload(t.fileInfo[0])})),i.on("click",".orderFormShow",(function(t){let e=$(this).closest("tr"),l=e.data("ROW"),o={ctl:"outsourcing",cmd:"orderDataLoad",oSeq:l.oSeq,cuSeq:l.wCuSeq};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let a=$("template#outsourcingFormMainDiv");t.data.wCuNm=l.wCuNm,n._parent.openLayer(a.html(),n.outsourcingFormMainDivEvent,t.data,e)}else alert(t.message)})),t.stopPropagation()})),i.on("focus","input[name=oswEndCnt]",(function(){let t=n._utils.getOnlyNumber($(this).val());$(this).data("ROW",t),$(this).val("0"==t?"":t)})),i.on("focusout","input[name=oswEndCnt]",(function(){let t=$(this).closest("tr"),e=t.data("ROW"),l=$(this).data("ROW"),o=$(this).val();if("Y"==e.delYn)return $(this).val(l),!1;if(o=n._utils.getOnlyNumber(o),null!=l&&l!=o){let e=t.data("ROW");if("D"==e.oswStatus){let t={ctl:"outsourcing",cmd:"statusUpdate",wSeq:e.wSeq,oswSeq:e.oswSeq,oswStatus:e.oswStatus,oswEndCnt:o};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(alert("수정되었습니다."),n.retrieve()):alert(t.message)}))}else alert("완료상태가 아닙니다."),$(this).val(0)}})),i.on("click",".oswStatus",(function(){if("Y"==n._const.__MANAGER_YN){let t=$(this).closest("tr").data("ROW");if("Y"==t.delYn)return!1;let e=n._nextStatus[t.oswStatus];confirm("["+e.nm+"]을 ["+e.nextNm+"]상태로 변경하시겠습니까?",(function(l){if(l){let l={ctl:"outsourcing",cmd:"statusUpdate",wSeq:t.wSeq,oswSeq:t.oswSeq,oswStatus:e.nextStatus};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(alert("수정되었습니다."),n.retrieve()):alert(t.message)}))}}),"변경")}else alert("관리자권한이 필요합니다.")})),i.on("click",".deleteSave",(function(){if("Y"==n._const.__MANAGER_YN){let t=$(this).closest("tr").data("ROW");confirm("취소된 외주작업["+t.wNm+"]을 복원 하시겠습니까?",(function(e){if(e){let e={ctl:"outsourcing",cmd:"deleteSave",cuSeq:t.wCuSeq,oSeq:t.oSeq,osSeq:t.osSeq,wSeq:t.wSeq,oswSeq:t.oswSeq};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(alert("외주작업이 복원 되었습니다."),n.retrieve()):alert(t.message)}))}}),"복원하기")}else alert("관리자권한이 필요합니다.")})),n.retrieve()})),e(this,"purge",(()=>{console.log("customerController purge")})),e(this,"reload",(()=>{console.log("customerController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrap"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=includeDelete]:checked").val()??"N",s=l.find("input[name=endDt]").val();l.find("select[name=searchColumn]").val();let r=l.find("input[name=searchWord]").val(),c=l.find("input[name=oFileNm]").val(),d=l.find("input[name=oswStatus]:checked");if(0==d.length)return void alert("작업상태를 선택해주세요");let p=[];for(let m=0;m<d.length;m++)p.push($(d[m]).val());let u={cuTypeCd:"B",cuImportantYn:"N",page:a,rows:n,startDt:o?o.replace(/-/g,""):"",endDt:s?s.replace(/-/g,""):"",searchColumn:"osc.cuNm",includeDelete:i,searchWord:r,oswStatus:JSON.stringify(p),oFileNm:c};t.list(u,(function(l){$(".searchRunTime",t._code).text(t._utils.currentTime());let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");o.empty();let s=0,r=0;if(null!=l&&l.length>0){for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);t._utils.tbodyMerge(o,[0,1,2,3,4,5,6,8,9],"oSeq")}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="",l="border:1px solid #dedede;";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let m=0;m<e.processInfo.length;m++){let t=e.processInfo[m];if(t.outsourcingInfo.length>0){let e=[],n=[];for(let a=0;a<t.outsourcingInfo.length;a++)e.push(t.outsourcingInfo[a].wNm),n.push(t.outsourcingInfo[a].cuNm);a+='<span class="processStatusOut'+t.pStatus+'" title="＊상태: '+t.pStatusNm+" "+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}else a+='<span class="processStatus'+t.pStatus+'" title="＊상태: '+t.pStatusNm+("A"!=t.pStatus?" ＊일시: "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}let o="",i=e.optionInfo.length>0?e.optionInfo:e.optionInfoOrg;for(let m=0;m<i.length;m++){let t=i[m];if("Y"==t.cwoOrderYn){let e=t.oswoInput??t.woInput;null!=e&&(o+=(""!=o?" ":"")+'<span class="workOptionListOne vm"><strong class="workOptionInfo">'+t.cwoNm+' : <span style="font-weight: bold;">'+e+"</span></strong></span>")}}let s='<span class="processBtnOutA oswStatus" title="＊상태 : 대기">대기</span>';"A"!=e.oswStatus&&(s='<span class="processBtnOut'+e.oswStatus+' oswStatus" title="＊상태 : '+e.oswStatusNm+" ＊일시 : "+e.oswStatusDate.substring(0,16)+'">'+e.oswStatusNm+"</span>");let r="",c="",d="";"Y"==e.delYn&&(r="text-decoration: line-through;  text-decoration-color: #f57a7a;text-decoration-style: solid;text-decoration-thickness: 2px;",c=" * 취소자 : "+e.delENm+" * 일시 : "+e.delDate.substring(0,16),d="cursorPointer deleteSave");let p="";e.fileInfo.length>0&&(p='<i class="fa-solid fa-download cursorPointer oFileNmDown" style="margin-right:5px;" title="파일 받기"></i>');let u=$("<tr/>");if(u.append($('<td style="'+l+'" class="ac" />').append(n._utils.checkEmptyNull(e.oApprovalDate)?"미승인":n._utils.dateformatMin(e.oApprovalDate).substring(5,10))),u.append($('<td style="'+l+'white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al cuNm cursorPointer" title="'+e.cuNm+'"/>').append('<input type="hidden" name="oSeq" value="'+e.oSeq+'">'+n._utils.nullTostring(e.cuNm,""))),u.append($('<td style="'+l+'border-right:0px !important;padding-right:0px;" class="ac"></td>').append(p)),u.append($('<td style="'+l+'border-left:0px;" class="al"/>').append('<span class="oFileNm cursorPointer" title="수주서 보기">'+n._utils.nullTostring(e.oFileNm,"")+(null!=e.onContent&&""!=e.onContent?' <img src="/images/bul/bul_notice.gif"  class="orderNoticeIcon">':"")+"</span>")),u.append($('<td style="'+l+'" />').append(e.oPaperSize)),u.append($('<td style="'+l+'" class="ar"/>').append(n._utils.numberWithCommas(e.oCnt,""))),u.append($('<td style="'+l+'" class="al"/>').append(a)),"D"==e.oswStatus&&(l+="background:#ddf2f9 !important;"),u.append($('<td style="'+l+r+'" title="'+c+'" class="ac '+d+'"/>').append(s)),u.append($('<td style="'+l+r+'" title="'+c+'" class="ac '+d+'"/>').append('<input type="hidden" name="wCuSeq" value="'+e.wCuSeq+'"><i class="fa-solid fa-square-arrow-up-right orderFormShow cursorPointer" title="미발행" style="font-size: 17px;color:#566981;"></i>')),u.append($('<td style="'+l+'white-space: nowrap;text-overflow: ellipsis; overflow: hidden;" class="al wCuNm cursorPointer" title="'+e.wCuNm+'"/>').append(e.wCuNm)),u.append($('<td style="'+l+r+'" title="'+c+'" class="al '+d+'"/>').append(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")"))),u.append($('<td style="'+l+r+'" title="'+c+'" class="ar '+d+'"/>').append(n._utils.numberWithCommas(e.oswCnt,""))),u.append($('<td style="'+l+'padding-left:0px;" class="ar" />').append($('<span><strong style="font-size:9px;color: #f9ed40;padding-top: 7px;font-weight: bold">▶</strong><input type="text" name="oswEndCnt" vType="number" class="w80p" style="text-align:right;border-width: 0px;background-color:transparent;" value="'+(null!=e.oswEndCnt?n._utils.numberWithCommas(e.oswEndCnt,"0"):"0")+'"></span>'))),u.append($('<td style="'+l+'" class="al"/>').append(o)),u.data("ROW",e),n._utils.focusEvent($("input[name=oswEndCnt]",u),"comma"),"Y"==e.osSendYn){let t=e.osSendDate.substring(0,16);$(".orderFormShow",u).css("color","#ccc").attr("title","＊발송방법 : "+e.osSendType+" ＊일시 : "+t)}"Y"==n._const.__MANAGER_YN&&$(".oswStatus,.workOptionEdit",u).addClass("cursorPointer"),t.append(u)})),e(this,"memberSendLayer",((t,e,n)=>{const a=this,l=$(`#${t}`);$(".title",l).text("발주 ["+e.cuNm+"]"),a._utils.unSerializeObject(l,e);let o=e.workInfo;for(let i=0;i<o.length;i++)o[i].idx=i+1,a.workAdd(l,o[i]);a.memberSendLayerAction(l,e),$("input[name=oCnt]",l).trigger("focusout"),e.fileInfo.length>0&&$(".oFileNmDown",l).show()})),e(this,"memberSendLayerAction",((t,e)=>{const n=this;$(".oFileNmDown",t).on("click",(function(){e.fileInfo.length>0&&n._parent.fileDownload(n._order.fileInfo[0])})),$("input[name=oInchargeNm]",t).autocomplete({source:function(e,l){let o={ctl:"employee",cmd:"nmSearch",searchWord:this.term},i=$("input[name=cuSeq]",t).val();""!=i&&(o.cuSeq=i),new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){let e;return e=""==i&&null!=t.cuNm?"["+t.cuNm+"] "+t.eNm:t.eNm,{label:e,value:t.eNm,eSeq:t.eSeq,eTel:t.eTel}}));l(e)}else l([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=oInchargeTel]",t).val(n.item.eTel),$("input[name=istInNm]",t).focus()},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=istInNm]",t).autocomplete({source:function(t,l){let o={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term,cSeq:e.cuCSeq};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.isNm,value:t.isNm,isSeq:t.isSeq,v:t}}));l(e)}else l([])}))},focus:function(t,e){return!1},select:function(e,n){null!=n.item.v.isAddrDetail&&($("input[name=isInAddr]",t).val(n.item.v.isAddr),$("input[name=isInAddrDetail]",t).val(n.item.v.isAddrDetail)),$("input[name=istInIsSeq]",t).val(n.item.isSeq),$("input[name=istInHopeDt]",t).focus()},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".istInAddr",t).on("click",(function(e){new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=isInZipcode]",t).val(e.zonecode),$("input[name=isInAddr]",t).val(n),$("input[name=isInAddrDetail]",t).focus()}}).open()})),$("input[name=istOutNm]",t).autocomplete({source:function(t,l){let o={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term,cSeq:e.cuCSeq};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.isNm,value:t.isNm,isSeq:t.isSeq,v:t}}));l(e)}else l([])}))},focus:function(t,e){return!1},select:function(e,n){null!=n.item.v.isAddrDetail&&($("input[name=isOutAddr]",t).val(n.item.v.isAddr),$("input[name=isOutAddrDetail]",t).val(n.item.v.isAddrDetail)),$("input[name=istOutIsSeq]",t).val(n.item.isSeq),$("input[name=istOutHopeDt]",t).focus()},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".istOutAddr",t).on("click",(function(e){new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=isOutZipcode]",t).val(e.zonecode),$("input[name=isOutAddr]",t).val(n),$("input[name=isOutAddrDetail]",t).focus()}}).open()})),$("select[name=istInCd],[name=istOutCd]",t).on("change",(function(e){let n=this.value,a=$(this).attr("name");"A"==n?$("istInCd"==a?".inStorage":".outStorage",t).val("").hide():$("istInCd"==a?".inStorage":".outStorage",t).show()})),$("select[name=istInCd]",t).attr("placeholder",e.cuNm+" 입고지"),$("select[name=istOutCd]",t).attr("placeholder",e.cuNm+" 출고지"),$("select[name=istInCd],[name=istOutCd]",t).trigger("change"),$("input[name=oCnt]",t).val(n._utils.numberWithCommas($("input[name=oCnt]",t).val())),$(".save",t).on("click",(function(a){if(n._utils.checkRequired(t)){let a=n._utils.serializeObject(t);if(a.istShareYn=$("input[name=istShareYn]:checked",t).val()??"N",a.workInfo=[],"D"==a.oStatus)return alert("작업이 완료되어 수정을 할 수 없습니다."),!1;let l=$(".workTable tbody tr",t);for(let t=0;t<l.length;t++){let e=$(l[t]).data("ROW");delete e.wOutsourcingYn,a.workInfo.push(e)}if(a.workInfo=JSON.stringify(a.workInfo),null==a.cuSeq||""==a.cuSeq)return alert("업체 이름을 목록에서 선택해서 등록해주세요."),!1;"Y"==a.istShareYn&&e.fileInfo.length>0&&(a.fileSeq=e.fileInfo[0].fileSeq),delete e.fileInfo,a=n._utils.filterJsonRemoveNull(a),n.insert(a,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),n.retrieve(),alert("거래처에 수주가 등록되었습니다.")):alert("등록에 실패하였습니다.")}))}}))})),e(this,"workAdd",((t,e)=>{let n=this,a=$(".workTable tbody",t),l=$('<tr style="border-bottom: 1px dotted #c1c1c1;" />').data("ROW",e);l.append($('<td class="ac handle ">'+e.idx+"</td>")),l.append($('<td class="ac "></td>').text(e.spNm)),l.append($('<td class="ac "></td>').text(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")")));let o="-";"Y"==e.wFrontYn?o="전면":"N"==e.wFrontYn?o="후면":"Z"==e.wFrontYn&&(o="양면"),l.append($('<td class="ac ">'+o+"</td>"));let i="";for(let s=0;s<e.optionInfo.length;s++){let t=e.optionInfo[s];"Y"==t.cwoOrderYn&&(n._utils.checkEmptyNull(t.woInput)||(i+=(""!=i?" ":"")+'<span class="workOptionListOne vm" style="padding:0px;"><span class="workOptionInfo">'+t.cwoNm+" : <strong>"+t.woInput+"</strong></span></span>"))}l.append($('<td class="al workOptionListDiv " style="padding: 0px;"></td>').append($(i))),l.append($('<td class="al "></td>').text(e.wMemo)),a.append(l)})),e(this,"outsourcingFormMainDivEvent",((t,e)=>{const n=this;let l=$(`#${t}`);$(".title",l).text("작업의뢰");let o=$(".outsourcingDiv",l),i=$(".workTable tbody",o),s=$(".workDetailArea",o),r=$(".workDetail",s);$(".printArea",l).find(".processFlow").empty();let c=r.clone();r.remove(),l.data(e);let d=!1;if(window.jsPDF=window.jspdf.jsPDF,$(".wCuNm",l).text("("+e.wCuNm+")"),null==e.osESeq){let t={ctl:"employee",cmd:"load"};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($("input[name=osESeq",l).val(t.data.eSeq),$("input[name=osENm",l).val(t.data.eNm),$("input[name=osETel",l).val(t.data.eTel).trigger("focusout")):alert(t.message)}))}n._utils.classNameInput(l,e),n._utils.unSerializeObject(l,e),n._utils.focusEvent($("input[name=osInchargeTel",l),"tel"),n._utils.focusEvent($("input[name=osETel",l),"tel"),$("input[name=osENm",l).autocomplete({source:function(t,e){let l={ctl:"employee",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return $.extend({label:t.eNm,value:t.eNm},t)}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=osESeq]",l).val(e.item.eSeq),$("input[name=osETel]",l).val(e.item.eTel).trigger("focusout").trigger("focus")},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=osInNm],input[name=osOutNm]",l).autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.isNm,value:t.isNm,v:t}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){"osInNm"==$(this).attr("name")?($("input[name=osInIsSeq]",l).val(e.item.isSeq),$("input[name=osInHopeDt]",l).trigger("focus")):($("input[name=osOutIsSeq]",l).val(e.item.isSeq),$("input[name=osOutHopeDt]",l).trigger("focus"))},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=cuNm],input[name=osENm],input[name=osInIsNm],input[name=osOutIsNm]",l).on("change",(function(t){let e=$(this).attr("name");if(""==this.value){let t;"cuNm"==e?t=$("input[name=cuSeq]",l):"osENm"==e?t=$("input[name=osESeq]",l):"osInIsNm"==e?t=$("input[name=osInIsSeq]",l):"osOutIsNm"==e&&(t=$("input[name=osOutIsSeq]",l)),null!=t&&t.val("")}})),i.on("click","tr",(function(){let t=$(this),e=t.data("ROW"),a=t.attr("style");n._utils.checkEmptyNull(a)||-1==a.indexOf("background")?($("tr",i).css("background",""),t.css("background","#d3e1ff"),function(t){$(".workDetail",o).remove();let e=c.clone(),a=function(t,e){let n=$('<div class="optionArea">');n.empty();for(let a=0;a<t.length;a++)if("Y"==t[a].cwoOrderYn){let l=$('<span class="workOptionListOne vm" style="padding: 0px 2px !importan;"/>'),o=$('<strong class="workOptionInfoInput" style="margin: 0px 2px;" />');if("Y"==t[a].cwoMustYn&&o.append('<span style="color:red">*</span>'),o.append(t[a].cwoNm+" : "),"A"==t[a].cwoInputCd){let n=$('<select name="'+t[a].cwoSeq+'"><option value="">선택</option></select>');if(!e._utils.checkEmptyNull(t[a].cwoData)){let e=t[a].cwoData.split(",");for(let t=0;t<e.length;t++){let a=$("<option />");a.val(e[t]).text(e[t]),n.append(a)}}n.on("change",(function(){let n=$(this).val(),l=$(this).closest("strong"),o=$(this).closest("span").data("ROW"),i=JSON.parse(o.cwoDataSub),s=$(this).next();if(""==n)s.length>0&&s.remove();else if(s.length>0&&s.remove(),null==i||e._utils.checkEmptyNull(i[n]));else if("select"==i[n].type){s=$('<select name="'+t[a].cwoSeq+'_sub" style="margin-left:5px"/>'),s.empty(),s.append('<option value="">선택</option>');let e=i[n].values;for(let t=0;t<e.length;t++){let n=$("<option />");n.val(e[t]).text(e[t]),s.append(n)}l.append(s)}else"text"==i[n].type&&(s=$('<input type="text" name="'+t[a].cwoSeq+'_sub" style=" width:95px;margin-left:5px" placeholder="최대 40글자"/>'),l.append(s))})),o.append(n)}else if(["T","C","W","M","L"].indexOf(t[a].cwoInputCd)>-1){let n=$('<input type="text" name="'+t[a].cwoSeq+'" style="width:95px;" placeholder="최대 40글자"  >');e._utils.checkEmptyNull(t[a].woInput)||n.val(t[a].woInput),["W","M","L"].indexOf(t[a].cwoInputCd)>-1?(e._utils.focusEvent(n,"unit"),n.css({width:"40px","text-align":"right"}),n.attr("placeholder",t[a].cwoInputCdNm)):"C"==t[a].cwoInputCd&&(e._utils.focusEvent(n,"comma"),n.css({width:"50px","text-align":"right"}),n.attr("placeholder",t[a].cwoInputCdNm)),o.append(n)}l.append(o),l.data("ROW",t[a]),n.append(l)}for(let a=0;a<t.length;a++)if("Y"==t[a].cwoOrderYn){let l=t[a].oswoInput??t[a].woInput;if("A"==t[a].cwoInputCd)if(!e._utils.checkEmptyNull(l)&&l.indexOf("→")>-1){let e=l.split("→");$("select[name="+t[a].cwoSeq+"]",n).val(e[0]).trigger("change"),$("[name="+t[a].cwoSeq+"_sub]",n).val(e[1])}else $("select[name="+t[a].cwoSeq+"]",n).val(l).trigger("change");else["T","C","W","M"].indexOf(t[a].cwoInputCd)>-1&&$("input[name="+t[a].cwoSeq+"]",n).val(l)}return n.data("ROW",t)}(t.optionInfo.length>0?t.optionInfo:t.optionInfoOrg,n);$("input[name=oswMemo]",e).val(t.oswMemo??t.wMemo),$(".workOptionListDiv",e).append(a),e.data("ROW",t),s.append(e),m()}(e)):u(e)})),o.on("click",".btnApply",(function(){let t=$(this).closest("table"),e=t.data("ROW"),a=t.find(".optionArea"),l=a.data("ROW");for(let o=0;o<l.length;o++)if("Y"==l[o].cwoOrderYn){let t=$("[name="+l[o].cwoSeq+"]",a).next();if(0==t.length)l[o].oswoInput=$("[name="+l[o].cwoSeq+"]",a).val();else{let e=t.val();n._utils.checkEmptyNull(e)?l[o].oswoInput=$("[name="+l[o].cwoSeq+"]",a).val():l[o].oswoInput=$("[name="+l[o].cwoSeq+"]",a).val()+"→"+e}if("Y"==l[o].cwoMustYn&&n._utils.checkEmptyNull(l[o].oswoInput))return alert("세부사항 ["+l[o].cwoNm+"]을 입력하세요"),!1}e.optionInfo=l,e.oswMemo=$("input[name=oswMemo",t).val(),u(e)})),$(".btnSave",l).on("click",(function(){let t=l.data(),e=n._utils.serializeObject(l);$.extend(t,e),n._utils.checkEmptyNull(t.osETel)||(t.osETel=n._utils.getOnlyNumber(t.osETel)),n._utils.checkEmptyNull(t.osInchargeTel)||(t.osInchargeTel=n._utils.getOnlyNumber(t.osInchargeTel));let o=$("tr",i),s=[];for(let a=0;a<o.length;a++){let t=$(o[a]).data("ROW");if(t.oswCnt=n._utils.getOnlyNumber(t.oswCnt),0==t.optionInfo.length){let e=t.optionInfoOrg;for(let t=0;t<e.length;t++)e[t].oswoInput=e[t].woInput;t.optionInfo=e}s.push(t)}t.workInfo=JSON.stringify(s),t=n._utils.filterJsonRemoveNull(t);let r={ctl:"outsourcing",cmd:"update"};$.extend(r,t),n._utils.nullTostring,new a(n._const,r,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(n.retrieve(),alert("저장 되었습니다."),d=!0,f.removeClass("disable"),h.removeClass("disable"),g.removeClass("disable")):9099==t.statusCode||alert(t.message)}))}));for(let a=0;a<e.workInfo.length;a++)p(e.workInfo[a]),!d&&e.workInfo[a].optionInfo.length>0&&(d=!0);function p(t){let e="",a=t.optionInfo.length>0?t.optionInfo:t.optionInfoOrg;for(let n=0;n<a.length;n++){let t=a[n];if("Y"==t.cwoOrderYn){let n=t.oswoInput??t.woInput;null!=n&&(e+=(""!=e?" ":"")+'<span class="workOptionListOne vm"><strong class="workOptionInfo">'+t.cwoNm+' : <span style="font-weight: bold;">'+n+"</span></strong></span>")}}let l=t.oswMemo??t.wMemo,o=$('<tr class="cursorPointer" style="border-bottom: 1px dotted #c1c1c1;"/>');o.append($('<td class="al" style="padding-left:10px;"/>').append(t.wNm+(n._utils.checkEmptyNull(t.wInfo)?"":" ("+t.wInfo+")"))),o.append($('<td class="ac" />').append(t.wFrontYnNm)),o.append($('<td class="ar" />').append(n._utils.numberWithCommas(t.oswCnt))),o.append($('<td class="al" />').append(e)),o.append($('<td class="al" style="font-size:10px;"/>').append(l)),o.data("ROW",t),i.append(o)}function u(t){let e,a=$("tr",i);for(let n=0;n<a.length;n++){let l=$(a[n]).data("ROW");if(t.oswSeq==l.oswSeq){e=$(a[n]);break}}let l=e.find("td"),o=t.optionInfo.length>0?t.optionInfo:t.optionInfoOrg,r="";for(let i=0;i<o.length;i++){let t=o[i];if("Y"==t.cwoOrderYn){let e=t.oswoInput??t.woInput;n._utils.checkEmptyNull(e)||(r+=(""!=r?" ":"")+'<span class="workOptionListOne vm" style="padding:0px;"><span class="workOptionInfo">'+t.cwoNm+" : <strong>"+e+"</strong></span></span>")}}$(l[3]).empty().append(r),$(l[4]).text(t.oswMemo),e.data("ROW",t),e.css("background",""),s.empty(),m()}function m(){let t=$(".mw_defalut",l),e=$(".mw_contentsDiv",l);console.log(o.height());let n=o.height();e.height(n+65),t.height(n+123)}m();let f=$(".mail",l),h=$(".fax",l),g=$(".print",l);function _(t,e){let l=$("template#outsourcingDoc"),o=$("#printWrap");o.empty(),o.append(l.html());let i={ctl:"outsourcing",cmd:"orderDataLoad",oSeq:t.oSeq,cuSeq:t.cuSeq};new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(a){if(0==a.code){let l=a.data,i=$(".outSourcingHead",o),s=$(".outSourcingInfo",o);n._utils.classNameInput(i,l),n._utils.classNameInput(s,l),"A"==l.osInCd&&$(".osInNm",s).text("직접입고"),"A"==l.osOutCd&&$(".osOutNm",s).text("직접출고"),$(".cuNm",i).text("- "+l.cuNm);let r=$(".workDetailArea",o),c=$(".workTableTypeA",r).clone(),d=$(".workInfo",c).clone(),p=$(".workDetail",c).clone();$("tbody",c).empty(),$(".workTableTypeA",r).remove();let u,m=[],f={};for(let e=0;e<l.workInfo.length;e++){let a,o=l.workInfo[e];for(let t=0;t<l.workInfo.length;t++)if(o.wSeq==l.workInfo[t].wSeq){o.wOutsourcingInfo=l.workInfo[t].wOutsourcingInfo;break}if(null==f.wSeq||f.spSeq!=o.spSeq){a=c.clone();let t=d.clone();n._utils.classNameInput(t,o),$(".oswCnt",t).text("주문량 : "+n._utils.numberWithCommas(o.oswCnt)),$("tbody",a).append(t)}else a=u;let i=o.optionInfo,s=[];for(let t=0;t<i.length;t++)"Y"!=i[t].cwoOrderYn||n._utils.checkEmptyNull(i[t].oswoInput)||s.push(i[t]);let m=p.clone();n._utils.classNameInput(m,o);let h=0,g=[],_=$('<tr style="height:45px;"/>');for(h=0;h<s.length;h++){let t='<span class="workOptionListOne vm"><strong class="workOptionInfo" style="font-size:14px;">'+s[h].cwoNm+' : <span style="font-weight: bold;font-size:15px;">'+s[h].oswoInput+"</span></strong></span>";if(h<=2)$(".option:eq("+h+")",m).append(t);else{h%3==0&&(_=$('<tr style="height:45px;"/>'));let e=$('<td class="al" style="border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;background:#fff;"></td>');if(e.append(t),_.append(e),h%3==2||h==s.length-1){if(h==s.length-1&&h%3<2)for(let t=(h+1)%3;t<3;t++){let t=$('<td class="al" style="border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;background:#fff;"></td>');_.append(t)}$("td",_).length>0&&g.push(_)}}}let w=0==s.length?1:Math.ceil(s.length/3);$(".rowspan",m).attr("rowspan",w),$("tbody",a).append(m);for(let t=0;t<g.length;t++)$("tbody",a).append(_[t]);r.append(a),u=a,f=o,e==t.workInfo.length-1&&(_=$("tbody tr:last",a),3==$("td",_).length&&$(".rowspan",m).css("border-bottom","1px solid #c1c1c1"),$("td",_).css("border-bottom","1px solid #c1c1c1"))}let h=[];for(let e=0;e<l.workInfo.length;e++){let n=l.workInfo[e],a=t.cNm;-1==h.indexOf(n.spSeq)&&h.push(n.spSeq),(0==e||m[m.length-1].spNm!=l.workInfo[e].spNm)&&m.push({spNm:l.workInfo[e].spNm,cuNm:a})}let g=$(".topProcessFlow",o);for(let e=0;e<t.processInfo.length;e++){let n=t.processInfo[e],a="";a=-1==h.indexOf(n.spSeq)?$('<div style="margin-right:5px;display: inline-block;height: 25px;line-height: 22px; background: #fff;padding: 0 15px;text-align: center;font-size: 13px;font-weight: normal;color: #000;\tborder: 1px solid #7b7b7b;border-radius: 3px;vertical-align: middle;" >'+n.spNm+"</div>"):$('<div style="margin-right:5px;display: inline-block;height: 25px;line-height: 22px; background: #7b7b7b;padding: 0 15px;text-align: center;font-size: 13px;font-weight: normal;color: #fff;\tborder: 1px solid #7b7b7b;border-radius: 3px;vertical-align: middle;" >'+n.spNm+"</div>"),g.append(a)}let _=$(".processFlow",o);for(let t=0;t<m.length;t++){let e=m[t],n=$('<table class="printInfo" style="width:78px;"/>').append("<tbody/>");n.append($("<tr/>").append($('<th class="top last" />').append(e.spNm))),n.append($("<tr/>").append($('<td class="last ac" style="font-size:10px; padding: 0px 2px;" />').append(e.cuNm))),_.append($('<td style="background:#fff;padding:1px;"/>').append(n)),_.append('<td style="font-size:10px;padding:0px;font-stretch:extra-condensed">▶</td>')}m.length<8&&_.append('<td style="background:#fff;"><table class="printInfo" style="width:78px;"><tbody><tr><th class="top last">출고</td></tr><tr><td class="ac last" style="font-size:12px;">'+t.cNm+"</td></tr></tbody></table></td>");let w=n._utils.encryptData("oSeq="+l.oSeq+"&osSeq="+l.osSeq+"&cuSeq="+l.cuSeq);w=encodeURI(w);let y=document.location.host+"/"+n._pageUrl+"?p="+w;const b=$(".qrCode",o)[0],v=$(".qrCode2",o)[0];new QRCode.toCanvas(y,{width:105,margin:0},(function(t,e){t&&console.error(t);let n=e.toDataURL();b.appendChild(e),$(b).empty(),$(b).append($('<img src=""/>').attr("src",n))})),new QRCode.toCanvas(y,{width:60,margin:1},(function(t,e){t&&console.error(t);let n=e.toDataURL();v.appendChild(e),$(v).empty(),$(v).append($('<img src=""/>').attr("src",n))})),$(".reportTitle",o).append($("<pre>"+l.cReportTitle+"<pre>")),null!=t.companyFileInfo&&t.companyFileInfo.length>0?n._parent.imageFileLoad(t.companyFileInfo[0],(function(t){let n=$('<img src="" style="width:130px;"></img>');n.attr("src",t),$(".reportLogo",o).append(n),e(o)})):$(".reportLogo",o).append($("<strong style=\"font-size:20px;font-weight:bold;font-family: 'Nanum Square', sans-serif;\">"+t.cNm+"</strong>")),"A"==t.cTransReport&&$(".processFlowArea",o).remove()}else alert(a.message)}))}d&&(f.removeClass("disable"),h.removeClass("disable"),g.removeClass("disable")),h.on("click",(function(){if(!d)return alert("발주 내역을 저장 후 다시 진행해 주십시요"),!1;let t=l.data(),a=n._utils.currentDate().replace(/-/g,"");_(t,(function(t){n._utils.showLoading();let l=$("page",t);for(let i=0;i<l.length;i++){$(".workDetailArea",l[i]).css("height","725px");var o=l[i];html2canvas(o,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((t=>{let l=t.toDataURL("image/png"),i=190,s=1.414*i,r=t.height*i/t.width,c=r,d=new jsPDF("p","mm"),p=10,u=e;for(u.files=[],window.scrollTo(0,0),d.addImage(l,"PNG",10,p,i,r,void 0,"FAST"),c-=s;c>=20;)p=c-r,p-=20,d.addPage(),d.addImage(l,"PNG",10,p,i,r,void 0,"FAST"),c-=s;let m={};u.eTitle=$(".cuNm",$(o)).text()+" 발주서 ",m.filename=e.cNm+"_"+$(".cuNm",$(o)).text()+" 발주서_"+a+".pdf",m.content=d.output("datauristring"),m.encoding="base64",m.size=m.content.length,u.files.push(m);let f=$("template#outsourcingFax");n._parent.openLayer(f.html(),n.outsourcingFaxEvent,u),n._utils.hideLoading()}))}}))})),f.on("click",(function(){if(!d)return alert("발주 내역을 저장 후 다시 진행해 주십시요"),!1;if("Y"!=e.cMailYn)return alert('<div class="al" style="width:100%;padding-left:10px; font-size:11px;">기본설정 > 회사정보 메뉴를 이용하여 메일 연동 정보를 등록하십시오</div>',"메일발송 설정이 필요합니다."),!1;let t=l.data(),a=n._utils.currentDate().replace(/-/g,"");_(t,(function(t){let l=$("page",t);for(let o=0;o<l.length;o++){$(".workDetailArea",l[o]).css("height","725px");let t=l[o];n._utils.showLoading(),html2canvas(t,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((l=>{let o=l.toDataURL("image/png"),i=190*1.414,s=277,r=s,c=new jsPDF("p","mm"),d=10,p=e;for(p.files=[],window.scrollTo(0,0),c.addImage(o,"PNG",10,d,190,s,void 0,"FAST"),r-=i;r>=20;)d=r-s,d-=20,c.addPage(),c.addImage(o,"PNG",10,d,190,s,void 0,"FAST"),r-=i;let u={};p.eTitle=$(".cuNm",$(t)).text()+" 발주서 ",u.filename=e.cNm+"_"+$(".cuNm",$(t)).text()+" 발주서_"+a+".pdf",u.content=c.output("datauristring"),u.encoding="base64",u.size=u.content.length,p.files.push(u);let m=$("template#outsourcingSendMail");n._parent.openLayer(m.html(),n.outsourcingMailEvent,p),n._utils.hideLoading()}))}}))})),g.on("click",(function(){if(!d)return alert("발주 내역을 저장 후 다시 진행해 주십시요"),!1;let t=l.data();_(t,(function(t){let e=$(".printA4",t);$(".workDetailArea",e).css("height","765px"),$(e).print({addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,timeout:5e3})})),"Y"!=e.osSendYn&&setTimeout((function(){confirm("외주 발송 처리 하시겠습니까",(function(e){if(e){let e={ctl:"outsourcing",cmd:"orderSendTypeUpdate",osSeq:t.osSeq,osSendType:"print"};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}}),"발송처리")}),2e3)}))})),e(this,"formLayer",((t,e)=>{const n=this;let l=$(`#${t}`);$(".title",l).text("발주");let o=$(".printArea",l);o.find(".processFlow").empty(),e.cWorkReport,$(".wCuNm",l).text("("+e.wCuNm+")");let i={ctl:"order",cmd:"load",oSeq:e.oSeq};new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let a=t.data;$(".orderNum",o).text(n._utils.formatdate(a.creDate,"")+""+n._utils._zeroFill(a.oSeq,7)),$(".orderDate",o).text(a.creDate.substring(0,16)),$(".cuNm",o).text(a.cuNm),$(".oFileNm",o).text(a.oFileNm),$(".istInNm",o).text(a.istInNm),$(".istOutNm",o).text(a.istOutNm),$(".oCnt",o).text(n._utils.numberWithCommas(a.oCnt)),$(".oPaperSize",o).text(a.oPaperSize),$(".oMemo",o).text(n._utils.strMaxCuttion(a.oMemo,25));let l=$(".workDetailArea",o),i=$(".workTableTypeA",l).clone(),s=$(".workInfo",i).clone(),r=$(".workDetail",i).clone();$("tbody",i).empty(),$(".workTableTypeA",l).remove();let c,d=[],p=[],u={};for(let t=0;t<e.workInfo.length;t++){let o=e.workInfo[t];-1==d.indexOf(o.spNm)&&d.push(o.spNm);for(let t=0;t<a.workInfo.length;t++)if(o.wSeq==a.workInfo[t].wSeq){o.wOutsourcingInfo=a.workInfo[t].wOutsourcingInfo;break}let p,m="자사";if("Y"==o.wOutsourcingYn&&(1==o.wOutsourcingInfo.length?m=o.wOutsourcingInfo[0].cuNm:2==o.wOutsourcingInfo.length?m=o.wOutsourcingInfo[0].cuNm+", "+o.wOutsourcingInfo[1].cuNm:o.wOutsourcingInfo.length>2&&(m=o.wOutsourcingInfo[0].cuNm+" 외 "+o.wOutsourcingInfo.length+"개 업체")),null==u.wSeq||u.spSeq!=o.spSeq||u.wOutsourcingYn!=o.wOutsourcingYn){p=i.clone();let t=s.clone();n._utils.classNameInput(t,o),$(".wOutsourcingNm",t).text(m),$("tbody",p).append(t)}else p=c;let f=o.optionInfo,h=[];for(let t=0;t<f.length;t++)"Y"!=f[t].cwoOrderYn||n._utils.checkEmptyNull(f[t].woInput)||h.push(f[t]);let g=r.clone();n._utils.classNameInput(g,o);let _=0,w=[],y=$('<tr style="height:26px;"/>');for(_=0;_<h.length;_++){let t='<span class="workOptionListOne vm"><strong class="workOptionInfo" style="font-size:12px;">'+h[_].cwoNm+' : <span style="font-weight: bold;font-size:14px;">'+h[_].woInput+"</span></strong></span>";if(_<=2)$(".option:eq("+_+")",g).append(t);else{_%3==0&&(y=$('<tr style="height:26px;"/>'));let e=$('<td class="al" style="border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;background:#fff;"></td>');if(e.append(t),y.append(e),_%3==2||_==h.length-1){if(_==h.length-1&&_%3<2)for(let t=(_+1)%3;t<3;t++){let t=$('<td class="al" style="border-left:1px solid #c1c1c1;border-top:1px solid #c1c1c1;background:#fff;"></td>');y.append(t)}$("td",y).length>0&&w.push(y)}}}let b=0==h.length?1:Math.ceil(h.length/3);$(".rowspan",g).attr("rowspan",b),$("tbody",p).append(g);for(let t=0;t<w.length;t++)$("tbody",p).append(y[t]);l.append(p),c=p,u=o,t==e.workInfo.length-1&&(y=$("tbody tr:last",p),3==$("td",y).length&&$(".rowspan",g).css("border-bottom","1px solid #c1c1c1"),$("td",y).css("border-bottom","1px solid #c1c1c1"))}for(let t=0;t<a.workInfo.length;t++){let n=a.workInfo[t],l=e.cNm;"Y"==n.wOutsourcingYn&&"Y"==n.wOutsourcingYn&&(1==n.wOutsourcingInfo.length?l=n.wOutsourcingInfo[0].cuNm:2==n.wOutsourcingInfo.length?l=n.wOutsourcingInfo[0].cuNm+", "+n.wOutsourcingInfo[1].cuNm:n.wOutsourcingInfo.length>2&&(l=n.wOutsourcingInfo[0].cuNm+" 외 "+n.wOutsourcingInfo.length+"개 업체")),(0==t||p[p.length-1].spNm!=a.workInfo[t].spNm)&&p.push({spNm:a.workInfo[t].spNm,cuNm:l})}let m=$(".topProcessFlow",o);for(let t=0;t<d.length;t++){let e=$('<div style="margin-right:5px;display: inline-block;height: 25px;line-height: 22px; background: #7b7b7b;padding: 0 15px;text-align: center;font-size: 13px;font-weight: normal;color: #fff;\tborder: 1px solid #7b7b7b;border-radius: 3px;vertical-align: middle;" >'+d[t]+"</div>");m.append(e)}let f=$(".processFlow",o);for(let t=0;t<p.length;t++){let e=p[t],n=$('<table class="printInfo" style="width:78px;"/>').append("<tbody/>");n.append($("<tr/>").append($('<th class="top last" />').append(e.spNm))),n.append($("<tr/>").append($('<td class="last ac" style="font-size:10px; padding: 0px 2px;" />').append(e.cuNm))),f.append($('<td style="background:#fff;padding:1px;"/>').append(n)),f.append('<td style="font-size:10px;padding:0px;font-stretch:extra-condensed">▶</td>')}p.length<8&&f.append('<td style="background:#fff;"><table class="printInfo" style="width:78px;"><tbody><tr><th class="top last">출고</td></tr><tr><td class="ac last" style="font-size:12px;">'+e.cNm+"</td></tr></tbody></table></td>");let h=n._utils.encryptData("oSeq="+a.oSeq+"&osSeq="+a.osSeq+"&cuSeq="+a.cuSeq);h=encodeURI(h);let g=document.location.host+"/"+n._pageUrl+"?p="+h;const _=$(".qrCode",o)[0],w=$(".qrCode2",o)[0];new QRCode.toCanvas(g,{width:105,margin:0},(function(t,e){t&&console.error(t);let n=e.toDataURL();_.appendChild(e),$(_).empty(),$(_).append($('<img src=""/>').attr("src",n))})),new QRCode.toCanvas(g,{width:60,margin:1},(function(t,e){t&&console.error(t);let n=e.toDataURL();w.appendChild(e),$(w).empty(),$(w).append($('<img src=""/>').attr("src",n))})),$(".reportTitle",o).append($("<pre>"+a.cReportTitle+"<pre>")),null!=e.companyFileInfo&&e.companyFileInfo.length>0?n._parent.imageFileLoad(e.companyFileInfo[0],(function(t){let e=$('<img src="" style="width:130px;"></img>');e.attr("src",t),$(".reportLogo",o).append(e)})):$(".reportLogo",o).append($("<strong style=\"font-size:20px;font-weight:bold;font-family: 'Nanum Square', sans-serif;\">"+e.cNm+"</strong>")),"A"==e.cTransReport&&($(".processFlowArea",o).remove(),$(".workDetailArea",o).css("height","790px"))}else alert(t.message)}));let s=$(".printArea",l),r=$(".mail",l),c=$(".fax",l);window.jsPDF=window.jspdf.jsPDF,c.on("click",(function(){n._utils.currentDate().replace(/-/g,""),n._utils.showLoading();let t=$("page",l);for(let o=0;o<t.length;o++){var a=t[o];html2canvas(a,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((t=>{let a=t.toDataURL("image/png"),o=190,i=1.414*o,s=t.height*o/t.width,r=s,c=new jsPDF("p","mm"),d=10,p=e;for(p.files=[],window.scrollTo(0,0),c.addImage(a,"PNG",10,d,o,s,void 0,"FAST"),r-=i;r>=20;)d=r-s,d-=20,c.addPage(),c.addImage(a,"PNG",10,d,o,s,void 0,"FAST"),r-=i;let u={};p.eTitle=$(".workTitle",l).text(),u.filename=$(".workTitle",l).text()+".pdf",u.content=c.output("datauristring"),u.encoding="base64",u.size=u.content.length,p.files.push(u);let m=$("template#outsourcingFax");n._parent.openLayer(m.html(),n.outsourcingFaxEvent,p),n._utils.hideLoading()}))}})),r.on("click",(function(){if("Y"!=e.cMailYn)return alert("메일발송 설정이 필요합니다..\n기본설정 > 회사정보 메뉴를 이용하여 메일 연동 정보를 등록하십시오"),!1;let t=$("page",l);for(let a=0;a<t.length;a++){let o=t[a];html2canvas(o,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((t=>{let a=t.toDataURL("image/png"),o=190,i=1.414*o,s=t.height*o/t.width,r=s,c=new jsPDF("p","mm"),d=10,p=e;for(p.files=[],window.scrollTo(0,0),c.addImage(a,"PNG",10,d,o,s,void 0,"FAST"),r-=i;r>=20;)d=r-s,d-=20,c.addPage(),c.addImage(a,"PNG",10,d,o,s,void 0,"FAST"),r-=i;let u={};p.eTitle=$(".workTitle",l).text(),u.filename=$(".workTitle",l).text()+".pdf",u.content=c.output("datauristring"),u.encoding="base64",u.size=u.content.length,p.files.push(u);let m=$("template#outsourcingSendMail");n._parent.openLayer(m.html(),n.outsourcingMailEvent,p),n._utils.hideLoading()}))}})),$(".print",l).on("click",(function(){let t=$(".printA4",l);0==t.find(".print_footer").length&&$("<div class='print_footer'><span class='left'></span><span class='right'><strong>(주)한국문화사랑</strong> K-PrintFactory / 010-9089-0794 / postgood@kakao.com</span></div>").appendTo(t),$(s).print({addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,timeout:1500})}))})),e(this,"outsourcingMailEvent",((t,e)=>{let n=this,l=$("#"+t),o=5242880,i=$("select[name=files]",l);function s(){i.empty();for(let t=0;t<e.files.length;t++){let a=e.files[t],l=$('<option value="'+a.filename+'">'+a.filename+"("+n._utils.bytesToSize(a.size)+")</option>");i.append(l)}}$("input[name=subject]",l).val("["+n._const.__C_NM+"] "+e.eTitle+"를 보내드립니다."),$("input[name=to]",l).val(e.cuInvoiceEmail),s(),$("input[name=eFile]",l).on("change",(function(){let t={};var n;if(t.filename=this.files[0].name,t.size=this.files[0].size,t.encoding="base64",(n=this.files[0],new Promise(((t,e)=>{const a=new FileReader;a.readAsDataURL(n),a.onload=()=>t(a.result),a.onerror=t=>e(t)}))).then((e=>t.content=e)),t.size>o)return alert("최대 5M이상 첨부 할 수 없습니다."),!1;e.files.push(t),s(),$(this).val("")})),$(".fa-upload",l).on("click",(function(){$("input[name=eFile]",l).trigger("click")})),$(".fa-trash-can",l).on("click",(function(){let t=$("option:checked",i).index();e.files.splice(t,1),s()})),$(".mailSend",l).on("click",(function(){if(n._utils.checkRequired(l)){let t=n._utils.serializeObject(l),i=0;for(let n=0;n<e.files.length;n++)i+=e.files[n].size;if(i>o)return alert("최대 5M이상 첨부 할 수 없습니다."),!1;t.files=JSON.stringify(e.files),n._parent.emailSend(t,(function(t){if(0==t.code){$("body .btnClosePopLayer").trigger("click"),alert("발송 되었습니다.");let t={ctl:"outsourcing",cmd:"orderSendTypeUpdate",osSeq:e.osSeq,osSendType:"mail"};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}else alert(t.message)}))}}))})),e(this,"outsourcingFaxEvent",((t,e)=>{let n=this,l=$("#"+t);$("input[name=cuNm]",l).val(e.cuNm),$("input[name=cuFax]",l).val(e.cuFax),$(".faxSend",l).on("click",(function(){if(n._utils.checkRequired(l)){let t=n._utils.serializeObject(l);t.files=JSON.stringify(e.files),n._parent.faxSend(t,(function(t){if(0==t.code){$("body .btnClosePopLayer").trigger("click"),alert("발송 되었습니다.");let t={ctl:"outsourcing",cmd:"orderSendTypeUpdate",osSeq:e.osSeq,osSendType:"fax"};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}else alert(t.message)}))}}))})),e(this,"list",((t,e)=>{let n={ctl:"outsourcing",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"customer",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"outsourcing",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._filcuSeq=null,this._nextStatus={A:{nm:"대기",nextNm:"진행",nextStatus:"B"},B:{nm:"대기",nextNm:"완료",nextStatus:"D"},C:{nm:"중지",nextNm:"진행",nextStatus:"B"},D:{nm:"완료",nextNm:"대기",nextStatus:"A"}},this._pageUrl="workreport"}},N=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._order=new v(t._parent,t._const),t._work=new x(t._parent,t._const),t._distribution=new k(t._parent,t._const),t._outsourcing=new S(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}},C=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find("input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()}));let l=n._code.find(".searchWrapArea");n._code.find(".searchWrapBtn");let o=n._code.find(".f_lt .dataHeadTable thead"),i=n._code.find(".f_lt .pageInfoTfoot"),s=n._code.find(".f_lt .dataListTable");n._tbody=s,l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),n._const.__MANAGER_YN,o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._code.find("input[name=chckAll]").on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let r=n._utils.dateformatKorDate(new Date);r=r.substring(0,8)+"01",l.find("input[name=startDt]").val(r),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(l),$(".btnPrintCall",l).on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked"),o=$("input[name=startDt]",l).val(),i=$("input[name=endDt]",l).val();if(0==e.length)return void alert("거래명세표에 작성할 대상을 선택 하십시오");let s=[],r=[];for(let n=0;n<e.length;n++){let t=$(e[n]).closest("tr").data("ROW");if(null==t.lSeq)return void alert("["+t.oFileNm+"] 매출원장에 등록이 안된 수주건입니다.");s.push($(e[n]).val()),-1==r.indexOf(t.cuSeq)&&r.push(t.cuSeq)}r.length>1?alert("하나의 거래처의 수주를 선택하십시요"):new a(n._const,{ctl:"company",cmd:"load",employee:"N"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;e.oSeqs=s,e.startDt=o,e.endDt=i;let a=$("template#transReport");n._parent.openLayer(a.html(),n.transReportEvent,e)}}))})),o.on("click",".fa-broom",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let c=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(c)||i.find("select[name=rowsPerPage]").val(c),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".createLedger",(function(){let t=$(this).closest("tr"),e=t.data("ROW");n._code.find(".f_lt .dataListTable tbody").find("td").css("font-weight",""),t.find("td").css("font-weight","bold"),n._nowIndex=t.index();let l={ctl:"ledger",cmd:"orderLoad",oSeq:e.oSeq};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(n.createLedgerView(),n.ledgerInput(t.data)):alert(t.message)}))})),n.retrieve(),n.ledgerEvent()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=oFileNm]").val(),p=l.find("input[name=searchWord]").val(),u=l.find("select[name=ledgerYn]").val(),m={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",page:a,rows:n,orderColumn:s,orderType:r,oStatus:c,oFileNm:d,ledgerYn:u,searchColumn:"cuNm",searchWord:p};t.list(m,(function(l){let o=t._code.find(".f_lt .dataListTable tbody"),i=t._code.find(".f_lt .dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0){for(let a in l)0==a&&(s=l[a].totalCnt,r=Math.ceil(s/n)),t.display(o,l[a]);let e=$("tr",o);$(e[t._nowIndex]).find(".createLedger:eq(0)").trigger("click")}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$('<span style="display:inline-block;width:20px;color:#666;"></span>');"Y"==e.oTransSendYn&&a.append('<i class="fa-regular fa-paper-plane" title="* 일시 : '+e.oTransSendDate.substring(0,16)+'"></i>');let l="border-left:1px solid #ccc;";null!=e.lSeq&&(l+="background: #e6eeff !important");let o=$("<tr />");o.append($('<td style="'+l+'" class=""></td>').append($('<input type="checkbox" class="vm" name="oSeq" value="'+e.oSeq+'"/>'))),o.append($('<td style="'+l+'" class="al createLedger cursorPointer">'+n._utils.nullTostring(e.cuNm,"")+"</td>")),o.append($('<td style="'+l+'" class="al createLedger cursorPointer"></td>').append('<span class="" >'+n._utils.nullTostring(e.oFileNm,"")+"</span>")),o.append($('<td style="'+l+'" class="ar createLedger cursorPointer"/>'+n._utils.numberWithCommas(e.oCnt,"")+"</td>")),o.append($('<td style="'+l+'" class="createLedger cursorPointer" '+("A"!=e.oStatus?'title="변경일시 : '+e.oStatusDate+'"':"")+">"+n._utils.processStatus("nm",e.oStatus)+"</td>")),o.append($('<td style="'+l+'" class="createLedger cursorPointer">'+n._utils.dateformatKorDate(e.creDate)+"</td>")),o.data("ROW",e),o.appendTo(t)})),e(this,"createLedgerView",(t=>{let e=this._code.find(".f_rt");e.empty();let n=$("template#ledgerWorkCreate");e.append(n.html())})),e(this,"ledgerInput",(t=>{let e=this,n=e._code.find(".f_rt"),a=$(".orderTable",n),l=$(".workList tbody",a);$(".save",n).show(),$(".f_rt.buttonArea .taxSendMessage",n).remove(),e._utils.checkEmptyNull(t.lSeq)?($(".save.tempSave",n).show(),$(".save.ledger",n).text("등록")):(a.find("input[name=lSeq]").val(t.lSeq),$(".save.tempSave",n).hide(),$(".save.ledger",n).text("저장"),t.lAmountInvoice!=t.lAmountTotal&&($(".save",n).hide(),$(".f_rt.buttonArea",n).append('<span class="taxSendMessage" style="margin-top: 10px; display: inline-block;">세금계산서 발행이 되어 수정 불가합니다.</span>'))),a.find(".cuNm").text(t.cuNm),a.find(".oFileNm").text(t.oFileNm),a.find(".oPaperSize").text(t.oPaperSize),a.find(".oCnt").text(e._utils.numberWithCommas(t.oCnt,"")),a.find(".oMemo").text(t.oMemo),a.find(".cuSignificant").text(t.cuSignificant),a.find("input[name=oEndCnt]").val(null!=t.oEndCnt?e._utils.numberWithCommas(t.oEndCnt,"0"):"0"),a.find("input[name=oUnitPrice]").val(null!=t.oUnitPrice?e._utils.numberWithCommas(t.oUnitPrice,"0"):"0"),a.find("input[name=oAmount]").val(null!=t.oAmount?e._utils.numberWithCommas(t.oAmount,"0"):"0"),a.find("input[name=oAmountVat]").val(null!=t.oAmountVat?e._utils.numberWithCommas(t.oAmountVat,"0"):"0"),a.find("input[name=oAmountDc]").val(null!=t.oAmountDc?e._utils.numberWithCommas(t.oAmountDc,"0"):"0"),a.find("input[name=oAmountCalculable]").val(null!=t.oAmountCalculable?e._utils.numberWithCommas(t.oAmountCalculable,"0"):"0"),a.find("input[name=istDeliveryAmount]").val(null!=t.istDeliveryAmount?e._utils.numberWithCommas(t.istDeliveryAmount,"0"):"0"),a.find("input[name=istDeliveryAmountVat]").val(null!=t.istDeliveryAmountVat?e._utils.numberWithCommas(t.istDeliveryAmountVat,"0"):"0"),l.empty();for(let o=0;o<t.workInfo.length;o++){let n=t.workInfo[o],a=$('<tr style="width:100%;"/>'),i="";0==o&&(i+="border-top:0px;");let s="",r="N";for(let t=0;t<n.optionInfo.length;t++){let a=n.optionInfo[t];"Y"==a.woMarkYn&&(r="Y"),"Y"==a.cwoOrderYn&&null!=a.woInput&&"Y"==a.cwoCostYn&&(s+=(""!=s?" ":"")+'<span class="workOptionListOne vm" style="height:20px;"><strong class="workOptionInfoView" style="height: 20px;"><span style="font-size:10px;font-weight: normal;">'+a.cwoNm+'</span> : <span style="font-size:10px;">'+a.woInput+'</span> <input type="hidden" name="woSeq" value="'+a.woSeq+'"> <input type="text" name="woAmount" style="text-align:right; height:16px;width:60px;margin-left:5px;margin-top:0x;font-size:11px;padding-bottom: 2px;" placeholder="금액" title="금액" value="'+(null!=a.woAmount?e._utils.numberWithCommas(a.woAmount,"0"):"0")+'"><input type="text" name="woAmountVat" style="display:none;text-align:right;width:45px;margin-left:5px;font-size:11px;" placeholder="부가세" title="부가세" value="'+(null!=a.woAmountVat?e._utils.numberWithCommas(a.woAmountVat,"0"):"0")+'"</strong></span>')}n.spNm,n.wNm,n.wFrontYnNm,a.append($('<td class="ac workOptionView cursorPointer" style="color:#000;'+i+'" />').append(n.spNm)),a.append($('<td class="ac workOptionView cursorPointer" style="color:#000;'+i+'" />').append(n.wFrontYnNm)),a.append($('<td class="ac workOptionView cursorPointer" style="'+("Y"==r?"color:#f78ca4;font-weight: bold;":"color:#000;")+i+'" />').append(n.wNm+(e._utils.checkEmptyNull(n.wInfo)?"":"<br>("+n.wInfo+")"))),a.append($('<td class="workOptionListDiv al" style="'+i+';padding-left:0px;padding-top:5px !important;padding-bottom:0px !important;"/>').append($(s))),a.append($('<td class="ar"  style="color:#000;'+i+';" />').append($('<strong class="wEndCnt">'+(null!=n.wEndCnt?e._utils.numberWithCommas(n.wEndCnt,""):"")+"</strong>"))),a.append($('<td class="ar"  style="color:#000;'+i+';" />').append($('<input type="text" name="wApplyCnt" vType="number" class="w100p inputBoder0 ar" style="font-size:13px;" title="적용될 수량"  value="'+(null!=n.wApplyCnt?e._utils.numberWithCommas(n.wApplyCnt,"0"):e._utils.numberWithCommas(n.wEndCnt,"0"))+'">'))),a.append($('<td class="ac"  style="color:#000;'+i+';" />').append($('<input type="text" name="wUnitPriceWork" vType="number" class="w100p inputBoder0 ar" style="font-size:13px;" title="입력시 금액 및 부가세 자동 입력"  value="'+(null!=n.wUnitPriceWork?e._utils.numberWithCommas(n.wUnitPriceWork,"0"):"0")+'">'))),a.append($('<td class="ac"  style="color:#000;'+i+';" />').append($('<input type="text" name="wAmount" vType="number" class="w100p inputBoder0 ar" style="font-size:13px;" title="입력시 단가는 표시 되지 않습니다." value="'+(null!=n.wAmount?e._utils.numberWithCommas(n.wAmount,"0"):"0")+'">'))),a.append($('<td class="ac"  style="color:#000;'+i+';" />').append($('<input type="text" name="wAmountVat" vType="number" class="w100p inputBoder0 ar" style="font-size:13px;" value="'+(null!=n.wAmountVat?e._utils.numberWithCommas(n.wAmountVat,"0"):"0")+'">'))),a.data("ROW",n),l.append(a)}e.totalSum(n),n.data(t)})),e(this,"ledgerEvent",(()=>{let t=this,e=t._code.find(".f_rt");e.on("focus","input[name=istDeliveryAmount],[name=istDeliveryAmountVat],[name=oEndCnt],[name=woAmount],[name=woAmountVat],[name=oUnitPrice],[name=oAmountDc],[name=oAmount],[name=oAmountVat],input[name=wApplyCnt],[name=wUnitPriceWork],[name=wAmount],[name=wAmountVat]",(function(){let e=$(this).val();e=t._utils.getOnlyNumber(e),$(this).data("ROW",e).val("0"==e?"":e)})),e.on("focusout","input[name=istDeliveryAmount],[name=istDeliveryAmountVat],[name=oEndCnt],[name=woAmount],[name=woAmountVat],[name=oUnitPrice],[name=oAmountDc],[name=oAmount],[name=oAmountVat],input[name=wApplyCnt],[name=wUnitPriceWork],[name=wAmount],[name=wAmountVat]",(function(){let n=$(this).data("ROW"),a=$(this).val(),l=$(this).attr("name");if(""==a&&(a=0),n=t._utils.getOnlyNumber(n),a=t._utils.getOnlyNumber(a),$(this).val(t._utils.numberWithCommas(a)),n!=a){if(["wApplyCnt","woAmount","wUnitPriceWork","wAmount","istDeliveryAmount"].indexOf(l)>-1){let e=$(this).closest("tr");if(e.data("ROW"),"woAmount"==l)$("input[name=woAmountVat]",$(this).closest("strong")).val(t._utils.numberWithCommas(parseInt(.1*a)));else if("wAmount"==l)$("input[name=wUnitPriceWork]",e).val(0),$("input[name=wAmountVat]",e).val(t._utils.numberWithCommas(parseInt(.1*a)));else if("wUnitPriceWork"==l){let n=$("input[name=wApplyCnt]",e).val();n=t._utils.getOnlyNumber(n),$("input[name=wAmount]",e).val(t._utils.numberWithCommas(n*a)),$("input[name=wAmountVat]",e).val(t._utils.numberWithCommas(parseInt(n*a*.1)))}else if("istDeliveryAmount"==l)$("input[name=istDeliveryAmountVat]",e).val(t._utils.numberWithCommas(parseInt(.1*a)));else if("wApplyCnt"==l){let n=$("input[name=wUnitPriceWork]",e).val();n=t._utils.getOnlyNumber(n);let l=parseInt(a*n);$("input[name=wAmount]",e).val(t._utils.numberWithCommas(l)),$("input[name=wAmountVat]",e).val(t._utils.numberWithCommas(parseInt(.1*l)))}}if(["oAmountDc","oAmount","oUnitPrice"].indexOf(l)>-1){let n=$("input[name=oEndCnt]",e).val();if(!t._utils.checkEmptyNull(n)){n=t._utils.getOnlyNumber(n);let o=$("input[name=oAmountCalculable",e).val();if(o=t._utils.checkEmptyNull(o)?0:t._utils.getOnlyNumber(o),"oAmountDc"==l){let n=o-a;$("input[name=oAmount",e).val(t._utils.numberWithCommas(n)),$("input[name=oAmountVat",e).val(t._utils.numberWithCommas(parseInt(.1*n))),console.log(parseInt(.1*n))}else if("oAmount"==l){let n=o-a;$("input[name=oAmountDc",e).val(t._utils.numberWithCommas(n)),$("input[name=oAmountVat",e).val(t._utils.numberWithCommas(parseInt(.1*a)))}else if("oUnitPrice"==l){o=n*a;let l=t.addAmount().total,i=$("input[name=oAmountDc",e).val();i=t._utils.checkEmptyNull(i)?0:t._utils.getOnlyNumber(i);let s=o+l-i;$("input[name=oAmountCalculable",e).val(t._utils.numberWithCommas(o+l)),$("input[name=oAmount",e).val(t._utils.numberWithCommas(s)),$("input[name=oAmountDc",e).val(t._utils.numberWithCommas(parseInt(.1*s)))}}}-1==["oAmountDc","oAmount","oAmountVat","oUnitPrice"].indexOf(l)&&t.totalSum(e)}})),e.on("click",".workOptionView",(function(){let e=$(this).closest("tr").data("ROW");t.layerWorkView((function(n){t._parent.openLayer(n,t.layerWorkInput,e)}),e)})),e.on("click",".save",(function(){let n=e.data();if(null!=n.lSeq&&n.lAmountInvoice!=n.lAmountTotal)return alert("세금계산서가 발행된 수주건으로 수정이 불가능 합니다."),!1;let l={oSeq:n.oSeq,istSeq:n.istSeq,cuSeq:n.cuSeq,lMemo:n.oFileNm},o=e.find("input[name=oUnitPrice]").val(),i=e.find("input[name=oAmount]").val(),s=e.find("input[name=oAmountVat]").val(),r=e.find("input[name=oAmountDc]").val(),c=e.find("input[name=oAmountCalculable]").val(),d=e.find("input[name=istDeliveryAmount]").val(),p=$("input[name=oEndCnt]",e).val();if(n.oCnt,p=t._utils.checkEmptyNull(p)?0:parseInt(t._utils.getOnlyNumber(p)),t._utils.checkEmptyNull(o))return alert("수주 기준 단가 입력 되지 않았습니다."),!1;if(t._utils.checkEmptyNull(i))return alert("청구 금액이 입력 되지 않았습니다."),!1;l.oEndCnt=p,l.oUnitPrice=t._utils.getOnlyNumber(o),l.oAmount=t._utils.getOnlyNumber(i),l.oAmountVat=t._utils.getOnlyNumber(s),l.oAmountDc=t._utils.getOnlyNumber(r),l.oAmountCalculable=t._utils.getOnlyNumber(c),l.istDeliveryAmount=t._utils.getOnlyNumber(d);let u=$(".workList tbody",e).children();l.workInfo=[];for(let e=0;e<u.length;e++){let n=$(u[e]),a=t._utils.serializeObject(n);a.wSeq=n.data("ROW").wSeq,t._utils.checkEmptyNull(a.wUnitPriceWork)||(a.wUnitPriceWork=t._utils.getOnlyNumber(a.wUnitPriceWork)),t._utils.checkEmptyNull(a.wAmount)||(a.wApplyCnt=t._utils.getOnlyNumber(a.wApplyCnt)),t._utils.checkEmptyNull(a.wAmount)||(a.wAmount=t._utils.getOnlyNumber(a.wAmount)),t._utils.checkEmptyNull(a.wAmountVat)||(a.wAmountVat=t._utils.getOnlyNumber(a.wAmountVat));let o=n.find(".workOptionListOne");a.optionInfo=[];for(let e=0;e<o.length;e++){let n={},l=$(o[e]).find("input[name=woSeq]").val(),i=$(o[e]).find("input[name=woAmount]").val(),s=$(o[e]).find("input[name=woAmountVat]").val();n.woSeq=l,n.wSeq=a.wSeq,t._utils.checkEmptyNull(i)||(n.woAmount=t._utils.getOnlyNumber(i)),t._utils.checkEmptyNull(s)||(n.woAmountVat=t._utils.getOnlyNumber(s)),a.optionInfo.push(n)}l.workInfo.push(a)}l.workInfo=JSON.stringify(l.workInfo),$(this).hasClass("ledger")&&(l.ledgerInsert="Y"),t._utils.checkEmptyNull(n.lSeq)||(l.lSeq=n.lSeq),t.update(l,(function(e){if(0==e.code){alert("저장 되었습니다.");let e={ctl:"ledger",cmd:"orderLoad",oSeq:n.oSeq};new a(t._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){0==e.code?t.ledgerInput(e.data):alert(e.message)})),t.retrieve()}else alert(e.message)}))})),e.on("keypress","input",(function(t){13==t.charCode&&$(this).trigger("focusout")})),t._utils.tableScrollCheck()})),e(this,"addAmount",(t=>{let e=this,n=$("input[name=istDeliveryAmount]",t).val(),a=$("input[name=istDeliveryAmountVat]",t).val();n=e._utils.checkEmptyNull(n)?0:parseInt(e._utils.getOnlyNumber(n)),a=e._utils.checkEmptyNull(a)?0:parseInt(e._utils.getOnlyNumber(a));let l=0,o=$("input[name=woAmount]",t);for(let r=0;r<o.length;r++){let t=$(o[r]).val();t=e._utils.checkEmptyNull(t)?0:parseInt(e._utils.getOnlyNumber(t)),l+=parseInt(t)}let i=0,s=$("input[name=woAmountVat]",t);for(let r=0;r<s.length;r++){let t=$(s[r]).val();t=e._utils.checkEmptyNull(t)?0:parseInt(e._utils.getOnlyNumber(t)),i+=parseInt(t)}return{total:n+a+l+i,woAmountVatTotal:i,woAmountTotal:l,istDeliveryAmount:n,istDeliveryAmountVat:a}})),e(this,"workAmount",(t=>{let e=this,n=t.find("input[name=wAmount]"),a=t.find("input[name=wAmountVat]"),l=0,o=0;for(let i=0;i<n.length;i++){let t=$(n[i]).val();t=e._utils.checkEmptyNull(t)?0:e._utils.getOnlyNumber(t),l+=parseInt(e._utils.getOnlyNumber(t))}for(let i=0;i<a.length;i++){let t=$(a[i]).val();t=e._utils.checkEmptyNull(t)?0:e._utils.getOnlyNumber(t),o+=parseInt(e._utils.getOnlyNumber(t))}return{total:l+o,totalAmount:l,totalAmountVat:o}})),e(this,"totalSum",(t=>{let e=this,n=t.data(),a=$("input[name=oEndCnt]",t).val();a=e._utils.checkEmptyNull(a)?0:parseInt(e._utils.getOnlyNumber(a));let l=e.addAmount(t),o=e.workAmount(t),i=t.find("input[name=oAmountDc]").val();i=e._utils.getOnlyNumber(i);let s=o.totalAmount+l.istDeliveryAmount+l.woAmountTotal;$("input[name=oAmountCalculable",t).val(e._utils.numberWithCommas(s)),$("input[name=oAmount",t).val(e._utils.numberWithCommas(s-i)),$("input[name=oAmountVat",t).val(e._utils.numberWithCommas(parseInt(.1*(s-i))));let r=0;if(s>0&&null!=n.oCnt){r=(s/n.oCnt).toFixed(2);let t=r.split(".");"00"==t[1]&&(r=t[0])}$("input[name=oUnitPrice",t).val(e._utils.numberWithCommas(r))})),e(this,"layerWorkView",((t,e)=>{t('\n\t\t\t<div class="mw_defalut" style="width:580px;" id="">\n\t\t\t\t<div class="mw_title" id="handle">\n\t\t\t\t\t<h1 class="mw_title_mid">\n\t\t\t\t\t\t<span class="title">작업 세부사항 </span>\n\t\t\t\t\t\t<a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a>\n\t\t\t\t\t</h1>\n\t\t\t\t</div>\n\t\t\t\t<div class="mw_ctWrap">\n\t\t\t\t\t<div class="mw_contents">\n\t\t\t\t\t\t<div style="overflow-y:auto;padding:2px;">\n\t\t\t\t\t\t\t<div class="searchWrap" style="padding-bottom:10px;">\n\t\t\t\t\t\t\t\t<table cellpadding="0" cellspacing="0" border="0" summary="" class="commonPopTable">\n\t\t\t\t\t\t\t\t\t<caption></caption>\n\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t<col width="80px">\n\t\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t\t<col width="80px">\n\t\t\t\t\t\t\t\t\t\t<col width="auto">\n\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac">작업명</th>\n\t\t\t\t\t\t\t\t\t\t\t<td class="wNm">'+e.wNm+"("+e.wFrontYnNm+')</td>\n\t\t\t\t\t\t\t\t\t\t\t<th class="ac">작업자</th>\n\t\t\t\t\t\t\t\t\t\t\t<td class="wESeq">'+e.wENm+'</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class="txt_c" colspan="4" style="background: #ecf5f9;height: 5px; border-left:1px solid #ecf5f9 !important;border-right:0px;"></th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="txt_c" colspan="4">수주세부사항</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class="workOptionListDiv orderOption" colspan="4"></td>\n\t\t\t\t\t\t\t\t\t\t</tr>\t\t\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class="txt_c" colspan="4" style="background: #ecf5f9;height: 5px; border-left:1px solid #ecf5f9 !important;border-right:0px;"></th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="txt_c" colspan="4">작업현장기록</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class="workOptionListDiv workOption" colspan="4"></td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class="txt_c" colspan="4" style="background: #ecf5f9;height: 5px; border-left:1px solid #ecf5f9 !important;border-right:0px;"></th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th class="txt_c" colspan="4">추가기록사항</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td colspan="4"><pre class="wReport">'+(this._utils.checkEmptyNull(e.wReport)?"":e.wReport)+"</pre></td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>")})),e(this,"layerWorkInput",((t,e)=>{let n=this,a=$("#"+t),l=e.optionInfo,o=$(".workOptionListDiv.orderOption",a),i=$(".workOptionListDiv.workOption",a);for(let s=0;s<l.length;s++){let t=$('<span class="workOptionListOne vm">'),e=$('<strong style="font-size:12px;"/>');n._utils.checkEmptyNull(l[s].woInput)||(e.addClass("workOptionInfoView"),"Y"==l[s].woMarkYn?e.append(l[s].cwoNm+' : <span style="font-size:12px;color:#f78ca4;font-weight: bold;">'+l[s].woInput+"</span>"):e.append(l[s].cwoNm+' : <span style="font-size:12px;">'+l[s].woInput+"</span>"),null!=l[s].woInput&&t.append($(e)),t.data("ROW",l[s]),t.appendTo("Y"==l[s].cwoOrderYn?o:i))}})),e(this,"transReportEvent",((t,e)=>{let n=this,l=$("#"+t),o=$(".printArea",l),i=$(".mail",l),s=$(".fax",l);window.jsPDF=window.jspdf.jsPDF,s.on("click",(function(){if(n._utils.currentDate().replace(/-/g,""),"Y"!=e.cPopbillYn)return alert('<div class="al" style="width:100%;padding-left:10px;font-size:11px;">기본설정 > 회사정보 메뉴를 이용하여 popbill 연동신청을 진행하세요</div>',"연동 신청이 안되어 있습니다."),!1;if("Y"!=e.cFaxApplyYn)return alert('<div class="al" style="width:100%;padding-left:10px;font-size:11px;">기본설정 > 회사정보 메뉴를 이용하여  FAX 발신번호를 등록하십시오</div>',"팩스번호 발신번호 승인이 안되어 있습니다."),!1;let t=e.oSeqs;n._utils.showLoading();let a=$("page",l);$(".printA4",a).css("padding-top","0px");for(let e=0;e<a.length;e++){var o=a[e];html2canvas(o,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((e=>{let a=e.toDataURL("image/png"),i=190,s=1.414*i,r=e.height*i/e.width,c=r,d=new jsPDF("p","mm"),p=$(o).data();for(p.oSeqs=t,p.files=[],window.scrollTo(0,0),d.addImage(a,"PNG",10,10,i,r,void 0,"FAST"),c-=s;c>=20;)position=c-r,position-=20,d.addPage(),d.addImage(a,"PNG",10,10,i,r,void 0,"FAST"),c-=s;let u={};p.eTitle=$(".workTitle",l).text(),u.filename=$(".workTitle",l).text()+".pdf",u.content=d.output("datauristring"),u.encoding="base64",u.size=u.content.length,p.files.push(u);let m=$("template#workFax");n._parent.openLayer(m.html(),n.workFaxEvent,p),n._utils.hideLoading()}))}})),i.on("click",(function(){if("Y"!=e.cMailYn)return alert('<div class="al" style="width:100%;padding-left:10px; font-size:11px;">기본설정 > 회사정보 메뉴를 이용하여 메일 연동 정보를 등록하십시오</div>',"메일발송 설정이 필요합니다."),!1;let t=e.oSeqs;n._utils.showLoading();let a=$("page",l);$(".printA4",a).css("padding-top","0px");for(let e=0;e<a.length;e++){var o=a[e];html2canvas(o,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((e=>{let a=e.toDataURL("image/png"),i=190,s=1.414*i,r=e.height*i/e.width;console.log(" imgHeight : "+r),console.log(" canvas.width : "+e.width),console.log(" canvas.height : "+e.height);let c=r,d=new jsPDF("p","mm"),p=$(o).data();for(p.oSeqs=t,p.files=[],window.scrollTo(0,0),d.addImage(a,"PNG",10,10,i,r,void 0,"FAST"),c-=s;c>=20;)position=c-r,position-=20,d.addPage(),d.addImage(a,"PNG",10,10,i,r,void 0,"FAST"),c-=s;let u={};p.eTitle=$(".workTitle",l).text(),u.filename=$(".workTitle",l).text()+".pdf",u.content=d.output("datauristring"),u.encoding="base64",u.size=u.content.length,p.files.push(u);let m=$("template#workMail");n._parent.openLayer(m.html(),n.workMailEvent,p),n._utils.hideLoading()}))}})),$(".print",l).on("click",(function(){$(".printA4",l),$(o).print({addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,timeout:1500})}));let r=$(".bankInfo tbody",l);for(let a=0;a<e.accountInfo.length;a++){let t=e.accountInfo[a],n=$("<tr />");n.append($('<td class="al" style="height:20px !important;background-color: #FFFFFF; padding: 0 5px;line-height:1.1;font-size:12px;color:#000;"/>').text(t.caBankNm+" "+t.caAccount+" / "+t.caOwnerNm)),r.append(n)}let c=e.endDt.substring(5,7);$(".cNm",l).text(e.cNm),$(".address",l).text(e.cAddr+" "+e.cAddrDetail),$(".cTel",l).text(n._utils.formatPhoneNumber(e.cTel)),$(".cFax",l).text(n._utils.formatPhoneNumber(e.cFax)),$(".cHomepage",l).text(e.cHomepage),$(".transMonth",l).text(c+"월");let d=$("page",l).clone();$("page",l).remove();let p={ctl:"ledger",cmd:"transReportOrderLoad",oSeqs:JSON.stringify(e.oSeqs),endDt:e.endDt};function u(t,e){let n={},a=t.children(),l=null;for(let o=a.length-1;o>=0;o--){let t=$(a[o]),i=t.data();if(null==i.oSeq)continue;let s=i.oSeq;if(null==l)for(let a=0;a<e.length;a++)n[e[a]]=1,$(t.children()).eq(e[a]).attr("style");else{let a=l.data().oSeq;for(let o=e.length-1;o>=0;o--)$(t.children()).eq(e[o]).attr("style"),s==a&&$(l.children()).eq(e[o]).text()==$(t.children()).eq(e[o]).text()?($(t.children()).eq(e[o]).attr("rowspan",n[e[o]]+1),$(l.children()).eq(e[o]).remove(),n[e[o]]++):n[e[o]]=1}l=$(a[o])}}new a(n._const,p,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let a=Object.keys(t.data),l=!1;for(let i=0;i<a.length;i++){let s=d.clone(),r=$(".workList",s),c=t.data[a[i]],p=0,m=0,f=0,h=0,g="font-size: 12px;background-color: #FFFFFF;height: 33px; padding: 0px 5px;line-height:1.1;border-left:1px solid #999;border-bottom:1px solid #999;border-top-width:0px;";s.data(c);for(let t=0;t<c.orderInfo.length;t++){let e=c.orderInfo[t];p+=n._utils.checkEmptyNull(e.oAmountCalculable)?0:parseInt(e.oAmountCalculable),m+=n._utils.checkEmptyNull(e.oAmount)?0:parseInt(e.oAmount),f+=n._utils.checkEmptyNull(e.oAmountVat)?0:parseInt(e.oAmountVat),h+=n._utils.checkEmptyNull(e.oAmountDc)?0:parseInt(e.oAmountDc);for(let t=0;t<e.workInfo.length;t++){let a=e.workInfo[t],l=$("<tr>");l.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;" />').text(n._utils.dateformatMin(e.oApprovalDate).substring(5,10))),l.append($('<td class="al" style="'+g+'border-right-width:0px;color:#000;" />').text(e.oFileNm)),l.append($('<td class="ac" style="'+g+'padding:0px 2px !important; border-right-width:0px;color:#000;"/>').append(a.wNm+(n._utils.checkEmptyNull(a.wInfo)?"":"<br>("+a.wInfo+")"))),l.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;"/>').text(a.wFrontYnNm)),l.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;"/>').text(e.oPaperSize)),l.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;"/>').text(n._utils.numberWithCommas(e.oCnt))),l.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;"/>').text(n._utils.numberWithCommas(a.wEndCnt))),l.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;"/>').text(n._utils.numberWithCommas(a.wUnitPriceWork))),l.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;"/>').text(n._utils.numberWithCommas(a.wAmount))),l.append($('<td class="ar" style="'+g+'border-right:1px solid #999;color:#000;"/>').text(n._utils.numberWithCommas(a.wAmountVat))),r.append(l.data(e));for(let t=0;t<a.optionInfo.length;t++){let l=a.optionInfo[t];if(!n._utils.checkEmptyNull(l.woAmount)&&0!=l.woAmount){let t=n._utils.checkEmptyNull(l.woAmount)?0:parseInt(l.woAmount),a=n._utils.checkEmptyNull(l.woAmountVat)?0:parseInt(l.woAmountVat),o=$("<tr>");o.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;" />').text(n._utils.dateformatMin(e.creDate).substring(5,10))),o.append($('<td class="al" style="'+g+'border-right-width:0px;color:#000;" />').text(e.oFileNm)),o.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;" />').text(l.cwoNm)),o.append($('<td style="'+g+'border-right-width:0px;color:#000;" />')),o.append($('<td style="'+g+'border-right-width:0px;color:#000;" />')),o.append($('<td style="'+g+'border-right-width:0px;color:#000;" />').text("")),o.append($('<td style="'+g+'border-right-width:0px;color:#000;" />')),o.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;" />')),o.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;" />').text(n._utils.numberWithCommas(t))),o.append($('<td class="ar" style="'+g+'border-right:1px solid #999;color:#000;" />').text(n._utils.numberWithCommas(a))),r.append(o.data(e))}}}if(!n._utils.checkEmptyNull(e.istDeliveryAmount)&&0!=e.istDeliveryAmount){let t=null==e.istDeliveryAmount?0:parseInt(e.istDeliveryAmount),a=0==t?0:parseInt(t/10),l=$("<tr>");l.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;" />').text(n._utils.dateformatMin(e.creDate).substring(5,10))),l.append($('<td class="al" style="'+g+'border-right-width:0px;color:#000;" />').text(e.oFileNm)),l.append($('<td class="ac" style="'+g+'border-right-width:0px;color:#000;" />').text("배송비")),l.append($('<td  style="'+g+'border-right-width:0px;color:#000;" />')),l.append($('<td  style="'+g+'border-right-width:0px;color:#000;" />')),l.append($('<td  style="'+g+'border-right-width:0px;color:#000;" />').text("")),l.append($('<td  style="'+g+'border-right-width:0px;color:#000;" />')),l.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;" />')),l.append($('<td class="ar" style="'+g+'border-right-width:0px;color:#000;" />').text(n._utils.numberWithCommas(t))),l.append($('<td class="ar" style="'+g+'border-right:1px solid #999;color:#000;" />').text(n._utils.numberWithCommas(a))),r.append(l.data(e))}}if(r.children().length<22)for(let t=0;r.children().length<22;t++){let t=$("<tr>");for(let e=0;e<10;e++)t.append($('<td  style="'+g+(9==e?"border-right:1px solid #999;":"border-right-width:0px;color:#000;")+'" />'));r.append(t)}else l=!0;$(".amountTotal",s).text(n._utils.numberWithCommas(p)),$(".amount",s).text(n._utils.numberWithCommas(m)),$(".amountVat",s).text(n._utils.numberWithCommas(f)),$(".amountDc",s).text(n._utils.numberWithCommas(h)),$(".amountSale",s).text(n._utils.numberWithCommas(m+f)),$(".amountSalePay",s).text(n._utils.numberWithCommas(c.amountSalePay)),$(".amountBalance",s).text(n._utils.numberWithCommas(c.cuAmountSaleBalance)),$(".cuNm",s).text(c.cuNm),$(".cuInvoiceEmail",s).text(c.cuInvoiceEmail),$(".cuFax",s).text(c.cuFax),$(".searchDate",s).text(e.startDt+" ~ "+e.endDt);let _=$("tfoot",s).clone();if($("tfoot",s).remove(),r.append(_.children("tr")),u(r,[0,1]),o.append(s),l)break}}}))})),e(this,"workMailEvent",((t,e)=>{let n=this,l=$("#"+t),o=5242880,i=$("select[name=files]",l);function s(){i.empty();for(let t=0;t<e.files.length;t++){let a=e.files[t],l=$('<option value="'+a.filename+'">'+a.filename+"("+n._utils.bytesToSize(a.size)+")</option>");i.append(l)}}$("input[name=subject]",l).val("["+n._const.__C_NM+"] "+e.eTitle+"를 보내드립니다."),$("input[name=to]",l).val(e.cuInvoiceEmail),s(),$("input[name=eFile]",l).on("change",(function(){let t={};var n;if(t.filename=this.files[0].name,t.size=this.files[0].size,t.encoding="base64",(n=this.files[0],new Promise(((t,e)=>{const a=new FileReader;a.readAsDataURL(n),a.onload=()=>t(a.result),a.onerror=t=>e(t)}))).then((e=>t.content=e)),t.size>o)return alert("최대 5M이상 첨부 할 수 없습니다."),!1;e.files.push(t),s(),$(this).val("")})),$(".fa-upload",l).on("click",(function(){$("input[name=eFile]",l).trigger("click")})),$(".fa-trash-can",l).on("click",(function(){let t=$("option:checked",i).index();e.files.splice(t,1),s()})),$(".mailSend",l).on("click",(function(){if(n._utils.checkRequired(l)){let t=n._utils.serializeObject(l),i=0;for(let n=0;n<e.files.length;n++)i+=e.files[n].size;if(i>o)return alert("최대 5M이상 첨부 할 수 없습니다."),!1;t.files=JSON.stringify(e.files),n._parent.emailSend(t,(function(t){if(0==t.code){$("body .btnClosePopLayer").trigger("click"),alert("발송 되었습니다.");let t={ctl:"ledger",cmd:"transSendUpdate",oSeqs:JSON.stringify(e.oSeqs)};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}else alert(t.message)}))}}))})),e(this,"workFaxEvent",((t,e)=>{let n=this,l=$("#"+t);$("input[name=cuNm]",l).val(e.cuNm),$("input[name=cuFax]",l).val(e.cuFax),$(".faxSend",l).on("click",(function(){if(n._utils.checkRequired(l)){let t=n._utils.serializeObject(l);t.files=JSON.stringify(e.files),n._parent.faxSend(t,(function(t){if(0==t.code){$("body .btnClosePopLayer").trigger("click"),alert("발송 되었습니다.");let t={ctl:"ledger",cmd:"transSendUpdate",oSeqs:JSON.stringify(e.oSeqs)};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}else alert(t.message)}))}}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"ledger",cmd:"orderList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"order",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"order",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"work",cmd:"qrWorkLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"ledger",cmd:"orderUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={},this._nowIndex=0}},I=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{let n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{};let l={ctl:"company",cmd:"load",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code&&(n._companyInfo=t.data)})),n._code.find(".btnSearchCall").on("click",(function(t){n._code.find("input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()}));let o=n._code.find(".searchWrapArea");n._code.find(".searchWrapBtn");let i=n._code.find(".dataHeadTable thead"),s=n._code.find(".pageInfoTfoot"),r=n._code.find(".dataListTable");n._tbody=r,o.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),"Y"!=n._const.__MANAGER_YN&&($(".btnPayCall",o).hide(),$(".btnInvoiceCall",o).hide(),$(".btnCreate",o).hide(),$(".btnTransDelete",o).hide()),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#ledgerInsert");n._parent.openLayer(e.html(),n.layerEvent),t.stopPropagation()})),n._code.find(".btnPayCreate").on("click",(function(t){let e=$("template#legderPayInsert");n._parent.openLayer(e.html(),n.layerPayEvent),t.stopPropagation()})),n._code.find(".btnInvoiceCall").on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=lSeq]:checked"),l={},o=[];if(0==e.length)return void alert("세금계산서를 발행할 건을 선택 하십시오");if(e.length>0)for(let n=0;n<e.length;n++){let t=$(e[n]).closest("tr").data("ROW");if("S"!=t.lKind)return alert("매출건만 계산서 발행이 가능합니다."),!1;if(0==t.lAmountInvoice)return alert("발행된 계산서를 제외하고 선택 하십시요."),!1;null==l[t.cuSeq]&&(l[t.cuSeq]=[]),l[t.cuSeq].push(t.lSeq),o.push(t.lSeq)}let i=Object.keys(l),s=!1;for(let n=0;n<i.length;n++)if(l[i[n]].length>1){s=!0;break}if(s)confirm("아이템을 하나로 발행 하시겠습니까?",(function(t){n._isJoin=t;let e={ctl:"ledger",cmd:"ledgerChoiceList",lSeqs:JSON.stringify(o)};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=n._utils.objectIfnull(t.data),a=$("template#homtex");n._parent.openLayer(a.html(),n.invoiceDocEvent,e)}}))}),"병합 발행"," 목록 발행");else{n._isJoin=!1;let t={ctl:"ledger",cmd:"ledgerChoiceList",lSeqs:JSON.stringify(o)};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=n._utils.objectIfnull(t.data),a=$("template#homtex");n._parent.openLayer(a.html(),n.invoiceDocEvent,e)}}))}})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=lSeq]:checked");if(0==e.length)return void alert("삭제할 대상을 선택 하십시오");if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=e.closest("tr").data("ROW");return"Y"==a.lHoldYn?(alert("마감된 원장은 삭제 할수 없습니다."),!1):a.lAmountInvoice!=a.lAmountTotal?(alert("세금계산서가 발행된 원장은 삭제 할수 없습니다."),!1):void confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({lSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}))})),i.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=o.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",o.find("input[name=orderculumn]").val(t),o.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=lSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}})),$("select[name=lKind]",o).on("change",(function(){let t=$(this),e=t.val();"S"==e?t.css({color:"red",background:""}):"B"==e?t.css({color:"blue",background:""}):t.css({color:"",background:""})})),$("select[name=lKind]",o).trigger("change");let c=n._utils.dateformatKorDate(new Date);c=c.substring(0,8)+"01",o.find("input[name=startDt]").val(c),o.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),o.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(o),i.on("click",".fa-broom",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(o,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let d=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(d)||s.find("select[name=rowsPerPage]").val(d),s.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),s.find("input[name=page]").val("1"),n.retrieve()})),r.on("click",".oFileNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.orderView(t)})),r.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),r.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#ledgerInsert");n._parent.openLayer(e.html(),n.layerEvent,t)})),n.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=oFileNm]").val(),p=l.find("input[name=searchWord]").val(),u=l.find("select[name=ledgerYn]").val(),m=l.find("select[name=lKind]").val(),f=l.find("select[name=invoiceYn]").val(),h={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",page:a,rows:n,orderColumn:s,orderType:r,oStatus:c,oFileNm:d,ledgerYn:u,searchColumn:"cuNm",searchWord:p,lKind:m,invoiceYn:f};t.list(h,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0){for(let a in l)0==a&&(s=l[a].totalCnt,r=Math.ceil(s/n),$(".ctlListSaleVat",t._code).text(t._utils.numberWithCommas(l[a].saleAmountVat)),$(".ctlListSaleInvoice",t._code).text(t._utils.numberWithCommas(l[a].saleAmountInvoice)),$(".ctlListSalePrice3",t._code).text(t._utils.numberWithCommas(l[a].saleAmountTotal)),$(".ctlListBuyPrice1",t._code).text(t._utils.numberWithCommas(l[a].buyAmountTotal)),$(".ctlListBuyPrice",t._code).text(t._utils.numberWithCommas(l[a].buyAmount)),$(".ctlListBuyVat",t._code).text(t._utils.numberWithCommas(l[a].buyAmountVat))),t.display(o,l[a]);let e=$("tr",o);for(let t=0;t<e.length;t++)$($(e[t]).find("td").eq(8)).css("border-right","1px solid #dedede !important;")}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr/>");a.append($("<td></td>").append($('<input type="checkbox" class="vm" name="lSeq" value="'+e.lSeq+'"/>'))),a.append($('<td class="ac"><span style="color:'+("S"==e.lKind?"red":"blue")+'">'+e.lKindNm+"</span></td>")),a.append($('<td class="ac">'+("S"==e.lKind?'<i class="fa-solid fa-landmark" style="color:'+(0==e.lAmountInvoice?"#eeeeee":"#fd6456")+'" title="세금계산서'+(0==e.lAmountInvoice?"가 발행되었습니다.":" 미발행금액 : "+n._utils.numberWithCommas(e.lAmountInvoice))+' "></i>':"")+"</td>")),a.append($('<td class="ac">'+n._utils.dateformatStringToDate(e.lDt)+"</td>")),a.append($('<td class="al pl5 pr5" style="white-space: nowrap;text-overflow: ellipsis; overflow: hidden;"></td>').append('<span class="cuNm cursorPointer" title="'+e.cuNm+'">'+e.cuNm+"</span>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lAmount,"")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lAmountVat,"")+"</td>")),a.append($('<td class="ar pl5 pr5"/><strong>'+n._utils.numberWithCommas(e.lAmountTotal,"")+"</strong></td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lAmountTotal-e.lAmountInvoice,"")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lAmountBalance,"")+"</td>")),a.append($('<td class="al pl5 pr5">'+(null!=e.lMemo?e.lMemo:"")+"</td>")),a.append($('<td class=""><i class="fa-regular fa-pen-to-square btnOpenInfo cursorPointer" title="원장 수정" style="font-size:14px;"></i></td>')),a.data("ROW",e),a.appendTo(t)})),e(this,"layerEvent",((t,e)=>{let n=this,l=$(`#${t}`);if(null!=e&&"Y"==e.lHoldYn){let t=$(".save",l),e=t.closest("div"),n=$("input, select, textarea",l);t.remove(),e.append("마감된 원장은 수정 할수 없습니다."),n.attr("disabled","disabled").addClass("readonly")}$("input[name=cuNm]",l).autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=cuSeq]",l).val(e.item.cuSeq)},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),l.find("select[name=lKind]").on("change",(function(){let t=$(this),e=t.val();"S"==e?t.css({color:"red",background:""}):"B"==e?t.css({color:"blue",background:""}):t.css({color:"",background:""})})),l.find("select[name=lKind]").trigger("change"),l.find("input[name=cuNm]").on("change",(function(){""==$(this).val()&&$("input[name=cuSeq]",l).val("")})),l.on("focus","input[name=lAmount]",(function(){let t=$(this).val();t=n._utils.getOnlyNumber(t),$(this).data("ROW",t).val("0"==t?"":t)})),l.on("focusout","input[name=lAmount]",(function(){let t=$(this).data("ROW"),e=$(this).val();t=n._utils.getOnlyNumber(t),e=n._utils.getOnlyNumber(e),t!=e&&($("input[name=lAmountVat]",l).val(n._utils.numberWithCommas(parseInt(e/10))),i()),$(this).val(n._utils.numberWithCommas(""==e?"0":e))})),l.on("focus","input[name=lAmountVat]",(function(){let t=$(this).val();t=n._utils.getOnlyNumber(t),$(this).data("ROW",t).val("0"==t?"":t)})),l.on("focusout","input[name=lAmountVat]",(function(){let t=$(this).data("ROW"),e=$(this).val();t=n._utils.getOnlyNumber(t),e=n._utils.getOnlyNumber(e),t!=e&&i(),$(this).val(n._utils.numberWithCommas(""==e?"0":e))})),null==e?$("input[name=lDt]",l).val(n._utils.currentDate()):(n._utils.unSerializeObject(l,e),$("input[name=lAmount]",l).trigger("focus").trigger("focusout"),$("input[name=lAmountVat]",l).trigger("focus").trigger("focusout"),$("select[name=lKind]",l).trigger("change"),$(".title",l).text("매입/매출 수정"),$(".save",l).text("수정"),l.data(e));let o={cuNm:"lAmount",lAmount:"lAmountVat",lAmountVat:"lMemo"};function i(){let t=$("input[name=lAmount]",l).val(),e=$("input[name=lAmountVat]",l).val();t=n._utils.checkEmptyNull(t)?0:n._utils.getOnlyNumber(t),e=n._utils.checkEmptyNull(e)?0:n._utils.getOnlyNumber(e);let a=parseInt(t)+parseInt(e);$(".lAmountTotal",l).text(n._utils.numberWithCommas(a))}$("input:not([name=lMemo])",l).on("keypress",(function(t){if(13==t.keyCode){$(this).trigger("focusout");let t=$(this).attr("name");$("[name="+o[t]+"]",l).focus()}})),l.on("click",".save",(function(){let t=l.data();if(null!=t.lSeq&&t.lAmountInvoice!=t.lAmountTotal)return alert("세금계산서가 발행된 수주건으로 수정이 불가능 합니다."),!1;let e={};e.lKind=l.find("select[name=lKind]").val(),e.lMemo=l.find("textarea[name=lMemo]").val();let a=l.find("input[name=lDt]").val(),o=l.find("input[name=cuSeq]").val(),i=l.find("input[name=lAmount]").val(),s=l.find("input[name=lAmountVat]").val();return n._utils.checkEmptyNull(o)?(alert("거래처를 검색하여 목록을 선택하여 입력하십시오"),!1):n._utils.checkEmptyNull(i)?(alert("공급가를 입력하십시오"),!1):(e.lDt=a.replace(/-/g,""),e.cuSeq=n._utils.getOnlyNumber(o),e.lAmount=n._utils.getOnlyNumber(i),e.lAmountVat=n._utils.getOnlyNumber(s),void(null!=t.lSeq?(e.lSeq=t.lSeq,n.update(e,(function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),alert("수정 되었습니다."),n.retrieve()):alert(t.message)}))):n.insert(e,(function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),alert("등록 되었습니다."),n.retrieve()):alert(t.message)}))))}))})),e(this,"layerPayEvent",((t,e)=>{let n=this,l=$(`#${t}`),o={ctl:"company",cmd:"accountList",searchWord:this.term};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=caSeq]",l);for(let n=0;n<t.data.length;n++){let a=t.data[n],l=$("<option />");l.val(a.caSeq),l.text(a.caBankNm+"-"+a.caOwnerNm+"("+a.caAccount+")"),e.append(l)}}else alert(t.message)})),$("input[name=cuNm]",l).autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq,v:t}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=cuSeq]",l).val(e.item.cuSeq);let a=n._utils.numberWithCommas(e.item.v.cuStartAmount+e.item.v.cuUnpaidAmount);$("input[name=unAmount]",l).val(a)},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),l.find("select[name=lpKind]").on("change",(function(){let t=$(this),e=t.val();"I"==e?t.css({color:"red",background:"#fbe2e2"}):"O"==e?t.css({color:"blue",background:"#bfd3ee"}):t.css({color:"",background:""})})),l.find("select[name=lpKind]").trigger("change"),l.find("input[name=cuNm]").on("change,focusout",(function(){""==$(this).val()&&($("input[name=cuSeq]",l).val(""),$("input[name=unAmount]",l).val(0))})),l.on("focus","input[name=lpAmount]",(function(){let t=$(this).val();t=n._utils.getOnlyNumber(t),$(this).data("ROW",t).val("0"==t?"":t)})),l.on("focusout","input[name=lpAmount]",(function(){let t=$(this).val();t=n._utils.getOnlyNumber(t),$(this).val(n._utils.numberWithCommas(""==t?"0":t))})),null==e?$("input[name=lpDt]",l).val(n._utils.currentDate()):(n._utils.unSerializeObject(l,e),$("input[name=lpAmount]",l).trigger("focus").trigger("focusout"),$("select[name=lpKind]",l).trigger("change"),$(".title",l).text("결제 수정"),$(".save",l).text("수정"));let i={cuNm:"lpAmount",lpAmount:"lpMemo"};$("input:not([name=lpMemo])",l).on("keypress",(function(t){if(13==t.keyCode){$(this).trigger("focusout");let t=$(this).attr("name");$("[name="+i[t]+"]",l).focus()}})),l.on("click",".save",(function(){let t=l.data(),e={};e.lpKind=l.find("select[name=lpKind]").val(),e.lpMemo=l.find("textarea[name=lpMemo]").val(),e.caSeq=l.find("select[name=caSeq]").val();let a=l.find("input[name=lpDt]").val(),o=l.find("input[name=cuSeq]").val(),i=l.find("input[name=lpAmount]").val();return n._utils.checkEmptyNull(o)?(alert("거래처를 검색하여 목록을 선택하여 입력하십시오"),!1):n._utils.checkEmptyNull(i)?(alert("결제금액을 입력하십시오"),!1):(e.lpDt=a.replace(/-/g,""),e.cuSeq=o,e.lpAmount=n._utils.getOnlyNumber(i),void(null!=t.lpSeq?(e.lpSeq=t.lpSeq,n.payUpdate(e,(function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),alert("수정 되었습니다."),n.retrieve()):alert(t.message)}))):n.payInsert(e,(function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),alert("등록 되었습니다."),n.retrieve()):alert(t.message)}))))}))})),e(this,"invoiceDocEvent",((t,e)=>{let n=this,l=$(`#${t}`),o=$(".invoiceDocument",l);n._companyInfo.cAddress=n._companyInfo.cAddr+" "+n._companyInfo.cAddrDetail,n._utils.unSerializeObject(l,n._companyInfo);let i=$(".invoice",o).clone(),s={};l.on("click",".save",(function(){let t=$("input[name=invoiceSendPass]:checked",l).val()??"N";if("N"==t){let t=n._utils.currentDate().replace(/-/g,"");if("Y"!=n._companyInfo.cPopbillYn)return alert("연동 신청이 안되어 있습니다. \n기본설정 > 회사정보 메뉴를 이용하여 popbill 연동신청을 진행해 주세요"),!1;if(n._utils.checkEmptyNull(n._companyInfo.cCertExpiryDt))return alert("인증서 등록이 안되어 있습니다. \n기본설정 > 회사정보 메뉴를 통하여 인증서를 등록하십시오"),!1;if(n._companyInfo.cCertExpiryDt<t)return alert("인증서 만료일이 지났습니다. \n기본설정 > 회사정보 메뉴를 통하여 신규 인증서를 등록하십시오"),!1}let e=$(".invoice",l),o={};for(let a=0;a<e.length;a++){let t=$(e[a]),l=t.data("ROW");delete l.list;let i=n._utils.serializeObject(t);if(l=JSON.parse(JSON.stringify(l)),n._utils.checkEmptyNull(i.cuInvoiceEmail))return alert("공급받는자의 메일주소를  입력하십시오"),!1;if(!n._utils.isEmailcheck(i.cuInvoiceEmail))return alert("공급받는자의 메일주소를 정확히 입력하십시오"),!1;if(!n._utils.checkEmptyNull(i.cuInvoiceEmail2)&&!n._utils.isEmailcheck(i.cuInvoiceEmail2))return alert("공급받는자의 두번째 메일주소를 정확히 입력하십시오"),!1;$.extend(l,i),l.trans=[];let s=$(".orderList tr",t);for(let e=0;e<s.length;e++){let t=$(s[e]),a=t.data("ROW")??{};$.extend(a,n._utils.serializeObject($(t))),a.lilAmount=n._utils.getOnlyNumber(a.lilAmount),a.lilAmountVat=n._utils.getOnlyNumber(a.lilAmountVat),a.lilUnitPrice=n._utils.getOnlyNumber(a.lilUnitPrice),a.lilCnt=n._utils.getOnlyNumber(a.lilCnt),l.trans.push(a)}l.iKind="S",o[l.cuSeq]=l}let i={ctl:"ledger",cmd:"invoiceInsert"};i.invoices=JSON.stringify(o),i.invoiceSendPass=t,new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),alert("발행 되었습니다."),n.retrieve()):alert(t.message)}))})),o.empty(),e=JSON.parse(JSON.stringify(e));for(let a=0;a<e.length;a++){let t=e[a];null==s[t.cuSeq]?(s[t.cuSeq]=t,s[t.cuSeq].list=[t]):s[t.cuSeq].list.push(t)}let r=Object.keys(s),c=0;for(let a=0;a<r.length;a++){let t=s[r[a]],e=i.clone(),l=$(".orderList",e),p=$("tr",l).clone();l.empty();let u=0,m=0;if(e.data("ROW",t),t.cuAddress=t.cuAddr+" "+t.cuAddrDetail,n._utils.unSerializeObject(e,t),n._isJoin&&t.list.length>1){$("input[name=lItemJoinYn]",e).val("Y");let a=p.clone(),o=t.list[0].lMemo+" 외 "+(t.list.length-1)+"건",i=[];$("input[name=lDt]",a).val(n._utils.dateformatCurrentYYYYMMDD("-")),$("input[name=lilItem]",a).val(o),$("input[name=lilStandard]",a).val("-").attr("readonly","readonly").addClass("readonly"),$("input[name=lilCnt]",a).val("1").attr("readonly","readonly").addClass("readonly");for(let e=0;e<t.list.length;e++){let n=t.list[e];parseInt(n.lAmountVat)>0?(u+=parseInt(n.lAmountInvoice/11*10),m+=parseInt(n.lAmountInvoice/11)):u+=parseInt(n.lAmountInvoice),i.push(n.lSeq)}$("input[name=lSeqs]",e).val(i.join(",")),$("input[name=lilAmount]",a).val(n._utils.numberWithCommas(u)).attr("readonly","readonly").addClass("readonly"),$("input[name=lilAmountVat]",a).val(n._utils.numberWithCommas(m)).attr("readonly","readonly").addClass("readonly"),$("input[name=lilUnitPrice]",a).val(n._utils.numberWithCommas(u)).attr("readonly","readonly").addClass("readonly"),l.append(a)}else{$("input[name=lItemJoinYn]",e).val("N");for(let e=0;e<t.list.length;e++){let a=t.list[e],o=p.clone(),i=a.lAmount,s=a.lAmountVat;parseInt(s)>0?(i=parseInt(a.lAmountInvoice/11*10),s=parseInt(a.lAmountInvoice/11)):(i=parseInt(a.lAmountInvoice),s=0),$("input[name=lSeq]",o).val(a.lSeq),$("input[name=lDt]",o).val(n._utils.dateformatStringToDate(a.lDt)),$("input[name=lilItem]",o).val(a.lMemo),$("input[name=lilAmount]",o).val(n._utils.numberWithCommas(i)),$("input[name=lilAmountVat]",o).val(n._utils.numberWithCommas(s)),$("input[name=lilStandard]",o).val("-"),$("input[name=lilCnt]",o).val("1"),$("input[name=lilUnitPrice]",o).val(n._utils.numberWithCommas(i)),l.append(o.data("ROW",a)),u+=parseInt(i),m+=parseInt(s)}}$("input[name=iAmount]",e).val(n._utils.numberWithCommas(u)),$("input[name=iAmountCash]",e).val(n._utils.numberWithCommas(u)),$("input[name=iAmountVat]",e).val(n._utils.numberWithCommas(m)),$("input[name=iAmountTotal]",e).val(n._utils.numberWithCommas(u+m)),$("input[name=iDt]",e).val(n._utils.dateformatKorDate(new Date)),o.append(e),a<r.length-1&&o.append('<div style="height:30px;clear: both;"><hr></div>'),d(e),c+=e.height()+55}function d(t){t.on("focus","input[name=lilAmount],[name=lilUnitPrice],[name=lilCnt]",(function(){let t=$(this).val();t=n._utils.getOnlyNumber(t),$(this).data("ROW",t).val("0"==t?"":t)})),t.on("focusout","input[name=lilAmount],[name=lilUnitPrice],[name=lilCnt]",(function(){let e=$(this).data("ROW"),a=$(this).val(),l=$(this).attr("name"),o=$(".orderList",t);if(e=n._utils.getOnlyNumber(e),a=n._utils.getOnlyNumber(a),$(this).val(n._utils.numberWithCommas(""==a?"0":a)),e!=a){let t=$(this).closest("tr");if(t.data("ROW"),"lilAmount"==l)$("input[name=lilAmountVat]",t).val(n._utils.numberWithCommas(.1*a));else if("lilUnitPrice"==l){let e=$("input[name=lilCnt]",t).val();e=n._utils.getOnlyNumber(e),$("input[name=lilAmount]",t).val(n._utils.numberWithCommas(e*a)),$("input[name=lilAmountVat]",t).val(n._utils.numberWithCommas(e*a*.1))}else if("lilCnt"==l){let e=$("input[name=lilUnitPrice]",t).val();e=n._utils.getOnlyNumber(e),$("input[name=lilAmount]",t).val(n._utils.numberWithCommas(e*a)),$("input[name=lilAmountVat]",t).val(n._utils.numberWithCommas(e*a*.1))}}let i=$("input[name=lilAmount]",o),s=$("input[name=lilAmountVat]",o),r=0,c=0;for(let t=0;t<i.length;t++)r+=parseInt(n._utils.getOnlyNumber($(i[t]).val()));for(let t=0;t<s.length;t++)c+=parseInt(n._utils.getOnlyNumber($(s[t]).val()));$("input[name=iAmount]",t).val(n._utils.numberWithCommas(r)),$("input[name=iAmountVat]",t).val(n._utils.numberWithCommas(c)),$("input[name=iAmountTotal]",t).val(n._utils.numberWithCommas(parseInt(r)+parseInt(c)))})),t.on("keypress","input[name=lilAmount],[name=lilUnitPrice],[name=lilCnt]",(function(t){13==t.keyCode&&$(this).trigger("focusout")}))}$(".invoiceDocument",l).css("height",c),c>540&&$(".invoiceRootDiv",l).css("height",540)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"ledger",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"ledger",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"ledger",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"ledger",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"ledger",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"payInsert",((t,e)=>{let n={ctl:"ledger",cmd:"payInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"payLoad",((t,e)=>{let n={ctl:"ledger",cmd:"payLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"payUpdate",((t,e)=>{let n={ctl:"ledger",cmd:"payUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},q=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{};let l=$(".f_lt",n._code),o=$(".f_rt",n._code),i=$(".searchWrap",n._code);i.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())}));let s={ctl:"company",cmd:"accountList",searchWord:this.term};new a(n._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?n._accountInfo=t.data:alert(t.message)})),$(".btnSearchCall",i).on("click",(function(t){n._code.find("input[name=page]").val(1),i.find("input[name=cuSeq]").val(""),n.retrieve(),n.payRetrieve(),t.stopPropagation()})),$(".btnExcelDownload",i).on("click",(function(t){n.excelDownload()})),$(".btnPayCreate",i).on("click",(function(t){let e=$("template#payInsert");n._parent.openLayer(e.html(),n.layerPayEvent),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=$(".dataListTable tbody",o).find("input[name=lpSeq]:checked");if(0==e.length)return void alert("삭제할 대상을 선택 하십시오");if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=e.closest("tr").data("ROW");if("Y"==a.lpHoldYn)return alert("마감된 결제는 삭제 할수 없습니다."),!1;confirm("삭제하시겠습니까?",(function(t){t&&n.delete({lpSeq:a.lpSeq},(function(t){if(0==t.code)n.payRetrieve(),alert("삭제되었습니다");else{$("input[name=chckAll]",o).prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}))})),i.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}});let r=n._utils.dateformatKorDate(new Date);r=r.substring(0,8)+"01",i.find("input[name=startDt]").val(r),$("input[name=endDt]",i).val(n._utils.dateformatKorDate(new Date)),n._defaultData=n._utils.serializeObject(i),$(".dataHeadTable thead",l);let c=$(".pageInfoTfoot",l),d=n._code.find(".f_lt .dataListTable");n._const.__MANAGER_YN,c.find("select[name=rowsPerPage]").on("change",(function(){c.find("input[name=page]").val("1"),n.retrieve()}));let p=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(p)||c.find("select[name=rowsPerPage]").val(p),c.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),c.find("input[name=page]").val("1"),n.retrieve()})),d.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),d.on("click",".btnPayDetail",(function(){let t=$(this).closest("tbody"),e=$(this).closest("tr"),a=e.data("ROW");t.find("td").css({background:"","font-weight":""}),e.find("td").css({background:"#d3e1ff","font-weight":"bold"}),i.find("input[name=cuSeq]").val(a.cuSeq),n.payRetrieve()})),n.retrieve();let u=$(".dataHeadTable thead",o),m=$(".pageInfoTfoot",o),f=$(".dataListTable",o);$("input[name=chckAll]",o).on("click",(function(t){t.stopPropagation();let e=f.find("input[name=lpSeq]"),n=$(this).is(":checked");for(let a=0;a<e.length;a++){let t=$(e[a]);t.is(":checked")!=n&&t.trigger("click")}})),u.on("click",".fa-broom",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(i,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.payRetrieve()})),p=localStorage.getItem("rowsPerPage"),n._utils.checkEmptyNull(p)||m.find("select[name=rightRowsPerPage]").val(p),m.find("select[name=rightRowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),m.find("input[name=rightPage]").val("1"),n.retrieve()})),f.on("click",".btnOpenInfo",(function(){let t={ctl:"ledger",cmd:"payLoad",lpSeq:$(this).closest("tr").data("ROW").lpSeq};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=$("template#payInsert");n._parent.openLayer(e.html(),n.layerPayEvent,t.data)}else alert(t.message)}))})),n.payRetrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".f_lt .pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrap"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("input[name=searchWord]").val(),d=l.find("select[name=lKind]").val(),p={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",page:a,rows:n,orderColumn:s,orderType:r,lKind:d,searchColumn:"cuNm",searchWord:c};t.list(p,(function(l){let o=t._code.find(".f_lt .dataListTable tbody"),i=t._code.find(".f_lt .dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l){if(0==e){s=l[e].totalCnt,r=Math.ceil(s/n);let a="S"==d?l[e].totalSaleBalance:l[e].totalBuyBalance;t._utils.checkEmptyNull(a)?$(".totalBalance",t._code).text(0):$(".totalBalance",t._code).text(t._utils.numberWithCommas(a))}t.display(o,l[e])}else $(".totalBalance",t._code).text(0),$('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr/>"),l=$(".searchWrap select[name=lKind]",n._code).val();"S"==l?e.cuAmountSaleStart:e.cuAmountBuyStart;let o="S"==l?e.cuAmountSaleBalance:e.cuAmountBuyBalance,i="S"==l?e.lfcAmountSaleBalance:e.lfcAmountBuyBalance;a.append($('<td class="al pl5 pr5 btnPayDetail cursorPointer">'+n._utils.nullTostring(e.cuNm,"")+"</td>")),a.append($('<td class="ar pl5 pr5 btnPayDetail cursorPointer">'+(n._utils.checkEmptyNull(i)?"0":n._utils.numberWithCommas(i,""))+"</td>")),a.append($('<td class="ar pl5 pr5 btnPayDetail cursorPointer">'+n._utils.numberWithCommas(e.payTotalAmount,"")+"</td>")),a.append($('<td class="ar pl5 btnPayDetail cursorPointer" style="padding-right:7px !important;">'+n._utils.numberWithCommas(o,"")+"</td>")),a.data("ROW",e),a.appendTo(t)})),e(this,"payRetrieve",(t=>{const e=this;let n=e._code.find(".f_rt .pageInfoTfoot"),a=n.find("select[name=rightRowsPerPage]").val(),l=n.find("input[name=rightPage]").val(),o=e._code.find(".searchWrap"),i=o.find("input[name=startDt]").val(),s=o.find("input[name=endDt]").val(),r=o.find("input[name=orderculumn]").val(),c=o.find("input[name=orderby]").val(),d=o.find("select[name=lKind]").val(),p=o.find("input[name=searchWord]").val(),u=o.find("input[name=cuSeq]").val(),m="S"==d?"I":"O",f={cuSeq:u,startDt:i?i.replace(/-/g,""):"",endDt:s?s.replace(/-/g,""):"",page:l,rows:a,orderColumn:r,orderType:c,lpKind:m,searchColumn:"cuNm",searchWord:p};e.payList(f,(function(t){let o=e._code.find(".f_rt .dataListTable tbody"),i=e._code.find(".f_rt .dataHeadTable thead");o.empty();let s=0,r=0;if(null!=t&&t.length>0){for(let l in t){if(0==l){s=t[l].totalCnt,r=Math.ceil(s/a);let n="S"==d?t[l].amountIn:t[l].amountOut;e._utils.checkEmptyNull(n)||$(".totalPay",e._code).text(e._utils.numberWithCommas(n))}e.payDisplay(o,t[l])}let n=$("tr",o);for(let t=0;t<n.length;t++)$($(n[t]).find("td").eq(8)).css("border-right","1px solid #dedede !important;")}else $(".totalPay",e._code).text(0),$('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);e._utils.mdiPaging(n.find(".pagenate"),s,a,r,10,l,e.goPayPage)}))})),e(this,"payDisplay",((t,e)=>{let n=$("<tr/>");n.append($("<td></td>").append($('<input type="checkbox" class="vm" name="lpSeq" value="'+e.lpSeq+'"/>'))),n.append($('<td class="ac">'+this._utils.dateformatStringToDate(e.lpDt)+"</td>")),n.append($('<td class="ac"><strong style="color:'+("I"==e.lpKind?"blue":"red")+'">'+e.lpKindNm+"</strong></td>")),n.append($('<td class="al pl5 pr5" style="white-space: nowrap;text-overflow: ellipsis; overflow: hidden;"></td>').append('<span class="cuNm" title="'+e.cuNm+'">'+e.cuNm+"</span>")),n.append($('<td class="ar pl5 pr5"/>'+this._utils.numberWithCommas(e.lpAmount,"")+"</td>")),n.append($('<td class="ac"/>'+(null!=e.caSeq?e.caBankNm+" "+e.caAccount:"")+"</td>")),n.append($('<td class="ac"/>'+e.eNm+"</td>")),n.append($('<td class="al pl5 pr5">'+(null!=e.lMemo?e.lMemo:"")+"</td>")),n.append($('<td><i class="fa-regular fa-pen-to-square btnOpenInfo cursorPointer" title="수정" style="font-size:14px;"></i></td>')),n.data("ROW",e),n.appendTo(t)})),e(this,"layerPayEvent",((t,e,n)=>{let l=this,o=$(`#${t}`);if(null!=e&&"Y"==e.lpHoldYn){let t=$(".save",o),e=t.closest("div"),n=$("input, select, textarea",o);t.remove(),e.append("마감된 결제는 수정 할수 없습니다."),n.attr("disabled","disabled").addClass("readonly")}null!=e&&($("input[name=cuSeq]",o).val(e.cuSeq),$("input[name=cuNm]",o).val(e.cuNm),null==e.lSeq&&o.data(e));let i=$("select[name=caSeq]",o);for(let a=0;a<l._accountInfo.length;a++){let t=l._accountInfo[a],e=$("<option />");e.val(t.caSeq),e.text(t.caBankNm+"-"+t.caOwnerNm+"("+t.caAccount+")"),i.append(e)}$("input[name=cuNm]",o).autocomplete({source:function(t,e){let n={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(l._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq,v:t}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=cuSeq]",o).val(e.item.cuSeq);let n=l._utils.numberWithCommas(e.item.v.cuStartAmount+e.item.v.cuUnpaidAmount);$("input[name=unAmount]",o).val(n)},minLength:l._parent._autocompleteLength,delay:l._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),o.find("select[name=lpKind]").on("change",(function(){$(this).val()})),o.find("select[name=lpKind]").trigger("change"),o.find("input[name=cuNm]").on("change,focusout",(function(){""==$(this).val()&&($("input[name=cuSeq]",o).val(""),$("input[name=unAmount]",o).val(0))})),o.on("focus","input[name=lpAmount]",(function(){let t=$(this).val();t=l._utils.getOnlyNumber(t),$(this).data("ROW",t).val("0"==t?"":t)})),o.on("focusout","input[name=lpAmount]",(function(){let t=$(this).val();t=l._utils.getOnlyNumber(t),$(this).val(l._utils.numberWithCommas(""==t?"0":t))})),null==e?$("input[name=lpDt]",o).val(l._utils.currentDate()):($("input[name=lpDt]",o).val(l._utils.currentDate()),null!=e.lpSeq&&(l._utils.unSerializeObject(o,e),$("input[name=lpAmount]",o).trigger("focus").trigger("focusout"),$("select[name=lpKind]",o).trigger("change"),$(".title",o).text("결제 수정"),$(".save",o).text("수정")));let s={cuNm:"lpAmount",lpAmount:"lpMemo"};$("input:not([name=lpMemo])",o).on("keypress",(function(t){if(13==t.keyCode){$(this).trigger("focusout");let t=$(this).attr("name");$("[name="+s[t]+"]",o).focus()}})),o.on("click",".save",(function(){let t=o.data(),e={};e.lpKind=o.find("select[name=lpKind]").val(),e.lpMemo=o.find("textarea[name=lpMemo]").val(),e.caSeq=o.find("select[name=caSeq]").val();let n=o.find("input[name=lpDt]").val(),a=o.find("input[name=cuSeq]").val(),i=o.find("input[name=lpAmount]").val();return l._utils.checkEmptyNull(a)?(alert("거래처를 검색하여 목록을 선택하여 입력하십시오"),!1):l._utils.checkEmptyNull(i)?(alert("결제금액을 입력하십시오"),!1):(e.lpDt=n.replace(/-/g,""),e.cuSeq=a,e.lpAmount=l._utils.getOnlyNumber(i),void(null!=t.lpSeq?(e.lpSeq=t.lpSeq,l.update(e,(function(t){0==t.code?($(".btnClosePopLayer",o).trigger("click"),alert("수정 되었습니다."),l.payRetrieve()):alert(t.message)}))):(console.log("insert"),l.insert(e,(function(t){0==t.code?($(".btnClosePopLayer",o).trigger("click"),alert("등록 되었습니다."),l.payRetrieve()):alert(t.message)})))))}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"ledger",cmd:"customerBalancelist"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"payList",((t,e)=>{let n={ctl:"ledger",cmd:"payList",rows:9999};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"ledger",cmd:"payDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".f_lt .pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"goPayPage",(t=>{this._code.find(".f_rt .pageInfoTfoot").find("input[name=rightPage]").val(t),this.payRetrieve()})),e(this,"update",((t,e)=>{let n={ctl:"ledger",cmd:"payUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"ledger",cmd:"payInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},T=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{},$(".customerList",n._code),$(".customerMonth",n._code),$(".customerList",n._code),n._code.find(".btnSearchCall").on("click",(function(t){n._code.find("input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()}));let l=n._code.find(".searchWrapArea");n._code.find(".searchWrapBtn");let o=n._code.find(".f_lt .dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".f_lt .overflowYListdiv"),r=n._code.find(".f_rt .overflowYListdiv"),c=n._code.find(".f_lt .dataListTable"),d=n._code.find(".f_rt .dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),n._const.__MANAGER_YN;let p=2024,u=n._utils.dateformatKorDate(new Date).substring(0,4),m=$("select[name=yyyy]",l);for(m.empty();p<=u;p++){let t=$('<option value="'+p+'">'+p+"</option>");p==u&&t.attr("selected","selected"),m.append(t)}$("select[name=lKind]",l).on("change",(function(){let t=$(this),e=t.val();"S"==e?t.css({color:"red",background:""}):"B"==e?t.css({color:"blue",background:""}):t.css({color:"",background:""})})),$("select[name=lKind]",l).trigger("change"),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),s.on("scroll",(function(t){let e=$(this).scrollTop();r.scrollTop(e),t.stopPropagation()})),r.on("scroll",(function(t){let e=$(this).scrollTop();s.scrollTop(e),t.stopPropagation()})),n._code.find("input[name=chckAll]").on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}})),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(l),$(".btnPrintCall",l).on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked"),o=$("input[name=startDt]",l).val(),i=$("input[name=endDt]",l).val();if(0==e.length)return void alert("거래명세표를 출력할 대상을 선택 하십시오");let s=[];for(let n=0;n<e.length;n++)s.push($(e[n]).val());new a(n._const,{ctl:"company",cmd:"load"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;e.oSeqs=s,e.startDt=o,e.endDt=i;let a=$("template#transReport");n._parent.openLayer(a.html(),n.transReportEvent,e)}}))})),o.on("click",".fa-broom",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let f=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(f)||i.find("select[name=rowsPerPage]").val(f),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),c.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),d.on("click","td:not(last)",(function(){let t=$(this).closest("tr").data("ROW"),e=$(this).index()+1;t.yyyy=l.find("select[name=yyyy]").val(),t.mm=e<10?"0"+e:e;let a=$("template#transList");n._parent.openLayer(a.html(),n.transListEvent,t)})),n.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("select[name=yyyy]").val(),i=l.find("select[name=lKind]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("input[name=searchWord]").val(),d=l.find("input[name=zeroRemove]:checked").val(),p={cuSeq:void 0,yyyy:o,page:a,rows:n,orderColumn:s,orderType:r,lKind:i,searchColumn:"cuNm",searchWord:c,zeroRemove:d};t.list(p,(function(l){let o=t._code.find(".f_lt .dataListTable tbody"),i=t._code.find(".f_lt .dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime());let s=t._code.find("select[name=lKind]").val(),r=$(".customerList",t._code),c=$(".customerMonth",t._code),d=$(".monthTotal",t._code);r.empty(),c.empty();let p=0,u=0;if($(".headBalance",t._code).text("S"==s?"현재 미결제금":"현재 미결재금"),null!=l.data&&l.data.length>0){let e=l.data;for(let l in e)0==l&&(p=e[l].totalCnt,u=Math.ceil(p/n)),t.display(r,c,e[l]);d.empty();let a=l.total,i=$("<tr/>");i.append($('<td class="ac " />').append("총거래금액"));for(let n=1;n<=12;n++)i.append($('<td class="ar pr5" />').append(t._utils.numberWithCommas(a["totalTrans_"+n])));i.append($('<td class="ar pr5" style="font-weight: bold;" />').append(t._utils.numberWithCommas(a.totalTrans))),d.append(i),i=$("<tr/>"),i.append($('<td class="ac " style="color:#10a94f;" />').append("총결제금액"));for(let n=1;n<=12;n++)i.append($('<td class="ar pr5" style="color:#10a94f;" />').append(t._utils.numberWithCommas(a["totalPay_"+n])));i.append($('<td class="ar pr5" style="color:#10a94f;font-weight: bold;" />').append(t._utils.numberWithCommas(a.totalPay))),d.append(i),$("tr",o)}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),p,n,u,10,a,t.goPage)}))})),e(this,"display",((t,e,n)=>{const a=this;let l=a._code.find("select[name=lKind]").val(),o=n.finishInfo,i="S"==l?a._utils.nvl(o.lfcAmountSaleBalance,0):a._utils.nvl(o.lfcAmountBuyBalance,0),s=0;s=a._utils.nvl(n.cuAmountSaleBalance,0);let r=$("<tr/>");r.append($('<td class="al" rowspan="2" style="padding-left:10px;font-size:12px;" />').append($('<input type="hidden" name="cuSeq" value="'+n.cuSeq+'" >')).append('<span class="cuNm cursorPointer" style="font-weight: bold;color:#566981;font-size:13px;">'+n.cuNm+"</span>").append('<br><span class="cuNm cursorPointer" style="margin-top:10px;display:inline-block;color:#666;">전년이월금 : '+a._utils.numberWithCommas(i)+" 원</span>")),r.append($('<td class="ar pr5 pl5" rowspan="2" style="color:#cd110f;" title="현재 미수금"/>').append(a._utils.numberWithCommas(s))),r.append($('<td class="ac pr5 pl5" style="padding-right:5px !important;"  title="금년 총미수금 : '+a._utils.numberWithCommas("S"==l?a._utils.nvl(n.cuAmountSaleBalance,0):a._utils.nvl(n.cuAmountBuyBalance,0))+'원"/>').append("거래금액")),r.data("ROW",n),t.append(r),r=$("<tr/>"),r.append($('<td class="ac pr5 pl5" style="color:#10a94f;padding-right:5px !important;" title="금년 총미수금 : '+a._utils.numberWithCommas("S"==l?a._utils.nvl(n.cuAmountSaleBalance,0):a._utils.nvl(n.cuAmountBuyBalance,0))+'원"/>').append("결제금액")),r.data("ROW",n),t.append(r);let c=$("<tr/>");for(let d=1;d<=12;d++)c.append($('<td class="ar pr5 pl5" style="'+(1==d?"border-left:0px !important;":"")+'" />').append('<span class="cursorPointer">'+a._utils.numberWithCommas(n["trans_"+d])+"</span>"));c.append($('<td class="ar pr5 pl5" style="padding-right: 5px !important;font-weight: bold;" />').append(a._utils.numberWithCommas(n.transTotal))),c.data("ROW",n),e.append(c),c=$("<tr/>");for(let d=1;d<=12;d++)c.append($('<td class="ar pr5 pl5" style="color:#10a94f;'+(1==d?"border-left:0px !important;":"")+'" />').append('<span class="cursorPointer">'+a._utils.numberWithCommas(n["pay_"+d])+"</span>"));c.append($('<td class="ar pr5 pl5" style="padding-right: 5px !important;color:#10a94f;font-weight: bold;"/>').append(a._utils.numberWithCommas(n.payTotal))),c.data("ROW",n),e.append(c)})),e(this,"transListEvent",((t,e)=>{let n=this,l=$("#"+t),o=$(".transList",l),i=$(".payList",l);$(".title",l).text(e.cuNm+" "+e.yyyy+"년"+e.mm+"월 상세내역");let s={ctl:"ledger",cmd:"list"};s.cuSeq=e.cuSeq,s.yyyy=e.yyyy,s.mm=e.mm,s.rows=999,new a(n._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=0;for(;e<t.data.length;e++){let a=t.data[e],l=$("<tr/>");l.append($('<td class="ac" style="height:30px;background:#fff;"/>').append(n._utils.dateformatStringToDate(a.lDt))),l.append($('<td class="ac" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>').append('<span style="color:'+("S"==a.lKind?"red":"blue")+'">'+a.lKindNm+"</span>")),l.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lMemo+'"/>').append(n._utils.numberWithCommas(a.lAmount,"0"))),l.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lMemo+'"/>').append(n._utils.numberWithCommas(a.lAmountVat,"0"))),l.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lMemo+'"/>').append(n._utils.numberWithCommas(a.lAmountTotal,"0"))),l.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lMemo+'"/>').append(n._utils.numberWithCommas(a.lAmountBalance,"0"))),o.append(l)}for(;e<12;e++){let t=$("<tr/>");t.append($('<td class="ac" style="height:30px;background:#fff;"/>')),t.append($('<td class="ac" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),o.append(t)}n._utils.tableScrollCheck()}})),s.cmd="payList",new a(n._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=0;for(;e<t.data.length;e++){let a=t.data[e],l=$("<tr/>");l.append($('<td class="ac" style="height:30px;background:#fff;"/>').append(n._utils.dateformatStringToDate(a.lpDt))),l.append($('<td class="ac" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lpMemo+'"/>').append('<span style="color:'+("I"==a.lKind?"red":"blue")+'">'+a.lpKindNm+"</span>")),l.append($('<td class="ac" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lpMemo+'"/>').append(null!=a.caSeq?a.caBankNm+" "+a.caAccount:"")),l.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lpMemo+'"/>').append(n._utils.numberWithCommas(a.lpAmount,"0"))),l.append($('<td class="ac" style="height:30px;background:#fff;border-left:1px solid #ccc;" title="'+a.lpMemo+'"/>').append(a.eNm)),i.append(l)}for(;e<12;e++){let t=$("<tr/>");t.append($('<td class="ac" style="height:30px;background:#fff;"/>')),t.append($('<td class="ac" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),t.append($('<td class="ar" style="height:30px;background:#fff;border-left:1px solid #ccc;"/>')),i.append(t)}n._utils.tableScrollCheck()}}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"ledger",cmd:"customerMonthAggregate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"order",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"order",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"work",cmd:"qrWorkLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"ledger",cmd:"orderUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},D=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{let n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{};new a(n._const,{ctl:"company",cmd:"load"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code&&(n._companyInfo=t.data)})),n._code.find(".btnSearchCall").on("click",(function(t){n._code.find("input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()}));let l=n._code.find(".searchWrapArea");n._code.find(".searchWrapBtn");let o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");n._tbody=s,l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),n._code.find(".btnCreate").on("click",(function(t){n.layerView((function(t){n._parent.openLayer(t,n.layerEvent)})),t.stopPropagation()})),n._code.find(".btnPayCreate").on("click",(function(t){n.layerPayView((function(t){n._parent.openLayer(t,n.layerPayEvent)})),t.stopPropagation()})),n._code.find(".btnInvoiceCall").on("click",(function(t){let e=n._code.find(".dataListTable tbody").find("input[name=lSeq]:checked"),l=[];if(0==e.length)return void alert("세금계산서를 발행할 건을 선택 하십시오");if(e.length>0)for(let n=0;n<e.length;n++){let t=$(e[n]).closest("tr").data("ROW");if("S"!=t.lKind)return alert("매출건만 계산서 발행이 가능합니다."),!1;l.push(t.lSeq)}let o={ctl:"ledger",cmd:"ledgerChoiceList",lSeqs:JSON.stringify(l)};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=n._utils.objectIfnull(t.data),a=$("template#homtex");n._parent.openLayer(a.html(),n.invoiceDocEvent,e)}}))})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=lSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let r=n._utils.dateformatKorDate(new Date);r=r.substring(0,8)+"01",l.find("input[name=startDt]").val(r),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-broom",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let c=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(c)||i.find("select[name=rowsPerPage]").val(c),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".btnOpenInfo",(function(){let t={ctl:"ledger",cmd:"invoiceLoad",iSeq:$(this).closest("tr").data("ROW").iSeq};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=n._utils.objectIfnull(t.data),a=$("template#homtexView");n._parent.openLayer(a.html(),n.invoiceDocEvent,e)}}))})),s.on("click",".invoiceLoad",(function(){let t=$(this).closest("tr").data("ROW"),e={ctl:"popbill",cmd:"invoiceLoad"};$.extend(e,t),new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){t.code}))})),n.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=oFileNm]").val(),p=l.find("input[name=searchWord]").val(),u=l.find("select[name=ledgerYn]").val(),m=l.find("select[name=lKind]").val(),f=l.find("select[name=invoiceYn]").val(),h={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",page:a,rows:n,orderColumn:s,orderType:r,oStatus:c,oFileNm:d,ledgerYn:u,searchColumn:"cuNm",searchWord:p,lKind:m,invoiceYn:f};t.list(h,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0){for(let a in l)0==a&&(s=l[a].totalCnt,r=Math.ceil(s/n),$(".saleAmount",t._code).text(t._utils.numberWithCommas(l[a].saleAmount)),$(".saleAmountVat",t._code).text(t._utils.numberWithCommas(l[a].saleAmountVat)),$(".saleAmountTotal",t._code).text(t._utils.numberWithCommas(l[a].saleAmount+l[a].saleAmountVat))),t.display(o,l[a]);let e=$("tr",o);for(let t=0;t<e.length;t++)$($(e[t]).find("td").eq(8)).css("border-right","1px solid #dedede !important;")}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr/>");a.append($('<td class="ac">'+n._utils.dateformatStringToDate(e.iDt)+"</td>")),a.append($('<td class="al pl5 pr5"></td>').append('<span class="cuNm cursorPointer" title="거래처 정보 보기">'+e.cuNm+"</span>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.iAmount,"")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.iAmountVat,"")+"</td>")),a.append($('<td class="ar pl5 pr5"/><strong>'+n._utils.numberWithCommas(e.iAmount+e.iAmountVat,"")+"</strong></td>")),a.append($('<td class="ac pl5 pr5"/>'+(null!=e.itemCnt?e.itemCnt:"")+"</td>")),a.append($('<td class="al pl5 pr5"/>'+(null!=e.iMemo?e.iMemo:"")+"</td>")),a.append($('<td class="ac pl5 pr5"/>'+("N"==e.iSendYn?"미발행":"발행")+"</td>")),a.append($('<td class="ac pl5 pr5">'+(null!=e.iSendApproveNo?e.iSendApproveNo:"")+"</td>")),a.append($('<td class="ac pl5 pr5"/>'+e.eNm+"</td>")),a.append($('<td class="ac pl5 pr5"/>'+e.creDate.substring(0,16)+"</td>")),a.append($('<td class=""><i class="fa-regular fa-pen-to-square btnOpenInfo cursorPointer" title="상세보기" style="font-size:14px;"></i></td>')),a.data("ROW",e),a.appendTo(t)})),e(this,"invoiceDocEvent",((t,e)=>{let n=this,a=$(`#${t}`),l=$(".invoiceDocument",a);n._companyInfo.cAddress=n._companyInfo.cAddr+" "+n._companyInfo.cAddrDetail,n._utils.unSerializeObject(a,n._companyInfo);let o=$(".invoice",l).clone();l.empty();let i=0,s=e,r=o.clone(),c=$(".orderList",r),d=$("tr",c).clone();if(c.empty(),r.data("ROW",s),s.cuAddress=s.cuAddr+" "+s.cuAddrDetail,n._utils.unSerializeObject(r,s),!n._utils.checkEmptyNull(s.iEmail))if(s.iEmail.indexOf(",")>-1){let t=s.iEmail.split(",");$("input[name=cuInvoiceEmail]",r).val(t[0]),$("input[name=cuInvoiceEmail2]",r).val(t[1])}else $("input[name=cuInvoiceEmail]",r).val(s.iEmail);if("Y"==s.iItemJoinYn){let t=d.clone();$("input[name=lDt]",t).val(n._utils.dateformatStringToDate(s.iDt)),$("input[name=lilItem]",t).val(s.iItemNm),$("input[name=lilAmount]",t).val(n._utils.numberWithCommas(s.iAmount)),$("input[name=lilAmountVat]",t).val(n._utils.numberWithCommas(s.iAmountVat)),$("input[name=lilStandard]",t).val("-"),$("input[name=lilCnt]",t).val(1),$("input[name=lilUnitPrice]",t).val(n._utils.numberWithCommas(s.iAmount)),c.append(t)}else for(let p=0;p<s.ledgerInfo.length;p++){let t=s.ledgerInfo[p],e=d.clone();$("input[name=lSeq]",e).val(t.lSeq),$("input[name=lDt]",e).val(n._utils.dateformatStringToDate(t.lDt)),$("input[name=lilItem]",e).val(t.lilItem),$("input[name=lilAmount]",e).val(n._utils.numberWithCommas(t.lilAmount)),$("input[name=lilAmountVat]",e).val(n._utils.numberWithCommas(t.lilAmountVat)),$("input[name=lilStandard]",e).val(t.lilStandard),$("input[name=lilCnt]",e).val(t.lilCnt),$("input[name=lilUnitPrice]",e).val(n._utils.numberWithCommas(t.lilUnitPrice)),c.append(e.data("ROW",t))}$("input[name=iAmount]",r).val(n._utils.numberWithCommas(s.iAmount)),$("input[name=iAmountCash]",r).val(n._utils.numberWithCommas(s.iAmount)),$("input[name=iAmountVat]",r).val(n._utils.numberWithCommas(s.iAmountVat)),$("input[name=iAmountTotal]",r).val(n._utils.numberWithCommas(s.iAmount+s.iAmountVat)),$("input[name=iDt]",r).val(n._utils.dateformatKorDate(new Date)),l.append(r),i+=r.height()+55,$(".invoiceDocument",a).css("height",i)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"ledger",cmd:"invoiceList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"ledger",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"ledger",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"ledger",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"ledger",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"payInsert",((t,e)=>{let n={ctl:"ledger",cmd:"payInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"payLoad",((t,e)=>{let n={ctl:"ledger",cmd:"payLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"payUpdate",((t,e)=>{let n={ctl:"ledger",cmd:"payUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},O=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{let n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{};let l=n._code.find(".searchWrapArea");n._code.find(".searchWrapBtn");let o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot");n._code.find(".dataListTable");let s=2024,r=(new Date).getFullYear(),c=$("select[name=yyyy]",l);for(;s<=r;s++)c.append('<option value="'+s+'"'+(s==r?" selected":"")+">"+s+"</option>");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())}));let d=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(d)||i.find("select[name=rowsPerPage]").val(d),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),n._code.find(".btnSearchCall").on("click",(function(t){n._code.find("input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".btnLedgerFinish",l).on("click",(function(){let t={yyyy:$("select[name=yyyy]",l).val()},e=$("template#ledgerFinishInsert");n._parent.openLayer(e.html(),n.ledgerFinishInsertEvent,t)})),$(".btnLedgerFinishCancel",l).on("click",(function(){let t=$("template#ledgerFinishCancel");n._parent.openLayer(t.html(),n.ledgerFinishCancelEvent,n._info)})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){$(this).closest("thead"),n._utils.unSerializeObject(l,n._defaultData),o.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()})),n.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("select[name=yyyy]").val(),i=l.find("input[name=orderculumn]").val(),s=l.find("input[name=orderby]").val(),r=l.find("input[name=searchWord]").val(),c={yyyy:o,page:a,rows:n,orderColumn:i,orderType:s,searchColumn:"cuNm",searchWord:r};$(".yearPrev",t._code).text(o-1+"년"),$(".yearNow",t._code).text(o+"년"),t.list(c,(function(o){let i=o.prevTotal,s=o.total;$(".lfAmountSaleTransPrev",t._code).text(t._utils.checkEmptyNull(i.lfAmountSaleTrans)?0:t._utils.numberWithCommas(i.lfAmountSaleTrans)),$(".lfAmountSalePayPrev",t._code).text(t._utils.checkEmptyNull(i.lfAmountSalePay)?0:t._utils.numberWithCommas(i.lfAmountSalePay)),$(".lfAmountSaleBalancePrev",t._code).text(t._utils.checkEmptyNull(i.lfAmountSaleBalance)?0:t._utils.numberWithCommas(i.lfAmountSaleBalance)),$(".lfAmountBuyTransPrev",t._code).text(t._utils.checkEmptyNull(i.lfAmountBuyTrans)?0:t._utils.numberWithCommas(i.lfAmountBuyTrans)),$(".lfAmountBuyPayPrev",t._code).text(t._utils.checkEmptyNull(i.lfAmountBuyPay)?0:t._utils.numberWithCommas(i.lfAmountBuyPay)),$(".lfAmountBuyBalancePrev",t._code).text(t._utils.checkEmptyNull(i.lfAmountBuyBalance)?0:t._utils.numberWithCommas(i.lfAmountBuyBalance)),$(".lfAmountSaleTrans",t._code).text(t._utils.checkEmptyNull(s.lfAmountSaleTrans)?0:t._utils.numberWithCommas(s.lfAmountSaleTrans)),$(".lfAmountSalePay",t._code).text(t._utils.checkEmptyNull(s.lfAmountSalePay)?0:t._utils.numberWithCommas(s.lfAmountSalePay)),$(".lfAmountSaleBalance",t._code).text(t._utils.checkEmptyNull(s.lfAmountSaleBalance)?0:t._utils.numberWithCommas(s.lfAmountSaleBalance)),$(".lfAmountBuyTrans",t._code).text(t._utils.checkEmptyNull(s.lfAmountBuyTrans)?0:t._utils.numberWithCommas(s.lfAmountBuyTrans)),$(".lfAmountBuyPay",t._code).text(t._utils.checkEmptyNull(s.lfAmountBuyPay)?0:t._utils.numberWithCommas(s.lfAmountBuyPay)),$(".lfAmountBuyBalance",t._code).text(t._utils.checkEmptyNull(s.lfAmountBuyBalance)?0:t._utils.numberWithCommas(s.lfAmountBuyBalance)),"Y"==t._const.__MANAGER_YN&&(t._utils.checkEmptyNull(s.lfSeq)?($(".btnLedgerFinish",l).show(),$(".btnLedgerFinishCancel",l).hide()):($(".btnLedgerFinish",l).hide(),$(".btnLedgerFinishCancel",l).show())),t._info.yyyy=$("select[name=yyyy]",l).val(),t._info.eNm=s.eNm,t._info.creDate=s.creDate;let r=t._code.find(".dataListTable tbody"),c=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),r.empty();let d=0,p=0;if(null!=o&&o.data.length>0){for(let a in o.data)0==a&&(d=o.data[a].totalCnt,p=Math.ceil(d/n)),t.display(r,o.data[a]);let e=$("tr",r);for(let t=0;t<e.length;t++)$($(e[t]).find("td").eq(8)).css("border-right","1px solid #dedede !important;")}else $('<tr><td colspan="'+c.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(r);t._utils.mdiPaging(e.find(".pagenate"),d,n,p,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr/>");a.append($('<td class="al pl5 pr5"></td>').append('<span class="cuNm cursorPointer" title="거래처 정보 보기">'+e.cuNm+"</span>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountSaleTransPrev,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountSalePayPrev,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountSaleBalancePrev,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountBuyTransPrev,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountBuyPayPrev,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountBuyBalancePrev,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountSaleTrans,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountSalePay,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountSaleBalance,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountBuyTrans,"0")+"</td>")),a.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.lfcAmountBuyPay,"0")+"</td>")),a.append($('<td class="ar pl5 " style="padding-right:5px !important;"/>'+n._utils.numberWithCommas(e.lfcAmountBuyBalance,"0")+"</td>")),a.data("ROW",e),a.appendTo(t)})),e(this,"ledgerFinishInsertEvent",((t,e)=>{let n=this,a=$(`#${t}`);$(".yeraFinish",a).text(e.yyyy+"년"),$(".eNm",a).text(n._const.__USER_NAME),a.on("click",".save",(function(){let t=$("input[name=lfPassword]",a).val(),l=$("input[name=lfPassword2]",a).val();n._utils.checkEmptyNull(t)?alert("마감 비밀번호를 입력하십시요"):t.length<5?alert("마감 비밀번호는 5자리 이상으로 입력하십시요"):t==l?(e.lfPassword=t,n.ledgerFinsh(e,(function(t){0==t.code?($(".btnClosePopLayer",a).trigger("click"),alert("마감처리 되었습니다."),n.retrieve()):alert(t.message)}))):alert("비밀번호가 정확하지 않습니다.")}))})),e(this,"ledgerFinishCancelEvent",((t,e)=>{let n=this,a=$(`#${t}`);$(".yeraFinish",a).text(e.yyyy+"년"),$(".eNm",a).text(e.eNm),$(".creDate",a).text(e.creDate),a.on("click",".save",(function(){let t=$("input[name=lfPassword]",a).val();n._utils.checkEmptyNull(t)?alert("마감 비밀번호를 입력하십시요"):(e.lfPassword=t,n.ledgerFinshCancel(e,(function(t){0==t.code?($(".btnClosePopLayer",a).trigger("click"),alert("해지 되었습니다."),n.retrieve()):alert(t.message)})))}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"ledger",cmd:"yearFinishInfo"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"ledgerFinsh",((t,e)=>{let n={ctl:"ledger",cmd:"yearFinish"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"ledgerFinshCancel",((t,e)=>{let n={ctl:"ledger",cmd:"yearFinishCancel"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={},this._info={}}},A=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._ledgerWork=new C(t._parent,t._const),t._ledger=new I(t._parent,t._const),t._ledgerPay=new q(t._parent,t._const),t._ledgerCustomer=new T(t._parent,t._const),t._ledgerInvoice=new D(t._parent,t._const),t._ledgerFinish=new O(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}},P=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#orderLayer");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=oSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else{if("Y"==e.closest("tr").data("ROW").oApprovalYn)return alert("승인되어 삭제가 불가능 합니다."),!1;confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({oSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다"),n._parent.modifyTime({action:"work"});else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}))}else alert("삭제할 대상을 선택 하십시오")}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addMonth(new Date,-1))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),l.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()})),i.find("select[name=rowsPerPage]").on("change",(function(){i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".oFileNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.orderView(t)})),s.on("click",".cuNm",(function(){let t=$(this).closest("tr").data("ROW");n._parent._popup.customerView(t)})),s.on("click",".orderEdit",(function(){let t=$(this).closest("tr").data("ROW");n._order={},n.load({oSeq:t.oSeq},(function(t){if(0!=t.code)return alert("작업 데이터를 불러올 수 없습니다"),!1;{n._order=t.data;let e=$("template#orderLayer");n._parent.openLayer(e.html(),n.reloadLayer)}}))})),s.on("click",".oFileNmDown",(function(){let t=$(this).closest("tr").data("ROW");null!=t.fileInfo&&t.fileInfo.length>0&&n._parent.fileDownload(t.fileInfo[0])})),n.retrieve()})),e(this,"retrieve",(()=>{const t=this;if(null!=t._parent.activeMenuId()&&t._parent.activeMenuId()!=t._id)return void(null!=t.intervalId&&(t._code.find(".btnAutoReload").removeClass("activeOn").addClass("activeOff"),clearInterval(t.intervalId),delete t.intervalId));let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("input[name=searchWord]").val(),d=l.find("input[name=oMarkYn]:checked").val(),p=l.find("input[name=oStatus]:checked");if(0==p.length)return void alert("작업상태를 선택해주세요");let u=[];for(let g=0;g<p.length;g++)u.push($(p[g]).val());let m={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",oMarkYn:d,page:a,rows:n,orderColumn:s,orderType:r,oStatus:JSON.stringify(u),searchColumn:"cuNm",searchWord:c};t.list(m,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+(i.find("th").length+1)+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.tableScrollCheck(),t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}));let f=t._code.find(".btnAutoReload"),h=t._code.find(".lastDateTime");h.empty(),f.hasClass("activeOn")&&h.text(t._utils.dateformatCurrentHHmmss(":"))})),e(this,"display",((t,e)=>{const n=this;let a="";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let d=0;d<e.processInfo.length;d++){let t=e.processInfo[d];a+='<span class="processStatus'+t.pStatus+'" title="작업순서 : '+t.sort+" / 상태 : "+t.pStatusNm+("A"!=t.pStatus?"/ 변경일시 : "+t.pStatusDate:"")+'">'+t.spNm+"</span>"}let l="border:1px solid #ccc;",o="미승인";"Y"!=e.oApprovalYn?("Y"==e.isCustomer&&(l+="background: #e0e9ff;"),l+="color:#8b8989;"):o=e.oStatusNm,"D"==e.oStatus&&(l+="background:#ddf2f9;");let i="○";"B"==e.istInStatus&&(i='<span style="color:#aaa;" title="입고일시 : '+e.istInStatusDate+'">●</span>'),"C"==e.istInStatus&&(i='<span style="color:#68C3C7;" title="입고일시 : '+e.istInStatusDate+'">●</span>');let s="○";"B"==e.istOutStatus&&(s='<span style="color:#aaa;" title="출고일시 : '+e.istOutStatusDate+'">●</span>'),"C"==e.istOutStatus&&(s='<span style="color:#b583f5;" title="출고일시 : '+e.istOutStatusDate+'">●</span>');let r="";e.fileInfo.length>0&&(r='<i class="fa-solid fa-download cursorPointer oFileNmDown" style="margin-right:5px;" title="파일 받기"></i>');let c=$("<tr/>");c.append($('<td style="'+l+'"></td>').append("N"==e.oApprovalYn?$('<input type="checkbox" class="vm" name="oSeq" value="'+e.oSeq+'"/>'):"")),c.append($('<td style="'+l+'">'+n._utils.dateformatMin(e.creDate).substring(5,16)+"</td>")),c.append($('<td style="'+l+'" '+("A"!=e.oStatus?'title="변경일시 : '+e.oStatusDate+'"':"")+">"+o+"</td>")),c.append($('<td style="'+l+'padding-right:0px;border-right:0px;" class="ac"></td>').append(r)),c.append($('<td style="'+l+'border-left:0px;" class="al"></td>').append('<span class="oFileNm cursorPointer" title="수주서 보기">'+n._utils.nullTostring(e.oFileNm,"")+"</span>"+("Y"==e.oMarkYn?' <span class="btnstyle1 oCode" style="cursor:pointer" title="즐겨찾는 수주코드 수정"><i class="fa-regular fa-bookmark" style="color: #d15353;"></i> '+e.oCode+"</span>":""))),c.append($('<td style="'+l+'" class="al">'+a+"</td>")),c.append($('<td style="'+l+'" title="'+e.oPaperWidth+" × "+e.oPaperHeight+'"></td>').text(n._utils.nullTostring(e.oPaperSize,""))),c.append($('<td style="'+l+'" class="ar">'+n._utils.numberWithCommas(e.oCnt,"")+"</td>")),c.append($('<td style="'+l+'" class="ar">'+n._utils.numberWithCommas(e.oEndCnt,"-")+"</td>")),c.append($('<td style="'+l+'" class="ac"></td>').append($("<span>"+("A"==e.istInCd?e.istInCdNm:n._utils.nullTostring(e.istInNm,""))+"</span>"))),c.append($('<td style="'+l+'">'+(null!=e.istInHopeDt?'<span style="font-weight:550;">'+n._utils.dateformatStringToDate(e.istInHopeDt).substring(5)+"</span>":"")+(n._utils.checkEmptyNull(e.istInMemo)?"":" ("+e.istInMemo+")")+"</td>")),c.append($('<td style="'+l+'" class="ac" '+("A"!=e.istInStatus?'title="변경일시 : '+e.istInStatusDate+'"':"")+"></td>").append(i)),c.append($('<td style="'+l+'" class="ac"></td>').append($("<span>"+("A"==e.istOutCd?e.istOutCdNm:n._utils.nullTostring(e.istOutNm,""))+"</span>"))),c.append($('<td style="'+l+'">'+(null!=e.istOutHopeDt?'<span style="font-weight:550;">'+n._utils.dateformatStringToDate(e.istOutHopeDt).substring(5)+"</span>":"")+(n._utils.checkEmptyNull(e.istOutMemo)?"":" ("+e.istOutMemo+")")+"</td>")),c.append($('<td style="'+l+'" class="ac" '+("A"!=e.istOutStatus?'title="변경일시 : '+e.istOutStatusDate+'"':"")+"></td>").append(s)),c.append($('<td style="'+l+'">'+("N"==e.oApprovalYn?'<i class="fa-regular fa-pen-to-square cursorPointer orderEdit" title="수주서 수정 화면보기" style="font-size:14px;"></i>':"")+"</td>")),c.data("ROW",e),c.appendTo(t)})),e(this,"eventAction",(t=>{const e=this;$(".btnAddFile",t).on("click",(function(e){e.preventDefault(),$("input[name=orderFile]",t).trigger("click")})),$(".btnDeleteFile",t).on("click",(function(n){n.preventDefault(),confirm("첨부된 파일을 삭제하시겠습니까?",(function(n){let l={ctl:"order",cmd:"oFileDelete",oSeq:$("input[name=oSeq]",t).val()};new a(e._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){0==e.code&&($(".btnDeleteFile",t).hide(),$(".fa-file-arrow-down",t).hide(),$(".addFileName",t).text(""),$(".btnAddFile",t).show())}))}))})),$(".oFileNmDown",t).on("click",(function(){e._order.fileInfo.length>0&&e._parent.fileDownload(e._order.fileInfo[0])})),$("input[name=orderFile]",t).on("change",(function(n){let a=n.target.files[0],l=20971520;if(a.size>l)return alert("최대 "+e._utils.bytesToSize(l)+" 까지만 가능 합니다.\n파일용량 :"+e._utils.bytesToSize(a.size)),delete n.target.files,!1;$(".addFileName",t).text(a.name)})),$("input[name=oInchargeNm]",t).autocomplete({source:function(n,l){let o={ctl:"employee",cmd:"nmSearch",searchWord:this.term},i=$("input[name=cuSeq]",t).val();""!=i&&(o.cuSeq=i),new a(e._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){let e;return e=""==i&&null!=t.cuNm?"["+t.cuNm+"] "+t.eNm:t.eNm,{label:e,value:t.eNm,eSeq:t.eSeq,eTel:t.eTel}}));l(e)}else l([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=oInchargeTel]",t).val(n.item.eTel),$("input[name=istInNm]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=oPaperSize]",t).autocomplete({source:function(t,n){let l={ctl:"common",cmd:"paperSizeInfo",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.key,value:t.key}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=oCnt]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=istInNm]",t).autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.isNm,value:t.isNm,isSeq:t.isSeq,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(n,a){null!=a.item.v.isAddrDetail&&($("input[name=isInAddr]",t).val(a.item.v.isAddr),$("input[name=isInAddrDetail]",t).val(a.item.v.isAddrDetail)),$("input[name=istInIsSeq]",t).val(a.item.isSeq),$("input[name=isInZipcode]",t).val(a.item.v.isZipcode),e._utils.checkEmptyNull(a.item.v.isInchargeNm)||$("input[name=istInInchargeNm]",t).val(a.item.v.isInchargeNm),e._utils.checkEmptyNull(a.item.v.isInchargeTel)||$("input[name=istInInchargeTel]",t).val(e._utils.formatPhoneNumber(a.item.v.isInchargeTel)),$("input[name=istInHopeDt]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".istInAddr",t).on("click",(function(e){"A"!=$("select[name=istInCd]",t).val()&&new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=isInZipcode]",t).val(e.zonecode),$("input[name=isInAddr]",t).val(n),$("input[name=isInAddrDetail]",t).focus()}}).open()})),$("input[name=istOutNm]",t).autocomplete({source:function(t,n){let l={ctl:"customer",cmd:"storageNmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=t.data.map((function(t){return{label:t.isNm,value:t.isNm,isSeq:t.isSeq,v:t}}));n(e)}else n([])}))},focus:function(t,e){return!1},select:function(n,a){null!=a.item.v.isAddrDetail&&($("input[name=isOutAddr]",t).val(a.item.v.isAddr),$("input[name=isOutAddrDetail]",t).val(a.item.v.isAddrDetail)),$("input[name=istOutIsSeq]",t).val(a.item.isSeq),$("input[name=isOutZipcode]",t).val(a.item.v.isZipcode),e._utils.checkEmptyNull(a.item.v.isInchargeNm)||$("input[name=istOutInchargeNm]",t).val(a.item.v.isInchargeNm),e._utils.checkEmptyNull(a.item.v.isInchargeTel)||$("input[name=istOutInchargeTel]",t).val(e._utils.formatPhoneNumber(a.item.v.isInchargeTel)),$("input[name=istOutHopeDt]",t).focus()},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".istOutAddr",t).on("click",(function(e){"A"!=$("select[name=istOutCd]",t).val()&&new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=isOutZipcode]",t).val(e.zonecode),$("input[name=isOutAddr]",t).val(n),$("input[name=isOutAddrDetail]",t).focus()}}).open()})),$("select[name=istInCd],[name=istOutCd]",t).on("change",(function(e){let n=this.value,a=$(this).attr("name");"A"==n?$("istInCd"==a?".inStorage":".outStorage",t).val("").attr("readonly","readonly").addClass("disabled"):$("istInCd"==a?".inStorage":".outStorage",t).removeAttr("readonly").removeClass("disabled")}));let n={ctl:"process",cmd:"companyProcessList",searchWord:this.term};new a(e._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=$("select[name=spSeq]",t);n.empty(),n.append($('<option value="">공정선택</option>'));for(let t=0;t<e.data.length;t++){let a=$('<option value="'+e.data[t].spSeq+'">'+e.data[t].spNm+"</option>");n.append(a)}n.trigger("change")}})),$("select[name=spSeq]",t).on("change",(function(n,l){let o=$(this).val(),i=$("select[name=cwSeq]",t);if(i.empty(),2==o?$("input[name=wInfo]",t).removeAttr("disabled").removeClass("disabled"):$("input[name=wInfo]",t).attr("disabled","disabled").addClass("disabled"),""!=o){$("select[name=wFrontYn]",t).empty().append(e.workFrontYnSelectOption("Y,N,Z")).trigger("focus");let n={ctl:"process",cmd:"companyList",spSeq:o,rows:999,useYn:"Y"};new a(e._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){i.removeAttr("disabled").removeClass("disabled"),i.removeAttr("readonly"),0==t.data.length&&i.attr("disabled","disabled").addClass("disabled");for(let e=0;e<t.data.length;e++){let n=$('<option value="'+t.data[e].cwSeq+'">'+t.data[e].cwNm+"</option>");i.append(n)}null!=l&&i.val(l).attr("readonly","readonly"),i.trigger("change")}}))}else i.attr("disabled","disabled").addClass("disabled"),$(".optionArea",t).empty()})),$("select[name=wFrontYn]",t).on("change",(function(e){$("select[name=cwSeq]",t).trigger("focus")})),$("select[name=cwSeq]",t).on("focus",(function(t){let e=$(this).val();$(this).data("ROW",e)})),$("select[name=cwSeq]",t).on("change",(function(n){let l=$(this).data("ROW"),o=$(this).val(),i=$("input[name=index]",t).val();if(""!=$(this).val()&&""==i){let n={ctl:"process",cmd:"companyLoad",cwSeq:this.value};new a(e._const,n,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(n){if(0==n.code){$(".optionArea",t).empty(),e.workOptionView(t,n.data.optionInfo)}})),null!=l&&l!=o&&("2"==$("select[name=spSeq]",t).val()?$("input[name=wInfo]",t).trigger("focus"):$("input[name=wMemo]",t).trigger("focus"))}})),$(".workTable tbody",t).on("click","td:not(.unEvent)",(function(){let n=$(".workTable tbody tr td",t),l=$(this).closest("tr"),o=l.data("ROW");l.attr("style"),n.css("background","");let i=l.find("td");for(let t=0;t<i.length;t++)$(i[t]).css("background","#d3e1ff !important;");$("input[name=index]",t).val(l.index());let s={ctl:"process",cmd:"companyLoad",cwSeq:o.cwSeq};new a(e._const,s,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(n){0==n.code&&$("select[name=wFrontYn]",t).empty().append(e.workFrontYnSelectOption("Y,N,Z",o.wFrontYn))})),e.workView(t,o),$(this).closest("tbody").children().css("background-color",""),$(this).css("background-color","#bec2f7")})),$(".workTable tbody",t).on("click",".workDelete",(function(){let n=this.closest("tr");confirm("삭제하시겠습니까?",(function(a){a&&(n.remove(),e.workClean(t),$(".workTable tbody",t).children().css("background-color",""))}))})),$("input[name=oCnt]",t).on("focus",(function(){let t=$(this).val();t=e._utils.getOnlyNumber(t),$(this).data("ROW",t).val(t)})),$("input[name=oCnt]",t).on("focusout",(function(){let t=$(this).val();""!=t&&$(this).val(e._utils.numberWithCommas(t))}));let l={cuNm:"oFileNm",oFileNm:"oPaperSize",oPaperSize:"oCnt",oCnt:"oInchargeNm",oInchargeNm:"oInchargeTel",oInchargeTel:"oMemo",oMemo:"istInNm",istInNm:"istInHopeDt",istInHopeDt:"istInMemo",istInMemo:"istInAddr",isInAddr:"istInAddrDetail",istInAddrDetail:"oInchargeNm",isInInchargeNm:"isInInchargeTel",isInInchargeTel:"istOutNm",istOutNm:"istOutHopeDt",istOutHopeDt:"istOutMemo",istOutMemo:"isOutAddr",isOutAddr:"istOutAddrDetail",istOutAddrDetail:"oOutInchargeNm",isOutInchargeNm:"isOutInchargeTel",isOutInchargeNm:"spSeq"};$("input:not([name=wMemo])",t).on("keypress",(function(e){if(13==e.keyCode){let e=$(this).attr("name");$("[name="+l[e]+"]",t).focus()}})),$(".cleanWork",t).on("click",(function(n){e.workClean(t),$(".workTable tbody",t).children().css("background-color","")})),$(".saveWork",t).on("click",(function(n){let a={},l=$("input[name=wSeq]",t).val(),o=$("select[name=spSeq]",t).val(),i=$("select[name=spSeq]",t).find(":selected").text(),s=$("select[name=cwSeq]",t).val(),r=$("select[name=cwSeq]",t).find(":selected").text(),c=$("input[name=wInfo]",t).val(),d=$("select[name=wFrontYn]",t).val(),p=$("select[name=wFrontYn]",t).find(":selected").text(),u=$("input[name=wMemo]",t).val(),m=$(".optionArea",t),f=m.data("ROW"),h=$("input[name=index]",t).val();if(e._utils.checkEmptyNull(s))return alert("작업 명을 입력 선택 하십시오"),$("input[name=cwNm]",t).focus(),!1;a.wSeq=l,a.spSeq=o,a.spNm=i,a.cwSeq=s,a.wNm=r,a.wInfo=c,a.wFrontYn=d,a.wFrontYnNm=p,a.wMemo=u;for(let t=0;t<f.length;t++)if("Y"==f[t].cwoOrderYn){let n=$("[name="+f[t].cwoSeq+"]",m).next();if(0==n.length)f[t].woInput=$("[name="+f[t].cwoSeq+"]",m).val();else{let a=n.val();if(e._utils.checkEmptyNull(a))f[t].woInput=$("[name="+f[t].cwoSeq+"]",m).val();else{if(a.indexOf("→")>-1)return void alert('"→"문자는 사용 할수 없습니다.');f[t].woInput=$("[name="+f[t].cwoSeq+"]",m).val()+"→"+a}}if("Y"==f[t].cwoMustYn&&e._utils.checkEmptyNull(f[t].woInput))return alert("세부사항 ["+f[t].cwoNm+"]을 입력하세요"),!1}a.optionInfo=f,""!=h?(a.index=h,e.workChange(t,a)):e.workAdd(t,a),$(".workTable tbody",t).children().css("background-color",""),e.workClean(t)})),$(".save",t).on("click",(function(n){if(e._utils.checkRequired(t)){let n=e._utils.serializeObject(t);if(n.oApprovalYn=t.find("input[name=oApprovalYn]:checked").val(),n.workInfo=[],"D"==n.oStatus)return alert("작업이 완료되어 수정을 할 수 없습니다."),!1;let a=$(".workTable tbody tr",t);for(let t=0;t<a.length;t++)n.workInfo.push($(a[t]).data("ROW"));if(n.workInfo=JSON.stringify(n.workInfo),null!=n.oSeq&&""!=n.oSeq){new Promise(((n,a)=>{$("input[name=orderFile]",t)[0].files[0]?e.mediaUpload($("input[name=orderFile]",t)[0].files[0],(function(t){-9999==t&&a(new Error("upload  is failed")),n(t.fileSeq)})):n(void 0)})).then((t=>{null!=t&&(n.fileSeq=t),n=e._utils.filterJsonRemoveNull(n),e.update(n,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("수정 되었습니다."),e._parent.modifyTime({action:"work"})):alert(t.message)}))}))}else{new Promise(((n,a)=>{$("input[name=orderFile]",t)[0].files[0]?e.mediaUpload($("input[name=orderFile]",t)[0].files[0],(function(t){-9999==t&&a(new Error("upload  is failed")),n(t.fileSeq)})):n(void 0)})).then((t=>{null!=t&&(n.fileSeq=t),n=e._utils.filterJsonRemoveNull(n),e.insert(n,(function(t){0==t.code?($("body .btnClosePopLayer").trigger("click"),e.retrieve(),alert("등록되었습니다."),e._parent.modifyTime({action:"work"})):alert(t.message)}))}))}}})),$(".workTable tbody",t).sortable({handle:".handle"}),e._utils.focusEvent($("input[name=oInchargeTel]",t),"tel")})),e(this,"initNewLayer",(t=>{const e=this,n=$(`#${t}`);$(".title",n).text("주문등록"),$(".btnSearch.save",n).text("등록"),$(".btnSearch3.saveAs",n).remove(),$("input[name=oInchargeNm]",n).val(e._const.__USER_NAME),$("input[name=oInchargeTel]",n).val(e._const.__USER_TEL),e.eventAction(n),$("select[name=istInCd],[name=istOutCd]",n).trigger("change"),$(".fileDown",n).hide()})),e(this,"reloadLayer",(t=>{const e=this,n=$(`#${t}`);n.data(e._order),null!=e._order.orderNotice&&e._order.orderNotice.length>0&&(e._order.orderNotice=e._order.orderNotice[0].onContent),$(".title",n).empty().append("주문수정"),$(".btnSearch",n).text("수정"),e.eventAction(n),e._utils.unSerializeObject(n,e._order),$("select[name=istInCd],[name=istOutCd]",n).trigger("change");let a=e._order.workInfo;for(let l=0;l<a.length;l++)e.workAdd(n,a[l]);$("input[name=oCnt]",n).trigger("focusout"),$("select[name=istInCd],[name=istOutCd]",n).trigger("change"),e._order.fileInfo.length>0&&($(".btnDeleteFile",n).show(),$(".oFileNmDown",n).show().addClass("cursorPointer"),$(".btnAddFile",n).hide(),$(".addFileName",n).text(e._order.fileInfo[0].realName))})),e(this,"workAdd",((t,e)=>{let n=this,a=$(".workTable tbody",t),l=$('<tr style="border-bottom: 1px dotted #c1c1c1;" />').data("ROW",e);l.append($('<td class="ac handle cursorPointer"><i class="fa-solid fa-arrows-up-down"></i></td>')),l.append($('<td class="ac cursorPointer"></td>').text(e.spNm)),l.append($('<td class="ac cursorPointer"></td>').text(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")")));let o="-";"Y"==e.wFrontYn?o="전면":"N"==e.wFrontYn?o="후면":"Z"==e.wFrontYn&&(o="양면"),l.append($('<td class="ac cursorPointer">'+o+"</td>"));let i="";for(let s=0;s<e.optionInfo.length;s++){let t=e.optionInfo[s];"Y"==t.cwoOrderYn&&(n._utils.checkEmptyNull(t.woInput)||(i+=(""!=i?" ":"")+'<span class="workOptionListOne vm" style="padding:0px;"><span class="workOptionInfo">'+t.cwoNm+" : <strong>"+t.woInput+"</strong></span></span>"))}l.append($('<td class="al workOptionListDiv cursorPointer" style="padding: 0px;"></td>').append($(i))),l.append($('<td class="al cursorPointer" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></td>').text(e.wMemo)),l.append($('<td class="unEvent"><i class="fa-solid fa-square-minus workDelete" title="작업삭제" style="font-size: 16px;color:#81b1cd;"></i></td>')),a.append(l)})),e(this,"workClean",(t=>{$("input[name=index]",t).val(""),$("input[name=cwSeq]",t).val(""),$("select[name=spSeq]",t).val("").removeAttr("readonly"),$("select[name=cwSeq]",t).empty().removeData("ROW").attr("disabled","disabled").addClass("disabled"),$("select[name=wFrontYn]",t).empty().append("<option>작업면</option>"),$("input[name=wMemo]",t).val(""),$(".optionArea",t).empty(),$(".saveWork",t).attr("title","작업 추가").text("작업추가"),$("input[name=wInfo]",t).val("").attr("disabled","disabled").addClass("disabled")})),e(this,"workView",((t,e)=>{$(".workInfo",t).data("ROW",e),this._utils.checkEmptyNull(e.wSeq)?$("input[name=wSeq]",t).val(""):$("input[name=wSeq]",t).val(e.wSeq),$("select[name=spSeq]",t).val(e.spSeq).trigger("change",e.cwSeq).attr("readonly","readonly"),$("select[name=wFrontYn]",t).val(e.wFrontYn),$("input[name=wMemo]",t).val(e.wMemo),$(".saveWork",t).attr("title","작업 수정").text("작업수정"),2==e.spSeq?$("input[name=wInfo]",t).val(e.wInfo).removeAttr("disabled").removeClass("disabled"):$("input[name=wInfo]",t).val("").attr("disabled","disabled").addClass("disabled"),this.workOptionView(t,e.optionInfo)})),e(this,"workFrontYnSelectOption",((t,e)=>{let n="",a={Y:"전면",N:"후면",Z:"양면"},l=t.split(","),o="";if(""==t)n+='<option value="">없음</option>';else{null==e&&(o="selected"),n+='<option value="" '+o+">선택</option>";for(let t=0;t<l.length;t++)o="",e==l[t]&&(o="selected"),n+='<option value="'+l[t]+'" '+o+">"+a[l[t]]+"</option>"}return n})),e(this,"workOptionView",((t,e)=>{let n=this,a=$(".optionArea.vm",t).data("ROW",e);a.empty();for(let l=0;l<e.length;l++)if("Y"==e[l].cwoOrderYn){let t=$('<span class="workOptionListOne vm"/>'),o=$('<strong class="workOptionInfoInput" />');if("Y"==e[l].cwoMustYn&&o.append('<span style="color:red">*</span>'),o.append(e[l].cwoNm+" : "),"A"==e[l].cwoInputCd){let t=$('<select name="'+e[l].cwoSeq+'"><option value="">선택</option></select>');if(!n._utils.checkEmptyNull(e[l].cwoData)){let n=e[l].cwoData.split(",");for(let e=0;e<n.length;e++){let a=$("<option />");a.val(n[e]).text(n[e]),t.append(a)}}t.on("change",(function(){let t=$(this).val(),a=$(this).closest("strong"),o=$(this).closest("span").data("ROW"),i=JSON.parse(o.cwoDataSub),s=$(this).next();if(""==t)s.length>0&&s.remove();else if(s.length>0&&s.remove(),null==i||n._utils.checkEmptyNull(i[t]));else if("select"==i[t].type){0==s.length&&(s=$('<select name="'+e[l].cwoSeq+'_sub" style="margin-left:5px"/>')),s.empty(),s.append('<option value="">선택</option>');let n=i[t].values;for(let t=0;t<n.length;t++){let e=$("<option />");e.val(n[t]).text(n[t]),s.append(e)}a.append(s)}else"text"==i[t].type&&(s=$('<input type="text" name="'+e[l].cwoSeq+'_sub" style=" width:95px;margin-left:5px" placeholder="최대 40글자"/>'),a.append(s))})),o.append(t)}else["T","C","W","M"].indexOf(e[l].cwoInputCd)>-1&&o.append('<input type="text" name="'+e[l].cwoSeq+'" style="width:95px;" placeholder="최대 40글자" >');t.append(o),t.data("ROW",e[l]),a.append(t)}for(let l=0;l<e.length;l++)if("Y"==e[l].cwoOrderYn)if("A"==e[l].cwoInputCd){let t=e[l].woInput;if(!n._utils.checkEmptyNull(t)&&t.indexOf("→")>-1){let n=t.split("→");$("select[name="+e[l].cwoSeq+"]",a).val(n[0]).trigger("change"),$("[name="+e[l].cwoSeq+"_sub]",a).val(n[1])}else $("select[name="+e[l].cwoSeq+"]",a).val(e[l].woInput).trigger("change")}else["T","C","W","M"].indexOf(e[l].cwoInputCd)>-1&&$("input[name="+e[l].cwoSeq+"]",a).val(e[l].woInput)})),e(this,"workChange",((t,e)=>{let n=this,a=$(".workTable tbody",t),l=$("input[name=index]",t).val(),o=a.find("tr").eq(l),i=o.find("td");$(i[1]).text(e.spNm),2==e.spSeq?$(i[2]).text(e.wNm+(n._utils.checkEmptyNull(e.wInfo)?"":" ("+e.wInfo+")")):$(i[2]).text(e.wNm);let s="-";"Y"==e.wFrontYn?s="전면":"N"==e.wFrontYn?s="후면":"Z"==e.wFrontYn&&(s="양면"),$(i[3]).text(s);let r="";for(let c=0;c<e.optionInfo.length;c++){let t=e.optionInfo[c];"Y"==t.cwoOrderYn&&(n._utils.checkEmptyNull(t.woInput)||(r+=(""!=r?" ":"")+'<span class="workOptionListOne vm" style="padding:0px;"><span class="workOptionInfo">'+t.cwoNm+" : <strong>"+t.woInput+"</strong></span></span>"))}$(i[4]).empty().append(r),$(i[5]).text(e.wMemo),o.data("ROW",e)})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고처",key:"istInNm",width:20,align:"left"}),u.push({name:"입고희망일",key:"oHopeInDt",width:12,align:"center"}),u.push({name:"입고자",key:"istInENm",width:15,align:"center"}),u.push({name:"출고처",key:"istOutNm",width:20,align:"left"}),u.push({name:"출고희망일",key:"oHopeOutDt",width:12,align:"center"}),u.push({name:"출고자",key:"istOutENm",width:15,align:"center"}),u.push({name:"메모",key:"oMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"list",((t,e)=>{let n={ctl:"order",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"order",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"insert",((t,e)=>{let n={ctl:"order",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"load",((t,e)=>{let n={ctl:"order",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"order",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"mediaUpload",((t,e)=>{let n=new FormData;n.append("ctl","media"),n.append("cmd","upload"),n.append("directory","order"),n.append("authLevel",3),n.append("upfile",t),new a(this._const,n,{isasync:!1,wapi:"user/fws",spinner:!0}).ajaxfiledata((function(t){0==t.code?e(t.data):(alert(t.message),e(-9999))}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._employee={}}},L=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnAddEmployee").on("click",(function(t){let e=$("template#employeeDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()}));let a=$("#frmCompany",n._code);n._utils.focusEvent($("input[name=cuBizNo]",a),"bizNo"),n._utils.focusEvent($("input[name=cuTel]",a),"tel"),n._utils.focusEvent($("input[name=cuFax]",a),"tel"),n._code.find(".btnSave").on("click",(function(){let t={};t.cuNm=$("input[name=cuNm]",a).val(),t.cuOwnerNm=$("input[name=cuOwnerNm]",a).val(),t.cuBizNo=$("input[name=cuBizNo]",a).val(),t.cuBizNoNum=$("input[name=cuBizNoNum]",a).val(),t.cuUpjong=$("input[name=cuUpjong]",a).val(),t.cuJongmok=$("input[name=cuJongmok]",a).val(),t.cuZipcode=$("input[name=cuZipcode]",a).val(),t.cuAddr=$("input[name=cuAddr]",a).val(),t.cuAddrDetail=$("input[name=cuAddrDetail]",a).val(),t.cuFax=$("input[name=cuFax]",a).val(),t.cuTel=$("input[name=cuTel]",a).val(),t.cuInvoiceEmail=$("input[name=cuInvoiceEmail]",a).val(),n.update(t,(function(t){0==t.code?alert("수정되었습니다."):alert(t.message)}))})),n._code.find(".cuEmployeeList tbody").on("click",".customerEmployee",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#employeeDiv");n._parent.openLayer(e.html(),n.initLoadLayer,t)})),n.retrieve()})),e(this,"initNewLayer",(t=>{const e=$(`#${t}`);$(".title",e).text("직원 등록"),$(".btnSearch.save",e).text("등록"),$(".btnChangePwd",e).remove(),$(".employeeDelete",e).remove(),this.eventAction(e)})),e(this,"initLoadLayer",((t,e)=>{const n=$(`#${t}`);this._utils.unSerializeObject(n,e),$(".title",n).text("직원 수정"),$(".btnSearch.save",n).text("수정"),$("input[name=eId]",n).attr("disabled",!0).css("border-width","0px").css("background-color","transparent"),"Y"==e.eManagerYn&&$(".employeeDelete",n).remove(),this.eventAction(n,e)})),e(this,"eventAction",((t,e)=>{let n=this;n._utils.focusEvent($("input[name=eTel]",t),"tel"),$(".employeeDelete",t).on("click",(function(){confirm("직원을 삭제 처리 하시겠습니까?",(function(e){if(e){let e=t.data();"N"==e.eManagerYn?n.employeeDelete({eSeq:e.eSeq},(function(t){0==t.code?(n.employeeRetrieve(),alert("삭제 되었습니다")):alert(t.message)})):alert("관리자는 삭제 할 수 없습니다.")}}),"직원 삭제")})),$("input[name=eId]",t).on("change",(function(){let e=$(this).val(),a=$(".idOverlapCheck",t);n._utils.checkEmptyNull(e)?a.css("color","blue").text(""):n.idOverlapCheck({eId:e},(function(t){0==t.code&&(t.data.check?(a.css("color","blue").text("사용가능"),n._idOverlapcheck="Y"):(a.css("color","red").text("사용불가"),n._idOverlapcheck="N"))}))})),$(".btnChangePwd",t).on("click",(function(){let e=$("input[name=ePwd]",t).val(),a=$("input[name=reEPwd]",t).val();if(""==e.trim())return alert("비밀번호를 입력해 주세요"),!1;if(e!=a)return alert("비밀번호를 확인해 주세요"),!1;let l={changepwd:"N",eSeq:t.data().eSeq,ePwd:e};n.changepwd(l,(function(e){0==e.code?($("input[name=ePwd], input[name=reEPwd]",t).val(""),alert("변경되었습니다")):alert("변경 실패하였습니다")}))})),$(".employeeSave",t).on("click",(function(){let e=t.data(),a=n._utils.serializeObject(t);if(n._utils.checkEmptyNull(a.eNm))return alert("이름을 입력하십시오"),!1;if(n._utils.checkEmptyNull(a.eTel))return alert("전화번호를 입력하십시오"),!1;if(null!=e.eSeq)a.eSeq=e.eSeq,n.employeeUpdate(a,(function(e){0==e.code?(n.employeeRetrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정 되었습니다.")):alert(e.message)}));else{if(n._utils.checkEmptyNull(a.eId))return alert("아이디를 입력하십시오"),!1;if(n._utils.checkEmptyNull(a.ePwd))return alert("비밀번호를 입력하십시오"),!1;if(n._utils.checkEmptyNull(a.reEPwd))return alert("확인 비밀번호를 입력하십시오"),!1;if(a.ePwd!=a.reEPwd)return alert("비밀번호를 정확히 입력하십시오"),!1;if("Y"!=n._idOverlapcheck)return alert("사용 가능한 아이디를 입력하십시오"),!1;a.eLoginYn="Y",n.employeeInsert(a,(function(e){0==e.code?(n.employeeRetrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)}))}})),null!=e&&(t.data(e),n._utils.unSerializeObject(t,e),$("input[name=eTel]",t).trigger("focusout"))})),e(this,"purge",(()=>{console.log("customerController purge")})),e(this,"reload",(()=>{console.log("customerController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=$("#frmCompany",t._code);t.load((function(n){t._utils.unSerializeObject(e,n.data),$("input[name=cuBizNo]",e).trigger("focusout"),$("input[name=cuTel]",e).trigger("focusout"),$("input[name=cuFax]",e).trigger("focusout")})),t.employeeRetrieve()})),e(this,"employeeRetrieve",(()=>{const t=this;t.employeeList((function(e){let n=t._code.find(".cuEmployeeList tbody"),a=t._code.find(".cuEmployeeList thead");if(n.empty(),0==e.code)if(e.data.length>0)for(let l in e.data)t.display(n,e.data[l]);else $('<tr><td colspan="'+a.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(n);else alert(e.message)}))})),e(this,"display",((t,e)=>{let n=$("<tr />"),a='<i class="fa-solid fa-user" title="직원"></i>';"Y"==e.eManagerYn&&(a='<i class="fa-solid fa-user-tie" style="color:blue;" title="관리자"></i>'),n.append($('<td class="ac customerEmployee cursorPointer" style="padding-left:0px;" />').append(a)),n.append($('<td class="ac customerEmployee cursorPointer" />').append(e.eNm)),n.append($('<td class="ac customerEmployee cursorPointer" />').append(e.eRank)),n.append($('<td class="ac customerEmployee cursorPointer" />').append(e.eId)),n.append($('<td class="ac customerEmployee cursorPointer" />').append(this._utils.convertTel(e.eTel))),n.data("ROW",e),t.append(n)})),e(this,"load",(t=>{new a(this._const,{ctl:"customer",cmd:"load"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),e(this,"delete",((t,e)=>{let n={ctl:"employee",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"bizSelect",((t,e)=>{let n={ctl:"common",cmd:"bizSelect"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeList",(t=>{new a(this._const,{ctl:"employee",cmd:"list",rows:9999},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){t(e)}))})),e(this,"employeeDetail",((t,e)=>{let n={ctl:"employee",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeInsert",((t,e)=>{let n={ctl:"employee",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeUpdate",((t,e)=>{let n={ctl:"employee",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"employeeDelete",((t,e)=>{let n={ctl:"employee",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"changepwd",((t,e)=>{let n={ctl:"employee",cmd:"pwdChange"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"customer",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"idOverlapCheck",((t,e)=>{let n={ctl:"employee",cmd:"idCheck"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._fileSeq=null}},W=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._cuOrder=new P(t._parent,t._const),t._cuInfo=new L(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}},E=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#stockDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=sSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({sSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find(".btnExcelUpload").on("click",(function(t){let e=$("template#stockExcelInsert");n._parent.openLayer(e.html(),n.excelUploadEvent),t.stopPropagation()})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())}));let r=$("select[name=scSeq]",l),c=$("select[name=scSeq2]",l),d=$("select[name=scSeq3]",l),p=[],u=[],m=[],f={ctl:"stock",cmd:"categoryTreeList"};new a(n._const,f,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=t.data;p=e;for(let t=0;t<e.length;t++)r.append('<option value="'+e[t].scSeq+'">'+e[t].scNm+"</option>")}else alert(t.message)})),r.on("change",(function(){let t=$(this).val();if(n._utils.checkEmptyNull(t))c.empty(),c.append('<option value="" selected>중분류 전체</option>'),d.empty(),d.append('<option value="" selected>소분류 전체</option>');else for(let e=0;e<p.length;e++){if(t==p[e].scSeq){u=p[e].node,c.empty(),c.append('<option value="" selected>중분류 전체</option>');for(let t=0;t<u.length;t++)c.append('<option value="'+u[t].scSeq+'">'+u[t].scNm+"</option>");break}d.empty(),d.append('<option value="" selected>소분류 전체</option>')}})),c.on("change",(function(){let t=$(this).val();if(!n._utils.checkEmptyNull(t))for(let e=0;e<u.length;e++)if(t==u[e].scSeq){m=u[e].node,d.empty(),d.append('<option value="" selected>소분류 전체</option>');for(let t=0;t<m.length;t++)d.append('<option value="'+m[t].scSeq+'">'+m[t].scNm+"</option>");break}})),d.on("change",(function(){$(this).val()})),r.trigger("change"),f={ctl:"place",cmd:"nmList",cpType:"B",useYn:"Y"},new a(n._const,f,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=cpSeq]",l),a=n._placeList=t.data;for(let n=0;n<a.length;n++){let a=t.data[n],l=$("<option />");l.val(a.cpSeq).text(a.cpNm),e.append(l)}}else alert(t.message)})),$("input[name=searchWord]",l).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",nmOnly:"Y",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let e={};return n._utils.checkEmptyNull(t.sCode)?e.label=t.sNm:e.label="["+t.sCode+"] "+t.sNm,e.value=t.sNm,e}));e(a)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let h=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(h)||i.find("select[name=rowsPerPage]").val(h),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");return"Y"==t.sioHoldYn?(alert("마감된 데이터 입니다."),!1):"Y"==t.sioAdjustYn?(alert("재고 조정 데이터 입니다."),!1):void n.load({sSeq:t.sSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=$("template#stockDiv");n._parent.openLayer(e.html(),n.reloadLayer,t.data)}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"searchData",(()=>{let t=this,e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val();l.find("select[name=searchColumn]").val();let s=l.find("input[name=searchWord]").val(),r=l.find("select[name=cpSeq]").val(),c=l.find("select[name=skCd]").val(),d=l.find("select[name=stSeq]").val(),p=l.find("select[name=scSeq]").val(),u=l.find("select[name=scSeq2]").val(),m=l.find("select[name=scSeq3]").val(),f=l.find("input[name=safeWarning]:checked").val()??"N";return t._utils.checkEmptyNull(m)?t._utils.checkEmptyNull(u)||(p=u):p=m,{page:a,rows:n,orderColumn:o,orderType:i,searchColumn:"sNm",searchWord:s,cpSeq:r,stSeq:d,skCd:c,scSeq:p,safeWarning:f}})),e(this,"retrieve",(()=>{const t=this;let e=t.searchData(),n=t._code.find(".searchWrapArea"),a=t._code.find(".pageInfoTfoot"),l=a.find("select[name=rowsPerPage]").val(),o=a.find("input[name=page]").val();$(".totalPrice",n).text(0),t.list(e,(function(e){let i=t._code.find(".dataListTable tbody"),s=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),i.empty();let r=0,c=0;if(null!=e&&e.length>0)for(let a in e)0==a&&($(".totalPrice",n).text(t._utils.numberWithCommas(e[a].totalPrice)),r=e[a].totalCnt,c=Math.ceil(r/l)),t.display(i,e[a]);else $('<tr><td colspan="'+s.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(i);t._utils.mdiPaging(a.find(".pagenate"),r,l,c,10,o,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="border:1px solid #dedede;",l=e.placeInfo,o="";for(let u=0;u<l.length;u++){let t=l[u];o+='<span style="display:inline-block;width:100%;">'+t.cpNm+" : <strong>"+n._utils.numberWithCommas(t.splCnt)+"</strong></span>"}let i="일반";"Y"==e.sMarkYn&&(i='<i class="fa-solid fa-check" title="주요자재"></i>');let s=[];for(let u=0;u<e.kindInfo.length;u++)s.push(e.kindInfo[u].skCdNm);let r=[];for(let u=0;u<e.typeInfo.length;u++)r.push(e.typeInfo[u].stNm);"N"==e.useYn&&(a+="color:#aaa;");let c="",d="";if(1==e.customerInfo.length)c=e.customerInfo[0].cuNm;else if(e.customerInfo.length>1){c=e.customerInfo[0].cuNm+" 외 "+(e.customerInfo.length-1);for(let t=0;t<e.customerInfo.length;t++)d+=" "+e.customerInfo[t].cuNm+",";d=d.substring(0,d.length-1)}let p=$("<tr />");p.append($('<td style="'+a+'"><input type="checkbox" class="vm" name="sSeq" value="'+e.sSeq+'"></td>')),p.append($('<td style="'+a+'" class="'+("Y"==e.sMarkYn?"txt_red":"")+'">'+i+"</td>")),p.append($('<td style="'+a+'" class="ac">'+s.join(", ")+"</td>")),p.append($('<td style="'+a+'" class="ac">'+n._utils.nullTostring(e.sCode,"")+"</td>")),p.append($('<td style="'+a+'" class="al pl5" />').append(n._utils.nullTostring(e.sNm,""))),p.append($('<td style="'+a+'" class="al" />').append(n._utils.nullTostring(e.sStandard,""))),p.append($('<td style="'+a+'" class="ar" />').append(n._utils.numberWithCommas(e.sSafeCnt))),p.append($('<td style="'+a+'" class="ar" />').append(n._utils.numberWithCommas(e.sCnt))),p.append($('<td style="'+a+'" class="ar" />').append(n._utils.numberWithCommas(e.sPrice))),p.append($('<td style="'+a+'" class="ar" />').append(n._utils.numberWithCommas(e.sTotalPrice))),p.append($('<td style="'+a+'" class="al" />').append(o)),p.append($('<td style="'+a+'" class="al" />').append(n._utils.nullTostring(e.sMemo))),p.append($('<td style="'+a+'" class="al" title="'+d+'" />').append(n._utils.nullTostring(c))),"N"==e.useYn?p.append($('<td style="'+a+'" class="txt_red">'+n._utils.nullTostring(e.useYn,"")+"</td>")):p.append($('<td style="'+a+'">'+n._utils.nullTostring(e.useYn,"")+"</td>")),p.append($('<td style="'+a+'">'+e.creDate.substring(0,16)+"</td>")),p.append($('<td style="'+a+'"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="조회" style="font-size:14px;"></i></td>')),p.data("ROW",e),p.appendTo(t)})),e(this,"layerViewEvent",((t,e)=>{const n=this;if(n._utils.focusEvent($("input[name=sioCnt]",t),"comma"),n._utils.focusEvent($("input[name=sSafeCnt]",t),"comma"),n._utils.focusEvent($("input[name=sioUnitPrice]",t),"moeny"),n._utils.checkEmptyNull(e)){let e={ctl:"place",cmd:"list",cpType:"B",rows:9999};new a(n._const,e,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=$("select[name=cpSeq]",t),a=e.data;for(let t=0;t<a.length;t++)n.append('<option value="'+a[t].cpSeq+'">'+a[t].cpNm+"</option>")}else alert(e.message)}))}let l=$(".dataListTable tbody",t);if(t.find("input[name=cuNm]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"C"};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=cuSeq]",t).val(n.item.cuSeq)},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=sioCnt]",t).on("keypress",(function(e){e.keyCode&&13==e.keyCode&&$("input[name=sioUnitPrice]",t).trigger("focus")})),$(".stockTypeChoice",t).on("click",(function(e){let a=$("template#stockTypeChoice"),l=$(".stockTypeTd",t),o=[],i=$("input[name=typeInfo]",t).val();i.length>0&&(o=JSON.parse(i)),n._parent.openLayer(a.html(),n.sotckTypeChoce,o,l),e.stopPropagation()})),$(".stockCategoryChoice",t).on("click",(function(e){let a=$("template#stockCategoryChoice"),l=$(".stockCategoryTd",t),o=$("input[name=scSeqs]",t).val();o.length>0&&(o=JSON.parse(o)),n._parent.openLayer(a.html(),n.sotckCategoryChoce,o,l),e.stopPropagation()})),$(".stockCustomerChoice",t).on("click",(function(a){let l=$("template#stockCustomerChoice"),o=$(".stockCustomerTd",t),i=[];if(null!=e){let e=$("input[name=cuSeqs]",t).val(),n=$(".stockCustomer",t).text();if(e.length>0)try{e=JSON.parse(e),n=n.split(",");for(let t=0;t<e.length;t++)i.push({cuSeq:e[t],cuNm:n[t]})}catch(s){console.log("거래처 정보 수집 오류")}}else{let e=$("input[name=cuSeqs]",t).val(),n=$(".stockCustomer",t).text();if(e.length>0)try{e=JSON.parse(e),n=n.split(",");for(let t=0;t<e.length;t++)i.push({cuSeq:e[t],cuNm:n[t]})}catch(s){console.log("거래처 정보 수집 오류")}}n._parent.openLayer(l.html(),n.sotckCustomerChoce,i,o),a.stopPropagation()})),$(".fa-solid.fa-square-plus",t).on("click",(function(){let e=$(".placeList",t),a=n._utils.serializeObject(e);if(a.cpNm=$("select[name=cpSeq] option:selected",e).text(),n._utils.checkEmptyNull(a.cpSeq))return void alert("창고를 선택 하십시요");a.sioCnt=a.sioCnt??0,a.sioUnitPrice=a.sioUnitPrice??0,a.sioCnt=n._utils.convertNumber(a.sioCnt),a.sioUnitPrice=n._utils.convertNumber(a.sioUnitPrice),function(t,e){let a=$("<tr />");a.append($('<td class="al">'+e.cpNm+"</td>")),a.append($('<td class="ar">'+n._utils.numberWithCommas(e.sioCnt)+"</td>")),a.append($('<td class="ar">'+n._utils.numberWithCommas(e.sioUnitPrice)+"</td>")),a.append($('<td class="ac" style="padding:0px;"><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus" style="color:#8071bb;font-size: 18px;"></i></a></td>')),t.append(a.data("ROW",e))}(l,a);let o=$("input,select",e);for(let t=0;t<o.length;t++)$(o[t]).val("")})),l.on("click",".fa-solid.fa-square-minus",(function(){let t=$(this).closest("tr");confirm("삭제 하시겠습니까?",(function(e){e&&t.remove()}))})),null!=e){if(e.kindInfo.length>0)for(let n=0;n<e.kindInfo.length;n++)$("input[name=skCd][value="+e.kindInfo[n].skCd+"]",t).prop("checked",!0);if(e.typeInfo.length>0){let n=[],a=[];for(let t=0;t<e.typeInfo.length;t++)n.push(e.typeInfo[t].stSeq),a.push(e.typeInfo[t].stNm);$("input[name=typeInfo]",t).val(JSON.stringify(n)),$(".stockTypes",t).text(a.join(", "))}if(e.categoryInfo.length>0){let n=[],a=[];for(let t=0;t<e.categoryInfo.length;t++)n.push(e.categoryInfo[t].scSeq),a.push(e.categoryInfo[t].scNm);$("input[name=scSeqs]",t).val(JSON.stringify(n)),$(".stockCategory",t).text(a.join(", "))}if(e.customerInfo.length>0){let n=[],a=[];for(let t=0;t<e.customerInfo.length;t++)n.push(e.customerInfo[t].cuSeq),a.push(e.customerInfo[t].cuNm);$("input[name=cuSeqs]",t).val(JSON.stringify(n)),$(".stockCustomer",t).text(a.join(", "))}}$(".save",t).on("click",(function(e){let a=t.data(),o=n._utils.serializeObject(t),i=$("tr",l),s=[],r=$("input[name=skCd]:checked",t);if($("input[name=cuNm]",t).val(),$("input[name=cuSeq]",t).val(),null==a.sSeq){for(let t=0;t<i.length;t++){let e=$(i[t]).data("ROW");null!=e&&null!=e.cpSeq&&s.push(e)}if(0==s.length)return void alert("창고를 선택하여 현재 재고를 등록 하십시요")}else o.sSeq=a.sSeq;if(0!=r.length){if(n._utils.checkRequired(t)){let e=[];for(let t=0;t<r.length;t++)e.push($(r[t]).val());o.kindInfo=JSON.stringify(e),null==o.sSeq?(o.inoutInfo=s,n.insert(o,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)}))):n.update(o,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정되었습니다.")):alert(e.message)}))}}else alert("자재 분류를 선택하세요")}))})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".save",e).text("등록"),this.layerViewEvent(e)})),e(this,"reloadLayer",((t,e)=>{let n=$("#"+t);$(".title",n).text(e.sNm+" 수정"),$(".save",n).text("수정"),$(".placeArae",n).remove(),n.data(e),this._utils.unSerializeObject(n,e),this.layerViewEvent(n,e)})),e(this,"sotckTypeChoce",((t,e,n)=>{let l=$("#"+t),o=$(".dataListTable tbody",l);new a(this._const,{ctl:"stock",cmd:"typeList",isOnlyType:!0,useYn:"Y"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code)if(t.data.length>0)for(let n=0;n<t.data.length;n++){let a=t.data[n],l=$("<tr />");l.append($('<td class="ac"><input type="checkbox" name="stSeq" '+(e.indexOf(a.stSeq)>-1?"checked":"")+"></td>")),l.append($('<td class="al">'+a.stNm+"</td>")),o.append(l.data("ROW",a))}else{let t=$("<tr />");t.append($('<td class="ac" colspan="2">데이타가 없습니다.</td>')),o.append(t)}else alert(t.message)})),$(".applySave",l).on("click",(function(t){let e=[],a=[];$("tr",o);let i=o.find("input[name=stSeq]:checked");for(let n=0;n<i.length;n++){let t=$(i[n]).closest("tr").data("ROW");e.push(t.stSeq),a.push(t.stNm)}$("input[name=typeInfo]",n).val(JSON.stringify(e)),$(".stockTypes",n).text(a.join(", ")),$(".btnClosePopLayer",l).trigger("click")}))})),e(this,"sotckCategoryChoce",((t,e,n)=>{let l=this,o=$("#"+t),i=$(".dataListTable tbody",o),s=$(".dataHeadTable thead",o);function r(t,n){let a="";for(let e=0;e<n.scLevel;e++)e==n.scLevel-1?a+='<span style="width:15px;display: inline-block;"></span><span style="width:15px;display: inline-block;"><i class="fa-solid fa-arrow-right"></i></span>':a+='<span style="width:15px;display: inline-block;"></span>';let o=$("<tr/>");if(o.append($("<td></td>").append($('<input type="checkbox" class="vm" name="scSeq" value="'+n.scSeq+'" '+(e.indexOf(n.scSeq)>-1?" checked":"")+"/>"))),o.append($('<td class="al pl5 pr5 " style="border-right:0px;border-right:1px solid #ccc;">'+a+'<span class="categoryNm cursorPointer" style="display: inline-block;">'+l._utils.nullTostring(n.scNm,"")+"</span></td>")),o.data("ROW",n),o.appendTo(t),null!=n.node&&n.node.length>0)for(let e=0;e<n.node.length;e++)r(t,n.node[e])}new a(l._const,{ctl:"stock",cmd:"categoryTreeList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){i.empty();let e=t.data;if(null!=e&&e.length>0)for(let t in e)r(i,e[t]);else $('<tr><td colspan="'+s.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(i)}else alert(t.message)})),$(".applySave",o).on("click",(function(t){let e=[],a=[];$("tr",i);let l=i.find("input[name=scSeq]:checked");for(let n=0;n<l.length;n++){let t=$(l[n]).closest("tr").data("ROW");e.push(t.scSeq),a.push(t.scNm)}$("input[name=scSeqs]",n).val(JSON.stringify(e)),$(".stockCategory",n).text(a.join(", ")),$(".btnClosePopLayer",o).trigger("click")}))})),e(this,"sotckCustomerChoce",((t,e,n)=>{let l=this,o=$("#"+t),i=$(".dataListTable tbody",o),s=$(".dataHeadTable thead",o);if(e.length>0)for(let a=0;a<e.length;a++)r(e[a]);else $('<tr><td colspan="'+s.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(i);function r(t){let e=$("tr",i);for(let a=0;a<e.length;a++){let n=$(e[a]).data("ROW");if(null==n||null==n.cuSeq)$(e[a]).remove();else if(n.cuSeq==t.cuSeq)return alert("이미 등록되어 있습니다."),!1}let n=$("<tr/>");return n.append($('<td class="al pl5 pr5 " style="border-right:0px;">'+t.cuNm+"</td>")),n.append($('<td class="al pl5 pr5 " style="border-right:1px solid #ccc;"><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus customerDel" style="color:#8071bb;font-size: 18px;"></i></a></td>')),n.data("ROW",t),n.appendTo(i),!0}o.find("input[name=cuNm]").autocomplete({source:function(t,e){let n={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"C"};new a(l._const,n,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=cuSeq]",o).val(e.item.cuSeq)},minLength:l._parent._autocompleteLength,delay:l._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".customerAdd",o).on("click",(function(){let t=l._utils.serializeObject($(".customerAddArea",o));l._utils.checkEmptyNull(t.cuSeq)?alert("거래처를 입력 선택하여 등록하십시요"):(r(t),$("input[name=cuSeq]",o).val(""),$("input[name=cuNm]",o).val(""))})),o.find("input[name=cuNm]").on("keypress",(function(t){13==t.keyCode&&""!=$(this).val()&&$(".customerAdd",o).trigger("click")})),i.on("click",".customerDel",(function(){$(this).closest("tr").remove()})),$(".applySave",o).on("click",(function(t){let e=[],a=[],l=$("tr",i);for(let n=0;n<l.length;n++){let t=$(l[n]).data("ROW");e.push(t.cuSeq),a.push(t.cuNm)}$("input[name=cuSeqs]",n).val(JSON.stringify(e)),$(".stockCustomer",n).text(a.join(", ")),$(".btnClosePopLayer",o).trigger("click")}))})),e(this,"excelUploadEvent",(t=>{const e=this;let n=$(`#${t}`);function l(t){if(null!=e._placeList&&e._placeList.length>0)for(let n=0;n<e._placeList.length;n++)if(t==e._placeList[n].cpNm)return e._placeList[n].cpSeq;return 0}null!=e._placeList&&0!=e._placeList.length||alert(""),$(".btnExcelDocDown",n).on("click",(function(){const t=document.createElement("a");t.setAttribute("href",__FILE_DOMIN+"/doc/stockDoc20250123.xlsx"),t.setAttribute("download","자재등록양식.xlsx"),t.click(),$(t).remove()})),$(".btnAddFile",n).on("click",(function(t){t.preventDefault(),$("input[name=excelFile]",n).trigger("click")})),$("input[name=excelFile]",n).on("change",(function(t){let a=t.target.files[0],l=2097152;if(a.size>l)return alert("최대 "+e._utils.bytesToSize(l)+" 까지만 가능 합니다.\n파일용량 :"+e._utils.bytesToSize(a.size)),delete t.target.files,!1;$(".addFileName",n).text(a.name)})),$(".btnExcelInsert",n).on("click",(function(){let t=$("input[name=excelFile]",n)[0].files;if(0==t.length)alert("파일을 선택하십시요");else{const o=new ExcelJS.Workbook,i=new FileReader;let s=[];i.readAsArrayBuffer(t[0]),i.onload=()=>{const t=i.result;o.xlsx.load(t).then((t=>{t.getWorksheet(1).eachRow(((t,e)=>{e>=3&&s.push(t.values)})),console.log(s),function(t){if(0==t.length)return void alert("등록할 고객사 정보가 없습니다.");for(let n=0;n<t.length;n++){let o=t[n],i=[];"Y"==o[1]&&i.push("S"),"Y"==o[2]&&i.push("P");let s=[];if(!e._utils.checkEmptyNull(o[7].trim())){let t={};t.cpSeq=l(o[7].trim()),t.cpSeq>0&&(t.sioCnt=o[8].trim(),t.sioUnitPrice=o[8].trim(),t.sioUnitPrice="초기 재고(엑셀 등록)",s.push(t))}let r={ctl:"stock",cmd:"insert",sCode:o[3].trim(),sNm:o[4].trim(),sStandard:o[5].trim(),sSafeCnt:""==o[6].trim()?0:o[6].trim(),useYn:"Y"==o[10].trim()?"Y":"N",skCd:JSON.stringify(i),inoutInfo:JSON.stringify(s)};new a(e._const,r,{wapi:"user/ws",spinner:!0,isasync:!1}).ajaxformdata((function(e){e.code,t[n].result=e.message}))}alert("등록되었습니다."),$(".btnClosePopLayer",n).trigger("click"),function(t){const n=new ExcelJS.Workbook;let a="자재 등록 결과 ";const l=n.addWorksheet(a);let o=[];o.push({name:"자재",key:"1",width:10,align:"center"}),o.push({name:"재품",key:"2",width:10,align:"center"}),o.push({name:"자재코드",key:"3",width:25,align:"center"}),o.push({name:"자재명",key:"4",width:30,align:"left"}),o.push({name:"규격",key:"5",width:30,align:"left"}),o.push({name:"안전량",key:"6",width:15,align:"rigth"}),o.push({name:"보관창고",key:"7",width:20,align:"left"}),o.push({name:"보관량",key:"8",width:15,align:"rigth"}),o.push({name:"단가",key:"9",width:20,align:"rigth"}),o.push({name:"사용여부",key:"10",width:10,align:"center"}),o.push({name:"등록결과",key:"result",width:40,align:"left"});let i=[];for(let e in o)i.push(o[e].name);let s=l.addRow(i);s.eachCell(((t,n)=>{e._utils.excelStyleHeaderCell(t),l.getColumn(n).width=o[n-1].width}));for(let r in t){let n=[];for(let e in o)n.push(t[r][o[e].key]?t[r][o[e].key]:"");l.addRow(n).eachCell(((t,n)=>{e._utils.excelStyleDataCell(t,o[n-1].align)}))}e._utils.excelDownload(n,a+"("+e._utils.currentDateTime()+")").then((t=>{}))}(t)}(s)}))}}}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=[];l.push({name:"중요",key:"sMarkYn",width:5,align:"center"}),l.push({name:"분류",key:"kindInfo",width:10,align:"center"}),l.push({name:"자재명",key:"sNm",width:25,align:"left"}),l.push({name:"규격",key:"sStandard",width:30,align:"left"}),l.push({name:"안전량",key:"sSafeCnt",width:10,align:"right"}),l.push({name:"재고량",key:"sCnt",width:10,align:"right"}),l.push({name:"평균단가",key:"sPrice",width:12,align:"right"}),l.push({name:"총금액",key:"sTotalPrice",width:15,align:"right"}),l.push({name:"메모",key:"sMemo",width:50,align:"left"}),l.push({name:"사용",key:"useYn",width:5,align:"center"}),l.push({name:"등록일시",key:"creDate",width:20,align:"center"});let o=t.searchData();o.rows=9999,o.page=1,t.list(o,(function(o){if(!(null!=o&&o.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in l)e.push(l[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=l[n-1].width}));for(let n in o){let e=[];for(let t=0;t<o[n].kindInfo.length;t++)e.push(o[n].kindInfo[t].skCdNm);o[n].kindInfo=e.join(", ");let i=[];for(let t in l)i.push(o[n][l[t].key]?o[n][l[t].key]:"");a.addRow(i).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,l[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+t._utils.currentDateTime()+")").then((t=>{}))}))})),e(this,"list",((t,e)=>{let n={ctl:"stock",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"stock",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"stock",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"stock",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"stock",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null,this._eqSeq=null,this._eqNm=null}},j=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#stockTypeViewDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=stSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({stSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let a=n._code.find(".searchWrapArea"),l=n._code.find(".dataHeadTable thead"),o=n._code.find(".pageInfoTfoot"),i=n._code.find(".dataListTable");a.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=a.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",a.find("input[name=orderculumn]").val(t),a.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(a),l.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(a,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let s=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(s)||o.find("select[name=rowsPerPage]").val(s),o.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),o.find("input[name=page]").val("1"),n.retrieve()})),i.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.load({stSeq:t.stSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=$("template#stockTypeViewDiv");n._parent.openLayer(e.html(),n.reloadLayer,t.data)}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val(),s=l.find("select[name=searchColumn]").val(),r=l.find("input[name=searchWord]").val(),c={page:a,rows:n,orderColumn:o,orderType:i,searchColumn:s,searchWord:r,cpType:"B"};t.list(c,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0){for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);t._utils.tbodyMerge(o,[0,1,2,3,9,10,11],"stSeq")}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="";"Y"==e.sMarkYn&&(a='<i class="fa-solid fa-check" title="중요자재"></i>'),"N"==e.sMarkYn&&(a="일반");let l=$("<tr />");l.append($('<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="stSeq" value="'+e.stSeq+'"></td>')),l.append($('<td style="border:1px solid #dedede;" class="al pl5" />').append(n._utils.nullTostring(e.stNm,""))),l.append($('<td style="border:1px solid #dedede;" class="al" />').append(n._utils.formatPhoneNumber(e.stMemo))),l.append($('<td style="border:1px solid #dedede;" class="ac" />').append(n._utils.numberWithCommas(e.stockCnt))),l.append($('<td style="border:1px solid #dedede;" class="ac" />').append(a)),l.append($('<td style="border:1px solid #dedede;" class="al" />').append(e.sNm)),l.append($('<td style="border:1px solid #dedede;" class="al" />').append(e.sStandard)),l.append($('<td style="border:1px solid #dedede;" class="ar" />').append(n._utils.numberWithCommas(e.sCnt))),l.append($('<td style="border:1px solid #dedede;" class="ac" />').append(n._utils.checkEmptyNull(e.lastDate)?"":e.lastDate.substring(0,16))),"N"==e.useYn?l.append($('<td class="txt_red">'+n._utils.nullTostring(e.useYn,"")+"</td>")):l.append($('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.useYn,"")+"</td>")),l.append($('<td style="border:1px solid #dedede;">'+e.creDate.substring(0,16)+"</td>")),l.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="수정" style="font-size:14px;"></i></td>')),l.data("ROW",e),l.appendTo(t)})),e(this,"layerViewEvent",((t,e)=>{const n=this;$(".save",t).on("click",(function(e){if(n._utils.checkRequired(t)){let e=n._utils.serializeObject(t);n._utils.checkEmptyNull(e.stSeq)?n.insert(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)})):n.update(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}}))})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".save",e).text("등록"),this.layerViewEvent(e)})),e(this,"reloadLayer",((t,e)=>{let n=$("#"+t);$(".title",n).text(+e.cpNm+" 수정"),$(".save",n).text("수정"),n.data(e),this.layerViewEvent(n,e),this._utils.unSerializeObject(n,e)})),e(this,"list",((t,e)=>{let n={ctl:"stock",cmd:"typeList",stKind:"A"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"stock",cmd:"typeLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"stock",cmd:"typeDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"stock",cmd:"typeInsert",stKind:"A"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"stock",cmd:"typeUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null,this._eqSeq=null,this._eqNm=null}},Y=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#stockInoutInsertDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find(".btnInsideCreate").on("click",(function(t){let e=$("template#stockInoutInsideInsertDiv");n._parent.openLayer(e.html(),n.stockInoutInsideLayer),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=sioSeq]:checked");if(0==e.length)return void alert("삭제할 대상을 선택 하십시오");if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=$(e[0]).closest("tr").data("ROW"),l="삭제하시겠습니까?";"Y"==a.sioInsideYn&&(l="내부이동으로 관련된 "+("I"==a.sioKind?"[출고]":"[입고]")+"내역도 같이 삭제됩니다. <br>그래도 삭제 하시겠습니까?"),confirm(l,(function(t){t&&(e.val(),n.delete({sioSeq:a.sioSeq,sSeq:a.sSeq},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}})))}))})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())}));new a(n._const,{ctl:"place",cmd:"nmList",cpType:"B",useYn:"Y"},{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=cpSeq]",l),n=t.data;for(let a=0;a<n.length;a++){let n=t.data[a],l=$("<option />");l.val(n.cpSeq).text(n.cpNm),e.append(l)}}else alert(t.message)})),$("input[name=searchWord]",l).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",nmOnly:"Y",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let e={};return n._utils.checkEmptyNull(t.sCode)?e.label=t.sNm:e.label="["+t.sCode+"] "+t.sNm,e.value=t.sNm,e.sSeq=t.sSeq,e}));e(a)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=sSeq]",l).val(e.item.sSeq)},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-3))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.load({sioSeq:t.sioSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=t.data;if("N"==e.sioInsideYn){let t=$("template#stockInoutViewDiv");n._parent.openLayer(t.html(),n.stockInoutViewLayer,e)}else{let t=$("template#stockInoutInsideViewDiv");n._parent.openLayer(t.html(),n.stockInoutInsideViewLayer,e)}}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"searchData",(()=>{let t=this._code.find(".pageInfoTfoot"),e=t.find("select[name=rowsPerPage]").val(),n=t.find("input[name=page]").val(),a=this._code.find(".searchWrapArea"),l=a.find("input[name=orderculumn]").val(),o=a.find("input[name=orderby]").val(),i=a.find("input[name=searchColumn]").val(),s=a.find("input[name=searchWord]").val(),r=a.find("input[name=startDt]").val(),c=a.find("input[name=endDt]").val();return{page:n,rows:e,orderColumn:l,orderType:o,searchColumn:i,searchWord:s,cpSeq:a.find("select[name=cpSeq]").val(),skCd:a.find("select[name=skCd]").val(),sioInsideYn:a.find("select[name=sioInsideYn]").val(),sioKind:a.find("select[name=sioKind]").val(),startDt:r,endDt:c}})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=t.searchData();t.list(o,(function(o){let i=t._code.find(".dataListTable tbody"),s=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),i.empty();let r=0,c=0;if(null!=o&&o.length>0)for(let e in o)0==e&&($(".inTotalPrice",l).text(t._utils.numberWithCommas(o[e].inTotalPrice)),$(".outTotalPrice",l).text(t._utils.numberWithCommas(o[e].outTotalPrice)),r=o[e].totalCnt,c=Math.ceil(r/n)),t.display(i,o[e]);else $('<tr><td colspan="'+s.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(i);t._utils.mdiPaging(e.find(".pagenate"),r,n,c,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="○ ○";a="I"==e.sioKind?'<span style="color:#68C3C7;" title="입고">●</span> ○':' ○ <span style="color:#974ff3;" title="출고">●</span>';let l='<i class="fa-solid fa-right-left" title="내부이동" style="color:#1e991e;"></i>';"N"==e.sioInsideYn&&(l="외부");let o="border:1px solid #dedede;";"Y"==e.sioHoldYn&&(o+="color:#aaa;");let i=$("<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+">");i.append($('<td style="'+o+'"><input type="checkbox" class="vm" name="sioSeq" value="'+e.sioSeq+'"></td>')),i.append($('<td style="'+o+'" class="ac pl5" />').append(n._utils.dateformatStringToDate(e.sioDt))),i.append($('<td style="'+o+'" class="ac" />').append(l)),i.append($('<td style="'+o+'" class="ac" />').append(a)),i.append($('<td style="'+o+';" class="al" />').append(e.sNm)),i.append($('<td style="'+o+'" class="al" />').append(n._utils.nullTostring(e.sStandard,""))),i.append($('<td style="'+o+'" class="al" />').append(e.cpNm)),i.append($('<td style="'+o+'" class="ar" />').append(n._utils.numberWithCommas(e.sioCnt))),i.append($('<td style="'+o+'" class="ar" />').append(n._utils.numberWithCommas(e.sioUnitPrice))),i.append($('<td style="'+o+'" class="ar" />').append(n._utils.numberWithCommas(e.totalPrice))),i.append($('<td style="'+o+'" class="al" />').append(e.sioMemo)),i.append($('<td style="'+o+'" class="ac" />').append(e.eNm)),i.append($('<td style="'+o+'">'+e.creDate.substring(0,16)+"</td>")),i.append($('<td style="'+o+'"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="수정" style="font-size:14px;"></i></td>')),i.data("ROW",e),i.appendTo(t)})),e(this,"layerViewEvent",((t,e)=>{const n=this;n._utils.focusEvent($("input[name=sioCnt]",t),"comma"),n._utils.focusEvent($("input[name=sioUnitPrice]",t),"comma");let l=$(".inoutInfo",t),o=$(".dataListTable tbody",t);n.cpSeqSelect($("select[name=cpSeq]",l)),""==$("input[name=sioDt]",t).val()&&$("input[name=sioDt]",t).val(n._utils.currentDate()),$(".fa-solid.fa-square-plus",t).on("click",(function(){let e=$("select[name=sioKind]",t).val(),a=n._utils.serializeObject(l);if(a.cpNm=$("select[name=cpSeq] option:selected",l).text(),n._utils.checkEmptyNull(a.cpSeq))return void alert("저장소를 입력 선택 하십시요");if(n._utils.checkEmptyNull(a.sSeq)||n._utils.checkEmptyNull(a.sNm))return void alert("물품명을 입력 선택 하십시요");if("I"==e&&n._utils.checkEmptyNull(a.sioUnitPrice))return void alert("물품명 구매 단가를 입력하십시요");a.sioCnt=a.sioCnt??0,a.sioUnitPrice=a.sioUnitPrice??0,a.sioCnt=n._utils.convertNumber(a.sioCnt),a.sioUnitPrice=n._utils.convertNumber(a.sioUnitPrice),function(t,e){let a=$("<tr />");a.append($('<td class="al">'+e.sNm+"</td>")),a.append($('<td class="al">'+e.sStandard+"</td>")),a.append($('<td class="al">'+e.cpNm+"</td>")),a.append($('<td class="ar">'+n._utils.numberWithCommas(e.sioCnt)+"</td>")),a.append($('<td class="ar">'+n._utils.numberWithCommas(e.sioUnitPrice)+"</td>")),a.append($('<td class="ac" style="padding:0px;"><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus" style="color:#8071bb;font-size: 18px;"></i></a></td>')),t.append(a.data("ROW",e))}(o,a);let i=$("input,select",l);for(let t=0;t<i.length;t++)$(i[t]).val("")})),o.on("click",".fa-solid.fa-square-minus",(function(){let t=$(this).closest("tr");confirm("삭제 하시겠습니까?",(function(e){e&&t.remove()}))})),$("input[name=sNm]",t).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let e={};return n._utils.checkEmptyNull(t.sCode)?e.label=t.sNm+(n._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"):e.label="["+t.sCode+"] "+t.sNm+(n._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"),e.value=t.sNm,e.sSeq=t.sSeq,e.sStandard=t.sStandard,e.sPrice=t.sPrice,e}));e(a)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=sSeq]",l).val(e.item.sSeq),$("input[name=sStandard]",l).val(e.item.sStandard),$("input[name=sioUnitPrice]",l).val(n._utils.numberWithCommas(e.item.sPrice)),$("select[name=cpSeq]",l).trigger("focus")},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("select[name=cpSeq]",l).on("change",(function(){$("input[name=sioCnt]",l).trigger("focus")})),$("input[name=sioCnt]",t).on("keypress",(function(e){e.keyCode&&13==e.keyCode&&$("input[name=sioUnitPrice]",t).trigger("focus")})),$(".save",t).on("click",(function(e){let a=n._utils.serializeObject(t),l=$("tr",o),i=[];for(let t=0;t<l.length;t++){let e=$(l[t]).data("ROW");null!=e&&null!=e.sSeq&&i.push(e)}0!=i.length?n._utils.checkRequired(t)&&(a.inoutInfo=i,n.insertGroup(a,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)}))):alert("등록된 물품이 없습니다.")}))})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".save",e).text("등록"),this.layerViewEvent(e)})),e(this,"stockInoutInsideLayer",(t=>{let e=this,n=$("#"+t);$(".save",n).text("등록"),e._utils.focusEvent($("input[name=sioCnt]",n),"comma");let l=$(".inoutInfo",n),o=$(".dataListTable tbody",n);e.cpSeqSelect($("select[name=cpSeq]",l),void 0,(function(t){$("select[name=toCpSeq]",l).append($("select[name=cpSeq] option",l).clone())})),""==$("input[name=sioDt]",n).val()&&$("input[name=sioDt]",n).val(e._utils.currentDate()),$(".fa-solid.fa-square-plus",n).on("click",(function(){let t=e._utils.serializeObject(l);if(t.cpNm=$("select[name=cpSeq] option:selected",l).text(),t.toCpNm=$("select[name=cpSeq] option:selected",l).text(),e._utils.checkEmptyNull(t.cpSeq))return void alert("출고할 저장소를 입력 선택 하십시요");if(e._utils.checkEmptyNull(t.toCpSeq))return void alert("입고할 저장소를 입력 선택 하십시요");if(t.cpSeq==t.toCpSeq)return void alert("입/출고 저장소가 동일합니다.");if(e._utils.checkEmptyNull(t.sSeq)||e._utils.checkEmptyNull(t.sNm))return void alert("물품명을 입력 선택 하십시요");t.sioCnt=t.sioCnt??0,t.sioCnt=e._utils.convertNumber(t.sioCnt),function(t,n){let a=$("<tr />");a.append($('<td class="al">'+n.sNm+"</td>")),a.append($('<td class="al">'+n.sStandard+"</td>")),a.append($('<td class="ar">'+e._utils.numberWithCommas(n.sioCnt)+"</td>")),a.append($('<td class="al" style="border-right:0px;">'+n.cpNm+"</td>")),a.append($('<td class="al" style="border-left:0px;border-right:0px;">▶</td>')),a.append($('<td class="al" style="border-left:0px;">'+n.toCpNm+"</td>")),a.append($('<td class="ac" style="padding:0px;"><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus" style="color:#8071bb;font-size: 18px;"></i></a></td>')),t.append(a.data("ROW",n))}(o,t);let n=$("input,select",l);for(let e=0;e<n.length;e++)$(n[e]).val("")})),o.on("click",".fa-solid.fa-square-minus",(function(){let t=$(this).closest("tr");confirm("삭제 하시겠습니까?",(function(e){e&&t.remove()}))})),$("input[name=sNm]",n).autocomplete({source:function(t,n){let l={ctl:"stock",cmd:"stockNmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let n={};return e._utils.checkEmptyNull(t.sCode)?n.label=t.sNm+(e._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"):n.label="["+t.sCode+"] "+t.sNm+(e._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"),n.value=t.sNm,n.sSeq=t.sSeq,n.sStandard=t.sStandard,n}));n(a)}else n([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=sSeq]",l).val(e.item.sSeq),$("input[name=sStandard]",l).val(e.item.sStandard),$("input[name=sioCnt]",l).trigger("focus")},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".save",n).on("click",(function(t){let a=e._utils.serializeObject(n),l=$("tr",o),i=[];for(let e=0;e<l.length;e++){let t=$(l[e]).data("ROW");null!=t&&null!=t.sSeq&&i.push(t)}0!=i.length?e._utils.checkRequired(n)&&(a.inoutInfo=i,e.insertInsideGroup(a,(function(t){0==t.code?(e.retrieve(),$(".btnClosePopLayer",n).trigger("click"),alert("등록 되었습니다.")):alert(t.message)}))):alert("등록된 물품이 없습니다.")}))})),e(this,"stockInoutViewLayer",((t,e)=>{let n=this,a=$("#"+t);$(".title",a).text(e.sNm+(n._utils.checkEmptyNull(e.sStandard)?"":"("+e.sStandard+")")+" 수정"),$(".save",a).text("수정"),n._utils.focusEvent($("input[name=sioCnt]",a),"comma"),n._utils.focusEvent($("input[name=sioUnitPrice]",a),"money"),n.cpSeqSelect($("select[name=cpSeq]",a),e.cpSeq),a.data(e),n._utils.unSerializeObject(a,e),$(".save",a).on("click",(function(t){let e=n._utils.serializeObject(a),l=a.data();n._utils.checkRequired(a)&&(e.sioSeq=l.sioSeq,e.sSeq=l.sSeq,n.update(e,(function(t){0==t.code?(n.retrieve(),$(".btnClosePopLayer",a).trigger("click"),alert("수정 되었습니다.")):alert(t.message)})))}))})),e(this,"stockInoutInsideViewLayer",((t,e)=>{let n=this,a=$("#"+t);$(".title",a).text(e.sNm+(n._utils.checkEmptyNull(e.sStandard)?"":"("+e.sStandard+")")+" 내부이동 수정"),$(".save",a).text("수정"),n._utils.focusEvent($("input[name=sioCnt]",a),"comma"),a.data(e),n.cpSeqSelect($("select[name=cpSeq]",a),e.cpSeq,(function(t){$("select[name=toCpSeq]",a).append($("select[name=cpSeq] option",a).clone()),$("select[name=toCpSeq]",a).val(e.toCpSeq)})),n._utils.unSerializeObject(a,e),$(".save",a).on("click",(function(t){let e=n._utils.serializeObject(a),l=a.data();if(n._utils.checkRequired(a)){if(n._utils.checkEmptyNull($("select[name=cpSeq]",a).val()))return void alert("출고지를 지정하십시요");if(n._utils.checkEmptyNull($("select[name=toCpSeq]",a).val()))return void alert("입고지를 지정하십시요");e.sioSeq=l.sioSeq,e.sSeq=l.sSeq,n.insideUpdate(e,(function(t){0==t.code?(n.retrieve(),$(".btnClosePopLayer",a).trigger("click"),alert("수정 되었습니다.")):alert(t.message)}))}}))})),e(this,"cpSeqSelect",((t,e,n)=>{new a(this._const,{ctl:"place",cmd:"nmList",cpType:"B"},{wapi:"user/ws",spinner:!1}).ajaxformdata((function(a){if(0==a.code){let l=a.data;for(let n=0;n<l.length;n++)t.append('<option value="'+l[n].cpSeq+'"'+(null!=e&&e==l[n].cpSeq?" selected":"")+">"+l[n].cpNm+"</option>");null!=n&&"function"==typeof n&&n(l)}else alert(a.message)}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=[];l.push({name:"일자",key:"sioDt",width:10,align:"center"}),l.push({name:"유형",key:"sioInsideYnNm",width:8,align:"center"}),l.push({name:"구분",key:"sioKindNm",width:8,align:"center"}),l.push({name:"자재명",key:"sNm",width:25,align:"left"}),l.push({name:"저장소",key:"cpNm",width:25,align:"left"}),l.push({name:"규격",key:"sStandard",width:30,align:"left"}),l.push({name:"수량",key:"sioCnt",width:10,align:"right"}),l.push({name:"단가",key:"sioUnitPrice",width:10,align:"right"}),l.push({name:"총금액",key:"totalPrice",width:15,align:"right"}),l.push({name:"메모",key:"sioMemo",width:50,align:"left"}),l.push({name:"등록자",key:"eNm",width:10,align:"center"}),l.push({name:"등록일시",key:"creDate",width:20,align:"center"});let o=t.searchData();o.rows=9999,o.page=1,t.list(o,(function(i){if(!(null!=i&&i.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in l)e.push(l[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=l[n-1].width}));for(let n in i){let e=[];for(let t in l)e.push(i[n][l[t].key]?i[n][l[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,l[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+o.startDt+"-"+o.endDt+")").then((t=>{}))}))})),e(this,"list",((t,e)=>{let n={ctl:"stock",cmd:"inoutList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"stock",cmd:"inoutLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"stock",cmd:"inoutDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"stock",cmd:"inoutInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insertGroup",((t,e)=>{let n={ctl:"stock",cmd:"inoutInsertGroup"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insertInsideGroup",((t,e)=>{let n={ctl:"stock",cmd:"inoutInsertInsideGroup"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"stock",cmd:"inoutUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insideUpdate",((t,e)=>{let n={ctl:"stock",cmd:"inoutInsideUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null,this._eqSeq=null,this._eqNm=null}},R=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#placeDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=cpSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({cpSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let a=n._code.find(".searchWrapArea"),l=n._code.find(".dataHeadTable thead"),o=n._code.find(".pageInfoTfoot"),i=n._code.find(".dataListTable");a.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),l.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=a.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",a.find("input[name=orderculumn]").val(t),a.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(a),l.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(a,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let s=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(s)||o.find("select[name=rowsPerPage]").val(s),o.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),o.find("input[name=page]").val("1"),n.retrieve()})),i.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");n.load({cpSeq:t.cpSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=$("template#placeDiv");n._parent.openLayer(e.html(),n.reloadLayer,t.data)}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val();l.find("select[name=searchColumn]").val();let s=l.find("input[name=searchWord]").val(),r={page:a,rows:n,orderColumn:o,orderType:i,searchColumn:"cpNm",searchWord:s,cpType:"B"};t.list(r,(function(l){let o=t._code.find(".dataListTable tbody"),i=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),o.empty();let s=0,r=0;if(null!=l&&l.length>0)for(let e in l)0==e&&(s=l[e].totalCnt,r=Math.ceil(s/n)),t.display(o,l[e]);else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);t._utils.mdiPaging(e.find(".pagenate"),s,n,r,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a=$("<tr"+("Y"==e.eOutYn?' style="color:#808080"':"")+">");a.append($('<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="cpSeq" value="'+e.cpSeq+'"></td>')),a.append($('<td style="border:1px solid #dedede;" class="al pl5" />').append(n._utils.nullTostring(e.cpNm,""))),a.append($('<td style="border:1px solid #dedede;" class="al" />').append(n._utils.nullTostring(e.cpAddr,"")+" "+n._utils.nullTostring(e.cpAddrDetail,""))),a.append($('<td style="border:1px solid #dedede;" class="ac" />').append(n._utils.formatPhoneNumber(e.cpTel))),"N"==e.useYn?a.append($('<td class="txt_red">'+n._utils.nullTostring(e.useYn,"")+"</td>")):a.append($('<td style="border:1px solid #dedede;">'+n._utils.nullTostring(e.useYn,"")+"</td>")),a.append($('<td style="border:1px solid #dedede;">'+e.creDate.substring(0,16)+"</td>")),a.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="수정" style="font-size:14px;"></i></td>')),a.data("ROW",e),a.appendTo(t)})),e(this,"list",((t,e)=>{let n={ctl:"place",cmd:"list"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"place",cmd:"load"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"place",cmd:"delete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"layerViewEvent",((t,e)=>{const n=this;n._utils.focusEvent($("input[name=cpTel]",t),"tel"),$("i.fa-solid.fa-location-dot",t).on("click",(function(e){new daum.Postcode({oncomplete:function(e){let n=e.roadAddress;$("input[name=cpZipcode]",t).val(e.zonecode),$("input[name=cpAddr]",t).val(n),$("input[name=cpAddrDetail]",t).trigger("focus")}}).open()})),$(".save",t).on("click",(function(e){let a=$("input[name=cpNm]",t).val(),l=$("input[name=cpTel]",t).val(),o=$("input[name=cpZipcode]",t).val(),i=$("input[name=cpAddr]",t).val(),s=$("input[name=cpAddrDetail]",t).val(),r=$("textarea[name=cpMemo]",t).val(),c=$("select[name=useYn]",t).val(),d=$("input[name=sort]",t).val();if(n._utils.checkRequired(t)){n._utils.checkEmptyNull(l)||(l=l.replace(/-/g,""));let e={cpNm:a,cpType:"B",cpTel:l,cpZipcode:o,cpAddr:i,cpAddrDetail:s,cpMemo:r,useYn:c,sort:d},p=t.data();null!=p&&(e.cpSeq=p.cpSeq),null==e.cpSeq?n.insert(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)})):n.update(e,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정되었습니다.")):alert("수정에 실패하였습니다.")}))}}))})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".save",e).text("등록"),this.layerViewEvent(e)})),e(this,"reloadLayer",((t,e)=>{let n=$("#"+t);$(".title",n).text(+e.cpNm+" 수정"),$(".save",n).text("수정"),n.data(e),this.layerViewEvent(n,e),this._utils.unSerializeObject(n,e)})),e(this,"insert",((t,e)=>{let n={ctl:"place",cmd:"insert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"place",cmd:"update"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._employeeSel=null,this._eqSeq=null,this._eqNm=null}},M=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._id=t,n._code=$(`#${t}`),n._data=e||{};let l=$(".f_lt",n._code),o=$(".f_rt",n._code),i=$(".searchWrap",n._code);$(".dataHeadTable thead",o);let s=$(".pageInfoTfoot",o),r=$(".dataListTable",o);i.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),$(".btnSearchCall",i).on("click",(function(t){n._code.find("input[name=page]").val(1),i.find("input[name=cuSeq]").val(""),n.retrieve(),n.payRetrieve(),t.stopPropagation()})),$(".btnExcelDownload",i).on("click",(function(t){n.excelDownload()})),n._code.find(".btnCategoryDelete").on("click",(function(t){t.stopPropagation();let e=$(".dataListTable tbody",l).find("input[name=scSeq]:checked");if(0==e.length)return void alert("삭제할 대상을 선택 하십시오");if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=e.closest("tr").data("ROW");function o(){n.categoryDelete({scSeq:a.scSeq},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{$("input[name=chckAll]",l).prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}confirm("삭제하시겠습니까?",(function(t){if(t){let t=n.getCategoryInfo(a.scSeq);null!=t&&(t.node.length>0?confirm("하위 분류가 존재합니다.</br> 그래도 삭제하시겠습니까?",(function(t){t&&o()}),"하위 분류까지 삭제"):o())}}))})),n._code.find(".btnStockDelete").on("click",(function(t){t.stopPropagation();let e=$(".dataListTable tbody",o).find("input[name=sclSeq]:checked");if(0==e.length)return void alert("삭제할 대상을 선택 하십시오");if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);return}let a=e.closest("tr").data("ROW");confirm("삭제하시겠습니까?",(function(t){t&&n.stockDelete({sclSeq:a.sclSeq},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{$("input[name=chckAll]",o).prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}))})),i.find("input[name=searchWord]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=startDt]",i).val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-3))),$("input[name=endDt]",i).val(n._utils.dateformatKorDate(new Date)),n._defaultData=n._utils.serializeObject(i),$(".btnCategoryCreate",l).on("click",(function(){let t=$("template#stockCategoryViewDiv");n._parent.openLayer(t.html(),n.layerCategoryCreateEvent)})),$(".dataHeadTable thead",l),$(".pageInfoTfoot",l);let c=n._code.find(".f_lt .dataListTable");n._const.__MANAGER_YN,c.on("click",".categoryCreate",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#stockCategoryViewDiv");n._parent.openLayer(e.html(),n.layerCategoryCreateEvent,t)})),c.on("click",".categoryNm",(function(){let t=$(this).closest("tbody"),e=$(this).closest("tr"),a=e.data("ROW");t.find("td").css({background:"","font-weight":""}),e.find("td").css({background:"#d3e1ff","font-weight":"bold"}),s.find("input[name=scSeq]").val(a.scSeq),s.find("input[name=page]").val(1),n._scSeq=a.scSeq,n.stockRetrieve()})),c.on("click",".btnInfoEdit",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#stockCategoryViewDiv");n._parent.openLayer(e.html(),n.layerCategoryEditEvent,t)})),n.retrieve(),$("input[name=chckAll]",o).on("click",(function(t){t.stopPropagation();let e=r.find("input[name=lpSeq]"),n=$(this).is(":checked");for(let a=0;a<e.length;a++){let t=$(e[a]);t.is(":checked")!=n&&t.trigger("click")}})),o.on("click",".btnStockAdd",(function(){let t=$("template#categoryStockInsertDiv");n._parent.openLayer(t.html(),n.layerStockInsertEvent)}));let d=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(d)||s.find("select[name=rowsPerPage]").val(d),s.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),s.find("input[name=page]").val("1"),n.retrieve()})),n._utils.mdiPaging(s.find(".pagenate"),0,20,0,10,1,n.goPage)})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".f_lt .pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrap"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("input[name=searchWord]").val(),d=l.find("select[name=lKind]").val(),p={cuSeq:void 0,startDt:o?o.replace(/-/g,""):"",endDt:i?i.replace(/-/g,""):"",page:a,rows:n,orderColumn:s,orderType:r,lKind:d,searchColumn:"cuNm",searchWord:c};t.categroyTreelist(p,(function(e){let n=t._code.find(".f_lt .dataListTable tbody"),a=t._code.find(".f_lt .dataHeadTable thead");if($(".searchRunTime",t._code).text(t._utils.currentTime()),n.empty(),null!=e&&e.length>0){for(let a in e)0==a&&e[a].totalCnt,t.display(n,e[a]);t._categoryInfo=e,$(".categoryNm:first",n).trigger("click")}else $('<tr><td colspan="'+a.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(n)}))})),e(this,"display",((t,e)=>{const n=this;let a="";for(let i=0;i<e.scLevel;i++)i==e.scLevel-1?a+='<span style="width:15px;display: inline-block;"></span><span style="width:15px;display: inline-block;"><i class="fa-solid fa-arrow-right"></i></span>':a+='<span style="width:15px;display: inline-block;"></span>';let l='<i class="fa-solid fa-folder-plus cursorPointer categoryCreate" style="color:#dbd581;font-size:15px;" title="하위 구조 만들기"></i>';console.log(e),e.scLevel>=2&&(l="");let o=$("<tr/>");if(o.append($("<td></td>").append($('<input type="checkbox" class="vm" name="scSeq" value="'+e.scSeq+'"/>'))),o.append($('<td class="al pl5 pr5 " style="border-right:0px;">'+a+'<span class="categoryNm cursorPointer" style="display: inline-block;">'+n._utils.nullTostring(e.scNm,"")+"</span></td>")),o.append($('<td class="ac" style="border-left:0px;border-right:0px;">'+l+"</td>")),o.append($('<td class="ac pl0 pr0 " style="border-left:0px;"><a href="javascript:void(0);" class="btnInfoEdit" title="수정"><i class="fa-regular fa-pen-to-square cursorPointer" style="color:font-size: 14px;"></i></a></td>')),o.append($('<td class="ar pl5 pr5">'+n._utils.numberWithCommas(e.itemCnt)+"</td>")),o.append($('<td class="al pl5 pr5">'+(n._utils.checkEmptyNull(e.scMemo)?"":e.scMemo)+"</td>")),o.data("ROW",e),o.appendTo(t),null!=e.node&&e.node.length>0)for(let i=0;i<e.node.length;i++)n.display(t,e.node[i])})),e(this,"layerCategoryCreateEvent",((t,e)=>{let n=this,a=$(`#${t}`);$(".title",a).text("등록"),null==e?$(".parentPath",a).text("/"):($(".parentPath",a).text(e.path+"/"),$("input[name=scParentSeq]",a).val(e.scSeq)),$(".save",a).on("click",(function(){let t=n._utils.serializeObject(a);""==t.scNm&&alert("분류명을 입력하십시요"),n._utils.checkEmptyNull(t.scSeq)?n.categoryInsert(t,(function(t){0==t.code?($(".btnClosePopLayer",a).trigger("click"),n.retrieve(),alert("등록되었습니다.")):alert(t.message)})):alert("상위 정보를 찾을 수 없습니다.")}))})),e(this,"layerCategoryEditEvent",((t,e)=>{let n=this,a=$(`#${t}`);$(".title,.save",a).text("수정"),null!=e?($(".parentPath",a).text(e.path+"/"),n._utils.unSerializeObject(a,e),$(".save",a).on("click",(function(){let t=n._utils.serializeObject(a);""==t.scNm&&alert("분류명을 입력하십시요"),n.categoryUpdate(t,(function(t){0==t.code?($(".btnClosePopLayer",a).trigger("click"),n.retrieve(),alert("수정되었습니다.")):alert(t.message)}))}))):alert("분류 정보가 없습니다.")})),e(this,"stockRetrieve",(t=>{const e=this;let n=e._code.find(".f_rt .pageInfoTfoot"),a=n.find("select[name=rowsPerPage]").val(),l=n.find("input[name=page]").val();e._code.find(".searchWrap");let o=n.find("input[name=orderculumn]").val(),i=n.find("input[name=orderby]").val(),s=n.find("input[name=scSeq]").val(),r={page:l,rows:a,orderColumn:o,orderType:i,searchColumn:"sNm",scSeq:s};e.stockList(r,(function(t){let o=e._code.find(".f_rt .dataListTable tbody"),i=e._code.find(".f_rt .dataHeadTable thead");o.empty();let s=0,r=0;if(null!=t&&t.data.length>0){let n=t.data;for(let t in n)0==t&&(s=n[t].totalCnt,r=Math.ceil(s/a)),e.stockDisplay(o,n[t]);let l=$("tr",o);for(let t=0;t<l.length;t++)$($(l[t]).find("td").eq(8)).css("border-right","1px solid #dedede !important;")}else $('<tr><td colspan="'+i.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(o);e._utils.mdiPaging(n.find(".pagenate"),s,a,r,10,l,e.goPage)}))})),e(this,"stockDisplay",((t,e)=>{const n=this;let a=e.placeInfo,l="";for(let s=0;s<a.length;s++){let t=a[s];l+='<span style="display:inline-block;width:100%;">'+t.cpNm+" : <strong>"+n._utils.numberWithCommas(t.splCnt)+"</strong></span>"}let o=[];for(let s=0;s<e.kindInfo.length;s++)o.push(e.kindInfo[s].skCdNm);let i=$("<tr/>");i.append($("<td></td>").append($('<input type="checkbox" class="vm" name="sclSeq" value="'+e.sclSeq+'"/>'))),i.append($('<td class="ac">'+o.join(", ")+"</td>")),i.append($('<td class="al">'+e.sNm+"</td>")),i.append($('<td class="al pl5 pr5"></td>').append(e.sStandard)),i.append($('<td class="ar pl5 pr5"/>'+n._utils.numberWithCommas(e.sCnt,"0")+"</td>")),i.append($('<td class="al"/>'+l+"</td>")),i.append($('<td class="al"/>'+e.sMemo+"</td>")),i.data("ROW",e),i.appendTo(t)})),e(this,"layerStockInsertEvent",(t=>{let e=this,n=$(`#${t}`),l=$(".dataListTable tbody",n);$("input[name=sNm]",n).autocomplete({source:function(t,n){let l={ctl:"stock",cmd:"stockNmSearch",searchWord:this.term};new a(e._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let n={};return e._utils.checkEmptyNull(t.sCode)?n.label=t.sNm+(e._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"):n.label="["+t.sCode+"] "+t.sNm+(e._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"),n.value=t.sNm,n.sSeq=t.sSeq,n.sStandard=t.sStandard,n.v=t,n}));n(a)}else n([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=sSeq]",n).val(e.item.v.sSeq),$("input[name=sCode]",n).val(e.item.v.sCode),$("input[name=sStandard]",n).val(e.item.v.sStandard)},minLength:e._parent._autocompleteLength,delay:e._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".stockAdd",n).on("click",(function(){let t=e._utils.serializeObject($(".stockInfo",n));null!=t.sSeq?(!function(t){let e=$("tr",l);for(let l=0;l<e.length;l++){let n=$(e[l]).data("ROW");if(null==n||null==n.sSeq)$(e[l]).remove();else if(n.sSeq==t.sSeq)return alert("이미 등록되어 있습니다."),!1}let n='<a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus stockDel" style="color:#8071bb;font-size: 18px;"></i></a>',a=$("<tr/>");a.append($('<td class="al pl5 pr5 " style="border-right:0px;">'+t.sNm+"</td>")),a.append($('<td class="al pl5 pr5 " style="border-right:0px;">'+t.sStandard+"</td>")),a.append($('<td class="ac pl0 pr0 " style="border-right:0px;">'+n+"</td>")),a.data("ROW",t),a.appendTo(l)}(t),$($(this).closest("tr")).find("input").val("")):alert("자재명 또는 코드를 입력하여 선택하십시요")})),l.on("click",".stockDel",(function(){$(this).closest("tr").remove()})),n.find("input[name=sCode],input[name=sNm]").on("keypress",(function(t){13==t.keyCode&&""!=$(this).val()&&$(".stockAdd",n).trigger("click")})),n.on("click",".save",(function(){let t=$("tr",l),a={sSeqs:[],scSeq:e._scSeq};for(let e=0;e<t.length;e++){let n=$(t[e]).data("ROW");a.sSeqs.push(n.sSeq)}e.stockInsert(a,(function(t){0==t.code?(alert("등록 되었습니다."),e.stockRetrieve(),$(".btnClosePopLayer",n).trigger("click")):alert(t.message)}))}))})),e(this,"getCategoryInfo",(t=>{let e=this._categoryInfo;for(let a=0;a<e.length;a++){if(e[a].scSeq==t)return e[a];if(null!=e[a].node&&e[a].node.length>0){let l=n(e[a].node,t);if(null!=l)return l}}function n(t,e){for(let a=0;a<t.length;a++){if(t[a].scSeq==e)return t[a];if(null!=t[a].node&&t[a].node.length>0){let l=n(t[a].node,e);if(null!=l)return l}}}return null})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=t._code.find(".searchWrapArea"),o=l.find("input[name=startDt]").val(),i=l.find("input[name=endDt]").val(),s=l.find("input[name=orderculumn]").val(),r=l.find("input[name=orderby]").val(),c=l.find("select[name=oStatus]").val(),d=l.find("input[name=searchWord]").val(),p=l.find("input[name=oMarkYn]:checked").val(),u=[];u.push({name:"상태",key:"oStatusNm",width:12,align:"center"}),u.push({name:"업체명",key:"cuNm",width:20,align:"left"}),u.push({name:"파일명",key:"oFileNm",width:50,align:"left"}),u.push({name:"규격",key:"oPaperSize",width:10,align:"center"}),u.push({name:"주문수량",key:"oCnt",width:10,align:"right"}),u.push({name:"입고여부",key:"istInStatusNm",width:10,align:"center"}),u.push({name:"공정",key:"spNm",width:10,align:"center"}),u.push({name:"작업명",key:"wNm",width:20,align:"left"}),u.push({name:"면(Y/N:앞/뒤)",key:"wFrontYn",width:15,align:"center"}),u.push({name:"완료수량",key:"wEndCnt",width:10,align:"rigth"}),u.push({name:"비고",key:"wMemo",width:70,align:"left"}),u.push({name:"등록일시",key:"creDate",width:20,align:"center"});let m={cuSeq:void 0,startDt:o.replace(/-/g,""),endDt:i.replace(/-/g,""),oMarkYn:p,page:1,rows:9999,orderColumn:s,orderType:r,oStatus:c,searchColumn:"cuNm",searchWord:d};t.list(m,(function(l){if(!(null!=l&&l.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in u)e.push(u[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=u[n-1].width}));for(let n in l){let e=[];for(let t in u)e.push(l[n][u[t].key]?l[n][u[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,u[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+m.startDt+"-"+m.endDt+")").then((t=>{}))}))})),e(this,"purge",(()=>{console.log("dashboardOrderController purge")})),e(this,"reload",(()=>{console.log("dashboardOrderController reload")})),e(this,"categroyTreelist",((t,e)=>{let n={ctl:"stock",cmd:"categoryTreeList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"categoryInsert",((t,e)=>{let n={ctl:"stock",cmd:"categoryInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){e(t)}))})),e(this,"categoryUpdate",((t,e)=>{let n={ctl:"stock",cmd:"categoryUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!document.fullscreenElement}).ajaxformdata((function(t){e(t)}))})),e(this,"categoryDelete",((t,e)=>{let n={ctl:"stock",cmd:"categoryDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"stockList",((t,e)=>{let n={ctl:"stock",cmd:"categoryStockList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"stockInsert",((t,e)=>{let n={ctl:"stock",cmd:"categoryLinkInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"stockDelete",((t,e)=>{let n={ctl:"stock",cmd:"categoryLinkDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._scSeq=null,this._categoryInfo=null}},z=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{};let l=2023,o=(new Date).getFullYear();n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#stockDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnAdjust").on("click",(function(t){let e=$("template#stockAdjustDiv");n._parent.openLayer(e.html(),n.stockAdjustDiv),t.stopPropagation()})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=sSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({sSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}}));else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let i=n._code.find(".searchWrapArea"),s=n._code.find(".dataHeadTable thead"),r=n._code.find(".pageInfoTfoot"),c=n._code.find(".dataListTable");i.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())}));let d=$("select[name=yyyy]",i);for(;l<=o;l++)d.append('<option value="'+l+'"'+(l==o?" selected":"")+">"+l+"</option>");new a(n._const,{ctl:"place",cmd:"nmList",cpType:"B",useYn:"Y"},{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let e=$("select[name=cpSeq]",i),n=t.data;for(let a=0;a<n.length;a++){let n=t.data[a],l=$("<option />");l.val(n.cpSeq).text(n.cpNm),e.append(l)}}else alert(t.message)})),$(".btnStockFinish",i).on("click",(function(){let t={yyyy:$("select[name=yyyy]",i).val()},e=$("template#stockFinishInsert");n._parent.openLayer(e.html(),n.stockFinishInsertEvent,t)})),$(".btnStockFinishCancel",i).on("click",(function(){let t=$("template#stockFinishCancel");n._parent.openLayer(t.html(),n.stockFinishCancelEvent,n._info)})),$("input[name=searchWord]",i).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",nmOnly:"Y",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.sNm,value:t.sNm}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),s.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=i.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",i.find("input[name=orderculumn]").val(t),i.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(i),s.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(i,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let p=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(p)||r.find("select[name=rowsPerPage]").val(p),r.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),r.find("input[name=page]").val("1"),n.retrieve()})),c.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW"),e=$("template#stockAdjustDiv");n._finishPlace=t,n._parent.openLayer(e.html(),n.stockAdjustViewDiv,t)})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"searchData",(()=>{let t=this._code.find(".pageInfoTfoot"),e=t.find("select[name=rowsPerPage]").val(),n=t.find("input[name=page]").val(),a=this._code.find(".searchWrapArea"),l=a.find("input[name=orderculumn]").val(),o=a.find("input[name=orderby]").val();a.find("select[name=searchColumn]").val();let i=a.find("input[name=searchWord]").val(),s=a.find("select[name=cpSeq]").val(),r=a.find("select[name=skCd]").val(),c=a.find("select[name=stSeq]").val();return{page:n,rows:e,orderColumn:l,orderType:o,searchColumn:"sNm",searchWord:i,cpSeq:s,stSeq:c,skCd:r,stSeq:c,yyyy:a.find("select[name=yyyy]").val()}})),e(this,"retrieve",(()=>{const t=this;let e=t._code.find(".pageInfoTfoot"),n=e.find("select[name=rowsPerPage]").val(),a=e.find("input[name=page]").val(),l=t._code.find(".searchWrapArea"),o=l.find("input[name=orderculumn]").val(),i=l.find("input[name=orderby]").val();l.find("select[name=searchColumn]").val();let s=l.find("input[name=searchWord]").val(),r=l.find("select[name=cpSeq]").val(),c=l.find("select[name=skCd]").val(),d=l.find("select[name=stSeq]").val(),p=l.find("select[name=yyyy]").val(),u={page:a,rows:n,orderColumn:o,orderType:i,searchColumn:"sNm",searchWord:s,cpSeq:r,stSeq:d,skCd:c,yyyy:p};t._yyyy=p,t.list(u,(function(o){let i=t._code.find(".dataListTable tbody"),s=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),i.empty();let r=0,c=0;if(null!=o&&o.length>0){for(let e in o)0==e&&($(".totalPrice",l).text(t._utils.numberWithCommas(o[e].totalPrice)),r=o[e].totalCnt,c=Math.ceil(r/n),t._info=o[e],t._utils.checkEmptyNull(o[e].sfSeq)?($(".btnStockFinish",l).show(),$(".btnStockFinishCancel",l).hide()):($(".btnStockFinish",l).hide(),$(".btnStockFinishCancel",l).show())),t.display(i,o[e]);t._utils.tbodyMerge(i,[0,1,2,3,4,5],"sSeq")}else $('<tr><td colspan="'+s.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(i);t._utils.mdiPaging(e.find(".pagenate"),r,n,c,10,a,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="일반";"Y"==e.sMarkYn&&(a='<i class="fa-solid fa-check" title="주요자재"></i>');let l="";"Y"==e.sfcHoldYn?l="마감":(l="-",e.sfpcAujustCnt>0&&(l='<i class="fa-solid fa-magnifying-glass cursorPointer btnOpenInfo" title="조정 내역 조회"></i>'));let o=$("<tr />");o.append($('<td class="'+("Y"==e.sMarkYn?"txt_red":"")+'">'+a+'<input type="hidden" name="sSeq" value="'+e.sSeq+'"></td>')),o.append($('<td style="border:1px solid #dedede;" class="al pl5" />').append(n._utils.nullTostring(e.sNm,""))),o.append($('<td style="border:1px solid #dedede;" class="al" />').append(n._utils.nullTostring(e.sStandard,""))),o.append($('<td style="border:1px solid #dedede;" class="ar" />').append(n._utils.numberWithCommas(e.sfcCnt))),o.append($('<td style="border:1px solid #dedede;" class="ar" />').append(n._utils.numberWithCommas(e.sfcPrice))),o.append($('<td style="border:1px solid #dedede;" class="ar" />').append(n._utils.numberWithCommas(e.sTotalPrice))),o.append($('<td style="border:1px solid #dedede;" class="al" />').append(e.cpNm)),o.append($('<td style="border:1px solid #dedede;" class="ar" />').append(n._utils.numberWithCommas(e.sfpcCnt))),o.append($('<td style="border:1px solid #dedede;">'+l+"</td>")),o.data("ROW",e),o.appendTo(t)})),e(this,"stockAdjustEvent",((t,e)=>{const n=this;n._utils.focusEvent($("input[name=sioRealCnt]",t),"comma");let l=$(".inoutInfo",t);new a(n._const,{ctl:"place",cmd:"list",cpType:"B",rows:9999},{wapi:"user/ws",spinner:!1}).ajaxformdata((function(e){if(0==e.code){let n=$("select[name=cpSeq]",t),a=e.data;for(let t=0;t<a.length;t++)n.append('<option value="'+a[t].cpSeq+'">'+a[t].cpNm+"</option>")}else alert(e.message)}));let o=$(".dataListTable tbody",t);if($("select[name=cpSeq]",t).on("change",(function(){let e=$("input[name=sSeq]",t).val(),o=$(this).val(),i={ctl:"stock",cmd:"finishPlaceCntList",yyyy:n._yyyy,sSeq:e,cpSeq:o};new a(n._const,i,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code)if(0==t.data.length)$("input[name=splCnt]",l).val(0);else if(1==t.data.length)$("input[name=splCnt]",l).val(n._utils.numberWithCommas(t.data[0].splCnt));else for(let a=0;a<t.data.length;a++){let i=t.data[a];i.cpSeq==o&&i.sSeq==e&&$("input[name=splCnt]",l).val(n._utils.numberWithCommas(i.splCnt))}}))})),$("input[name=sNm]",t).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){return{label:t.sNm+(n._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"),value:t.sNm,sSeq:t.sSeq,sStandard:t.sStandard}}));e(a)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=sSeq]",l).val(e.item.sSeq),$("input[name=sStandard]",l).val(e.item.sStandard),$("select[name=cpSeq]",l).trigger("change").trigger("focus")},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".fa-solid.fa-square-plus",t).on("click",(function(){let e=$(".finishPlaceInfo",t),a=n._utils.serializeObject(e);if(a.cpNm=$("select[name=cpSeq] option:selected",e).text(),n._utils.checkEmptyNull(a.cpSeq))return void alert("저장소를 입력 선택 하십시요");if(a.sioRealCnt=a.sioRealCnt??0,a.splCnt=a.splCnt??0,a.splRealCnt=n._utils.convertNumber(a.splRealCnt),a.splCnt=n._utils.convertNumber(a.splCnt),a.splCnt==a.splRealCnt)return void alert("현재고량과 실재고량이 동일합니다.");i(o,a);let l=$("input,select",e);for(let t=0;t<l.length;t++)$(l[t]).val("")})),o.on("click",".fa-solid.fa-square-minus",(function(){let t=$(this).closest("tr"),e=t.data("ROW");null!=e&&null!=e.sioSeq?confirm("바로 삭제 처리 됩니다.<br/>그래도 삭제 하시겠습니까?",(function(a){if(a){let a={sioSeq:e.sioSeq,sSeq:e.sSeq};n.delete(a,(function(e){0==e.code?t.remove():alert(e.message)}))}})):confirm("삭제 하시겠습니까?",(function(e){e&&t.remove()}))})),null!=e&&e.length>0){let t=n._finishPlace.sfpcCnt;for(let n=e.length-1;n>=0;n--)e[n].splRealCnt=t,t="I"==e[n].sioKind?e[n].splRealCnt-e[n].sioCnt:e[n].splRealCnt+e[n].sioCnt,e[n].splCnt=t;for(let n=0;n<e.length;n++)i(o,e[n])}function i(t,e){let a=$("<tr />");a.append($('<td class="al">'+e.sNm+"</td>")),a.append($('<td class="al">'+e.sStandard+"</td>")),a.append($('<td class="al">'+e.cpNm+"</td>")),a.append($('<td class="ar" style="border-right:0px;">'+n._utils.numberWithCommas(e.splCnt)+"</td>")),a.append($('<td class="ac" style="border-right:0px;border-left:0px;">▶</td>')),a.append($('<td class="ar" style="border-left:0px;">'+n._utils.numberWithCommas(e.splRealCnt)+"</td>")),a.append($('<td class="ac" style="padding:0px;"><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus" style="color:#8071bb;font-size: 18px;"></i></a></td>')),t.append(a.data("ROW",e))}$(".save",t).on("click",(function(e){let a=n._utils.serializeObject(t);a.yyyy=n._yyyy;let l=$("tr",o),i=[];for(let t=0;t<l.length;t++){let e=$(l[t]).data("ROW");null!=e&&null!=e.cpSeq&&i.push(e)}0!=i.length?(a.adjustInfo=i,n.adJustinsert(a,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)}))):alert("저장소를 선택하여 실재고량을 등록 하십시요")}))})),e(this,"stockAdjustDiv",(t=>{let e=$("#"+t);$(".save",e).text("등록"),this.stockAdjustEvent(e)})),e(this,"stockAdjustViewDiv",((t,e)=>{let n=this,l=$("#"+t);$(".title",l).text(e.sNm+" 조정내역"),$(".mw_defalut",l).css("background","#b1d1e8"),$(".overflowYListdiv",l).css("height","103px"),$(".bottonWrap",l).remove(),$(".inoutInfo",l).remove(),l.data(e);let o={ctl:"stock",cmd:"finishAdjustList",cpSeq:e.cpSeq,sSeq:e.sSeq,yyyy:n._yyyy};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code&&(t.data.length>0?($(".btnClosePopLayer",l).on("click",(function(){n.retrieve()})),n.stockAdjustEvent(l,t.data)):alert(t.message))}))})),e(this,"stockFinishInsertEvent",((t,e)=>{let n=this,a=$(`#${t}`);$(".yeraFinish",a).text(n._yyyy+"년"),$(".eNm",a).text(n._const.__USER_NAME),a.on("click",".save",(function(){let t=$("input[name=sfPassword]",a).val(),l=$("input[name=sfPassword2]",a).val();n._utils.checkEmptyNull(t)?alert("마감 비밀번호를 입력하십시요"):t.length<5?alert("마감 비밀번호는 5자리 이상으로 입력하십시요"):t==l?(e.sfPassword=t,n.stockFinsh(e,(function(t){0==t.code?($(".btnClosePopLayer",a).trigger("click"),alert("마감처리 되었습니다."),n.retrieve()):alert(t.message)}))):alert("비밀번호가 정확하지 않습니다.")}))})),e(this,"stockFinishCancelEvent",((t,e)=>{let n=this,a=$(`#${t}`);$(".yeraFinish",a).text(n._yyyy+"년"),$(".eNm",a).text(e.eNm),$(".creDate",a).text(e.creDate),a.on("click",".save",(function(){let t=$("input[name=sfPassword]",a).val();n._utils.checkEmptyNull(t)?alert("마감 비밀번호를 입력하십시요"):(e.yyyy=n._yyyy,e.sfPassword=t,n.stockFinshCancel(e,(function(t){0==t.code?($(".btnClosePopLayer",a).trigger("click"),alert("해지 되었습니다."),n.retrieve()):alert(t.message)})))}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=[];l.push({name:"중요",key:"sMarkYn",width:5,align:"center"}),l.push({name:"자재명",key:"sNm",width:25,align:"left"}),l.push({name:"규격",key:"sStandard",width:30,align:"left"}),l.push({name:"총재고량",key:"sfcCnt",width:10,align:"right"}),l.push({name:"평균단가",key:"sfcPrice",width:12,align:"right"}),l.push({name:"총금액",key:"sTotalPrice",width:15,align:"right"}),l.push({name:"보관창고",key:"cpNm",width:50,align:"left"}),l.push({name:"수량",key:"sfpcCnt",width:10,align:"right"}),l.push({name:"마감",key:"holdYn",width:5,align:"center"});let o=t.searchData();o.rows=9999,o.page=1,t.list(o,(function(o){if(!(null!=o&&o.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in l)e.push(l[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=l[n-1].width}));for(let n in o){"Y"==o[n].sfcHoldYn?o[n].holdYn="Y":o[n].holdYn="N";let e=[];for(let t in l)e.push(o[n][l[t].key]?o[n][l[t].key]:"");a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,l[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+t._utils.currentDateTime()+")").then((t=>{}))}))})),e(this,"list",((t,e)=>{let n={ctl:"stock",cmd:"finishList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"delete",((t,e)=>{let n={ctl:"stock",cmd:"inoutDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"adJustinsert",((t,e)=>{let n={ctl:"stock",cmd:"finishPlaceAdjustInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"stockFinsh",((t,e)=>{let n={ctl:"stock",cmd:"finishInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"stockFinshCancel",((t,e)=>{let n={ctl:"stock",cmd:"finishDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._yyyy=null,this._finishPlace=null,this._info=null}},F=class{constructor(t,l,o,i){e(this,"init",((t,e)=>{const n=this;n._code=$(`#${t}`),n._data=e||{},n._code.find(".btnSearchCall").on("click",(function(t){n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve(),t.stopPropagation()})),n._code.find(".btnCreate").on("click",(function(t){let e=$("template#purchaseViewDiv");n._parent.openLayer(e.html(),n.initNewLayer),t.stopPropagation()})),n._code.find(".btnExcelDownload").on("click",(function(t){n.excelDownload()})),n._code.find(".btnStockInput").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=puSeq]:checked"),l=[];if(0==e.length)return void alert("입고처리할 대상을 선택 하십시오");if(e.length>0)for(let n=0;n<e.length;n++){let t=$(e[n]).closest("tr").data("ROW");l.push(t.puSeq)}let o={ctl:"stock",cmd:"purchaseItemList"};o.puSeqs=JSON.stringify(l),new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=$("template#purchaseStockInsertDiv");n._parent.openLayer(e.html(),n.purchaseStockInsertEvent,t.data)}else alert(t.message)}))})),n._code.find(".btnTransDelete").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=puSeq]:checked");if(0!=e.length)if(e.length>1){alert("삭제는 1건씩 가능 합니다."),n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1)}else"Y"!=$(e).closest("tr").data("ROW").puSendYn?confirm("삭제하시겠습니까?",(function(t){if(t){let t=e.val();n.delete({puSeq:t},(function(t){if(0==t.code)n.retrieve(),alert("삭제되었습니다");else{n._code.find("input[name=chckAll]").prop("checked",!1);for(let t in e)e[t].checked&&(e[t].checked=!1);alert(t.message)}}))}})):alert("발주된 대상은 삭제 할수 없습니다.");else alert("삭제할 대상을 선택 하십시오")})),n._code.find("input[name=chckAll]").on("click",(function(t){t.stopPropagation();let e=n._code.find(".dataListTable tbody").find("input[name=eqSeq]"),a=$(this).is(":checked");for(let n=0;n<e.length;n++){let t=$(e[n]);t.is(":checked")!=a&&t.trigger("click")}}));let l=n._code.find(".searchWrapArea"),o=n._code.find(".dataHeadTable thead"),i=n._code.find(".pageInfoTfoot"),s=n._code.find(".dataListTable");l.on("keypress","input[type=text]",(function(t){13==t.keyCode&&""!=$(this).val()&&(n._code.find(".pageInfoTfoot input[name=page]").val(1),n.retrieve())})),$("input[name=searchWord]",l).autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"C"};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=sNm]",l).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",nmOnly:"Y",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let e={};return n._utils.checkEmptyNull(t.sCode)?e.label=t.sNm:e.label="["+t.sCode+"] "+t.sNm,e.value=t.sNm,e}));e(a)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),l.find("input[name=startDt]").val(n._utils.dateformatKorDate(n._utils.addDays(new Date,-3))),l.find("input[name=endDt]").val(n._utils.dateformatKorDate(new Date)),o.on("click",".sortTd",(function(){let t=$(this).attr("column"),e=l.find("input[name=orderby]").val();e="DESC"==e?"ASC":"DESC",l.find("input[name=orderculumn]").val(t),l.find("input[name=orderby]").val(e),n._utils.tHeadOrderBy($(this),e),n.retrieve()})),n._defaultData=n._utils.serializeObject(l),o.on("click",".fa-rotate-right",(function(){let t=$(this).closest("tr");n._utils.unSerializeObject(l,n._defaultData),t.find(".sortTd img").attr("src","/images/btn/btn_sort2.png"),n.retrieve()}));let r=localStorage.getItem("rowsPerPage");n._utils.checkEmptyNull(r)||i.find("select[name=rowsPerPage]").val(r),i.find("select[name=rowsPerPage]").on("change",(function(){localStorage.setItem("rowsPerPage",$(this).val()),i.find("input[name=page]").val("1"),n.retrieve()})),s.on("click",".btnOpenInfo",(function(){let t=$(this).closest("tr").data("ROW");return"Y"==t.sioHoldYn?(alert("마감된 데이터 입니다."),!1):"Y"==t.sioAdjustYn?(alert("재고 조정 데이터 입니다."),!1):void n.load({puSeq:t.puSeq},(function(t){if(0!=t.code)return alert("데이터를 불러올 수 없습니다"),!1;{let e=$("template#purchaseViewDiv");n._parent.openLayer(e.html(),n.reloadLayer,t.data)}}))})),n.retrieve()})),e(this,"purge",(()=>{console.log("equipmentController purge")})),e(this,"reload",(()=>{console.log("equipmentController reload")})),e(this,"goPage",(t=>{this._code.find(".pageInfoTfoot").find("input[name=page]").val(t),this.retrieve()})),e(this,"searchData",(()=>{let t=this._code.find(".pageInfoTfoot"),e=t.find("select[name=rowsPerPage]").val(),n=t.find("input[name=page]").val(),a=this._code.find(".searchWrapArea"),l=a.find("input[name=startDt]").val(),o=a.find("input[name=endDt]").val(),i=a.find("input[name=orderculumn]").val(),s=a.find("input[name=orderby]").val();a.find("select[name=searchColumn]").val();let r=a.find("input[name=searchWord]").val(),c=a.find("input[name=sNm]").val(),d=a.find("select[name=cpSeq]").val(),p=a.find("select[name=skCd]").val();return{page:n,rows:e,orderColumn:i,orderType:s,searchColumn:"cuNm",searchWord:r,sNm:c,startDt:l,endDt:o,cpSeq:d,stSeq:a.find("select[name=stSeq]").val(),skCd:p,safeWarning:a.find("input[name=safeWarning]:checked").val()??"N"}})),e(this,"retrieve",(()=>{const t=this;let e=t.searchData(),n=t._code.find(".searchWrapArea"),a=t._code.find(".pageInfoTfoot"),l=a.find("select[name=rowsPerPage]").val(),o=a.find("input[name=page]").val();t.list(e,(function(e){let i=t._code.find(".dataListTable tbody"),s=t._code.find(".dataHeadTable thead");$(".searchRunTime",t._code).text(t._utils.currentTime()),i.empty();let r=0,c=0;if(null!=e&&e.length>0)for(let a in e)0==a&&($(".totalPrice",n).text(t._utils.numberWithCommas(e[a].totalPrice)),r=e[a].totalCnt,c=Math.ceil(r/l)),t.display(i,e[a]);else $('<tr><td colspan="'+s.find("th").length+'">데이타가 없습니다.</td></tr>').appendTo(i);t._utils.mdiPaging(a.find(".pagenate"),r,l,c,10,o,t.goPage)}))})),e(this,"display",((t,e)=>{const n=this;let a="";for(let o=0;o<e.itemInfo.length;o++)a+='<span class="workOptionListOne vm" style="padding:0px !important; margin-bottom:0px !important;"><strong class="workOptionInfo">'+e.itemInfo[o].sNm+(n._utils.checkEmptyNull(e.itemInfo[o].sStandard)?"":"("+e.itemInfo[o].sStandard+")")+' : <span style="font-weight: bold;">'+e.itemInfo[o].puiCnt+" 개</span></strong></span>";let l=$("<tr />");l.append($('<td style="border:1px solid #dedede;"><input type="checkbox" class="vm" name="puSeq" value="'+e.puSeq+'"></td>')),l.append($('<td style="border:1px solid #dedede;" class="al">'+e.cuNm+"</td>")),l.append($('<td style="border:1px solid #dedede;" class="al workOptionListDiv vm">'+a+"</td>")),l.append($('<td style="border:1px solid #dedede;" class="al" />').append(n._utils.nullTostring(e.cpNm,""))),l.append($('<td style="border:1px solid #dedede;" class="ac">'+(null!=e.puHopeDt?n._utils.dateformatStringToDate(e.puHopeDt):"")+"</td>")),l.append($('<td style="border:1px solid #dedede;" class="ac" />').append(null!=e.puSendDate?e.puSendDate.substring(0,16):"")),l.append($('<td style="border:1px solid #dedede;" class="ac" />').append(n._utils.nullTostring(e.puSendENm,""))),l.append($('<td style="border:1px solid #dedede;" class="ac" />').append(e.eNm)),l.append($('<td style="border:1px solid #dedede;">'+e.creDate.substring(0,16)+"</td>")),l.append($('<td style="border:1px solid #dedede;"><i class="fa-regular fa-pen-to-square cursorPointer btnOpenInfo" title="조회" style="font-size:14px;"></i></td>')),l.data("ROW",e),l.appendTo(t)})),e(this,"layerViewEvent",((t,e)=>{const n=this;n._utils.focusEvent($("input[name=puInchargeTel]",t),"tel"),n._utils.focusEvent($("input[name=puiCnt]",t),"comma",null,(function(e){let a=$("input[name=puiPrice]",t).val();e=n._utils.convertNumber(e),a=n._utils.convertNumber(a),$("input[name=puiTotalPrice]",t).val(n._utils.numberWithCommas(e*a))})),n._utils.focusEvent($("input[name=puiPrice]",t),"tel",null,(function(e){let a=$("input[name=puiCnt]",t).val();e=n._utils.convertNumber(e),a=n._utils.convertNumber(a),$("input[name=puiTotalPrice]",t).val(n._utils.numberWithCommas(e*a))}));let l=$(".dataListTable tbody",t),o=$(".stockInfo",t);if($("input[name=puiCnt]",o).on("focus",(function(){let t=$(this).val();"0"==t&&(t=""),$(this).val(t)})),$(".companyList",t).on("click",(function(e){let o=$("input[name=cuSeq]",t).val();if(n._utils.checkEmptyNull(o))return void alert("거래처를 먼저 검색하십시요");let i={ctl:"stock",cmd:"companyList",cuSeq:o};new a(n._const,i,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=$("template#purchaseCompanyListDiv");n._parent.openLayer(a.html(),n.companyStockChoceEvent,t.data,l),e.stopPropagation()}}))})),$(".typeList",t).on("click",(function(t){new a(n._const,{ctl:"stock",cmd:"typeList",stKind:"A",isOnlyType:!0,useYn:"Y"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let a=$("template#purchaseTypeListDiv");n._parent.openLayer(a.html(),n.typeStockChoceEvent,e.data,l),t.stopPropagation()}else alert(e.message)}))})),$(".categoryList",t).on("click",(function(t){new a(n._const,{ctl:"stock",cmd:"categoryTreeList"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){let a=$("template#purchaseCategoryListDiv");n._parent.openLayer(a.html(),n.categoryStockChoceEvent,e.data,l),t.stopPropagation()}else alert(e.message)}))})),t.find("input[name=cuNm]").autocomplete({source:function(t,e){let l={ctl:"customer",cmd:"nmSearch",searchWord:this.term,cuTypeCd:"C"};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cuNm,value:t.cuNm,cuSeq:t.cuSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(e,l){$("input[name=cuSeq]",t).val(l.item.cuSeq);let o={ctl:"employee",cmd:"list",cuSeq:l.item.cuSeq};new a(n._const,o,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){0==e.code?e.data.length>0&&($("input[name=puInchargeNm]",t).val(e.data[0].eNm),n._utils.checkEmptyNull(e.data[0].eTel)||$("input[name=puInchargeTel]",t).val(n._utils.formatPhoneNumber(e.data[0].eTel))):alert(e.message)}))},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),t.find("input[name=cpNm]").autocomplete({source:function(t,e){new a(n._const,{ctl:"place",cmd:"nmList",cpType:"B",rows:9999},{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let n=t.data.map((function(t){return{label:t.cpNm,value:t.cpNm,cpSeq:t.cpSeq}}));e(n)}else e([])}))},focus:function(t,e){return!1},select:function(e,n){$("input[name=cpSeq]",t).val(n.item.cpSeq)},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$("input[name=sNm]",t).autocomplete({source:function(t,e){let l={ctl:"stock",cmd:"stockNmSearch",searchWord:this.term};new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){if(0==t.code){let a=t.data.map((function(t){let e={};return n._utils.checkEmptyNull(t.sCode)?e.label=t.sNm+(n._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"):e.label="["+t.sCode+"] "+t.sNm+(n._utils.checkEmptyNull(t.sStandard)?"":"("+t.sStandard+")"),e.value=t.sNm,e.sSeq=t.sSeq,e.sStandard=t.sStandard,t.sPrice,e}));e(a)}else e([])}))},focus:function(t,e){return!1},select:function(t,e){$("input[name=sSeq]",o).val(e.item.sSeq),$("input[name=sStandard]",o).val(e.item.sStandard),$("input[name=puiPrice]",o).val(n._utils.numberWithCommas(e.item.sPrice)),$("input[name=puiCnt]",o).trigger("focus")},minLength:n._parent._autocompleteLength,delay:n._parent._autocompleteTime,autoFocus:!0,close:function(t,e){}}),$(".fa-solid.fa-square-plus",t).on("click",(function(){$("tr",l);let t=n._utils.serializeObject(o);if(n._utils.checkEmptyNull(t.sSeq))return void alert("발주할 자재를 선택 입력 하십시요");if(n._utils.checkEmptyNull(t.puiCnt)||0==t.puiCnt)return void alert("발주할 자재 수량을 입력 하십시요");t.puiCnt=t.puiCnt??0,t.puiPrice=t.puiPrice??0,t.puiCnt=n._utils.convertNumber(t.puiCnt),t.puiPrice=n._utils.convertNumber(t.puiPrice),n.stockAdd(l,t);let e=$("input,select",o);for(let n=0;n<e.length;n++)$(e[n]).val("")})),l.on("click",".editClick",(function(t){let e=$(this).closest("tr"),a=e.data("ROW");a.index=e.index(),n._utils.unSerializeObject(o,a),$("input[name=puiPrice]",o).val(n._utils.numberWithCommas(a.puiPrice)),$("input[name=puiCnt]",o).val(n._utils.numberWithCommas(a.puiCnt)),$("input[name=puiTotalPrice]",o).val(n._utils.numberWithCommas(a.puiTotalPrice))})),l.on("click",".fa-solid.fa-square-minus",(function(){let t=$(this).closest("tr");confirm("삭제 하시겠습니까?",(function(e){e&&t.remove()}))})),null!=e&&e.itemInfo.length>0)for(let a=0;a<e.itemInfo.length;a++)n.stockAdd(l,e.itemInfo[a]);$(".save",t).on("click",(function(e){let a=t.data(),o=n._utils.serializeObject(t),i=$("tr",l),s=[],r=$("input[name=cuNm]",t).val(),c=$("input[name=cuSeq]",t).val();if(""==r||""!=c)if(""!=o.cpSeq){for(let t=0;t<i.length;t++){let e=$(i[t]).data("ROW");if(e.sort=t+1,n._utils.checkEmptyNull(e.puiCnt)||0==e.puiCnt)return void alert(e.sNm+" 수량을 입력하십시요");null!=e&&null!=e.sSeq&&s.push(e)}0!=s.length?(null!=a.puSeq&&(o.puSeq=a.puSeq),o.itemInfo=JSON.stringify(s),n._utils.checkRequired(t)&&(null==o.puSeq?n.insert(o,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("등록 되었습니다.")):alert(e.message)})):n.update(o,(function(e){0==e.code?(n.retrieve(),$(".btnClosePopLayer",t).trigger("click"),alert("수정되었습니다.")):alert(e.message)})))):alert("발주할 자재를 등록 하십시요")}else alert("납품장소를 선택하여 입력하십시요");else alert("등록된 거래처를 입력하십시요")}))})),e(this,"stockAdd",((t,e)=>{let n=this,a=$("tr",t);if(n._utils.checkEmptyNull(e.index)&&"0"!=e.index){for(let t=0;t<a.length;t++){if($(a[t]).data("ROW").sSeq==e.sSeq)return alert("자재가 중복되었습니다."),!1}let l=$("<tr />");l.append($('<td class="al editClick cursorPointer">'+e.sNm+"</td>")),l.append($('<td class="al editClick cursorPointer">'+e.sStandard+"</td>")),l.append($('<td class="ar editClick cursorPointer">'+n._utils.numberWithCommas(e.puiPrice)+"</td>")),l.append($('<td class="ar editClick cursorPointer">'+n._utils.numberWithCommas(e.puiCnt)+"</td>")),l.append($('<td class="ar editClick cursorPointer">'+n._utils.numberWithCommas(e.puiCnt*e.puiPrice)+"</td>")),l.append($('<td class="al editClick cursorPointer">'+n._utils.nullTostring(e.puiMemo,"")+"</td>")),l.append($('<td class="ac" style="padding:0px;"><a href="javascript:void(0);" class="minusbtn"><i class="fa-solid fa-square-minus" style="color:#8071bb;font-size: 18px;"></i></a></td>')),t.append(l.data("ROW",e)),n._utils.tableScrollCheck()}else{let a=$("tr:eq("+e.index+")",t),l=$("td",a);$(l[2]).empty().append(n._utils.numberWithCommas(e.puiPrice)),$(l[3]).empty().append(n._utils.numberWithCommas(e.puiCnt)),$(l[4]).empty().append(n._utils.numberWithCommas(e.puiCnt*e.puiPrice)),$(l[5]).empty().append(n._utils.nullTostring(e.puiMemo,"")),a.data("ROW",e)}return n._isSave=!1,!0})),e(this,"initNewLayer",(t=>{let e=$("#"+t);$(".save",e).text("등록"),$(".creInfo",e).remove(),$(".mail",e).remove(),$(".fax",e).remove(),$(".print",e).remove(),this.layerViewEvent(e),this._isSave=!1})),e(this,"reloadLayer",((t,e)=>{let n=this,l=$("#"+t);$(".title",l).text("["+e.cuNm+"]발주 수정"),$(".save",l).text("수정"),l.data(e),n._utils.unSerializeObject(l,e),n._utils.classNameInput(l,e),n.layerViewEvent(l,e),n._isSave=!0,window.jsPDF=window.jspdf.jsPDF;let o=$(".mail",l),i=$(".fax",l),s=$(".print",l);function r(t,e){let l=$("template#purchaseDoc"),o=$("#printWrap");o.empty(),o.append(l.html());let i=!1,s=n._parent._companyInfo,r={ctl:"media",cmd:"downloadBase64"};$.extend(r,{fileSeq:s.fileInfo[0].fileSeq}),new a(n._const,r,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code&&($(".companyLogo",o).append('<img src="data:application/octet-stream;base64,'+t.data+'" alt="">'),i=!0)}));let c=$(".companyInfo",o);n._utils.classNameInput(c,s),$(".cTel",c).text(n._utils.formatPhoneNumber(s.cTel)),$(".cBizNo",c).text(n._utils.convertBizNo(s.cBizNo));let d=$(".customerInfo",o);n._utils.classNameInput(d,t),$(".puInchargeTel",d).text(null==t.puInchargeTel?"":n._utils.formatPhoneNumber(t.puInchargeTel)),$(".puHopeDt",d).text(null==t.puHopeDt?"":n._utils.dateformatStringToDate(t.puHopeDt)),$(".puSendDt",d).text(n._utils.dateformatCurrentYYYYMMDD("-")),$(".cpNm",d).text(s.cNm+" "+t.cpNm);let p=$(".stockInfo",o),u=$("tr",p).clone();p.empty();let m=0;for(;m<t.itemInfo.length;m++){let e=u.clone(),a=t.itemInfo[m];n._utils.classNameInput(e,a),$(".rowNo",e).text(m+1),$(".puiCnt",e).text(n._utils.numberWithCommas(a.puiCnt)),$(".puiPrice",e).text(""),23<=m&&m==t.itemInfo.length-1&&$("td",e).css({"border-bottom":"1px solid #000"}),p.append(e)}for(;m<=23;m++){let t=u.clone();23==m&&$("td",t).css({"border-bottom":"1px solid #000"}),p.append(t)}setTimeout((function(){for(let t=0;t<999999;t++)if(i){e(o);break}}),2e3)}i.on("click",(function(){if(!n._isSave)return alert("발주 내역을 저장 후 다시 진행해 주십시요"),!1;let t=l.data(),e=n._utils.currentDate().replace(/-/g,"");r(t,(function(a){n._utils.showLoading();let l=$("page",a);for(let i=0;i<l.length;i++){$(".workDetailArea",l[i]).css("height","725px");var o=l[i];html2canvas(o,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((a=>{let l=a.toDataURL("image/png"),i=190,s=1.414*i,r=a.height*i/a.width,c=r,d=new jsPDF("p","mm"),p=10,u=n._parent._companyInfo;for(u.files=[],window.scrollTo(0,0),d.addImage(l,"PNG",10,p,i,r,void 0,"FAST"),c-=s;c>=20;)p=c-r,p-=20,d.addPage(),d.addImage(l,"PNG",10,p,i,r,void 0,"FAST"),c-=s;let m={};u.eTitle=$(".cuNm",$(o)).text()+" 발주서 ",m.filename=u.cNm+"_"+$(".cuNm",$(o)).text()+" 발주서_"+e+".pdf",m.content=d.output("datauristring"),m.encoding="base64",m.size=m.content.length,u.files.push(m),u.puSeq=t.puSeq,u.cuFax=t.cuFax,u.cuNm=t.cuNm;let f=$("template#purchaseFax");n._parent.openLayer(f.html(),n.purchaseFaxEvent,u),n._utils.hideLoading()}))}}))})),o.on("click",(function(){if(!n._isSave)return alert("발주 내역을 저장 후 다시 진행해 주십시요"),!1;if("Y"!=n._parent._companyInfo.cMailYn)return alert('<div class="al" style="width:100%;padding-left:10px; font-size:11px;">기본설정 > 회사정보 메뉴를 이용하여 메일 연동 정보를 등록하십시오</div>',"메일발송 설정이 필요합니다."),!1;let t=l.data(),e=n._utils.currentDate().replace(/-/g,"");r(t,(function(a){let l=$("page",a);for(let o=0;o<l.length;o++){let a=l[o];n._utils.showLoading(),html2canvas(a,{scrollY:0,scrollX:0,scale:4,dpi:300,letterRendering:!0,allowTaint:!0}).then((l=>{let o=l.toDataURL("image/png"),i=190*1.414,s=277,r=s,c=new jsPDF("p","mm"),d=10,p=n._parent._companyInfo;for(p.files=[],window.scrollTo(0,0),c.addImage(o,"PNG",10,d,190,s,void 0,"FAST"),r-=i;r>=20;)d=r-s,d-=20,c.addPage(),c.addImage(o,"PNG",10,d,190,s,void 0,"FAST"),r-=i;let u={};p.eTitle=$(".cuNm",$(a)).text()+" 발주서 ",u.filename=n._parent._companyInfo.cNm+"_"+$(".cuNm",$(a)).text()+" 발주서_"+e+".pdf",u.content=c.output("datauristring"),u.encoding="base64",u.size=u.content.length,p.files.push(u),p.cuInvoiceEmail=t.cuInvoiceEmail,p.puSeq=t.puSeq;let m=$("template#purchaseSendMail");n._parent.openLayer(m.html(),n.purchaseMailEvent,p),n._utils.hideLoading()}))}}))})),s.on("click",(function(){if(!n._isSave)return alert("발주 내역을 저장 후 다시 진행해 주십시요"),!1;let t=l.data();r(t,(function(t){let e=$(".printA4",t);$(e).print({addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,timeout:5e3})})),"Y"!=t.puSendYn&&setTimeout((function(){confirm("발주서 발송 처리 하시겠습니까",(function(e){if(e){let e={ctl:"stock",cmd:"purchaseSendUpdate",puSeq:t.puSeq,puSendType:"print",puSendYn:"Y"};new a(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}}),"발송처리")}),2e3)}))})),e(this,"companyStockChoceEvent",((t,e,n)=>{let a=this,l=$("#"+t);$(".title",l).text("자재 목록"),$(".save",l).text("적용");let o=$(".stockList",l),i=0;for(;i<e.length;i++){let t=e[i],n=$("<tr />");n.append('<td class="ac" style="background: #fff;"><input type="checkbox" name="sSeq" value="'+t.sNm+'"></td>'),n.append('<td class="al" style="background: #fff;">'+t.sNm+"</td>"),n.append('<td class="ac" style="background: #fff;">'+t.sStandard+"</td>"),n.append('<td class="ar" style="background: #fff;">'+a._utils.numberWithCommas(t.sPrice)+"</td>"),n.append('<td class="ar" style="background: #fff;padding-right:10px !important;">'+a._utils.numberWithCommas(t.sCnt)+"</td>"),o.append(n.data("ROW",t))}for(;i<7;i++){let t=$("<tr />");t.append('<td class="ac" colspan="5" style="background: #fff;"></td>'),o.append(t)}$(".btnApply",l).on("click",(function(t){let e=l.find("input[name=sSeq]:checked");if(0!=e.length){for(let t=0;t<e.length;t++)if(e[t].checked){let l=$(e[t]).closest("tr").data("ROW");if(l.puiCnt=0,l.puiPrice=l.sPrice,!a.stockAdd(n,l))return void alert("추가할 대상이 중복됩니다.")}$(".btnClosePopLayer",l).trigger("click")}else alert("추가할 대상을 선택 하십시오")}))})),e(this,"typeStockChoceEvent",((t,e,n)=>{let l=this,o=$("#"+t);$(".title",o).text("자재 목록"),$(".save",o).text("적용");let i=$("select[name=stSeq]",o),s=$(".stockList",o);for(let a=0;a<e.length;a++)i.append('<option value="'+e[a].stSeq+'"'+(0==a?" selected":"")+">"+e[a].stNm+"</option>");i.on("change",(function(){let t={ctl:"stock",cmd:"typeLinkList",stSeq:$(this).val()};s.empty(),new a(l._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=0;for(;e<t.data.length;e++){let n=t.data[e],a=$("<tr />");a.append('<td class="ac" style="background: #fff;"><input type="checkbox" name="sSeq" value="'+n.sNm+'"></td>'),a.append('<td class="al" style="background: #fff;">'+n.sNm+"</td>"),a.append('<td class="ac" style="background: #fff;">'+n.sStandard+"</td>"),a.append('<td class="ar" style="background: #fff;">'+l._utils.numberWithCommas(n.sPrice)+"</td>"),a.append('<td class="ar" style="background: #fff;padding-right:10px !important;">'+l._utils.numberWithCommas(n.sCnt)+"</td>"),s.append(a.data("ROW",n))}for(;e<7;e++){let t=$("<tr />");t.append('<td class="ac" colspan="5" style="background: #fff;"></td>'),s.append(t)}}}))})),i.trigger("change"),$(".btnApply",o).on("click",(function(t){let e=o.find("input[name=sSeq]:checked");if(0!=e.length){for(let t=0;t<e.length;t++)if(e[t].checked){let a=$(e[t]).closest("tr").data("ROW");if(a.puiCnt=0,a.puiPrice=a.sPrice,!l.stockAdd(n,a))return void alert("추가할 대상이 중복됩니다.")}$(".btnClosePopLayer",o).trigger("click")}else alert("추가할 대상을 선택 하십시오")}))})),e(this,"categoryStockChoceEvent",((t,e,n)=>{let l=this,o=$("#"+t);$(".title",o).text("분류 자재 목록"),$(".save",o).text("추가");let i=$("select[name=scSeq]",o),s=$("select[name=scSeq2]",o),r=$("select[name=scSeq3]",o),c=[],d=[],p=$(".stockList",o);for(let a=0;a<e.length;a++)i.append('<option value="'+e[a].scSeq+'"'+(0==a?" selected":"")+">"+e[a].scNm+"</option>");i.on("change",(function(){let t=$(this).val(),n={ctl:"stock",cmd:"categoryStockList",scSeq:t};for(let a=0;a<e.length;a++){if(t==e[a].scSeq){c=e[a].node,s.empty(),s.append('<option value="" selected>선택</option>');for(let t=0;t<c.length;t++)s.append('<option value="'+c[t].scSeq+'">'+c[t].scNm+"</option>");break}r.empty(),r.append('<option value="" selected></option>')}p.empty(),new a(l._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=0;for(;e<t.data.length;e++){let n=t.data[e],a=$("<tr />");a.append('<td class="ac" style="background: #fff;"><input type="checkbox" name="sSeq" value="'+n.sNm+'"></td>'),a.append('<td class="al" style="background: #fff;">'+n.sNm+"</td>"),a.append('<td class="ac" style="background: #fff;">'+n.sStandard+"</td>"),a.append('<td class="ar" style="background: #fff;">'+l._utils.numberWithCommas(n.sPrice)+"</td>"),a.append('<td class="ar" style="background: #fff;padding-right:10px !important;">'+l._utils.numberWithCommas(n.sCnt)+"</td>"),p.append(a.data("ROW",n))}for(;e<7;e++){let t=$("<tr />");t.append('<td class="ac" colspan="5" style="background: #fff;"></td>'),p.append(t)}}}))})),s.on("change",(function(){let t=$(this).val(),e={ctl:"stock",cmd:"categoryStockList",scSeq:t};if(!l._utils.checkEmptyNull(t)){p.empty();for(let e=0;e<c.length;e++)if(t==c[e].scSeq){d=c[e].node,r.empty(),r.append('<option value="" selected>선택</option>');for(let t=0;t<d.length;t++)r.append('<option value="'+d[t].scSeq+'">'+d[t].scNm+"</option>");break}new a(l._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=0;for(;e<t.data.length;e++){let n=t.data[e],a=$("<tr />");a.append('<td class="ac" style="background: #fff;"><input type="checkbox" name="sSeq" value="'+n.sNm+'"></td>'),a.append('<td class="al" style="background: #fff;">'+n.sNm+"</td>"),a.append('<td class="ac" style="background: #fff;">'+n.sStandard+"</td>"),a.append('<td class="ar" style="background: #fff;">'+l._utils.numberWithCommas(n.sPrice)+"</td>"),a.append('<td class="ar" style="background: #fff;padding-right:10px !important;">'+l._utils.numberWithCommas(n.sCnt)+"</td>"),p.append(a.data("ROW",n))}for(;e<7;e++){let t=$("<tr />");t.append('<td class="ac" colspan="5" style="background: #fff;"></td>'),p.append(t)}}}))}})),r.on("change",(function(){let t={ctl:"stock",cmd:"categoryStockList",scSeq:$(this).val()};p.empty(),new a(l._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){if(0==t.code){let e=0;for(;e<t.data.length;e++){let n=t.data[e],a=$("<tr />");a.append('<td class="ac" style="background: #fff;"><input type="checkbox" name="sSeq" value="'+n.sNm+'"></td>'),a.append('<td class="al" style="background: #fff;">'+n.sNm+"</td>"),a.append('<td class="ac" style="background: #fff;">'+n.sStandard+"</td>"),a.append('<td class="ar" style="background: #fff;">'+l._utils.numberWithCommas(n.sPrice)+"</td>"),a.append('<td class="ar" style="background: #fff;padding-right:10px !important;">'+l._utils.numberWithCommas(n.sCnt)+"</td>"),p.append(a.data("ROW",n))}for(;e<7;e++){let t=$("<tr />");t.append('<td class="ac" colspan="5" style="background: #fff;"></td>'),p.append(t)}}}))})),i.trigger("change"),$(".btnApply",o).on("click",(function(t){let e=o.find("input[name=sSeq]:checked");if(0!=e.length){for(let a=0;a<e.length;a++)if(e[a].checked){let t=$(e[a]).closest("tr").data("ROW");if(t.puiCnt=0,t.puiPrice=t.sPrice,!l.stockAdd(n,t))return void alert("추가할 대상이 중복됩니다.")}}else alert("추가할 대상을 선택 하십시오")}))})),e(this,"purchaseStockInsertEvent",((t,e)=>{let n=this,l=$("#"+t);$(".title",l).text("발주 자재 목록"),$(".save",l).text("입고");let o=$(".stockList",l);$("input[name=allCheck]",l).on("change",(function(){let t=$(this).prop("checked"),e=$("input[name=puiSeq]:not(:disabled)",o);for(let n=0;n<e.length;n++)$(e[n]).prop("checked",t)}));let i=0;for(;i<e.length;i++){let t=e[i],a=$("<tr />");a.append('<td class="ac" style="background: #fff;"><input type="checkbox" name="puiSeq" value="'+t.puiSeq+'" '+("Y"==t.puiInsertYn?"disabled":"")+"></td>"),a.append('<td class="al" style="background: #fff;">'+t.sNm+"</td>"),a.append('<td class="al" style="background: #fff;">'+t.sStandard+"</td>"),a.append('<td class="al" style="background: #fff;"><input type="text" name="sioUnitPrice" class="w100p ar" value="'+n._utils.numberWithCommas(t.puiPrice)+'" '+("Y"==t.puiInsertYn?"disabled":"")+"></td>"),a.append('<td class="ar" style="background: #fff;">'+n._utils.numberWithCommas(t.puiCnt)+"</td>"),a.append('<td class="al" style="background: #fff;"><input type="text" name="sioCnt" class="w100p ar" value="'+n._utils.numberWithCommas(t.puiCnt)+'" '+("Y"==t.puiInsertYn?"disabled":"")+"></td>"),n._utils.focusEvent($("input[name=sioUnitPrice]",a),"comma"),n._utils.focusEvent($("input[name=sioCnt]",a),"comma"),o.append(a.data("ROW",t))}for(;i<7;i++){let t=$("<tr />");t.append('<td class="ac" colspan="6" style="background: #fff;"></td>'),o.append(t)}$(".save",l).on("click",(function(t){let e=l.find("input[name=puiSeq]:checked");if(0==e.length)return void alert("입고할 대상을 선택 하십시오");let o=[];for(let a=0;a<e.length;a++)if(e[a].checked){let t=$(e[a]).closest("tr"),l=t.data("ROW"),i=n._utils.serializeObject(t);delete i.puiSeq,i.sioUnitPrice=n._utils.convertNumber(i.sioUnitPrice),i.sioCnt=n._utils.convertNumber(i.sioCnt),$.extend(l,i),l.sioMemo="발주입고",o.push(l)}let i={ctl:"stock",cmd:"inoutInsertGroup",inoutInfo:JSON.stringify(o),sioKind:"I"};new a(n._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?($(".btnClosePopLayer",l).trigger("click"),alert("입고처리 되었습니다.")):alert(t.message)}))}))})),e(this,"purchaseMailEvent",((t,e)=>{let n=this,l=$("#"+t),o=5242880,i=$("select[name=files]",l);function s(){i.empty();for(let t=0;t<e.files.length;t++){let a=e.files[t],l=$('<option value="'+a.filename+'">'+a.filename+"("+n._utils.bytesToSize(a.size)+")</option>");i.append(l)}}$("input[name=subject]",l).val("["+n._const.__C_NM+"] "+e.eTitle+"를 보내드립니다."),$("input[name=to]",l).val(e.cuInvoiceEmail),s(),$("input[name=eFile]",l).on("change",(function(){let t={};var n;if(t.filename=this.files[0].name,t.size=this.files[0].size,t.encoding="base64",(n=this.files[0],new Promise(((t,e)=>{const a=new FileReader;a.readAsDataURL(n),a.onload=()=>t(a.result),a.onerror=t=>e(t)}))).then((e=>t.content=e)),t.size>o)return alert("최대 5M이상 첨부 할 수 없습니다."),!1;e.files.push(t),s(),$(this).val("")})),$(".fa-upload",l).on("click",(function(){$("input[name=eFile]",l).trigger("click")})),$(".fa-trash-can",l).on("click",(function(){let t=$("option:checked",i).index();e.files.splice(t,1),s()})),$(".mailSend",l).on("click",(function(){if(n._utils.checkRequired(l)){let t=n._utils.serializeObject(l),i=0;for(let n=0;n<e.files.length;n++)i+=e.files[n].size;if(i>o)return alert("최대 5M이상 첨부 할 수 없습니다."),!1;t.files=JSON.stringify(e.files),n._parent.emailSend(t,(function(t){if(0==t.code){$("body .btnClosePopLayer").trigger("click"),alert("발송 되었습니다.");let t={ctl:"stock",cmd:"purchaseSendUpdate",puSeq:e.puSeq,puSendType:"mail",puSendYn:"Y"};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}else alert(t.message)}))}}))})),e(this,"purchaseFaxEvent",((t,e)=>{let n=this,l=$("#"+t);$("input[name=cuNm]",l).val(e.cuNm),$("input[name=cuFax]",l).val(e.cuFax),$(".faxSend",l).on("click",(function(){if(n._utils.checkRequired(l)){let t=n._utils.serializeObject(l);t.files=JSON.stringify(e.files),n._parent.faxSend(t,(function(t){if(0==t.code){$("body .btnClosePopLayer").trigger("click"),alert("발송 되었습니다.");let t={ctl:"stock",cmd:"purchaseSendUpdate",puSeq:e.puSeq,puSendType:"fax",puSendYn:"Y"};new a(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0!=t.code&&toast("발송 기록에 실패 하였습니다.")}))}else alert(t.message)}))}}))})),e(this,"excelDownload",(()=>{let t=this;const e=new ExcelJS.Workbook;let n=t._code.find(".pageHere strong").text();const a=e.addWorksheet(n);let l=[];l.push({name:"중요",key:"sMarkYn",width:5,align:"center"}),l.push({name:"분류",key:"kindInfo",width:10,align:"center"}),l.push({name:"자재명",key:"sNm",width:25,align:"left"}),l.push({name:"규격",key:"sStandard",width:30,align:"left"}),l.push({name:"안전량",key:"sSafeCnt",width:10,align:"right"}),l.push({name:"재고량",key:"sCnt",width:10,align:"right"}),l.push({name:"평균단가",key:"sPrice",width:12,align:"right"}),l.push({name:"총금액",key:"sTotalPrice",width:15,align:"right"}),l.push({name:"메모",key:"sMemo",width:50,align:"left"}),l.push({name:"주요거래처",key:"cuNm",width:20,align:"left"}),l.push({name:"사용",key:"useYn",width:5,align:"center"}),l.push({name:"등록일시",key:"creDate",width:20,align:"center"});let o=t.searchData();o.rows=9999,o.page=1,t.list(o,(function(o){if(!(null!=o&&o.length>0))return alert("데이타가 없습니다."),!1;{let e=[];for(let t in l)e.push(l[t].name);a.addRow(e).eachCell(((e,n)=>{t._parent._utils.excelStyleHeaderCell(e),a.getColumn(n).width=l[n-1].width}));for(let n in o){let e=[];for(let t=0;t<o[n].kindInfo.length;t++)e.push(o[n].kindInfo[t].skCdNm);o[n].kindInfo=e.join(", ");let i=[];for(let t in l)i.push(o[n][l[t].key]?o[n][l[t].key]:"");a.addRow(i).eachCell(((e,n)=>{t._parent._utils.excelStyleDataCell(e,l[n-1].align)}))}}t._parent._utils.excelDownload(e,n+"("+t._utils.currentDateTime()+")").then((t=>{}))}))})),e(this,"list",((t,e)=>{let n={ctl:"stock",cmd:"purchaseList"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?e(t.data):e(null)}))})),e(this,"load",((t,e)=>{let n={ctl:"stock",cmd:"purchaseLoad"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"delete",((t,e)=>{let n={ctl:"stock",cmd:"purchaseDelete"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"insert",((t,e)=>{let n={ctl:"stock",cmd:"purchaseInsert"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"update",((t,e)=>{let n={ctl:"stock",cmd:"purchaseUpdate"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),this._parent=t||null,this._const=l||{},this._data=o||{},this._options=i||{},this._utils=new n,this._ajax=new a,this._code=null,this._mainPopID=null,this._isSave=!1}},B=class{constructor(t,n,a,l){e(this,"init",(()=>{const t=this;t._stock=new E(t._parent,t._const),t._stockType=new j(t._parent,t._const),t._stockInout=new Y(t._parent,t._const),t._stockPlace=new R(t._parent,t._const),t._stockCategory=new M(t._parent,t._const),t._stockFinish=new z(t._parent,t._const),t._purchase=new F(t._parent,t._const)})),e(this,"onControllerAction",((t,e,n=null,a=null)=>{const l=this;switch(e){case"init":l["_"+t].init(n,a);break;case"purge":l["_"+t].purge();break;case"reload":l["_"+t].reload();break;case"retrieve":l["_"+t].retrieve()}})),this._parent=l||null,this._const=t||{},this._data=n||{},this._param=a||{}}};class V{constructor(t,l,c){e(this,"init",(()=>{const t=this;t._topbar=new s(t,t._const,t._data,t._param),t._footer=new r(t._const,t._data,t._param,t),t._client=new d(t._const,t._data,t._param,t),t._client.init(),t._distribution=new u(t._const,t._data,t._param,t),t._distribution.init(),t._company=new b(t._const,t._data,t._param,t),t._company.init(),t._dashboard=new N(t._const,t._data,t._param,t),t._dashboard.init(),t._ledger=new A(t._const,t._data,t._param,t),t._ledger.init(),t._customer=new W(t._const,t._data,t._param,t),t._customer.init(),t._stock=new B(t._const,t._data,t._param,t),t._stock.init(),setTimeout((function(){t.intervalId=setInterval((function(){t.intervalRun()}),t._reloadTime)}),t._reloadStartTime),new a(t._const,{ctl:"company",cmd:"dashboardInfo"},{spinner:!0}).ajaxformdata((function(e){if(0==e.code){let n=e.data;t._companyInfo=n,n.fileInfo.length>0&&($(".headerWrap .logo").empty(),$(".headerWrap .logo").append('<img src="'+__FILE_DOMIN+n.fileInfo[0].path.replace("kprintfactory","")+'" alt="">'))}else alert(e.message)})),t.getMenu((function(e){if(t._topbar.init(),t.displayMenu(e),t._menuList=e.data,t._footer.init(),null!=sessionStorage.getItem("MenuInfo")){t._tabs.info=JSON.parse(sessionStorage.getItem("MenuInfo"));for(let e in t._tabs.info){let n=t._tabs.info[e];"Y"==n.____ACTIVE____&&(t._tabs.activeIndex=e,t.createMdi(n.____ID____,n.____NAME____,n.____URL____))}}})),$("#ctrTabWrap").on("click","li .tabName",(function(e){let n=$(this).parent(),a=n.attr("code"),l=t.getMdi(a);t._tabs.activeIndex=n.index(),t._tabs.activeId=a,t.createMdi(l.____ID____,l.____NAME____,l.____URL____),window.dispatchEvent(new Event("resize"))})),$("#ctrTabWrap").children(".tabMenuUl").on("click","li .ctrTabCloseBtn",(function(e){if(1==t._tabs.info.length)return void alert("탭이 여러개인 경우에만 삭제 할 수 있습니다.");let n=$(this).parent(),a=n.attr("code");n.hasClass("choiceTab")&&(t._tabs.activeIndex=0,setTimeout((function(){$("#ctrTabWrap li .tabName").eq(t._tabs.activeIndex).trigger("click")}),500)),t.remove(a),t.refresh(),t.menuFocus(t.activeMenuId()),e.stopPropagation()})),$("#ctrTabWrap").on("click","li.ctrTabMore",(function(t){let e=$("#moreTapList");"none"!=e.css("display")?e.hide():e.show(),t.stopPropagation()})),$("#ctrTabWrap").on("click","li.ctrTabMore .myMenuList a",(function(e){let n=$(this).attr("code"),a=t.getMdi(n);t._tabs.activeIndex=0,t._tabs.activeId=n,t.createMdi(a.____ID____,a.____NAME____,a.____URL____),window.dispatchEvent(new Event("resize"))})),$(document).on("click",(function(t){0==$(t.target).closest(".topMenuUl").length&&$(".topMenuSubLayer2").hide()})),$(document).on("click",".inputTextClean",(function(t){let e=$(t.target);"SPAN"==e.prop("tagName")&&(e=e.closest("div"));let n=e.prev();if(n.length>0&&("text"==n.attr("type")||"password"==n.attr("type"))){n.val("").trigger("focus");let t=n.prev();"hidden"==t.attr("type")&&t.attr("name").indexOf("Seq")>-1&&t.val("")}})),$(document).on("mouseover",".inputTextCleanDiv",(function(t){let e=$(t.currentTarget),n=$("input[type=text]",e),a=e.children(".inputTextClean");n.hasClass("disabled")||a.length>0&&a.css("display","inline-block")})),$(document).on("mouseout",".inputTextCleanDiv",(function(t){let e=$(t.currentTarget).children(".inputTextClean");e.length>0&&e.css("display","none")}))})),e(this,"reloadTabCode",(t=>{let e=this.getMdi(t);this.createMdi(e.____ID____,e.____NAME____,e.____URL____)})),e(this,"activeMenuId",(()=>{let t;return null==t&&(t=this._tabs.activeId),t})),e(this,"displayMenu",(t=>{const e=this;if(0===t.code){let t=e._utils.parseJSONString(sessionStorage.getItem("LMKEY"));const n=$("#sideOpen .lnb"),a=$("#sideOff .lnb");let l,o;for(let e in t){let a=t[e];if("MENU"==a.mType){if(l!=a.mgSort){null!=l&&n.append(o);let t="";"CI"==a.mgCode?t='<i class="fa-regular fa-sun" style="width:25px;"></i>':"MM"==a.mgCode?t='<i class="fa-solid fa-desktop" style="width:25px;"></i>':"CM"==a.mgCode?t='<i class="fa-solid fa-coins" style="width:25px;"></i>':"CS"==a.mgCode&&(t='<i class="fa-solid fa-boxes-packing" style="width:25px;"></i>'),l=a.mgSort,o=$('<dl class="lnbDl"><dt id="'+a.mgNm+'">'+t+a.mgNm+"</dt><dd><ul></ul></dd></dl>")}o.find("ul").append('<li><a href="javascript:void(0);" code="'+a.code+'" page-url="'+a.mUrl+'" controller="'+a.mController+'">'+a.mNm+"</a></li>")}}o.append($('<div class="lnbAside"><a href="javascript:void(0);" class="lnbToggleBtn"><img src="/images/btn/btn_menuToggle.png" alt="" class="mCS_img_loaded"> 메뉴 감추기</a></div>')),n.append(o),a.append($('<div class="lnbAside"><a href="javascript:void(0);" class="lnbToggleBtn"><img src="/images/btn/lnb_closeMenuEnd.png" alt="" title="메뉴 열기" class="mCS_img_loaded"></a></div>')),n.on("click","dt",(function(t){let e=$(this).parent();0==e.hasClass("lnbDlSelected")?(n.find("dl.lnbDlSelected").removeClass("lnbDlSelected").addClass("lnbDl"),e.removeClass("lnbDl").addClass("lnbDlSelected")):(n.find("dl.lnbDlSelected").removeClass("lnbDl").addClass("lnbDlSelected"),e.removeClass("lnbDlSelected").addClass("lnbDl")),t.stopPropagation()})),n.on("click","li a",(function(t){0==$(this).hasClass("on")&&(n.find("li a").removeClass("on"),$(this).addClass("on"))})),$("#sideWrap").on("click",".lnbToggleBtn",(function(t){0==$("#sideOpen").is(":visible")?($(".contentsWrap").addClass("sideOpen"),$(".contentsWrap").removeClass("sideOff"),$("#sideOpen").show(),$("#sideOff").hide(),$(".footNotice").css("left","208px"),$(".sideWrap").css("background","#344154 !important")):($(".contentsWrap").removeClass("sideOpen"),$(".contentsWrap").addClass("sideOff"),$("#sideOpen").hide(),$("#sideOff").show(),$(".footNotice").css("left","0px"),$(".sideWrap").css("background","#fff !important")),window.dispatchEvent(new Event("resize"))})),null!=sessionStorage.getItem("MenuInfo")&&0!=sessionStorage.getItem("MenuInfo").length||setTimeout((function(){$("#sideWrap").find("ul li a").eq(0).trigger("click")}),1500)}else alert(t.message,"info");$("#sideWrap").on("click","ul li a",(function(t){let n=$(this),a=n.attr("code"),l=n.text(),o=n.attr("page-url"),i=n.attr("controller");e.createMdi(a,l,o,i),t.stopPropagation()}))})),e(this,"createMdi",(async(t,e,n,a,l)=>{const o=this;let i;o._tabs.activeId=t;let s,r=$("#ctrContWrap");if(null==r)return alert("ctrDiv Not Find","error"),!1;let c=$("#sideOpen").is(":visible")?"sideOpen":"sideOff";if($(".contentsWrap").hide(),null==o.getMdi(t)){let a="";null!=n&&"/"!=n&&(a=await o.getContent(n));let l=$('<div class="contentsWrap '+c+'" id="__sales__ctrBody_'+t+'"><div class="innerConWrap">'+a+"</div></div>");try{let e=$($(l.children()[0]).children()[0]);e.prop("id",t);let n=o._utils.parseJSONString(sessionStorage.getItem("LMKEY"));for(let a=0;a<n.length;a++)if(t==n[a].code){s=n[a];break}e.find(".pageHere").html('<span class="first">'+s.mgNm+"</span> &gt; <strong>"+s.mNm+"</strong>")}catch(d){}o._tabs.activeMenu=i={____ID____:t,____NAME____:e,body:l,____URL____:n,____DISPLAY____:"Y",func:{}},o._tabs.info.splice(0,0,i),l.appendTo(r),o._tabs.activeIndex=0,""!==a&&o["_"+s.mgController.toLowerCase()].onControllerAction(s.mController,"init",t)}else for(let p=0;p<o._tabs.info.length;p++)if(o._tabs.info[p].____ID____==t){if(i=o._tabs.info[p],null!=i.____DISPLAY____&&"N"==i.____DISPLAY____?(o._tabs.info.splice(p,1),o._tabs.info.splice(0,0,i),o._tabs.activeIndex=0,o._tabs.activeMenu=i):o._tabs.activeIndex=p,0==$(`#${i.____ID____}`).length){let e="";if(null!=n&&"/"!=n&&(e=await o.getContent(n)),$(`#__sales__ctrBody_${i.____ID____}`).length>0)$(`#__sales__ctrBody_${i.____ID____} .innerConWrap`).append(e),i.body=$(`#__sales__ctrBody_${i.____ID____}`);else{let n=$('<div class="contentsWrap '+c+'" id="__sales__ctrBody_'+t+'"><div class="innerConWrap">'+e+"</div></div>");try{let e=$($(n.children()[0]).children()[0]);e.prop("id",t);let a=o._utils.parseJSONString(sessionStorage.getItem("LMKEY"));for(let n=0;n<a.length;n++)if(t==a[n].code){s=a[n];break}e.find(".pageHere").html('<span class="first">'+s.mgNm+"</span> &gt; <strong>"+s.mNm+"</strong>")}catch(d){}i.body=n,n.appendTo(r),""!==e&&o["_"+s.mgController.toLowerCase()].onControllerAction(s.mController,"init",t)}$("#ctrTabWrap").find("li[code="+i.____ID____+"]").addClass("choiceTab")}null!=i.body&&"object"==typeof i.body&&$(i.body).show(),window.dispatchEvent(new Event("resize"))}o.refresh(t),o.menuFocus(t),window.dispatchEvent(new Event("resize")),null!=l&&l()})),e(this,"remove",(t=>{const e=this;let n=e._tabs.info;for(let a=0;a<n.length;a++)if(n[a].____ID____==t){e._tabs.activeIndex>a&&e._tabs.activeIndex--;let l=n[a];$(l.body).remove(),$(l.____TAB____).remove(),n.splice(a,1),e.refresh(t);break}})),e(this,"refresh",(t=>{const e=this;let n=$("#headerWrap").width()-e._tabs.tabMagin,a=e._tabs.info;$("#ctrContWrap");let l=$("#ctrTabWrap").children(".tabMenuUl"),o=l.children(".ctrTabMore").clone(),i=0;l.empty(),l.children(".ctrTabMore").remove(),o.hide();let s=o.find("#tabMenuHiddenList");s.empty();for(let r=0;r<a.length;r++){let t=a[r],o=$('<li class="tabMenu'+(e._tabs.activeIndex==r?" choiceTab":"")+'" code="'+t.____ID____+'"><a href="javascript:void(0);" class="tabName">'+t.____NAME____+'</a> <a href="javascript:void(0);" class="ctrTabCloseBtn"></a></li>');if(t.____ACTIVE____="N",e._tabs.activeIndex==r&&(null!=t.body&&"object"==typeof t.body&&$(t.body).show(),t.____ACTIVE____="Y",e._tabs.activeMenu=t,null!=e._tabs.menuInfo))for(let n=0;n<e._tabs.menuInfo.length;n++)if(e._tabs.menuInfo[n].code==t.____ID____){let t=e._tabs.activeMenu.body.find(".pageHere");t.find(".first").text(e._tabs.menuInfo[n].mgNm),t.find(".first").next().text(e._tabs.menuInfo[n].mNm)}o.appendTo(l),i+=o.width(),n>i?(t.____TAB____=o,t.____DISPLAY____="Y"):(t.____DISPLAY____="N",o.remove(),o=$('<a href="javascript:void(0);" code="'+t.____ID____+'">'+t.____NAME____+'</a><a href="javascript:void(0);" class="ctrTabCloseBtn"></a>'),t.____TAB____=o,$(o).appendTo(s))}null!=sessionStorage&&sessionStorage.setItem("MenuInfo",e.getCacheJSON(a)),o.appendTo(l),s.children().length>0&&o.show(),e.menuFocus(t)})),e(this,"menuFocus",(t=>{const e=this;if(null==t)return;if(e._tabs.startMenu)return void(e._tabs.startMenu=!1);let n=$("#sideWrap").find("#sideOpen .lnb");if("none"!=n.css("display")){let e=n.find("dl"),a=n.find("li");e.removeClass("lnbDlSelected").addClass("lnbDl"),a.find("a").removeClass("on");for(let n=0;n<a.length;n++){let e=$(a[n]);if(t==e.find("a").attr("code")){e.find("a").addClass("on"),e.closest("dl").removeClass("lnbDl").addClass("lnbDlSelected");break}}}})),e(this,"getMdi",(t=>{const e=this;try{for(let n=0;n<e._tabs.info.length;n++)if(e._tabs.info[n].____ID____==t)return e._tabs.info[n];return null}catch(n){return alert("getMdi Error : "+n,"error"),null}})),e(this,"getMenu",(t=>{new a(this._const,{ctl:"menu",cmd:"employeeMenu"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){0==e.code?(sessionStorage.getItem("LMKEY")&&sessionStorage.removeItem("LMKEY"),sessionStorage.setItem("LMKEY",JSON.stringify(e.data)),t({code:0,message:"(성공) 메뉴 데이터 수집",data:e.data})):t({code:-1,message:"(실패) "+e.message,data:null})}))})),e(this,"getCacheJSON",(t=>{for(var e=t,n=[],a=0;a<e.length;a++){var l=$.extend($.extend({},e[a]),{});for(var o in l)(o.indexOf("____")<0||"____TAB____"==o)&&delete l[o];n.push(l)}return JSON.stringify(n)})),e(this,"getContent",(t=>{const e=this;return new Promise(((n,a)=>{"/"==t.substring(0,1)&&(t=t.substring(1)),$.ajax({url:(4==e._const.__USER_LEVEL?"/temp/":"/tempAct/")+t.replace(/\//g,""),type:"GET",dataType:"html",success:function(t){n(t)},error:function(t,e,n){a(n)}})}))})),e(this,"openLayer",((t,e,n,a)=>{const l=this;let o,i=l.createUniqueId(),s='<div class="mw_layer open"><div class="bg"></div><div id="'+i+'" class="ctlContainer">'+(t=t.replace('<img src="/images/btn/btn_mw_close.png" alt="레이어 닫기">','<img src="/images/btn/btn_mw_close.png" class="popupClose" alt="레이어 닫기">'))+"</div></div>";$("body").append(s),o=$("#"+i+" div:eq(0)");let r=o.find(".mw_title");o.draggable({containment:"body",cursor:"move",handle:r,cancel:".popupClose"}),l.initPositionLayer(o);let c=$(".contents");c.height(),null==c.attr("data-height")&&c.attr("data-height",c.height()),$("body").on("click",".btnClosePopLayer",(function(){l.closeLayerPopup($(this))})),e(i,n,a)})),e(this,"closeLayerPopup",(t=>{if(null!=t){t.closest(".mw_layer").html("").remove();var e=$(".contents");null!=e.attr("data-height")&&e.css("minHeight",e.attr("data-height")+"px")}})),e(this,"createUniqueId",(()=>"dynamicLayerID_"+ ++this._uniqueID)),e(this,"initPositionLayer",(t=>{let e=$(".wrap"),n=e.height(),a=e.width(),l=$(window).height(),o=$(window).width(),i=t.height(),s=t.width(),r=$(document).scrollTop(),c=$(document).scrollLeft();0==a&&(a=$(document).width()),0==n&&(n=$(document).width()),o<s&&(o=a),r+=(l-i)/2,c+=(o-s)/2,r<10&&(r=10),c<10&&(c=10),t.css("top",r),t.css("left",c),t.parent().prev(".bg").height("100%"),t.parent().prev(".bg").width("100%")})),e(this,"workReport",(t=>{const e=this;new a(e._const,{ctl:"company",cmd:"load",employee:"N",account:"N"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(n){if(0==n.code){let a=function(){let t=$("#printWrap .printA4");$(".cNm",printWrap).text(l.cNm),null!=l.cTel&&""!=l.cTel&&$(".cTel",printWrap).text(e._utils.formatPhoneNumber(l.cTel)),$(".cAddress",printWrap).text(l.cAddr+" "+l.cAddrDetail),$(".cHomepage",printWrap).text(l.cHomepage),$(".reportTitle",printWrap).append($("<pre>"+l.cReportTitle+"<pre>")),l.fileInfo.length>0?$(".reportLogo",printWrap).append($('<img src="https://kprintfactory.s3.ap-northeast-2.amazonaws.com'+l.fileInfo[0].path.replace("kprintfactory","")+'" style="width:130px;"></img>')):$(".reportLogo",printWrap).append($("<strong style=\"font-size:20px;font-weight:bold;font-family: 'Nanum Square', sans-serif;\">"+l.cNm+"</strong>")),$(t).print({addGlobalStyles:!0,stylesheet:null,rejectWindow:!0,noPrintSelector:".no-print",iframe:!0,append:null,prepend:null,timeout:1500})},l=n.data;t.cWorkReport=l.cWorkReport,["A","B"].indexOf(l.cWorkReport)>=0?e._report.workReportTypeA(t,a):e._report.workReportTypeB(t,a)}else alert(n.message)}))})),e(this,"transReport",(t=>{const e=this;new a(e._const,{ctl:"company",cmd:"load",employee:"N"},{wapi:"user/ws",spinner:!0}).ajaxformdata((function(n){if(0==n.code){let a=n.data;e._report.workReport(t,(function(){$("#printWrap .printA4"),$(".cNm",printWrap).text(a.cNm),null!=a.cTel&&""!=a.cTel&&$(".cTel",printWrap).text(e._utils.formatPhoneNumber(a.cTel)),$(".cAddress",printWrap).text(a.cAddr+" "+a.cAddrDetail),$(".reportTitle",printWrap).append($("<pre>"+a.cReportTitle+"<pre>")),a.fileInfo.length>0?$(".reportLogo",printWrap).append($('<img src="https://kprintfactory.s3.ap-northeast-2.amazonaws.com'+a.fileInfo[0].path.replace("kprintfactory","")+'" style="width:130px;"></img>')):$(".reportLogo",printWrap).append($("<strong style=\"font-size:20px;font-weight:bold;font-family: 'Nanum Square', sans-serif;\">"+a.cNm+"</strong>"))}))}else alert(n.message)}))})),e(this,"fileDownload",(t=>{let e={ctl:"media",cmd:"downloadBase64"};$.extend(e,{fileSeq:t.fileSeq}),new a(this._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){var n=document.createElement("a");n.download=t.realName,n.href="data:application/octet-stream;base64,"+e.data,n.click(),n.remove()}}))})),e(this,"imageFileLoad",((t,e,n=!0)=>{let a=this,l={ctl:"media",cmd:"imageDownload"};$.extend(l,{fileSeq:t.fileSeq});let o=new XMLHttpRequest,i=new FormData;i.append("service","dws"),i.append("encrypt",a._const.__ISENCPARAM);for(const s in l)if(l.hasOwnProperty(s)){const t=l[s];i.append(s,t)}o.open("POST",a._const.__URL_API+"/user/dws",!0),o.setRequestHeader("Access-Control-Allow-Origin","*"),o.setRequestHeader("Access-Control-Allow-Methods","POST,GET,OPTIONS"),o.setRequestHeader("Access-Control-Allow-Headers","Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-XSRF-TOKEN,Access-Control-Allow-Headers,Access-Control-Allow-Origin"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Authorization","Bearer "+a._const.__ACCESSTOKEN),o.responseType="blob",o.onload=function(){if(200===o.status){let t=o.response,n=window.URL.createObjectURL(t);e(n)}},o.send(i)})),e(this,"emailSend",((t,e)=>{let n={ctl:"ledger",cmd:"workReportMailSend"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"faxSend",((t,e)=>{let n={ctl:"ledger",cmd:"workReportFaxSend"};$.extend(n,t),new a(this._const,n,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),e(this,"modifyTime",((t,e)=>{try{const n=this;let l={ctl:"media",cmd:"realLastTimeSave"};$.extend(l,t),new a(n._const,l,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){0==t.code?"function"==typeof e&&e():toast("수정 시간 기록 실패")}))}catch(n){console.log(n.message)}})),e(this,"lastModifyTime",(t=>{try{let e=__FILE_DOMIN+"/"+this._const.__GROUP_ID+"/realTimeCheck.txt";$.ajax({url:e+(/\?/.test(e)?"&":"?")+(new Date).getTime(),method:"GET",success:function(e,n,a){let l=JSON.parse(e);"function"==typeof t&&t(l)},error:function(t,e,n){},complete:function(){}})}catch(e){console.log(e.message)}})),e(this,"lastModifyTimeCheck",((t=[],e=self._utils.currentDateTime(),n,a)=>{let l=new Date(e.substring(0,4),parseInt(e.substring(4,6))-1,e.substring(6,8),e.substring(8,10),e.substring(10,12),e.substring(12));try{this.lastModifyTime((function(e){let o=!1;if("string"==typeof t){if(null!=e[t]){let a=e[t];new Date(a.substring(0,4),parseInt(a.substring(4,6))-1,a.substring(6,8),a.substring(8,10),a.substring(10,12),a.substring(12))-l>0&&(o=!0,"function"==typeof n&&n())}}else for(let a=0;a<t.length;a++)if(null!=e[t[a]]){let i=e[t[a]];if(new Date(i.substring(0,4),parseInt(i.substring(4,6))-1,i.substring(6,8),i.substring(8,10),i.substring(10,12),i.substring(12))-l>0){o=!0,"function"==typeof n&&n();break}}o||"function"==typeof a&&a()}))}catch(o){console.log(o.message)}})),e(this,"intervalRun",(()=>{let t=this;if(["MM00000001","MM00000013","MM00000014","MM00000015"].indexOf(t._tabs.activeId)>-1){let n={};try{let e=t._utils.parseJSONString(sessionStorage.getItem("LMKEY"));for(let a=0;a<e.length;a++)if(t._tabs.activeId==e[a].code){n=e[a];break}}catch(e){}let a=n.mgController.toLowerCase(),l=n.mController.toLowerCase(),o=t["_"+a]["_"+l]._currentDateTime;t.lastModifyTimeCheck(["order","work","distribution"],o,(function(){t["_"+a]["_"+l]._currentDateTime=t._utils.currentDateTime(),setTimeout((function(){t["_"+a].onControllerAction(l,"retrieve",t._tabs.activeId)}),t._reloadActionTime)}))}})),this._const=t||{},this._data=l||{},this._param=c||{};let p="public/ws";3==t.__USER_LEVEL?p="customer/ws":4==t.__USER_LEVEL?p="user/ws":7==t.__USER_LEVEL&&(p="admin/ws"),this._options={isasync:!0,wapi:p},this._utils=new n,this._ajax=new a,this._popup=new o(this,t||{},l||{},this._options),this._report=new i(this,t||{},l||{},this._options),this._tabs={startMenu:!0,info:[],menuInfo:[],activeMenu:void 0,activeIndex:0,tabMagin:400,tabWidth:0},this._uniqueID=0,this._autocompleteLength=2,this._autocompleteTime=200,this._reloadStartTime=5e3,this._reloadTime=18e4,this._reloadActionTime=1e4,this._pushTime=5e3}}export{V as M};
