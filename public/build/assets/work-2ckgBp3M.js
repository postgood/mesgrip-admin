var t=Object.defineProperty,e=Object.getOwnPropertyNames,n=(e,n,o)=>(((e,n,o)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o})(e,"symbol"!=typeof n?n+"":n,o),o);import{U as o,A as s,C as a}from"./AjaxCall-C-4S7g8x.js";import"./crypto-js-kLIhi_3x.js";import"./jquery-Dvpmrn5Q.js";import"./sweetalert2-Dkd8NR4e.js";var i,l,r=(i={"assets/work-2ckgBp3M.js"(t){class e{constructor(t,e,a){n(this,"init",(()=>{"work"===__ROUTE_PATH&&this.signinInit()})),n(this,"signinInit",(()=>{const t=this;if(null!=localStorage&&localStorage.getItem("userIdSave")){let t=localStorage.getItem("userid");$("input[name=userid]").val(t),$(".imgChkBoxLabel").trigger("click")}let e=window.innerWidth||document.body.clientWidth,n=$(".logBox").width();e!=parseInt(n)&&$(".logBox").css("left","50%").css("margin-left","-250px");let o={ctl:"company",cmd:"info"};o.host=document.location.host,new s(t._const,o).ajaxformdata((function(e){if(0==e.code){let n=e.data;$(".logLogo").empty(),$(".copy").empty(),$(".logLogo").append('<img src="https://kprintfactory.s3.ap-northeast-2.amazonaws.com'+n.fileInfo[0].path.replace("kprintfactory/","")+'" alt="" style="filter:invert(93%);">'),$(".copy").append("<b>"+n.cNm+'</b> <i class="fa-solid fa-square-phone-flip"></i> '+(t._utils.checkEmptyNull(n.cTel)?"":t._utils.formatPhoneNumber(n.cTel))+' <i class="fa-solid fa-location-arrow"></i> : '+n.cAddr+" "+n.cAddrDetail)}else alert(e.message)})),$("#btnSingin").on("click",(function(){t._utils.checkRequired("#login-form")&&($(".imgChkBoxLabel").hasClass("lbOn")?(localStorage.setItem("userid",$("input[name=userid]").val()),localStorage.setItem("userIdSave",!0)):(localStorage.removeItem("userid"),localStorage.removeItem("userIdSave")),$("form").trigger("submit"))})),$("input[name=encpwd]").on("keypress",(function(t){if(t.keyCode&&13==t.keyCode)return $("#btnSingin").trigger("click"),!1})),$(".btnFind").on("click",(function(e){t.layerView((function(e){t.openLayer(e,t.initNewLayer)})),e.stopPropagation()}))})),n(this,"initNewLayer",(t=>{const e=this;$(`#${t} .title`).text("아이디/패스워드 찾기"),$(`#${t}`).on("click",".tabFindID",(function(t){$(".tabcontent").hide(),$(".tablinks").removeClass("active"),$("#idTab").show(),$(this).addClass("active")})),$(`#${t}`).on("click",".tabFindPWD",(function(t){$(".tabcontent").hide(),$(".tablinks").removeClass("active"),$("#pwTab").show(),$(this).addClass("active")})),$(`#${t}`).on("click",".btnEvtCancel, .btnEvtOk",(function(t){$("body .btnClosePopLayer").trigger("click")})),$(`#${t}`).on("click",".btnEvtFind",(function(n){if($(".tablinks.tabFindID").hasClass("active")){let n=$("#idTab input[name=eNm]",`#${t}`).val().replace(/^\s+|\s+$/g,""),o=$("#idTab input[name=eTel]",`#${t}`).val().replace(/^\s+|\s+|[-]/g,"");if(""==n)return alert("이름을 입력해 주세요"),!1;if(""==o)return alert("전화번호를 입력해 주세요"),!1;let s={host:document.location.host,eNm:n,eTel:o};e.idFind(s,(function(e){0==e.code?($(".findlayer").hide(),$(".sublayer").show(),$(".sublayer .resultInfo",`#${t}`).text("검색된 아이디입니다"),$(".sublayer .resultMsg",`#${t}`).text(e.data.eId)):alert("존재하는 아이디가 없습니다")}))}else{let n=$("#pwTab input[name=eId]",`#${t}`).val().replace(/^\s+|\s+$/g,""),o=$("#pwTab input[name=eNm]",`#${t}`).val().replace(/^\s+|\s+$/g,""),s=$("#pwTab input[name=eTel]",`#${t}`).val().replace(/^\s+|\s+|[-]/g,"");if(""==n)return alert("아이디를 입력해 주세요"),!1;if(""==o)return alert("이름을 입력해 주세요"),!1;if(""==s)return alert("전화번호를 입력해 주세요"),!1;let a={host:document.location.host,newCreate:"Y",eId:n,eNm:o,eTel:s};e.pwdChange(a,(function(e){0==e.code?($(".findlayer").hide(),$(".sublayer").show(),$(".sublayer .resultInfo",`#${t}`).text("해당 메일로 임시비밀번호가 발송되었습니다"),$(".sublayer .resultMsg",`#${t}`).text(n)):alert("정보를 다시 확인해 주세요")}))}}))})),n(this,"idFind",((t,e)=>{let n={ctl:"employee",cmd:"idFind"};$.extend(n,t),new s(this._const,n,{wapi:"public/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),n(this,"pwdChange",((t,e)=>{let n={ctl:"employee",cmd:"pwdChange"};$.extend(n,t),new s(this._const,n,{wapi:"public/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),n(this,"layerView",(t=>{t('<div class="mw_defalut" style="width:450px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">아이디/패스워드 찾기</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div class="findlayer mainlayer" style="display:block;height:300px;overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="auto"></colgroup><tbody><tr><td><p style="font-weight:600;">아이디/패스워드를 잊은경우<br/>가입할 때 사용하였던 정보를 입력하여 주시기 바랍니다</p></td></tr></tbody></table></div><div class="tab"><button class="tablinks active tabFindID">아이디 찾기</button><button class="tablinks tabFindPWD">비밀번호 변경</button></div><div class="searchWrap"><div id="idTab" class="tabcontent" style="display:block;"><div class="input-group" style="display:block;"><label for="eNm11">이름</label><input type="text" id="eNm11" name="eNm"></div><div class="input-group"><label for="eTel12">전화번호</label><input type="text" id="eTel12" name="eTel" placeholder="예시) 010987654321"></div></div><div id="pwTab" class="tabcontent"><div class="input-group"><label for="eId21">아이디</label><input type="text" id="eId21" name="eId"></div><div class="input-group"><label for="eNm22">이름</label><input type="text" id="eNm22" name="eNm"></div><div class="input-group"><label for="eTel23">전화번호</label><input type="text" id="eTel23" name="eTel" placeholder="예시) 010987654321"></div></div></div><div class="ac"><a class="btnSearch2 mr10 btnEvtCancel">취소</a><a class="btnSearch btnEvtFind">찾기</a></div></div></div><div class="findlayer sublayer" style="height:300px;overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="auto"></colgroup><tbody><tr><td><p class="resultInfo" style="font-weight:600;">검색된 아이디입니다</p></td></tr></tbody></table></div><div class="searchWrap"><div class="ac mt25 mb25 resultMsg">hon*****@naver.com</div></div><div class="ac"><a class="btnSearch2 mr10 btnEvtOk">확인</a></div></div></div></div>')})),n(this,"openLayer",((t,e)=>{const n=this;let o,s=n.createUniqueId(),a='<div class="mw_layer open"><div class="bg"></div><div id="'+s+'" class="ctlContainer">'+t+"</div></div>";$("body").append(a),o=$("#"+s+" div:eq(0)");let i=o.find(".mw_title");o.draggable({containment:"body",cursor:"move",handle:i}),n.initPositionLayer(o);let l=$(".contents");l.height(),null==l.attr("data-height")&&l.attr("data-height",l.height()),$("body").on("click",".btnClosePopLayer",(function(){n.closeLayerPopup($(this))})),e(s)})),n(this,"closeLayerPopup",(t=>{if(null!=t){t.closest(".mw_layer").html("").remove();var e=$(".contents");null!=e.attr("data-height")&&e.css("minHeight",e.attr("data-height")+"px")}})),n(this,"createUniqueId",(()=>"dynamicLayerID_"+ ++this._uniqueID)),n(this,"initPositionLayer",(t=>{let e=$(".wrap"),n=e.height(),o=e.width(),s=$(window).height(),a=$(window).width(),i=t.height(),l=t.width(),r=$(document).scrollTop(),c=$(document).scrollLeft();0==o&&(o=$(document).width()),0==n&&(n=$(document).width()),a<l&&(a=o),r+=(s-i)/2,c+=(a-l)/2,r<10&&(r=10),c<10&&(c=10),t.css("top",r),t.css("left",c),t.parent().prev(".bg").height("100%"),t.parent().prev(".bg").width("100%")})),this._const=t||{},this._data=e||{},this._param=a||{},this._options={},this._utils=new o,this._ajax=new s}}class i{constructor(t,e,a){n(this,"init",(()=>{let t=this,e=window.innerWidth||document.body.clientWidth,n=window.innerHeight||document.body.clientHeight;t.intervalId=setInterval((function(){t.lastModifyTimeCheck(["order","work","distribution"],t._currentDateTime,(function(){t._currentDateTime=t._utils.currentDateTime(),setTimeout((function(){$(".workBoardTab .workBoardTabLeft li.on").trigger("click")}),3e4)}))}),15e4),$(".workList").css("height",n-30);let o=$(".logBox").width();e!=parseInt(o)&&$(".logBox").css("left","50%").css("margin-left","-250px");let a=t._utils.currentDate(),i=new Date(a).getDay();$(".mobileToday").text(a+" ("+["일","월","화","수","목","금","토"][i]+")"),$(".eNm").text(t._const.__USER_NAME),$(".cNm").empty().text(t._const.__C_NM);let l=$(".workList").children(),r=$(".workListStatusA table tbody");r.on("click",".workNmBtn",(function(){let e=$(this).closest("tr").data("ROW"),n={ctl:"work",cmd:"wStatusCheck",wSeq:e.wSeq};new s(t._const,n).ajaxformdata((function(n){if(0==n.code){if("A"!=n.data.wStatus)return alert('<span style="font-size:19px !important">현재 작업은 대기 상태가 아닙니다.</span>'),!1;$.extend(e,n.data);let o=$("template#workStart");t.openLayer(o.html(),t.workStartEvent,e)}else alert(n.message)}))})),r.on("click","td.cuNm, td.oFileNm",(function(){let e=$(this).closest("tr").data("ROW"),n={ctl:"order",cmd:"load",oSeq:e.oSeq};new s(t._const,n).ajaxformdata((function(n){if(0==n.code){$.extend(n.data,e);let o=$("template#workView");t.openLayer(o.html(),t.workViewEvent,n.data)}else alert(n.message)}))}));let c=$(".workListStatusB");c.on("click",".btnFinishCall",(function(){let e=$(this).closest(".workStatusBInfo").data("ROW"),n=$("template#workAction");t.openLayer(n.html(),t.workFinishEvent,e)})),c.on("click",".btnStopCall",(function(){let e=$(this).closest(".workStatusBInfo").data("ROW"),n=$("template#workAction");t.openLayer(n.html(),t.workStopEvent,e)}));let p=$(".workListStatusB .nextStatusA tbody");p.on("click","td.cuNm, td.oFileNm",(function(){let e=$(this).closest("tr").data("ROW"),n={ctl:"order",cmd:"load",oSeq:e.oSeq};new s(t._const,n).ajaxformdata((function(n){if(0==n.code){$.extend(n.data,e);let o=$("template#workView");t.openLayer(o.html(),t.workViewEvent,n.data)}else alert(n.message)}))})),p.on("click",".workNmBtn",(function(){let e=$(this).closest("tr").data("ROW"),n={ctl:"work",cmd:"wStatusCheck",wSeq:e.wSeq};new s(t._const,n).ajaxformdata((function(n){if(0==n.code){if("A"!=n.data.wStatus)return alert('<span style="font-size:19px !important">현재 작업은 대기 상태가 아닙니다.</span>'),!1;$.extend(e,n.data);let o=$("template#workStart");t.openLayer(o.html(),t.workStartEvent,e)}else alert(n.message)}))}));let d=$(".workStatusBInfo"),u=$(".workBoardTabLeft");$("input[name=onlyToday]").on("change",(function(){$("li:first",u).trigger("click")})),$("li",u).on("click",(function(){let e=$(this),o=e.index();if(e.hasClass("on")||($("li",u).removeClass("on"),$(this).addClass("on"),l.css("display","none"),$(l[o]).css("display","block")),0==o)t.wStatisA((function(e){let n=$(l[0]),o=$("table tbody",n);if(o.empty(),e.length>0)for(let s=0;s<e.length;s++){let n=e[s],a="",i="";t._utils.checkEmptyNull(n.onContent)||(i="color:#ea467f !important;"),"C"==n.wStatus&&(a+="background:#ea467f !important;");let l=$("<tr />").data("ROW",n);l.append('<td class="al cuNm">'+n.cuNm+"</td>"),l.append('<td class="al oFileNm" style="'+i+'">'+n.oFileNm+"</td>"),l.append('<td class="ac">'+n.oPaperSize+"</td>"),l.append('<td class="ac">'+n.wFrontYnNm.substring(0,1)+"</td>"),l.append('<td class="ac"><span class="workNmBtn" style="'+a+'">'+n.wNm+"</span></td>"),l.append('<td class="ar" style="padding-right:10px;">'+t._utils.numberWithCommas(n.oCnt)+"</td>"),o.append(l)}else o.append('<tr><td class="ac" colspan="6">데이타가 없습니다.</td></tr>')}));else if(1==o){let e=$(l[1]);t.wStatisB((function(o){let s=0;$(".nextStatusA tbody",e);let a=$(".workListStatusB");if($(".workStatusBInfo",a).remove(),o.length>0){for(let e=o.length-1;e>=0;e--){let n=d.clone();n.show();let i=o[e];n.data("ROW",i),t._utils.classNameInput(n,i),$(".oApprovalDate",n).text(t._utils.checkEmptyNull(i.oApprovalDate)?"미승인":t._utils.dateformatMin(i.oApprovalDate)),$(".wStartDate",n).text(i.wStartDate.substring(0,16)),$(".oCnt",n).text(t._utils.numberWithCommas(i.oCnt)),$(".oFileInfo",n).text(i.oFileNm);let l=i.optionInfo,r="";for(let t=0;t<l.length;t++){let e=l[t];"Y"==e.cwoOrderYn&&null!=e.woInput&&(r+=(""!=r?" ":"")+'<span class="workOptionListOne vm" style="font-size:18px;"><strong class="workOptionInfo" style="font-size:20px;">'+e.cwoNm+' : <span style="font-weight: bold;">'+e.woInput+"</span></strong></span>")}$(".workOptionListDiv",n).empty().append(r);let c="";i.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let t=0;t<i.processInfo.length;t++){let e=i.processInfo[t];if(e.outsourcingInfo.length>0){let t=[],n=[];for(let o=0;o<e.outsourcingInfo.length;o++)t.push(e.outsourcingInfo[o].wNm),n.push(e.outsourcingInfo[o].cuNm);c+='<span class="mprocessStatusOut" >'+e.spNm+"</span>"}else c+='<span class="mprocessStatus'+e.pStatus+'" >'+e.spNm+"</span>"}$(".processFlow",n).empty().append(c),a.prepend(n),s+=n.height()}$(e).css("height",n+300)}else{let t=d.clone();t.show(),t.empty(),t.append('<div class="noStatusMessage" style="width:100%;font-size:20px;">현재 진행중인 작업이 존재하지 않습니다.</div>'),a.prepend(t)}})),t.wStatisA((function(n){let o=$(".nextStatusA tbody",e);if(o.empty(),n.length>0)for(let e=0;e<n.length;e++){let s=n[e],a="",i="";t._utils.checkEmptyNull(s.onContent)||(i="color:#ea467f !important;"),"C"==s.wStatus&&(a+="background:#ea467f !important;");let l=$("<tr />").data("ROW",s);if(l.append('<td class="al cuNm">'+s.cuNm+"</td>"),l.append('<td class="al oFileNm" style="'+i+'">'+s.oFileNm+"</td>"),l.append('<td class="ac">'+s.oPaperSize+"</td>"),l.append('<td class="ac">'+s.wFrontYnNm.substring(0,1)+"</td>"),l.append('<td class="ac"><span class="workNmBtn" style="'+a+'">'+s.wNm+"</span></td>"),l.append('<td class="ar" style="padding-right:10px;">'+t._utils.numberWithCommas(s.oCnt)+"</td>"),o.append(l),2==e)break}else o.append('<tr><td class="ac" colspan="6">데이타가 없습니다.</td></tr>')}))}else 2==o&&t.wStatisD((function(e){let n=$(l[2]),o=$("table tbody",n);if(o.empty(),e.length>0)for(let s=0;s<e.length;s++){let n=e[s],a=$("<tr />").data("ROW",n);a.append('<td class="al">'+n.oFileNm+"</td>"),a.append('<td class="ac">'+n.wNm+"</td>"),a.append('<td class="ar" style="padding-right:5px;">'+t._utils.numberWithCommas(n.wEndCnt)+"</td>"),a.append('<td class="ac">'+n.wStartDate.substring(5,16)+"</td>"),a.append('<td class="ac">'+n.wEndDate.substring(5,16)+"</td>"),o.append(a)}else o.append('<tr><td class="ac" colspan="6">데이타가 없습니다.</td></tr>')}))})),$(".dataReflash").on("click",(function(){$(".workBoardTab .workBoardTabLeft li.on").trigger("click")})),$(".logOutBtn").on("click",(function(){confirm("로그아웃 하시겠습니까?",(function(t){t&&(document.location.href="/work/logout")}),"로그아웃")})),$(".qrScanner").on("click",(function(){let e=$("template#workQrScanner");t.openLayer(e.html(),t.workQrScannerEvent)})),new s(t._const,{ctl:"employee",cmd:"load"}).ajaxformdata((function(e){if(0==e.code){let n=e.data,o=n.equipmentInfo,s=[],a=[],i=[],l=[];for(let t=0;t<o.length;t++)-1==s.indexOf(o[t].spNm)&&(s.push(o[t].spNm),a.push(o[t].spSeq)),-1==i.indexOf(o[t].eqNm)&&(i.push(o[t].eqNm),l.push(o[t].eqSeq));let r="담당 장비 없음";i.length>0&&(r=1==s.length?s[0]:s[0]+" 외 "+(s.length-1),1==i.length?r+="("+i[0]+")":r+="("+i[0]+" 외 "+(i.length-1)+")"),$(".mobileProcessNm").text(r),n.spSeqs=a,n.spNms=s,n.eqSeqs=l,t._employee=n,$("li:eq(1)",u).trigger("click")}else alert(e.message)}))})),n(this,"wStatisA",(t=>{const e=new Date,n=this;let o={ctl:"employee",cmd:"workList",rows:20};if(n._employee.eqSeqs.length>0){o.spSeqs=JSON.stringify(n._employee.spSeqs),o.eqSeqs=JSON.stringify(n._employee.eqSeqs);let a=$("input[name=onlyToday]:checked").val()??"N";o.onlyToday=a,o.wStatus="A",o.endDt=e.toISOString().substring(0,10).replace(/-/g,""),e.setDate(e.getDate()-30),o.startDt=e.toISOString().substring(0,10).replace(/-/g,""),new s(n._const,o).ajaxformdata((function(e){0==e.code?($(".roadTime").text(n._utils.currentTime()),t(e.data)):alert(e.message)}))}else t([])})),n(this,"wStatisB",(t=>{const e=new Date,n=this;if(n._employee.eqSeqs.length>0){let o={ctl:"employee",cmd:"workList",rows:20};o.spSeqs=JSON.stringify(n._employee.spSeqs),o.eqSeqs=JSON.stringify(n._employee.eqSeqs),o.wStatus="B",o.endDt=e.toISOString().substring(0,10).replace(/-/g,""),e.setDate(e.getDate()-30),o.startDt=e.toISOString().substring(0,10).replace(/-/g,""),new s(n._const,o).ajaxformdata((function(e){0==e.code?($(".roadTime").text(n._utils.currentTime()),t(e.data)):alert(e.message)}))}else t([])})),n(this,"wStatisD",(t=>{const e=new Date,n=this;if(n._employee.eqSeqs.length>0){let o={ctl:"employee",cmd:"workList",rows:50};o.spSeqs=JSON.stringify(n._employee.spSeqs),o.eqSeqs=JSON.stringify(n._employee.eqSeqs),o.wStatus="D",o.endDt=e.toISOString().substring(0,10).replace(/-/g,""),e.setDate(e.getDate()-2),o.startDt=e.toISOString().substring(0,10).replace(/-/g,""),new s(n._const,o).ajaxformdata((function(e){0==e.code?($(".roadTime").text(n._utils.currentTime()),t(e.data)):alert(e.message)}))}else t([])})),n(this,"workViewEvent",((t,e)=>{const n=this,o=$(`#${t}`);n._utils.classNameInput(o,e),n._utils.checkEmptyNull(e.oInchargeTel)||$(".oInchargeTel",o).text(n._utils.formatPhoneNumber(e.oInchargeTel));let s="";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let i=0;i<e.processInfo.length;i++){let t=e.processInfo[i];if(t.outsourcingInfo.length>0){let e=[],n=[];for(let o=0;o<t.outsourcingInfo.length;o++)e.push(t.outsourcingInfo[o].wNm),n.push(t.outsourcingInfo[o].cuNm);s+='<span class="mprocessStatusOut" >'+t.spNm+"</span>"}else s+='<span class="mprocessStatus'+t.pStatus+'" >'+t.spNm+"</span>"}$(".processFlow",o).empty().append(s),e.orderNotice.length>0?($(".orderNotice",o).empty(),$(".orderNotice",o).append(e.orderNotice[0].onContent)):$(".orderNotice",o).empty();let a=$(".orderWorkList tbody",o);for(let i=0;i<e.workInfo.length;i++){let t=e.workInfo[i],o=$("<tr />");o.append($('<td class="ac" style="color:#fff;"/>').append(t.spNm)),o.append($('<td class="ac" style="color:#fff;"/>').append(t.wNm+(n._utils.checkEmptyNull(t.wInfo)?"":"("+t.wInfo+")"))),o.append($('<td class="ac" style="color:#fff;"/>').append(t.wFrontYnNm)),o.append($('<td class="ac" style="color:#fff;"/>').append(null==t.wStartDate?"":t.wStartDate.substring(0,16))),o.append($('<td class="ac" style="color:#fff;"/>').append(null==t.wEndDate?"":t.wEndDate.substring(0,16))),o.append($('<td class="ac" style="color:#fff;"/>').append(t.wStatusNm)),a.append(o)}})),n(this,"workStartEvent",((t,e)=>{const n=this,o=$(`#${t}`);n._utils.classNameInput(o,e),n._utils.checkEmptyNull(e.onContent)&&$(".orderNotice",o).hide();let a=e.optionInfo,i="";for(let s=0;s<a.length;s++){let t=a[s];"Y"==t.cwoOrderYn&&null!=t.woInput&&(i+=(""!=i?" ":"")+'<span class="workOptionListOne vm"><strong class="workOptionInfo" style="color:#fff;">'+t.cwoNm+' : <span style="font-weight: bold;color:#fff;">'+t.woInput+"</span></strong></span>")}$(".workOptionListDiv",o).empty().append(i);let l="";e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let s=0;s<e.processInfo.length;s++){let t=e.processInfo[s];if(t.outsourcingInfo.length>0){let e=[],n=[];for(let o=0;o<t.outsourcingInfo.length;o++)e.push(t.outsourcingInfo[o].wNm),n.push(t.outsourcingInfo[o].cuNm);l+='<span class="mprocessStatusOut" >'+t.spNm+"</span>"}else l+='<span class="mprocessStatus'+t.pStatus+'" >'+t.spNm+"</span>"}$(".processFlow",o).empty().append(l),$(".btnStartCall",o).on("click",(function(){function t(t){if("C"!=t.istInStatus)confirm("입고가 되지 않은 작업 입니다. \n직접 입고처리 하시겠습니까?",(function(e){if(e){let e={ctl:"work",cmd:"incoming",wSeq:t.wSeq};new s(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){n.modifyTime({action:"distribution"});let e={ctl:"work",cmd:"action"};e.wSeq=t.wSeq,e.action="start",new s(n._const,e).ajaxformdata((function(t){if(0==t.code){n.closeLayerPopup(o),alert('<span style="font-size:19px !important">작업이 시작되었습니다.</span>');let t=$(".workBoardTabLeft");$("li:eq(1)",t).trigger("click"),n.modifyTime({action:"work"})}else alert(t.message)}))}else alert(t.message)}))}}),"입고처리");else{let e={ctl:"work",cmd:"action"};e.wSeq=t.wSeq,e.action="start",new s(n._const,e).ajaxformdata((function(t){if(0==t.code){n.closeLayerPopup(o),alert('<span style="font-size:19px !important">작업이 시작되었습니다.</span>');let t=$(".workBoardTabLeft");$("li:eq(1)",t).trigger("click"),n.modifyTime({action:"work"})}else alert(t.message)}))}}null==e.processInfo.befer?t(e):"A"==e.wStatus&&"D"!=e.processInfo.befer.pStatus?confirm("선 공정 ["+e.processInfo.befer.spNm+"]가 완료 되지 않았습니다. \n\n작업진행 하시겠습니까?",(function(n){n&&t(e)})," 강제 작업 진행"):t(e)}))})),n(this,"workFinishEvent",((t,e)=>{const n=$(`#${t}`);let o="["+e.wNm+"] 작업을 완료합니다.";$(".workTitle",n).append(o),$(".workSubTitle",n).append("완료수량 :"),e.action="end",this.workActionEvent(n,e)})),n(this,"workStopEvent",((t,e)=>{const n=$(`#${t}`);let o="["+e.wNm+'] 작업을 <span style="color:red;">중지</span>합니다.';$(".workTitle",n).append(o),$(".workSubTitle",n).append("작업수량 :"),$(".btnActionCall ",n).removeClass("workActionStartBtn").addClass("workActionStopBtn").empty().append('<i class="fa-solid fa-pause"></i>&nbsp;&nbsp;작업중지'),e.action="stop",this.workActionEvent(n,e)})),n(this,"workActionEvent",((t,e)=>{const n=this;$(".mobilePop ",t).position().top,$(".mobilePop ",t).css("top","150px"),$("input[name=wEndCnt]",t).on("change keyup input",(function(){let t=$(this).val();t=n._utils.convertNumber(t),t=n._utils.numberWithCommas(t),$(this).val(t)})),t.on("click",".btnActionCall",(function(){let o=$("input[name=wEndCnt]",t).val();if(n._utils.checkEmptyNull(o))return alert('<span style="font-size:19px !important">수량을 입력하십시오</span>'),!1;o=n._utils.getOnlyNumber(o);let a={ctl:"work",cmd:"wStatusCheck",wSeq:e.wSeq};new s(n._const,a).ajaxformdata((function(a){if(0==a.code){if("B"!=a.data.wStatus)return alert('<span style="font-size:19px !important">현재 작업은 진행 상태가 아닙니다.</span>'),!1;let i={ctl:"work",cmd:"action"};i.wSeq=e.wSeq,i.action=e.action,i.cnt=o,new s(n._const,i).ajaxformdata((function(e){if(0==e.code){n.closeLayerPopup(t),alert('<span style="font-size:19px !important"> '+("stop"==i.action?"중지":"완료")+" 처리 되었습니다.</span>");let e=$(".workBoardTabLeft");$("li:eq(1)",e).trigger("click"),n.modifyTime({action:"work"})}else alert(e.message)}))}else alert(a.message)}))}))})),n(this,"workQrScannerEvent",((t,e)=>{let n=this;const o=$(`#${t}`);let a=document.createElement("video");function i(){let t=document.getElementById("canvas"),e=t.getContext("2d"),i=document.getElementById("loadingMessage");function l(t,n,o){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.lineWidth=4,e.strokeStyle=o,e.stroke()}function r(){try{if(i.innerText="⌛ 스캔 기능을 활성화 중입니다.",a.readyState===a.HAVE_ENOUGH_DATA){i.hidden=!0,t.hidden=!1,t.height=a.videoHeight,t.width=a.videoWidth,e.drawImage(a,0,0,t.width,t.height);var c=e.getImageData(0,0,t.width,t.height),p=jsQR(c.data,c.width,c.height,{inversionAttempts:"dontInvert"});if(p&&(l(p.location.topLeftCorner,p.location.topRightCorner,"#FF3B58"),l(p.location.topRightCorner,p.location.bottomRightCorner,"#FF3B58"),l(p.location.bottomRightCorner,p.location.bottomLeftCorner,"#FF3B58"),l(p.location.bottomLeftCorner,p.location.topLeftCorner,"#FF3B58"),p.data.indexOf(document.location.host)>-1||p.data.indexOf("127.0.0.1")>-1)){let t=p.data.substring(p.data.indexOf("?")+3);t=n._utils.decryptData(decodeURI(t));let e={},i=t.split("&");for(let n=0;n<i.length;n++){let t=i[n].split("=");e[t[0]]=t[1]}if(null!=e.oSeq){n.stopScan(a);let t={ctl:"order",cmd:"load",oSeq:e.oSeq};return void new s(n._const,t).ajaxformdata((function(t){if(0==t.code){let e=$("template#workQrStart");n.openLayer(e.html(),n.workQrStartEvent,t.data),n.closeLayerPopup(o)}else alert(t.message)}))}alert('<span style="font-size:19px !important">조회 가능한 QR코드가 아닙니다.</span>')}}n._scanner&&requestAnimationFrame(r)}catch(d){alert(d.message)}}document.getElementById("output"),document.getElementById("outputMessage"),document.getElementById("outputData"),n._scanner=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:n._facingMode}}).then((function(t){a.srcObject=t,a.setAttribute("playsinline",!0),a.play(),requestAnimationFrame(r)}))}$(".cameraChange",o).on("click",(function(){"environment"==n._facingMode?n._facingMode="user":n._facingMode="environment",n.stopScan(a),setTimeout(i,500)})),$(".btnClosePopLayer",o).on("click",(function(){n.stopScan(a)})),setTimeout(i,100)})),n(this,"stopScan",(t=>{t.srcObject.getTracks().forEach((function(t){t.stop()})),t.srcObject=null})),n(this,"workQrStartEvent",((t,e)=>{const n=this,o=$(`#${t}`);n._utils.classNameInput(o,e),n._utils.checkEmptyNull(e.onContent)&&$(".orderNotice",o).hide();let a="",i=!1;e.processInfo.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0));for(let s=0;s<e.processInfo.length;s++){let t=e.processInfo[s];"Y"==t.wOutsourcingYn?a+='<span class="mprocessStatusOut" >'+t.spNm+"</span>":a+='<span class="mprocessStatus'+t.pStatus+'" >'+t.spNm+"</span>"}let l=[];for(let s=0;s<e.workInfo.length;s++)n._employee.spSeqs.indexOf(e.workInfo[s].spSeq)>-1&&("A"==e.workInfo[s].wStatus||"C"==e.workInfo[s].wStatus)&&l.push(e.workInfo[s]);if(l.sort(((t,e)=>t.sort<e.sort?-1:t.sort>e.sort?1:0)),0==l.length)return n.closeLayerPopup(o),n._employee.spNms.join(","),alert('<span style="font-size:19px !important">['+e.oFileNm+"]수주에 부여 또는 대기중인 작업이 존재 하지 않습니다.</span>"),!1;let r=$("select[name=wSeq]",o).data("workInfo",l);for(let s=0;s<l.length;s++){let t=$("<option />").val(l[s].wSeq).text(l[s].wNm).data("ROW",l[s]);r.append(t)}r.on("change",(function(){let t=$(this).val();for(let e=0;e<l.length;e++)if(l[e].wSeq==t){$("input[name=spSeq]",o).val(l[e].spSeq);let t=l[e].optionInfo,s="";for(let e=0;e<t.length;e++){let n=t[e];"Y"==n.cwoOrderYn&&null!=n.woInput&&(s+=(""!=s?" ":"")+'<span class="workOptionListOne vm"><strong class="workOptionInfo">'+n.cwoNm+' : <span style="font-weight: bold;">'+n.woInput+"</span></strong></span>")}$(".workOptionListDiv",o).empty().append(s),$(".wFrontYnNm",o).text(l[e].wFrontYnNm),n._utils.checkEmptyNull(l[e].wESeq)||n._const.__USER_ID!=l[e].wESeq?(i=!1,$(".btnMyJobChangeCall",o).show(),$(".btnStartCall",o).hide()):(i=!0,$(".btnMyJobChangeCall",o).hide(),$(".btnStartCall",o).show())}})),$(".processFlow",o).empty().append(a),$(".btnStartCall",o).on("click",(function(){$("input[name=confirmation]:checked",o).val();let t=$("select[name=wSeq]",o).val();function a(t){if("C"!=t.istInStatus)confirm("입고가 되지 않은 작업 입니다. \n직접 입고처리 하시겠습니까?",(function(e){if(e){let e={ctl:"work",cmd:"incoming",wSeq:t.wSeq};new s(n._const,e,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(e){if(0==e.code){n.modifyTime({action:"distribution"});let e={ctl:"work",cmd:"action"};e.wSeq=t.wSeq,e.action="start",new s(n._const,e).ajaxformdata((function(t){if(0==t.code){n.closeLayerPopup(o),alert('<span style="font-size:19px !important">작업이 시작되었습니다.</span>');let t=$(".workBoardTabLeft");$("li:eq(1)",t).trigger("click"),n.modifyTime({action:"work"})}else alert(t.message)}))}else alert(t.message)}))}}),"입고처리");else{let e={ctl:"work",cmd:"action"};e.wSeq=t.wSeq,e.action="start",new s(n._const,e).ajaxformdata((function(t){if(0==t.code){n.closeLayerPopup(o),alert('<span style="font-size:19px !important">작업이 시작되었습니다.</span>');let t=$(".workBoardTabLeft");$("li:eq(1)",t).trigger("click"),n.modifyTime({action:"work"})}else alert(t.message)}))}}e.wSeq=t,i?null==e.processInfo.befer?a(e):"A"==e.wStatus&&"D"!=e.processInfo.befer.pStatus?confirm('<span style="font-size:19px !important">선 공정 ['+e.processInfo.befer.spNm+"]가 완료 되지 않았습니다. \n\n작업진행 하시겠습니까?</span>",(function(t){t&&a(e)})," 강제 작업 진행"):a(e):alert('<span style="font-size:19px !important">배정된 작업이 아닙니다.</span>')})),$(".btnMyJobChangeCall",o).on("click",(function(){$("input[name=confirmation]:checked",o).val();let t=$("select[name=wSeq]",o).val();e.wSeq=t,i||confirm('<span style="font-size:19px !important">작업자 ['+n._const.__USER_NAME+"]로 변경 하시겠습니까?</span>",(function(t){if(t){$("select[name=spSeq]",o).val();let t={ctl:"work",cmd:"employeeChange",wSeq:e.wSeq,wESeq:n._const.__USER_ID,spSeq:e.spSeq};new s(n._const,t,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){0==t.code?(i=!0,alert('<span style="font-size:19px !important">작업자가 변경되었습니다.<br>시작 버튼을 다시 눌러 진행하십시요.</span>'),$(".btnMyJobChangeCall",o).hide(),$(".btnStartCall",o).show()):alert(t.message)}))}}),"변경")})),r.trigger("change")})),n(this,"openLayer",((t,e,n,o)=>{const s=this;let a,i=s.createUniqueId(),l='<div class="mw_layer open"><div class="bg"></div><div id="'+i+'" class="ctlContainer">'+t+"</div></div>";$("body").append(l),a=$("#"+i+" div:eq(0)");let r=a.find(".mw_title");a.draggable({containment:"body",cursor:"move",handle:r}),s.initPositionLayer(a);let c=$(".contents");c.height(),null==c.attr("data-height")&&c.attr("data-height",c.height()),$("body").on("click",".btnClosePopLayer",(function(){let t=$("video");t.length>0&&s.stopScan(t[0]),s._scanner=!1,s.closeLayerPopup($(this))})),e(i,n,o)})),n(this,"closeLayerPopup",(t=>{if(null!=t){t.closest(".mw_layer").html("").remove();var e=$(".contents");null!=e.attr("data-height")&&e.css("minHeight",e.attr("data-height")+"px")}})),n(this,"createUniqueId",(()=>{const t=this;return t._uniqueID=t._uniqueID??0,"dynamicLayerID_"+ ++t._uniqueID})),n(this,"initPositionLayer",(t=>{let e=$(".wrap"),n=e.height(),o=e.width(),s=$(window).height(),a=$(window).width(),i=t.height(),l=t.width(),r=$(document).scrollTop(),c=$(document).scrollLeft();0==o&&(o=$(document).width()),0==n&&(n=$(document).width()),a<l&&(a=o),r+=(s-i)/2,c+=(a-l)/2,r<10&&(r=10),c<10&&(c=10),t.css("top",r),t.css("left",c),t.parent().prev(".bg").height("100%"),t.parent().prev(".bg").width("100%")})),n(this,"modifyTime",((t,e)=>{try{const n=this;let o={ctl:"media",cmd:"realLastTimeSave"};$.extend(o,t),new s(n._const,o,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){0==t.code?"function"==typeof e&&e():toast("수정 시간 기록 실패")}))}catch(n){console.error(n.message)}})),n(this,"lastModifyTime",(t=>{try{let e=__FILE_DOMIN+"/"+this._const.__GROUP_ID+"/realTimeCheck.txt";$.ajax({url:e+(/\?/.test(e)?"&":"?")+(new Date).getTime(),method:"GET",success:function(e,n,o){let s=JSON.parse(e);"function"==typeof t&&t(s)},error:function(t,e,n){},complete:function(){}})}catch(e){console.error(e.message)}})),n(this,"lastModifyTimeCheck",((t=[],e=self._utils.currentDateTime(),n,o)=>{let s=new Date(e.substring(0,4),parseInt(e.substring(4,6))-1,e.substring(6,8),e.substring(8,10),e.substring(10,12),e.substring(12));try{this.lastModifyTime((function(e){let a=!1;if("string"==typeof t){if(null!=e[t]){let o=e[t];new Date(o.substring(0,4),parseInt(o.substring(4,6))-1,o.substring(6,8),o.substring(8,10),o.substring(10,12),o.substring(12))-s>0&&(a=!0,"function"==typeof n&&n())}}else for(let o=0;o<t.length;o++)if(null!=e[t[o]]){let i=e[t[o]];if(new Date(i.substring(0,4),parseInt(i.substring(4,6))-1,i.substring(6,8),i.substring(8,10),i.substring(10,12),i.substring(12))-s>0){a=!0,"function"==typeof n&&n();break}}a||"function"==typeof o&&o()}))}catch(a){console.log(a.message)}})),this._const=t||{},this._data=e||{},this._param=a||{},this._options={},this._utils=new o,this._ajax=new s,this._employee={},this._scanner=!1,this._facingMode="user",this._isMyJob=!0,this._currentDateTime=this._utils.currentDateTime()}}class l{constructor(t,s,a){n(this,"init",(()=>{const t=this;switch(__ROUTE_PATH){case"work":t._workLogin=new e(t._const,t._data,t._param),t._workLogin.init();break;case"work/dashboard":t._workDashboard=new i(t._const,t._data,t._param),t._workDashboard.init()}})),this._const=t||{},this._data=s||{},this._param=a||{},this._options={},this._utils=new o}}window.addEventListener("orientationchange",(function(){setTimeout((function(){}),200)})),$((function(){const e={__ENVIRONMENT:"live",__URL_API:"https://api.dev.kprintfactory.com",__URL_AS3:"/assets/",__ISENCPARAM:!1,__ISDEBUGDATA:!1};let n,o;if(n=void 0!==t?t:self.exportGlobalModule={},__GLOBALINFO){let t=a.decrypt(__GLOBALINFO,"580v0xb7jtervnxjf3aki2i9hgzozg4g");if(t.islogin){let n=t.sessionInfo;$.extend(e,{__USER_ID:n.eSeq,__USER_NAME:n.eNm,__USER_TEL:n.eTel,__USER_LEVEL:n.authLevel,__GROUP_ID:n.cSeq,__ACCESSTOKEN:n.AccessToken,__ENCKEY:n.AuthKey,__MANAGER_YN:n.managerYn,__C_NM:n.cNm,__C_TEL:n.cTel,__C_ADDRESS:n.cAddr+" "+n.cAddrDetail})}}else $.extend(e,{__AUTH_API:"public",__ENCKEY:"580v0xb7jtervnxjf3aki2i9hgzozg4g"});o=__SEND_PARAMS?JSON.parse(__SEND_PARAMS):{};const s=new l(e,__SEND_PARAMS,o);s.init(),n.onControllerAction=function(t,e,n,o){return s.onControllerAction(t,e,n,o)}}))}},function(){return l||(0,i[e(i)[0]])((l={exports:{}}).exports,l),l.exports});export default r();
