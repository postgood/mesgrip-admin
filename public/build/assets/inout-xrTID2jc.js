var t=Object.defineProperty,e=Object.getOwnPropertyNames,i=(e,i,n)=>(((e,i,n)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n})(e,"symbol"!=typeof i?i+"":i,n),n);import{U as n,A as a,C as o}from"./AjaxCall-C-4S7g8x.js";import"./crypto-js-kLIhi_3x.js";import"./jquery-Dvpmrn5Q.js";import"./sweetalert2-Dkd8NR4e.js";var s,l,r=(s={"assets/inout-xrTID2jc.js"(t){class e{constructor(t,e,o){i(this,"init",(()=>{"inout"===__ROUTE_PATH&&this.signinInit()})),i(this,"signinInit",(()=>{const t=this;if(null!=localStorage&&localStorage.getItem("userIdSave")){let t=localStorage.getItem("userid");$("input[name=userid]").val(t),$(".imgChkBoxLabel").trigger("click")}let e=window.innerWidth||document.body.clientWidth,i=$(".logBox").width();e!=parseInt(i)&&$(".logBox").css("left","50%").css("margin-left","-250px");let n={ctl:"company",cmd:"info"};n.host=document.location.host,new a(t._const,n).ajaxformdata((function(e){if(0==e.code){let i=e.data;$(".logLogo").empty(),$(".copy").empty(),$(".logLogo").append('<img src="https://kprintfactory.s3.ap-northeast-2.amazonaws.com'+i.fileInfo[0].path.replace("kprintfactory/","")+'" alt="" style="filter:invert(93%);">'),$(".copy").append("<b>"+i.cNm+'</b> <i class="fa-solid fa-square-phone-flip"></i> '+(t._utils.checkEmptyNull(i.cTel)?"":t._utils.formatPhoneNumber(i.cTel))+' <i class="fa-solid fa-location-arrow"></i> : '+i.cAddr+" "+i.cAddrDetail)}else alert(e.message)})),$("#btnSingin").on("click",(function(){t._utils.checkRequired("#login-form")&&($(".imgChkBoxLabel").hasClass("lbOn")?(localStorage.setItem("userid",$("input[name=userid]").val()),localStorage.setItem("userIdSave",!0)):(localStorage.removeItem("userid"),localStorage.removeItem("userIdSave")),$("form").trigger("submit"))})),$("input[name=encpwd]").on("keypress",(function(t){if(t.keyCode&&13==t.keyCode)return $("#btnSingin").trigger("click"),!1})),$(".btnFind").on("click",(function(e){t.layerView((function(e){t.openLayer(e,t.initNewLayer)})),e.stopPropagation()}))})),i(this,"initNewLayer",(t=>{const e=this;$(`#${t} .title`).text("아이디/패스워드 찾기"),$(`#${t}`).on("click",".tabFindID",(function(t){$(".tabcontent").hide(),$(".tablinks").removeClass("active"),$("#idTab").show(),$(this).addClass("active")})),$(`#${t}`).on("click",".tabFindPWD",(function(t){$(".tabcontent").hide(),$(".tablinks").removeClass("active"),$("#pwTab").show(),$(this).addClass("active")})),$(`#${t}`).on("click",".btnEvtCancel, .btnEvtOk",(function(t){$("body .btnClosePopLayer").trigger("click")})),$(`#${t}`).on("click",".btnEvtFind",(function(i){if($(".tablinks.tabFindID").hasClass("active")){let i=$("#idTab input[name=eNm]",`#${t}`).val().replace(/^\s+|\s+$/g,""),n=$("#idTab input[name=eTel]",`#${t}`).val().replace(/^\s+|\s+|[-]/g,"");if(""==i)return alert("이름을 입력해 주세요"),!1;if(""==n)return alert("전화번호를 입력해 주세요"),!1;let a={host:document.location.host,eNm:i,eTel:n};e.idFind(a,(function(e){0==e.code?($(".findlayer").hide(),$(".sublayer").show(),$(".sublayer .resultInfo",`#${t}`).text("검색된 아이디입니다"),$(".sublayer .resultMsg",`#${t}`).text(e.data.eId)):alert("존재하는 아이디가 없습니다")}))}else{let i=$("#pwTab input[name=eId]",`#${t}`).val().replace(/^\s+|\s+$/g,""),n=$("#pwTab input[name=eNm]",`#${t}`).val().replace(/^\s+|\s+$/g,""),a=$("#pwTab input[name=eTel]",`#${t}`).val().replace(/^\s+|\s+|[-]/g,"");if(""==i)return alert("아이디를 입력해 주세요"),!1;if(""==n)return alert("이름을 입력해 주세요"),!1;if(""==a)return alert("전화번호를 입력해 주세요"),!1;let o={host:document.location.host,newCreate:"Y",eId:i,eNm:n,eTel:a};e.pwdChange(o,(function(e){0==e.code?($(".findlayer").hide(),$(".sublayer").show(),$(".sublayer .resultInfo",`#${t}`).text("해당 메일로 임시비밀번호가 발송되었습니다"),$(".sublayer .resultMsg",`#${t}`).text(i)):alert("정보를 다시 확인해 주세요")}))}}))})),i(this,"idFind",((t,e)=>{let i={ctl:"employee",cmd:"idFind"};$.extend(i,t),new a(this._const,i,{wapi:"public/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),i(this,"pwdChange",((t,e)=>{let i={ctl:"employee",cmd:"pwdChange"};$.extend(i,t),new a(this._const,i,{wapi:"public/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),i(this,"layerView",(t=>{t('<div class="mw_defalut" style="width:450px;" id=""><div class="mw_title" id="handle"><h1 class="mw_title_mid"><span class="title">아이디/패스워드 찾기</span><a href="javascript:void(0);" class="close_layer btnClosePopLayer"><img src="/images/btn/btn_mw_close.png" alt="레이어 닫기"></a></h1></div><div class="mw_ctWrap"><div class="mw_contents"><div class="findlayer mainlayer" style="display:block;height:300px;overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="auto"></colgroup><tbody><tr><td><p style="font-weight:600;">아이디/패스워드를 잊은경우<br/>가입할 때 사용하였던 정보를 입력하여 주시기 바랍니다</p></td></tr></tbody></table></div><div class="tab"><button class="tablinks active tabFindID">아이디 찾기</button><button class="tablinks tabFindPWD">비밀번호 변경</button></div><div class="searchWrap"><div id="idTab" class="tabcontent" style="display:block;"><div class="input-group" style="display:block;"><label for="eNm11">이름</label><input type="text" id="eNm11" name="eNm"></div><div class="input-group"><label for="eTel12">전화번호</label><input type="text" id="eTel12" name="eTel" placeholder="예시) 010987654321"></div></div><div id="pwTab" class="tabcontent"><div class="input-group"><label for="eId21">아이디</label><input type="text" id="eId21" name="eId"></div><div class="input-group"><label for="eNm22">이름</label><input type="text" id="eNm22" name="eNm"></div><div class="input-group"><label for="eTel23">전화번호</label><input type="text" id="eTel23" name="eTel" placeholder="예시) 010987654321"></div></div></div><div class="ac"><a class="btnSearch2 mr10 btnEvtCancel">취소</a><a class="btnSearch btnEvtFind">찾기</a></div></div></div><div class="findlayer sublayer" style="height:300px;overflow-y:auto;padding:2px;"><div class="bottonWrap"><table cellpadding="0" cellspacing="0" border="0" summary="" class="noBdrTb tr_nohover"><caption></caption><colgroup><col width="auto"></colgroup><tbody><tr><td><p class="resultInfo" style="font-weight:600;">검색된 아이디입니다</p></td></tr></tbody></table></div><div class="searchWrap"><div class="ac mt25 mb25 resultMsg">hon*****@naver.com</div></div><div class="ac"><a class="btnSearch2 mr10 btnEvtOk">확인</a></div></div></div></div>')})),i(this,"openLayer",((t,e)=>{const i=this;let n,a=i.createUniqueId(),o='<div class="mw_layer open"><div class="bg"></div><div id="'+a+'" class="ctlContainer">'+t+"</div></div>";$("body").append(o),n=$("#"+a+" div:eq(0)");let s=n.find(".mw_title");n.draggable({containment:"body",cursor:"move",handle:s}),i.initPositionLayer(n);let l=$(".contents");l.height(),null==l.attr("data-height")&&l.attr("data-height",l.height()),$("body").on("click",".btnClosePopLayer",(function(){i.closeLayerPopup($(this))})),e(a)})),i(this,"closeLayerPopup",(t=>{if(null!=t){t.closest(".mw_layer").html("").remove();var e=$(".contents");null!=e.attr("data-height")&&e.css("minHeight",e.attr("data-height")+"px")}})),i(this,"createUniqueId",(()=>"dynamicLayerID_"+ ++this._uniqueID)),i(this,"initPositionLayer",(t=>{let e=$(".wrap"),i=e.height(),n=e.width(),a=$(window).height(),o=$(window).width(),s=t.height(),l=t.width(),r=$(document).scrollTop(),c=$(document).scrollLeft();0==n&&(n=$(document).width()),0==i&&(i=$(document).width()),o<l&&(o=n),r+=(a-s)/2,c+=(o-l)/2,r<10&&(r=10),c<10&&(c=10),t.css("top",r),t.css("left",c),t.parent().prev(".bg").height("100%"),t.parent().prev(".bg").width("100%")})),this._const=t||{},this._data=e||{},this._param=o||{},this._options={},this._utils=new n,this._ajax=new a}}class s{constructor(t,e,o){i(this,"init",(()=>{let t=this,e=window.innerWidth||document.body.clientWidth,i=window.innerHeight||document.body.clientHeight;$(".workList").css("height",i-30);let n=$(".logBox").width();e!=parseInt(n)&&$(".logBox").css("left","50%").css("margin-left","-250px");let a=t._utils.currentDate(),o=new Date(a).getDay();$(".mobileToday").text(a+" ("+["일","월","화","수","목","금","토"][o]+")"),$(".eNm").text(t._const.__USER_NAME),$(".cNm").empty().text(t._const.__C_NM),$(".logOutBtn").on("click",(function(){confirm('<span style="font-size:19px !important">로그아웃 하시겠습니까?</span>',(function(t){t&&(document.location.href="/inout/logout")}),"로그아웃")})),$(".inScanner").on("click",(function(){let e=$("template#workQrScanner");t.openLayer(e.html(),t.workQrScannerEvent,"istInStatus")})),$(".outScanner").on("click",(function(){let e=$("template#workQrScanner");t.openLayer(e.html(),t.workQrScannerEvent,"istOutStatus")})),$(".newInScanner").on("click",(function(){let e=$("template#workQrScanner");t.openLayer(e.html(),t.workQrScannerEvent,"istInStatus")})),$(".newOutScanner").on("click",(function(){let e=$("template#workQrScanner");t.openLayer(e.html(),t.workQrScannerEvent,"istOutStatus")}))})),i(this,"scannerListAdd",(t=>{const e=this._layerObject;let i=$(".scannerList",e),n=$("tr",i);for(let o=0;o<n.length;o++)if($(n[o]).data("ROW").oSeq==t.oSeq)return!1;let a=$("<tr />");a.append($('<td class="al" style="border-bottom:1px solid #fff !important;background:#000;color:#fff;padding-bottom:10px !important;"></td>').append(t.oFileNm)),a.append($('<td class="ac" style="border-bottom:1px solid #fff !important;background:#000;color:#fff;padding-bottom:10px !important;"></td>').append(t.oPaperSize)),a.append($('<td class="ac" style="border-bottom:1px solid #fff !important;background:#000;color:#fff;padding-bottom:10px !important;"></td>').append(this._utils.numberWithCommas(t.oCnt))),a.append($('<td class="ac" style="border-bottom:1px solid #fff !important;background:#000;color:#fff;padding-bottom:10px !important;"></td>').append('<i class="fa-solid fa-square-minus" style="color:#f740e8;font-size: 18px;"></i>')),a.data("ROW",t),i.append(a)})),i(this,"workQrScannerEvent",((t,e)=>{let i=this;const n=$(`#${t}`);i._layerObject=n,i._actionType=e,"istInStatus"==e?($(".btnFinishCall",n).addClass("istInButton"),$(".actionIcon",n).removeClass("fa-right-to-bracket").addClass("fa-right-from-bracket"),i._actionNm="입고"):($(".btnFinishCall",n).addClass("istOutButton"),$(".actionIcon",n).removeClass("fa-right-from-bracket").addClass("fa-right-to-bracket"),i._actionNm="출고");let o=document.createElement("video");$(".actionNm",n).text(i._actionNm);let s=$(".scannerList",n);s.on("click",".fa-square-minus",(function(){let t=$(this).closest("tr"),e=t.data("ROW");confirm('<span style="font-size:19px !important">['+e.oFileNm+"]삭제 하시겠습니까?</span>",(function(e){e&&t.remove()}),"삭제")})),$(".btnClosePopLayer",n).on("click",(function(){i.stopScan(o)})),$(".btnFinishCall",n).on("click",(function(){let t=[],e=$("tr",s);for(let i=0;i<e.length;i++){let n=$(e[i]).data("ROW");-1==t.indexOf(n.oSeq)&&t.push(n.oSeq)}if(0==t.length)return void alert('<span style="font-size:19px !important">'+i._actionNm+"처리할 QR코드를 스캔 하십시오</span>");let a={oSeqs:JSON.stringify(t),kind:"istInStatus"==i._actionType?"in":"out",status:"C"};i.update(a,(function(e){0==e.code?($(".btnClosePopLayer",n).trigger("click"),alert('<span style="font-size:19px !important">총 '+t.length+"건이 "+i._actionNm+"처리 되었습니다.</span>"),i.modifyTime({action:"distribution"})):alert(e.message)}))})),setTimeout((function(){let t=document.getElementById("inoutCanvas"),e=t.getContext("2d"),s=document.getElementById("loadingMessage"),l=$(".qrMessage",n);function r(t,i,n){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(i.x,i.y),e.lineWidth=4,e.strokeStyle=n,e.stroke()}function c(){try{if(s.innerText="⌛ 스캔 기능을 활성화 중입니다.",o.readyState===o.HAVE_ENOUGH_DATA){s.hidden=!0,t.hidden=!1,t.height=o.videoHeight,t.width=o.videoWidth,e.drawImage(o,0,0,t.width,t.height);var n=e.getImageData(0,0,t.width,t.height),d=jsQR(n.data,n.width,n.height,{inversionAttempts:"dontInvert"});if(d&&(r(d.location.topLeftCorner,d.location.topRightCorner,"#FF3B58"),r(d.location.topRightCorner,d.location.bottomRightCorner,"#FF3B58"),r(d.location.bottomRightCorner,d.location.bottomLeftCorner,"#FF3B58"),r(d.location.bottomLeftCorner,d.location.topLeftCorner,"#FF3B58"),l.empty(),d.data.indexOf(document.location.host)>-1||d.data.indexOf("127.0.0.1")>-1)){let t=d.data.substring(d.data.indexOf("?")+3);t=i._utils.decryptData(decodeURI(t));let e={},n=t.split("&");for(let i=0;i<n.length;i++){let t=n[i].split("=");e[t[0]]=t[1]}if(null!=e.oSeq){let t={ctl:"order",cmd:"load",oSeq:e.oSeq};new a(i._const,t).ajaxformdata((function(t){if(0==t.code){let e=t.data;"C"==e[i._actionType]?l.text(i._actionNm+"완료된 수주건 입니다."):"istOutStatus"==i._actionType&&"D"!=e.oStatus?l.text("작업이 완료되지 않은 수주건 입니다."):i.scannerListAdd(e)}else l.text(t.message)}))}else l.text("조회 가능한 QR코드가 아닙니다.")}}i._scanner&&requestAnimationFrame(c)}catch(p){alert("vedio : "+p.message)}}i._scanner=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then((function(t){o.srcObject=t,o.setAttribute("playsinline",!0),o.play(),requestAnimationFrame(c)}))}),100)})),i(this,"stopScan",(t=>{t.srcObject.getTracks().forEach((function(t){t.stop()})),t.srcObject=null})),i(this,"update",((t,e)=>{let i={ctl:"distribution",cmd:"update"};$.extend(i,t),new a(this._const,i,{wapi:"user/ws",spinner:!0}).ajaxformdata((function(t){e(t)}))})),i(this,"openLayer",((t,e,i,n)=>{const a=this;let o,s=a.createUniqueId(),l='<div class="mw_layer open"><div class="bg"></div><div id="'+s+'" class="ctlContainer">'+t+"</div></div>";$("body").append(l),o=$("#"+s+" div:eq(0)");let r=o.find(".mw_title");o.draggable({containment:"body",cursor:"move",handle:r}),a.initPositionLayer(o);let c=$(".contents");c.height(),null==c.attr("data-height")&&c.attr("data-height",c.height()),$("body").on("click",".btnClosePopLayer",(function(){let t=$("video");t.length>0&&t.stop(),a._scanner=!1,a.closeLayerPopup($(this))})),e(s,i,n)})),i(this,"closeLayerPopup",(t=>{if(null!=t){t.closest(".mw_layer").html("").remove();var e=$(".contents");null!=e.attr("data-height")&&e.css("minHeight",e.attr("data-height")+"px")}})),i(this,"createUniqueId",(()=>{const t=this;return t._uniqueID=t._uniqueID??0,"dynamicLayerID_"+ ++t._uniqueID})),i(this,"initPositionLayer",(t=>{let e=$(".wrap"),i=e.height(),n=e.width(),a=$(window).height(),o=$(window).width(),s=t.height(),l=t.width(),r=$(document).scrollTop(),c=$(document).scrollLeft();0==n&&(n=$(document).width()),0==i&&(i=$(document).width()),o<l&&(o=n),r+=(a-s)/2,c+=(o-l)/2,r<10&&(r=10),c<10&&(c=10),t.css("top",r),t.css("left",c),t.parent().prev(".bg").height("100%"),t.parent().prev(".bg").width("100%")})),i(this,"modifyTime",((t,e)=>{try{const i=this;let n={ctl:"media",cmd:"realLastTimeSave"};$.extend(n,t),new a(i._const,n,{wapi:"user/ws",spinner:!1}).ajaxformdata((function(t){0==t.code?"function"==typeof e&&e():toast("수정 시간 기록 실패")}))}catch(i){console.error(i.message)}})),i(this,"lastModifyTime",(t=>{try{let e=__FILE_DOMIN+"/"+self._const.__GROUP_ID+"/realTimeCheck.txt";$.ajax({url:e+(/\?/.test(e)?"&":"?")+(new Date).getTime(),method:"GET",success:function(e,i,n){let a=JSON.parse(e);"function"==typeof t&&t(a)},error:function(t,e,i){},complete:function(){}})}catch(e){console.error(e.message)}})),this._const=t||{},this._data=e||{},this._param=o||{},this._options={},this._utils=new n,this._ajax=new a,this._employee={},this._scanner=!1}}class l{constructor(t,a,o){i(this,"init",(()=>{const t=this;switch(__ROUTE_PATH){case"inout":t._inoutLogin=new e(t._const,t._data,t._param),t._inoutLogin.init();break;case"inout/dashboard":t._inoutDashboard=new s(t._const,t._data,t._param),t._inoutDashboard.init()}})),this._const=t||{},this._data=a||{},this._param=o||{},this._options={},this._utils=new n}}window.addEventListener("orientationchange",(function(){setTimeout((function(){}),200)})),$((function(){const e={__ENVIRONMENT:"live",__URL_API:"https://api.dev.kprintfactory.com",__URL_AS3:"/assets/",__ISENCPARAM:!1,__ISDEBUGDATA:!1};let i,n;if(i=void 0!==t?t:self.exportGlobalModule={},__GLOBALINFO){let t=o.decrypt(__GLOBALINFO,"580v0xb7jtervnxjf3aki2i9hgzozg4g");if(t.islogin){let i=t.sessionInfo;$.extend(e,{__USER_ID:i.eSeq,__USER_NAME:i.eNm,__USER_TEL:i.eTel,__USER_LEVEL:i.authLevel,__GROUP_ID:i.cSeq,__ACCESSTOKEN:i.AccessToken,__ENCKEY:i.AuthKey,__MANAGER_YN:i.managerYn,__C_NM:i.cNm,__C_TEL:i.cTel,__C_ADDRESS:i.cAddr+" "+i.cAddrDetail})}}else $.extend(e,{__AUTH_API:"public",__ENCKEY:"580v0xb7jtervnxjf3aki2i9hgzozg4g"});n=__SEND_PARAMS?JSON.parse(__SEND_PARAMS):{};const a=new l(e,__SEND_PARAMS,n);a.init(),i.onControllerAction=function(t,e,i,n){return a.onControllerAction(t,e,i,n)}}))}},function(){return l||(0,s[e(s)[0]])((l={exports:{}}).exports,l),l.exports});export default r();
